<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Activiti 5.13 User Guide</title><link href="style.css" rel="stylesheet" type="text/css">
				<script type="text/javascript" src="prettify.js"></script><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"></head><body onload="prettyPrint()" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" title="Activiti 5.13 User Guide"><div class="titlepage"><div><div><h1 class="title"><a name="N10001"></a>Activiti 5.13 User Guide</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#N10007">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#license">License</a></span></dt><dt><span class="section"><a href="#download">Download</a></span></dt><dt><span class="section"><a href="#sources">Sources</a></span></dt><dt><span class="section"><a href="#required.software">Required software</a></span></dt><dd><dl><dt><span class="section"><a href="#N1002A">JDK 6+</a></span></dt><dt><span class="section"><a href="#N10036">Eclipse Indigo and Juno</a></span></dt></dl></dd><dt><span class="section"><a href="#reporting.problems">Reporting problems</a></span></dt><dt><span class="section"><a href="#experimental">Experimental features</a></span></dt><dt><span class="section"><a href="#internal">Internal implementation classes</a></span></dt></dl></dd><dt><span class="chapter"><a href="#N1007D">2. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#demo.setup.one.minute.version">One minute version</a></span></dt><dt><span class="section"><a href="#activiti.setup">Activiti setup</a></span></dt><dt><span class="section"><a href="#activiti.setup.database">Activiti database setup</a></span></dt><dt><span class="section"><a href="#getting.started.including.libs">Include the Activiti jar and its dependencies</a></span></dt><dt><span class="section"><a href="#getting.started.next.steps">Next steps</a></span></dt></dl></dd><dt><span class="chapter"><a href="#N1015A">3. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#configuration">Creating a ProcessEngine</a></span></dt><dt><span class="section"><a href="#configurationRoot">ProcessEngineConfiguration bean</a></span></dt><dt><span class="section"><a href="#databaseConfiguration">Database configuration</a></span></dt><dt><span class="section"><a href="#supporteddatabases">Supported databases</a></span></dt><dt><span class="section"><a href="#creatingDatabaseTable">Creating the database tables</a></span></dt><dt><span class="section"><a href="#database.tables.explained">Database table names explained</a></span></dt><dt><span class="section"><a href="#databaseUpgrade">Database upgrade</a></span></dt><dt><span class="section"><a href="#jobExecutorConfiguration">Job executor activation</a></span></dt><dt><span class="section"><a href="#mailServerConfiguration">Mail server configuration</a></span></dt><dt><span class="section"><a href="#historyConfiguration">History configuration</a></span></dt><dt><span class="section"><a href="#exposingConfigurationBeans">Exposing configuration beans in expressions and scripts</a></span></dt><dt><span class="section"><a href="#processDefinitionCacheConfiguration">Deployment cache configuration</a></span></dt><dt><span class="section"><a href="#loggingConfiguration">Logging</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapterApi">4. The Activiti API</a></span></dt><dd><dl><dt><span class="section"><a href="#apiEngine">The Process Engine API and services</a></span></dt><dt><span class="section"><a href="#N1048E">Exception strategy</a></span></dt><dt><span class="section"><a href="#api.services">Working with the Activiti services</a></span></dt><dd><dl><dt><span class="section"><a href="#api.services.deployment">Deploying the process</a></span></dt><dt><span class="section"><a href="#api.services.start.processinstance">Starting a process instance</a></span></dt><dt><span class="section"><a href="#api.services.tasls">Completing tasks</a></span></dt><dt><span class="section"><a href="#api.services.suspend">Suspending and activating a process</a></span></dt><dt><span class="section"><a href="#api.services">Further reading</a></span></dt></dl></dd><dt><span class="section"><a href="#queryAPI">Query API</a></span></dt><dt><span class="section"><a href="#apiExpressions">Expressions</a></span></dt><dt><span class="section"><a href="#apiUnitTesting">Unit testing</a></span></dt><dt><span class="section"><a href="#apiDebuggingUnitTest">Debugging unit tests</a></span></dt><dt><span class="section"><a href="#apiProcessEngineInWebApp">The process engine in a web application</a></span></dt></dl></dd><dt><span class="chapter"><a href="#springintegration">5. Spring integration</a></span></dt><dd><dl><dt><span class="section"><a href="#N10689">ProcessEngineFactoryBean</a></span></dt><dt><span class="section"><a href="#N106A1">Transactions</a></span></dt><dt><span class="section"><a href="#springExpressions">Expressions</a></span></dt><dt><span class="section"><a href="#N10700">Automatic resource deployment</a></span></dt><dt><span class="section"><a href="#springUnitTest">Unit testing</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chDeployment">6. Deployment</a></span></dt><dd><dl><dt><span class="section"><a href="#N10724">Business archives</a></span></dt><dd><dl><dt><span class="section"><a href="#N10738">Deploying programmatically</a></span></dt><dt><span class="section"><a href="#deploymentWithExplorer">Deploying with Activiti Explorer</a></span></dt></dl></dd><dt><span class="section"><a href="#N1075C">External resources</a></span></dt><dd><dl><dt><span class="section"><a href="#N10761">Java classes</a></span></dt><dt><span class="section"><a href="#N1076D">Using Spring beans from a process</a></span></dt><dt><span class="section"><a href="#N1077F">Creating a single app</a></span></dt></dl></dd><dt><span class="section"><a href="#versioningOfProcessDefinitions">Versioning of process definitions</a></span></dt><dt><span class="section"><a href="#providingProcessDiagram">Providing a process diagram</a></span></dt><dt><span class="section"><a href="#generatingProcessDiagram">Generating a process diagram</a></span></dt><dt><span class="section"><a href="#deploymentCategory">Category</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bpmn20">7. BPMN 2.0 Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#whatIsBpmn">What is BPMN?</a></span></dt><dt><span class="section"><a href="#bpmnDefiningProcess">Defining a process</a></span></dt><dt><span class="section"><a href="#10minutetutorial">Getting started: 10 minute tutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmn10MinuteTutorialPrerequisites">Prerequisites</a></span></dt><dt><span class="section"><a href="#bpmn10MinuteTutorialGoal">Goal</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleUseCase">Use case</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleDiagram">Process diagram</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleXml">XML representation</a></span></dt><dt><span class="section"><a href="#bpmnFirstExamplStartProcess">Starting a process instance</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleCandidateList">Task lists</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleClaimTask">Claiming the task</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleCompleteTask">Completing the task</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleEndingProcess">Ending the process</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleCode">Code overview</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleFutureEnhancements">Future enhancements</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#bpmnConstructs">8. BPMN 2.0 Constructs</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnCustomExtensions">Custom extensions</a></span></dt><dt><span class="section"><a href="#bpmnEvents">Events</a></span></dt><dd><dl><dt><span class="section"><a href="#eventDefinitions">Event Definitions</a></span></dt><dt><span class="section"><a href="#timerEventDefinitions">Timer Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnErrorEventDefinition">Error Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnSignalEventDefinition">Signal Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnMessageEventDefinition">Message Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnStartEvents">Start Events</a></span></dt><dt><span class="section"><a href="#bpmnNoneStartEvent">None Start Event</a></span></dt><dt><span class="section"><a href="#bpmnTimerStartEvent">Timer Start Event</a></span></dt><dt><span class="section"><a href="#bpmnMessageStartEvent">Message Start Event</a></span></dt><dt><span class="section"><a href="#bpmnErrorStartEvent">Error Start Event</a></span></dt><dt><span class="section"><a href="#bpmnEndEvent">End Events</a></span></dt><dt><span class="section"><a href="#bpmnNoneEndEvent">None End Event</a></span></dt><dt><span class="section"><a href="#bpmnErrorEndEvent">Error End Event</a></span></dt><dt><span class="section"><a href="#bpmnCancelEndEvent">Cancel End Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryEvent">Boundary Events</a></span></dt><dt><span class="section"><a href="#bpmnTimerBoundaryEvent">Timer Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryErrorEvent">Error Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundarySignalEvent">Signal Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryMessageEvent">Message Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryCancelEvent">Cancel Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryCompensationEvent">Compensation Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateCatchingEvent">Intermediate Catching Events</a></span></dt><dt><span class="section"><a href="#bpmnTimerIntermediateEvent">Timer Intermediate Catching Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateSignalEvent">Signal Intermediate Catching Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateMessageEvent">Message Intermediate Catching Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowEvent">Intermediate Throwing Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowNoneEvent">Intermediate Throwing None Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowSignalEvent">Signal Intermediate Throwing Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowCompensationEvent">Compensation Intermediate Throwing Event</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnSequenceFlow">Sequence Flow</a></span></dt><dd><dl><dt><span class="section"><a href="#sequenceFlowDescription">Description</a></span></dt><dt><span class="section"><a href="#sequenceFlowGraphicalNotation">Graphical notation</a></span></dt><dt><span class="section"><a href="#sequenceFlowXml">XML representation</a></span></dt><dt><span class="section"><a href="#bpmnConditionalSequenceFlow">Conditional sequence flow</a></span></dt><dt><span class="section"><a href="#bpmnDefaultSequenceFlow">Default sequence flow</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnGateways">Gateways</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnExclusiveGateway">Exclusive Gateway</a></span></dt><dt><span class="section"><a href="#bpmnParallelGateway">Parallel Gateway</a></span></dt><dt><span class="section"><a href="#bpmnInclusiveGateway">Inclusive Gateway</a></span></dt><dt><span class="section"><a href="#bpmnEventbasedGateway">Event-based Gateway</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnTask">Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnUserTask">User Task</a></span></dt><dt><span class="section"><a href="#bpmnScriptTask">Script Task</a></span></dt><dt><span class="section"><a href="#bpmnJavaServiceTask">Java Service Task</a></span></dt><dt><span class="section"><a href="#bpmnWebserviceTask">Web Service Task</a></span></dt><dt><span class="section"><a href="#bpmnBusinessRuleTask">Business Rule Task</a></span></dt><dt><span class="section"><a href="#bpmnEmailTask">Email Task</a></span></dt><dt><span class="section"><a href="#bpmnMuleTask">Mule Task</a></span></dt><dt><span class="section"><a href="#bpmnCamelTask">Camel Task</a></span></dt><dt><span class="section"><a href="#bpmnManualTask">Manual Task</a></span></dt><dt><span class="section"><a href="#bpmnReceiveTask">Java Receive Task</a></span></dt><dt><span class="section"><a href="#bpmnShellTask">Shell Task</a></span></dt><dt><span class="section"><a href="#executionListeners">Execution listener</a></span></dt><dt><span class="section"><a href="#taskListeners">Task listener</a></span></dt><dt><span class="section"><a href="#bpmnMultiInstance">Multi-instance (for each)</a></span></dt><dt><span class="section"><a href="#bpmnCompensationHandlers">Compensation Handlers</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnSubprocessAndCallActivity">Sub-Processes and Call Activities</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnSubProcess">Sub-Process</a></span></dt><dt><span class="section"><a href="#bpmnEventSubprocess">Event Sub-Process</a></span></dt><dt><span class="section"><a href="#bpmnTransactionSubprocess">Transaction subprocess</a></span></dt><dt><span class="section"><a href="#bpmnCallActivity">Call activity (subprocess)</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnConcurrencyAndTransactions">Transactions and Concurrency</a></span></dt><dd><dl><dt><span class="section"><a href="#asyncContinuations">Asynchronous Continuations</a></span></dt><dt><span class="section"><a href="#exclusiveJobs">Exclusive Jobs</a></span></dt></dl></dd><dt><span class="section"><a href="#security">Process Initiation Authorization</a></span></dt></dl></dd><dt><span class="chapter"><a href="#forms">9. Forms</a></span></dt><dd><dl><dt><span class="section"><a href="#formProperties">Form properties</a></span></dt><dt><span class="section"><a href="#externalFormRendering">External form rendering</a></span></dt></dl></dd><dt><span class="chapter"><a href="#N12127">10. JPA</a></span></dt><dd><dl><dt><span class="section"><a href="#N1213A">Requirements</a></span></dt><dt><span class="section"><a href="#jpaconfiguration">Configuration</a></span></dt><dt><span class="section"><a href="#N121CA">Usage</a></span></dt><dd><dl><dt><span class="section"><a href="#N121CD">Simple Example</a></span></dt><dt><span class="section"><a href="#N12214">Query JPA process variables</a></span></dt><dt><span class="section"><a href="#N12240">Advanced example using Spring beans and JPA</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#history">11. History</a></span></dt><dd><dl><dt><span class="section"><a href="#historyQuery">Querying history</a></span></dt><dd><dl><dt><span class="section"><a href="#historyQueryProcessInstance">HistoricProcessInstanceQuery</a></span></dt><dt><span class="section"><a href="#historyQueryVariableInstance">HistoricVariableInstanceQuery</a></span></dt><dt><span class="section"><a href="#historyQueryActivityInstance">HistoricActivityInstanceQuery</a></span></dt><dt><span class="section"><a href="#historyQueryDetail">HistoricDetailQuery</a></span></dt><dt><span class="section"><a href="#historyQueryTaskInstance">HistoricTaskInstanceQuery</a></span></dt></dl></dd><dt><span class="section"><a href="#historyConfig">History configuration</a></span></dt><dt><span class="section"><a href="#historyFormAuditPurposes">History for audit purposes</a></span></dt></dl></dd><dt><span class="chapter"><a href="#activitiDesigner">12. Eclipse Designer</a></span></dt><dd><dl><dt><span class="section"><a href="#eclipseDesignerInstallation">Installation</a></span></dt><dt><span class="section"><a href="#eclipseDesignerEditorFeatures">Activiti Designer editor features</a></span></dt><dt><span class="section"><a href="#eclipseDesignerBPMNFeatures">Activiti Designer BPMN features</a></span></dt><dt><span class="section"><a href="#eclipseDesignerDeployment">Activiti Designer deployment features</a></span></dt><dt><span class="section"><a href="#eclipseDesignerExtending">Extending Activiti Designer</a></span></dt><dd><dl><dt><span class="section"><a href="#eclipseDesignerCustomizingPalette">Customizing the palette</a></span></dt><dt><span class="section"><a href="#N12803">Validating diagrams and exporting to custom output formats</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#activitiExplorer">13. Activiti Explorer</a></span></dt><dd><dl><dt><span class="section"><a href="#N12931">Process diagram</a></span></dt><dt><span class="section"><a href="#N1294D">Tasks</a></span></dt><dt><span class="section"><a href="#N1297D">Start process instances</a></span></dt><dt><span class="section"><a href="#N12990">My instances</a></span></dt><dt><span class="section"><a href="#N1299F">Administration</a></span></dt><dt><span class="section"><a href="#explorer.reporting">Reporting</a></span></dt><dd><dl><dt><span class="section"><a href="#explorer.reporting.json">Report data JSON</a></span></dt><dt><span class="section"><a href="#explorer.reporting.example">Example process</a></span></dt><dt><span class="section"><a href="#explorer.reporting.start.form">Report start forms</a></span></dt><dt><span class="section"><a href="#explorer.reporting.examples">Example processes</a></span></dt></dl></dd><dt><span class="section"><a href="#explorer.change.database">Changing the database</a></span></dt></dl></dd><dt><span class="chapter"><a href="#activitiModeler">14. Activiti Modeler</a></span></dt><dd><dl><dt><span class="section"><a href="#N12B04">Model editing</a></span></dt><dt><span class="section"><a href="#N12B0F">Importing existing models</a></span></dt><dt><span class="section"><a href="#N12B1A">Convert deployed definitions to a editeable model</a></span></dt><dt><span class="section"><a href="#N12B25">Export model to BPMN XML</a></span></dt><dt><span class="section"><a href="#N12B30">Deploy model to the Activiti Engine</a></span></dt></dl></dd><dt><span class="chapter"><a href="#N12B3B">15. REST API</a></span></dt><dd><dl><dt><span class="section"><a href="#N12B3E">General Activiti REST principles</a></span></dt><dd><dl><dt><span class="section"><a href="#N12B41">Installation and Authentication</a></span></dt><dt><span class="section"><a href="#restUsageInTomcat">Usage in Tomcat</a></span></dt><dt><span class="section"><a href="#N12B8D">Methods and return-codes</a></span></dt><dt><span class="section"><a href="#N12C10">Error response body</a></span></dt><dt><span class="section"><a href="#N12C17">Request parameters</a></span></dt></dl></dd><dt><span class="section"><a href="#N12E3E">Deployment</a></span></dt><dd><dl><dt><span class="section"><a href="#N12E49">List of Deployments</a></span></dt><dt><span class="section"><a href="#N12EC0">Get a deployment</a></span></dt><dt><span class="section"><a href="#N12F06">Create a new deployment</a></span></dt><dt><span class="section"><a href="#N12F41">Delete a deployment</a></span></dt><dt><span class="section"><a href="#N12F7E">List resources in a deployment</a></span></dt><dt><span class="section"><a href="#N12FE8">Get a deployment resource</a></span></dt><dt><span class="section"><a href="#N13059">Get a deployment resource content</a></span></dt></dl></dd><dt><span class="section"><a href="#N130AA">Process Definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#N130AD">List of process definitions</a></span></dt><dt><span class="section"><a href="#N13192">Get a process definition</a></span></dt><dt><span class="section"><a href="#N131E9">Update category for a process definition</a></span></dt><dt><span class="section"><a href="#N13221">Get a process definition resource content</a></span></dt><dt><span class="section"><a href="#N13250">Get a process definition BPMN model</a></span></dt><dt><span class="section"><a href="#N1329B">Suspend a process definition</a></span></dt><dt><span class="section"><a href="#N132FE">Activate a process definition</a></span></dt><dt><span class="section"><a href="#N1333A">Get all candidate starters for a process-definition</a></span></dt><dt><span class="section"><a href="#N13380">Add a candidate starter to a process definition</a></span></dt><dt><span class="section"><a href="#N133D8">Delete a candidate starter from a process definition</a></span></dt><dt><span class="section"><a href="#N13436">Get a candidate starter from a process definition</a></span></dt></dl></dd><dt><span class="section"><a href="#N13494">Models</a></span></dt><dd><dl><dt><span class="section"><a href="#N13497">Get a list of models</a></span></dt><dt><span class="section"><a href="#N1355F">Get a model</a></span></dt><dt><span class="section"><a href="#N135A5">Update a model</a></span></dt><dt><span class="section"><a href="#N135DB">Create a model</a></span></dt><dt><span class="section"><a href="#N13609">Delete a model</a></span></dt><dt><span class="section"><a href="#N13646">Get the editor source for a model</a></span></dt><dt><span class="section"><a href="#N1368C">Set the editor source for a model</a></span></dt><dt><span class="section"><a href="#N136DB">Get the extra editor source for a model</a></span></dt><dt><span class="section"><a href="#N13721">Set the extra editor source for a model</a></span></dt></dl></dd><dt><span class="section"><a href="#N13770">Process Instances</a></span></dt><dd><dl><dt><span class="section"><a href="#N13773">Get a process instance</a></span></dt><dt><span class="section"><a href="#N137B9">Delete a process instance</a></span></dt><dt><span class="section"><a href="#N137F6">Activate or suspend a process instance</a></span></dt><dt><span class="section"><a href="#N1384F">Start a process instance</a></span></dt><dt><span class="section"><a href="#restProcessInstancesGet">List of process instances</a></span></dt><dt><span class="section"><a href="#N13966">Query process instances</a></span></dt><dt><span class="section"><a href="#N139A7">Get diagram for a process instance</a></span></dt><dt><span class="section"><a href="#N139F2">Get involved people for process instance</a></span></dt><dt><span class="section"><a href="#N13A3B">Add an involved user to a process instance</a></span></dt><dt><span class="section"><a href="#N13A98">Remove an involved user to from process instance</a></span></dt><dt><span class="section"><a href="#N13AF3">List of variables for a process instance</a></span></dt><dt><span class="section"><a href="#N13B42">Get a variable for a process instance</a></span></dt><dt><span class="section"><a href="#N13B9F">Create (or update) variables on a process instance</a></span></dt><dt><span class="section"><a href="#N13C08">Update a single variable on a process instance</a></span></dt><dt><span class="section"><a href="#N13C70">Create a new binary variable on a process-instance</a></span></dt><dt><span class="section"><a href="#N13CDB">Update an existing binary variable on a process-instance</a></span></dt></dl></dd><dt><span class="section"><a href="#N13D41">Executions</a></span></dt><dd><dl><dt><span class="section"><a href="#N13D44">Get an execution</a></span></dt><dt><span class="section"><a href="#N13D8A">Execute an action on an execution</a></span></dt><dt><span class="section"><a href="#N13E01">Get active activities in an execution</a></span></dt><dt><span class="section"><a href="#restExecutionsGet">List of executions</a></span></dt><dt><span class="section"><a href="#N13EE2">Query executions</a></span></dt><dt><span class="section"><a href="#N13F29">List of variables for an execution</a></span></dt><dt><span class="section"><a href="#N13F81">Get a variable for an execution</a></span></dt><dt><span class="section"><a href="#N13FE7">Create (or update) variables on an execution</a></span></dt><dt><span class="section"><a href="#N14054">Update a variable on an execution</a></span></dt><dt><span class="section"><a href="#N140B3">Create a new binary variable on an execution</a></span></dt><dt><span class="section"><a href="#N14126">Update an existing binary variable on a process-instance</a></span></dt></dl></dd><dt><span class="section"><a href="#N1419D">Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#N141A0">Get a task</a></span></dt><dt><span class="section"><a href="#restTasksGet">List of tasks</a></span></dt><dt><span class="section"><a href="#N14345">Query for tasks</a></span></dt><dt><span class="section"><a href="#N14388">Update a task</a></span></dt><dt><span class="section"><a href="#N143C3">Task actions</a></span></dt><dt><span class="section"><a href="#N14428">Delete a task</a></span></dt><dt><span class="section"><a href="#N1447F">Get all variables for a task</a></span></dt><dt><span class="section"><a href="#N144D8">Get a variable from a task</a></span></dt><dt><span class="section"><a href="#N1453A">Get the binary data for a variable</a></span></dt><dt><span class="section"><a href="#N145AA">Create new variables on a task</a></span></dt><dt><span class="section"><a href="#N14621">Create a new binary variable on a task</a></span></dt><dt><span class="section"><a href="#N14697">Update an existing variable on a task</a></span></dt><dt><span class="section"><a href="#N14712">Updating a binary variable on a task</a></span></dt><dt><span class="section"><a href="#N1478C">Delete a variable on a task</a></span></dt><dt><span class="section"><a href="#N147E4">Delete all local variables on a task</a></span></dt><dt><span class="section"><a href="#N14821">Get all identity links for a task</a></span></dt><dt><span class="section"><a href="#N14867">Get all identitylinks for a task for either groups or users</a></span></dt><dt><span class="section"><a href="#N14871">Get a single identity link on a task</a></span></dt><dt><span class="section"><a href="#N148D8">Create an identity link on a task</a></span></dt><dt><span class="section"><a href="#N14930">Delete an identity link on a task</a></span></dt><dt><span class="section"><a href="#N1498E">Create a new comment on a task</a></span></dt><dt><span class="section"><a href="#N149E0">Get all comments on a task</a></span></dt><dt><span class="section"><a href="#N14A24">Get a comment on a task</a></span></dt><dt><span class="section"><a href="#N14A71">Delete a comment on a task</a></span></dt><dt><span class="section"><a href="#N14AB4">Get all events for a task</a></span></dt><dt><span class="section"><a href="#N14AF8">Get an event on a task</a></span></dt><dt><span class="section"><a href="#N14B45">Create a new attachment on a task, containing a link to an external resource</a></span></dt><dt><span class="section"><a href="#N14B97">Create a new attachment on a task, with an attached file</a></span></dt><dt><span class="section"><a href="#N14BFA">Get all attachments on a task</a></span></dt><dt><span class="section"><a href="#N14C3E">Get an attachment on a task</a></span></dt><dt><span class="section"><a href="#N14CA1">Get the content for an attachment</a></span></dt><dt><span class="section"><a href="#N14CF3">Delete an attachment on a task</a></span></dt></dl></dd><dt><span class="section"><a href="#N14D36">History</a></span></dt><dd><dl><dt><span class="section"><a href="#N14D39">Get a historic process instance</a></span></dt><dt><span class="section"><a href="#restHistoricProcessInstancesGet">List of historic process instances</a></span></dt><dt><span class="section"><a href="#N14E29">Query for historic process instances</a></span></dt><dt><span class="section"><a href="#N14E69">Delete a historic process instance</a></span></dt><dt><span class="section"><a href="#N14E8A">Get the identity links of a historic process instance</a></span></dt><dt><span class="section"><a href="#N14EB4">Get the binary data for a historic process instance variable</a></span></dt><dt><span class="section"><a href="#N14EE7">Get a single historic task instance</a></span></dt><dt><span class="section"><a href="#restHistoricTaskInstancesGet">Get historic task instances</a></span></dt><dt><span class="section"><a href="#N1505E">Query for historic task instances</a></span></dt><dt><span class="section"><a href="#N150A1">Delete a historic task instance</a></span></dt><dt><span class="section"><a href="#N150C2">Get the identity links of a historic task instance</a></span></dt><dt><span class="section"><a href="#N150EC">Get the binary data for a historic task instance variable</a></span></dt><dt><span class="section"><a href="#restHistoricActivityInstancesGet">Get historic activity instances</a></span></dt><dt><span class="section"><a href="#N151B8">Query for historic activity instances</a></span></dt><dt><span class="section"><a href="#restHistoricVariableInstancesGet">List of historic variable instances</a></span></dt><dt><span class="section"><a href="#N15266">Query for historic variable instances</a></span></dt><dt><span class="section"><a href="#N152A6">Get the binary data for a historic task instance variable</a></span></dt><dt><span class="section"><a href="#restHistoricDetailGet">Get historic detail</a></span></dt><dt><span class="section"><a href="#N15360">Query for historic details</a></span></dt><dt><span class="section"><a href="#N15399">Get the binary data for a historic detail variable</a></span></dt></dl></dd><dt><span class="section"><a href="#N153CC">Forms</a></span></dt><dd><dl><dt><span class="section"><a href="#N153CF">Get form data</a></span></dt><dt><span class="section"><a href="#N1541E">Submit task form data</a></span></dt></dl></dd><dt><span class="section"><a href="#N1545A">Database tables</a></span></dt><dd><dl><dt><span class="section"><a href="#N1545D">List of tables</a></span></dt><dt><span class="section"><a href="#N15482">Get a single table</a></span></dt><dt><span class="section"><a href="#N154C6">Get column info for a single table</a></span></dt><dt><span class="section"><a href="#N1550A">Get row data for a single table</a></span></dt></dl></dd><dt><span class="section"><a href="#N15588">Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#N1558B">Get engine properties</a></span></dt><dt><span class="section"><a href="#N155B0">Get engine info</a></span></dt></dl></dd><dt><span class="section"><a href="#N155D5">Jobs</a></span></dt><dd><dl><dt><span class="section"><a href="#N155D8">Get a single job</a></span></dt><dt><span class="section"><a href="#N1561C">Delete a job</a></span></dt><dt><span class="section"><a href="#N15659">Execute a single job</a></span></dt><dt><span class="section"><a href="#N156A1">Get the exception stacktrace for a job</a></span></dt><dt><span class="section"><a href="#N156DD">Get a list of jobs</a></span></dt></dl></dd><dt><span class="section"><a href="#N157A4">Users</a></span></dt><dd><dl><dt><span class="section"><a href="#N157A7">Get a single user</a></span></dt><dt><span class="section"><a href="#N157EB">Get a list of users</a></span></dt><dt><span class="section"><a href="#N15884">Update a user</a></span></dt><dt><span class="section"><a href="#N158BF">Create a user</a></span></dt><dt><span class="section"><a href="#N158F2">Delete a user</a></span></dt><dt><span class="section"><a href="#N1592F">Get a user's picture</a></span></dt><dt><span class="section"><a href="#N15970">Updating a user's picture</a></span></dt><dt><span class="section"><a href="#N159C0">List a user's info</a></span></dt><dt><span class="section"><a href="#N15A04">Get a user's info</a></span></dt><dt><span class="section"><a href="#N15A51">Update a user's info</a></span></dt><dt><span class="section"><a href="#N15AAC">Create a new user's info entry</a></span></dt><dt><span class="section"><a href="#N15B06">Delete a user's info</a></span></dt></dl></dd><dt><span class="section"><a href="#N15B4C">Groups</a></span></dt><dd><dl><dt><span class="section"><a href="#N15B4F">Get a single group</a></span></dt><dt><span class="section"><a href="#N15B93">Get a list of groups</a></span></dt><dt><span class="section"><a href="#N15C0E">Update a group</a></span></dt><dt><span class="section"><a href="#N15C46">Create a group</a></span></dt><dt><span class="section"><a href="#N15C79">Delete a group</a></span></dt><dt><span class="section"><a href="#N15CB6">Get members in a group</a></span></dt><dt><span class="section"><a href="#N15CC1">Add a member to a group</a></span></dt><dt><span class="section"><a href="#N15D1A">Delete a member from a group</a></span></dt></dl></dd><dt><span class="section"><a href="#N15D6A">Legacy REST - General Usage</a></span></dt><dt><span class="section"><a href="#N15D82">Repository</a></span></dt><dd><dl><dt><span class="section"><a href="#N15D86">Upload Deployment</a></span></dt><dt><span class="section"><a href="#N15DAA">Get Deployments</a></span></dt><dt><span class="section"><a href="#N15DCE">Get Deployment Resources</a></span></dt><dt><span class="section"><a href="#N15DF2">Get Deployment Resource</a></span></dt><dt><span class="section"><a href="#N15E16">Delete Deployment</a></span></dt><dt><span class="section"><a href="#N15E3A">Delete Deployments</a></span></dt></dl></dd><dt><span class="section"><a href="#N15E62">Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#N15E65">Get Process Engine</a></span></dt></dl></dd><dt><span class="section"><a href="#N15E8A">Processes</a></span></dt><dd><dl><dt><span class="section"><a href="#N15E8D">List Process Definitions</a></span></dt><dt><span class="section"><a href="#N15EB1">Get Process Definition Form Properties</a></span></dt><dt><span class="section"><a href="#N15ED5">Get Process Definition Form Resource</a></span></dt><dt><span class="section"><a href="#N15EF9">Get Process Definition Diagram</a></span></dt><dt><span class="section"><a href="#N15F1D">Start Process Instance</a></span></dt><dt><span class="section"><a href="#N15F44">List Process Instances</a></span></dt><dt><span class="section"><a href="#N15F68">Get Process Instance Details</a></span></dt><dt><span class="section"><a href="#N15F8C">Get Process Instance Diagram</a></span></dt><dt><span class="section"><a href="#N15FB0">Get open tasks for a process instance</a></span></dt><dt><span class="section"><a href="#N15FD4">Signal an activity (receive task) for a specific process instance</a></span></dt><dt><span class="section"><a href="#N15FFB">Trigger a signal for a specific process instance</a></span></dt></dl></dd><dt><span class="section"><a href="#N16023">Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#N16026">Get Task Summary</a></span></dt><dt><span class="section"><a href="#N1604A">List Tasks</a></span></dt><dt><span class="section"><a href="#N16078">Get Task</a></span></dt><dt><span class="section"><a href="#N1609C">Get Task Form</a></span></dt><dt><span class="section"><a href="#N160C0">Perform Task Operation</a></span></dt><dt><span class="section"><a href="#N160E8">List Form Properties</a></span></dt><dt><span class="section"><a href="#N1610C">Add attachment to a task</a></span></dt><dt><span class="section"><a href="#N16131">Get task attachment</a></span></dt><dt><span class="section"><a href="#N16155">Add url to a task</a></span></dt></dl></dd><dt><span class="section"><a href="#N1617B">Identity</a></span></dt><dd><dl><dt><span class="section"><a href="#N1617E">Login</a></span></dt><dt><span class="section"><a href="#N161A5">Get User</a></span></dt><dt><span class="section"><a href="#N161C9">List User's Groups</a></span></dt><dt><span class="section"><a href="#N161EB">Search users</a></span></dt><dt><span class="section"><a href="#N16210">Create user</a></span></dt><dt><span class="section"><a href="#N1623A">Add user to groups</a></span></dt><dt><span class="section"><a href="#N16261">Remove user from group</a></span></dt><dt><span class="section"><a href="#N16285">Get user picture</a></span></dt><dt><span class="section"><a href="#N162A9">Get Group</a></span></dt><dt><span class="section"><a href="#N162CD">List Group Users</a></span></dt><dt><span class="section"><a href="#N162EF">Search groups</a></span></dt><dt><span class="section"><a href="#N16311">Create group</a></span></dt><dt><span class="section"><a href="#N1633B">Add users to a group</a></span></dt><dt><span class="section"><a href="#N16362">Remove user from group</a></span></dt></dl></dd><dt><span class="section"><a href="#N16387">Management</a></span></dt><dd><dl><dt><span class="section"><a href="#N1638A">List Jobs</a></span></dt><dt><span class="section"><a href="#N163AE">Get Job</a></span></dt><dt><span class="section"><a href="#N163D2">Execute Job</a></span></dt><dt><span class="section"><a href="#N163F6">Execute Jobs</a></span></dt><dt><span class="section"><a href="#N1641D">List Database Tables</a></span></dt><dt><span class="section"><a href="#N16441">Get Table Meta Data</a></span></dt><dt><span class="section"><a href="#N16463">Get Table Data</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#cdiintegration">16. CDI integration</a></span></dt><dd><dl><dt><span class="section"><a href="#N164A3">Setting up activiti-cdi</a></span></dt><dd><dl><dt><span class="section"><a href="#N164A8">Looking up a Process Engine</a></span></dt><dt><span class="section"><a href="#N164CC">Configuring the Process Engine</a></span></dt><dt><span class="section"><a href="#N164EA">Deploying Processes</a></span></dt></dl></dd><dt><span class="section"><a href="#N164F8">Contextual Process Execution with CDI</a></span></dt><dd><dl><dt><span class="section"><a href="#N164FD">Associating a Conversation with a Process Instance </a></span></dt><dt><span class="section"><a href="#N16528">Declaratively controlling the Process</a></span></dt><dt><span class="section"><a href="#N1653F">Referencing Beans from the Process</a></span></dt><dt><span class="section"><a href="#N16553">Working with @BusinessProcessScoped beans</a></span></dt><dt><span class="section"><a href="#N1655D">Injecting Process Variables</a></span></dt><dt><span class="section"><a href="#N1657F">Receiving Process Events</a></span></dt><dt><span class="section"><a href="#N165B7">Additional Features</a></span></dt></dl></dd><dt><span class="section"><a href="#N165CF">Known Limitations</a></span></dt></dl></dd><dt><span class="chapter"><a href="#N165D4">17. LDAP integration</a></span></dt><dd><dl><dt><span class="section"><a href="#ldap_usage">Usage</a></span></dt><dt><span class="section"><a href="#ldap_usecases">Use cases</a></span></dt><dt><span class="section"><a href="#ldap_configuration">Configuration</a></span></dt><dt><span class="section"><a href="#ldap_properties">Properties</a></span></dt><dt><span class="section"><a href="#lda-explorer">Integrate LDAP in Explorer</a></span></dt></dl></dd><dt><span class="chapter"><a href="#N1671B">18. Advanced</a></span></dt><dd><dl><dt><span class="section"><a href="#advanced_parseHandlers">Hooking into process parsing</a></span></dt><dt><span class="section"><a href="#advanced.uuid.generator">UUID id generator for high concurrency</a></span></dt><dt><span class="section"><a href="#advanced.safe.bpmn.xml">Enable safe BPMN 2.0 xml</a></span></dt></dl></dd></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>2.1. <a href="#N100BD">The demo users</a></dt><dt>2.2. <a href="#N100E2">The webapp tools</a></dt><dt>3.1. <a href="#databaseTypes">Supported databases</a></dt><dt>6.1. <a href="#N107BF"></a></dt><dt>6.2. <a href="#N107DB"></a></dt><dt>6.3. <a href="#N10809"></a></dt><dt>8.1. <a href="#N118E7">Mail server configuration</a></dt><dt>8.2. <a href="#N11943">Mail server configuration</a></dt><dt>8.3. <a href="#N119C7">Mule server configuration</a></dt><dt>8.4. <a href="#N11AAF">Shell task parameter configuration</a></dt><dt>15.1. <a href="#N12B90">HTTP-methods and corresponding operations</a></dt><dt>15.2. <a href="#N12BB4">HTTP-methods response codes</a></dt><dt>15.3. <a href="#N12C2E">URL query parameter types</a></dt><dt>15.4. <a href="#N12C73">JSON parameter types</a></dt><dt>15.5. <a href="#N12CBB">Variable query JSON parameters</a></dt><dt>15.6. <a href="#N12CEF">Variable query JSON parameters</a></dt><dt>15.7. <a href="#N12D36">Default query JSON types</a></dt><dt>15.8. <a href="#N12D84">Variable JSON attributes</a></dt><dt>15.9. <a href="#N12DD7">Variable Types</a></dt><dt>15.10. <a href="#N12E53">URL query parameters</a></dt><dt>15.11. <a href="#N12EA5">REST Response codes</a></dt><dt>15.12. <a href="#N12ECA">Get a deployment - URL parameters</a></dt><dt>15.13. <a href="#N12EE6">Get a deployment - Response codes</a></dt><dt>15.14. <a href="#N12F21">Create a new deployment - Response codes</a></dt><dt>15.15. <a href="#N12F4B">Delete a deployment - URL parameters</a></dt><dt>15.16. <a href="#N12F67">Delete a deployment - Response codes</a></dt><dt>15.17. <a href="#N12F88">List resources in a deployment - URL parameters</a></dt><dt>15.18. <a href="#N12FA4">List resources in a deployment - Response codes</a></dt><dt>15.19. <a href="#N12FF2">Get a deployment resource - URL parameters</a></dt><dt>15.20. <a href="#N1301A">Get a deployment resource - Response codes</a></dt><dt>15.21. <a href="#N13063">Get a deployment resource content - URL parameters</a></dt><dt>15.22. <a href="#N1308B">Get a deployment resource content - Response codes</a></dt><dt>15.23. <a href="#N130B7">List of process definitions - URL parameters</a></dt><dt>15.24. <a href="#N13161">List of process definitions - Response codes</a></dt><dt>15.25. <a href="#N1319C">Get a process definition - URL parameters</a></dt><dt>15.26. <a href="#N131B8">Get a process definition - Response codes</a></dt><dt>15.27. <a href="#N131FC">Update category for a process definition - Response codes</a></dt><dt>15.28. <a href="#N1322B">Get a process definition resource content - URL parameters</a></dt><dt>15.29. <a href="#N1325A">Get a process definition BPMN model - URL parameters</a></dt><dt>15.30. <a href="#N13276">Get a process definition BPMN model - Response codes</a></dt><dt>15.31. <a href="#processDefinitionActionBodyParameters">Suspend a process definition - JSON Body parameters</a></dt><dt>15.32. <a href="#N132D9">Suspend a process definition - Response codes</a></dt><dt>15.33. <a href="#N13315">Activate a process definition - Response codes</a></dt><dt>15.34. <a href="#N13344">Get all candidate starters for a process-definition - URL parameters</a></dt><dt>15.35. <a href="#N13360">Get all candidate starters for a process-definition - Response codes</a></dt><dt>15.36. <a href="#N1338A">Add a candidate starter to a process definition - URL parameters</a></dt><dt>15.37. <a href="#N133B8">Add a candidate starter to a process definition - Response codes</a></dt><dt>15.38. <a href="#N133E2">Delete a candidate starter from a process definition - URL parameters</a></dt><dt>15.39. <a href="#N13416">Delete a candidate starter from a process definition - Response codes</a></dt><dt>15.40. <a href="#N13440">Get a candidate starter from a process definition - URL parameters</a></dt><dt>15.41. <a href="#N13474">Get a candidate starter from a process definition - Response codes</a></dt><dt>15.42. <a href="#N134A1">Get a list of models - URL query parameters</a></dt><dt>15.43. <a href="#N1353F">Get a list of models - Response codes</a></dt><dt>15.44. <a href="#N13569">Get a model - URL parameters</a></dt><dt>15.45. <a href="#N13585">Get a model - Response codes</a></dt><dt>15.46. <a href="#N135BB">Update a model - Response codes</a></dt><dt>15.47. <a href="#N135EE">Create a model - Response codes</a></dt><dt>15.48. <a href="#N13613">Delete a model - URL parameters</a></dt><dt>15.49. <a href="#N1362F">Delete a model - Response codes</a></dt><dt>15.50. <a href="#N13650">Get the editor source for a model - URL parameters</a></dt><dt>15.51. <a href="#N1366C">Get the editor source for a model - Response codes</a></dt><dt>15.52. <a href="#N13696">Set the editor source for a model - URL parameters</a></dt><dt>15.53. <a href="#N136BB">Set the editor source for a model - Response codes</a></dt><dt>15.54. <a href="#N136E5">Get the extra editor source for a model - URL parameters</a></dt><dt>15.55. <a href="#N13701">Get the extra editor source for a model - Response codes</a></dt><dt>15.56. <a href="#N1372B">Set the extra editor source for a model - URL parameters</a></dt><dt>15.57. <a href="#N13750">Set the extra editor source for a model - Response codes</a></dt><dt>15.58. <a href="#N1377D">Get a process instance - URL parameters</a></dt><dt>15.59. <a href="#N13799">Get a process instance - Response codes</a></dt><dt>15.60. <a href="#N137C3">Delete a process instance - URL parameters</a></dt><dt>15.61. <a href="#N137DF">Delete a process instance - Response codes</a></dt><dt>15.62. <a href="#N13800">Activate or suspend a process instance - URL parameters</a></dt><dt>15.63. <a href="#N1382E">Activate or suspend a process instance - Response codes</a></dt><dt>15.64. <a href="#N1388C">Start a process instance - Response codes</a></dt><dt>15.65. <a href="#N138B7">List of process instances - URL query parameters</a></dt><dt>15.66. <a href="#N13946">List of process instances - Response codes</a></dt><dt>15.67. <a href="#N13987">Query process instances - Response codes</a></dt><dt>15.68. <a href="#N139B1">Get diagram for a process instance - URL parameters</a></dt><dt>15.69. <a href="#N139CD">Get diagram for a process instance - Response codes</a></dt><dt>15.70. <a href="#N139FC">Get involved people for process instance - URL parameters</a></dt><dt>15.71. <a href="#N13A18">Get involved people for process instance - Response codes</a></dt><dt>15.72. <a href="#N13A45">Add an involved user to a process instance - URL parameters</a></dt><dt>15.73. <a href="#N13A70">Add an involved user to a process instance - Response codes</a></dt><dt>15.74. <a href="#N13AA2">Remove an involved user to from process instance - URL parameters</a></dt><dt>15.75. <a href="#N13AD0">Remove an involved user to from process instance - Response codes</a></dt><dt>15.76. <a href="#N13AFD">List of variables for a process instance - URL parameters</a></dt><dt>15.77. <a href="#N13B19">List of variables for a process instance - Response codes</a></dt><dt>15.78. <a href="#N13B4C">Get a variable for a process instance - URL parameters</a></dt><dt>15.79. <a href="#N13B71">Get a variable for a process instance - Response codes</a></dt><dt>15.80. <a href="#N13BB2">Create (or update) variables on a process instance - URL parameters</a></dt><dt>15.81. <a href="#N13BDE">Create (or update) variables on a process instance - Response codes</a></dt><dt>15.82. <a href="#N13C12">Update a single variable on a process instance - URL parameters</a></dt><dt>15.83. <a href="#N13C47">Update a single variable on a process instance - Response codes</a></dt><dt>15.84. <a href="#N13C7A">Create a new binary variable on a process-instance - URL parameters</a></dt><dt>15.85. <a href="#N13CB5">Create a new binary variable on a process-instance - Response codes</a></dt><dt>15.86. <a href="#N13CE5">Update an existing binary variable on a process-instance - URL parameters</a></dt><dt>15.87. <a href="#N13D20">Update an existing binary variable on a process-instance - Response codes</a></dt><dt>15.88. <a href="#N13D4E">Get an execution - URL parameters</a></dt><dt>15.89. <a href="#N13D6A">Get an execution - Response codes</a></dt><dt>15.90. <a href="#N13D94">Execute an action on an execution - URL parameters</a></dt><dt>15.91. <a href="#N13DD7">Execute an action on an execution - Response codes</a></dt><dt>15.92. <a href="#N13E0D">Get active activities in an execution - URL parameters</a></dt><dt>15.93. <a href="#N13E29">Get active activities in an execution - Response codes</a></dt><dt>15.94. <a href="#N13E54">List of executions - URL query parameters</a></dt><dt>15.95. <a href="#N13EC2">List of executions - Response codes</a></dt><dt>15.96. <a href="#N13F09">Query executions - Response codes</a></dt><dt>15.97. <a href="#N13F33">List of variables for an execution - URL parameters</a></dt><dt>15.98. <a href="#N13F5E">List of variables for an execution - Response codes</a></dt><dt>15.99. <a href="#N13F8B">Get a variable for an execution - URL parameters</a></dt><dt>15.100. <a href="#N13FBF">Get a variable for an execution - Response codes</a></dt><dt>15.101. <a href="#N13FFA">Create (or update) variables on an execution - URL parameters</a></dt><dt>15.102. <a href="#N1402A">Create (or update) variables on an execution - Response codes</a></dt><dt>15.103. <a href="#N1405E">Update a variable on an execution - URL parameters</a></dt><dt>15.104. <a href="#N14090">Update a variable on an execution - Response codes</a></dt><dt>15.105. <a href="#N140BD">Create a new binary variable on an execution - URL parameters</a></dt><dt>15.106. <a href="#N14100">Create a new binary variable on an execution - Response codes</a></dt><dt>15.107. <a href="#N14130">Update an existing binary variable on a process-instance - URL parameters</a></dt><dt>15.108. <a href="#N1417C">Update an existing binary variable on a process-instance - Response codes</a></dt><dt>15.109. <a href="#N141AA">Get a task - URL parameters</a></dt><dt>15.110. <a href="#N141C6">Get a task - Response codes</a></dt><dt>15.111. <a href="#N14200">List of tasks - URL query parameters</a></dt><dt>15.112. <a href="#N14325">List of tasks - Response codes</a></dt><dt>15.113. <a href="#N14368">Query for tasks - Response codes</a></dt><dt>15.114. <a href="#N1439E">Update a task - Response codes</a></dt><dt>15.115. <a href="#N143FB">Task actions - Response codes</a></dt><dt>15.116. <a href="#N14432">&gt;Delete a task - URL parameters</a></dt><dt>15.117. <a href="#N14463">&gt;Delete a task - Response codes</a></dt><dt>15.118. <a href="#N14489">Get all variables for a task - URL parameters</a></dt><dt>15.119. <a href="#N144B4">Get all variables for a task - Response codes</a></dt><dt>15.120. <a href="#N144E2">Get a variable from a task - URL parameters</a></dt><dt>15.121. <a href="#N14516">Get a variable from a task - Response codes</a></dt><dt>15.122. <a href="#N14544">Get the binary data for a variable - URL parameters</a></dt><dt>15.123. <a href="#N14581">Get the binary data for a variable - Response codes</a></dt><dt>15.124. <a href="#N145B4">Create new variables on a task - URL parameters</a></dt><dt>15.125. <a href="#N145FD">Create new variables on a task - Response codes</a></dt><dt>15.126. <a href="#N1462B">Create a new binary variable on a task - URL parameters</a></dt><dt>15.127. <a href="#N1466E">Create a new binary variable on a task - Response codes</a></dt><dt>15.128. <a href="#N146A1">Update an existing variable on a task - URL parameters</a></dt><dt>15.129. <a href="#N146F3">Update an existing variable on a task - Response codes</a></dt><dt>15.130. <a href="#N1471C">Updating a binary variable on a task - URL parameters</a></dt><dt>15.131. <a href="#N14768">Updating a binary variable on a task - Response codes</a></dt><dt>15.132. <a href="#N14796">Delete a variable on a task - URL parameters</a></dt><dt>15.133. <a href="#N147CD">Delete a variable on a task - Response codes</a></dt><dt>15.134. <a href="#N147EE">Delete all local variables on a task - URL parameters</a></dt><dt>15.135. <a href="#N1480A">Delete all local variables on a task - Response codes</a></dt><dt>15.136. <a href="#N1482B">Get all identity links for a task - URL parameters</a></dt><dt>15.137. <a href="#N14847">Get all identity links for a task - Response codes</a></dt><dt>15.138. <a href="#N1487B">Get all identitylinks for a task for either groups or users - URL parameters</a></dt><dt>15.139. <a href="#N148B8">Get all identitylinks for a task for either groups or users - Response codes</a></dt><dt>15.140. <a href="#N148E2">Create an identity link on a task - URL parameters</a></dt><dt>15.141. <a href="#N14910">Create an identity link on a task - Response codes</a></dt><dt>15.142. <a href="#N1493A">Delete an identity link on a task - URL parameters</a></dt><dt>15.143. <a href="#N14977">Delete an identity link on a task - Response codes</a></dt><dt>15.144. <a href="#N14998">Create a new comment on a task - URL parameters</a></dt><dt>15.145. <a href="#N149C4">Create a new comment on a task - Response codes</a></dt><dt>15.146. <a href="#N149EA">Get all comments on a task - URL parameters</a></dt><dt>15.147. <a href="#N14A0D">Get all comments on a task - Response codes</a></dt><dt>15.148. <a href="#N14A2E">Get a comment on a task - URL parameters</a></dt><dt>15.149. <a href="#N14A5A">Get a comment on a task - Response codes</a></dt><dt>15.150. <a href="#N14A7B">Delete a comment on a task - URL parameters</a></dt><dt>15.151. <a href="#N14A9E">Delete a comment on a task - Response codes</a></dt><dt>15.152. <a href="#N14ABE">Get all events for a task - URL parameters</a></dt><dt>15.153. <a href="#N14AE1">Get all events for a task - Response codes</a></dt><dt>15.154. <a href="#N14B02">Get an event on a task - URL parameters</a></dt><dt>15.155. <a href="#N14B2E">Get an event on a task - Response codes</a></dt><dt>15.156. <a href="#N14B4F">Create a new attachment on a task, containing a link to an external resource - URL parameters</a></dt><dt>15.157. <a href="#N14B7B">Create a new attachment on a task, containing a link to an external resource - Response codes</a></dt><dt>15.158. <a href="#N14BA1">Create a new attachment on a task, with an attached file - URL parameters</a></dt><dt>15.159. <a href="#N14BDE">Create a new attachment on a task, with an attached file - Response codes</a></dt><dt>15.160. <a href="#N14C04">Get all attachments on a task - URL parameters</a></dt><dt>15.161. <a href="#N14C27">Get all attachments on a task - Response codes</a></dt><dt>15.162. <a href="#N14C48">Get an attachment on a task - URL parameters</a></dt><dt>15.163. <a href="#N14C8A">Get an attachment on a task - Response codes</a></dt><dt>15.164. <a href="#N14CAB">Get the content for an attachment - URL parameters</a></dt><dt>15.165. <a href="#N14CD3">Get the content for an attachment - Response codes</a></dt><dt>15.166. <a href="#N14CFD">Delete an attachment on a task - URL parameters</a></dt><dt>15.167. <a href="#N14D20">Delete an attachment on a task - Response codes</a></dt><dt>15.168. <a href="#N14D43">Get a historic process instance - Response codes</a></dt><dt>15.169. <a href="#N14D6E">List of historic process instances - URL parameters</a></dt><dt>15.170. <a href="#N14E09">List of historic process instances - Response codes</a></dt><dt>15.171. <a href="#N14E49">Query for historic process instances - Response codes</a></dt><dt>15.172. <a href="#N14E73">Response codes</a></dt><dt>15.173. <a href="#N14E94">Response codes</a></dt><dt>15.174. <a href="#N14EBE">Get the binary data for a historic process instance variable - Response codes</a></dt><dt>15.175. <a href="#N14EF1">Get a single historic task instance - Response codes</a></dt><dt>15.176. <a href="#N14F1C">Get historic task instances - URL parameters</a></dt><dt>15.177. <a href="#N1503E">Get historic task instances - Response codes</a></dt><dt>15.178. <a href="#N15081">Query for historic task instances - Response codes</a></dt><dt>15.179. <a href="#N150AB">Response codes</a></dt><dt>15.180. <a href="#N150CC">Response codes</a></dt><dt>15.181. <a href="#N150F6">Get the binary data for a historic task instance variable - Response codes</a></dt><dt>15.182. <a href="#N1512A">Get historic activity instances - URL parameters</a></dt><dt>15.183. <a href="#N15198">Get historic activity instances - Response codes</a></dt><dt>15.184. <a href="#N151D1">Query for historic activity instances - Response codes</a></dt><dt>15.185. <a href="#N151FC">List of historic variable instances - URL parameters</a></dt><dt>15.186. <a href="#N15246">List of historic variable instances - Response codes</a></dt><dt>15.187. <a href="#N15286">Query for historic variable instances - Response codes</a></dt><dt>15.188. <a href="#N152B0">Get the binary data for a historic task instance variable - Response codes</a></dt><dt>15.189. <a href="#N152E4">Get historic detail - URL parameters</a></dt><dt>15.190. <a href="#N15340">Get historic detail - Response codes</a></dt><dt>15.191. <a href="#N15379">Query for historic details - Response codes</a></dt><dt>15.192. <a href="#N153A3">Get the binary data for a historic detail variable - Response codes</a></dt><dt>15.193. <a href="#N153D9">Get form data - URL parameters</a></dt><dt>15.194. <a href="#N153FE">Get form data - Response codes</a></dt><dt>15.195. <a href="#N1543A">Submit task form data - Response codes</a></dt><dt>15.196. <a href="#N15467">List of tables - Response codes</a></dt><dt>15.197. <a href="#N1548C">Get a single table - URL parameters</a></dt><dt>15.198. <a href="#N154AF">Get a single table - Response codes</a></dt><dt>15.199. <a href="#N154D0">Get column info for a single table - URL parameters</a></dt><dt>15.200. <a href="#N154F3">Get column info for a single table - Response codes</a></dt><dt>15.201. <a href="#N15514">Get row data for a single table - URL parameters</a></dt><dt>15.202. <a href="#N15530">Get row data for a single table - URL query parameters</a></dt><dt>15.203. <a href="#N15571">Get row data for a single table - Response codes</a></dt><dt>15.204. <a href="#N1559E">Get engine properties - Response codes</a></dt><dt>15.205. <a href="#N155C3">Get engine info - Response codes</a></dt><dt>15.206. <a href="#N155E2">Get a single job - URL parameters</a></dt><dt>15.207. <a href="#N15605">Get a single job - Response codes</a></dt><dt>15.208. <a href="#N15626">Delete a job - URL parameters</a></dt><dt>15.209. <a href="#N15642">Delete a job - Response codes</a></dt><dt>15.210. <a href="#N1566A">Execute a single job - JSON Body parameters</a></dt><dt>15.211. <a href="#N15685">Execute a single job - Response codes</a></dt><dt>15.212. <a href="#N156AB">Get the exception stacktrace for a job - URL parameters</a></dt><dt>15.213. <a href="#N156C3">Get the exception stacktrace for a job - Response codes</a></dt><dt>15.214. <a href="#N156E7">Get a list of jobs - URL query parameters</a></dt><dt>15.215. <a href="#N15787">Get a list of jobs - Response codes</a></dt><dt>15.216. <a href="#N157B1">Get a single user - URL parameters</a></dt><dt>15.217. <a href="#N157D4">Get a single user - Response codes</a></dt><dt>15.218. <a href="#N157F5">Get a list of users - URL query parameters</a></dt><dt>15.219. <a href="#N15872">Get a list of users - Response codes</a></dt><dt>15.220. <a href="#N1589A">Update a user - Response codes</a></dt><dt>15.221. <a href="#N158D2">Create a user - Response codes</a></dt><dt>15.222. <a href="#N158FC">Delete a user - URL parameters</a></dt><dt>15.223. <a href="#N15918">Delete a user - Response codes</a></dt><dt>15.224. <a href="#N15939">Get a user's picture - URL parameters</a></dt><dt>15.225. <a href="#N15959">Get a user's picture - Response codes</a></dt><dt>15.226. <a href="#N1597A">Updating a user's picture - URL parameters</a></dt><dt>15.227. <a href="#N159A9">Updating a user's picture - Response codes</a></dt><dt>15.228. <a href="#N159CA">List a user's info - URL parameters</a></dt><dt>15.229. <a href="#N159ED">List a user's info - Response codes</a></dt><dt>15.230. <a href="#N15A0E">Get a user's info - URL parameters</a></dt><dt>15.231. <a href="#N15A3A">Get a user's info - Response codes</a></dt><dt>15.232. <a href="#N15A5B">Update a user's info - URL parameters</a></dt><dt>15.233. <a href="#N15A90">Update a user's info - Response codes</a></dt><dt>15.234. <a href="#N15AB6">Create a new user's info entry - URL parameters</a></dt><dt>15.235. <a href="#N15AE2">Create a new user's info entry - Response codes</a></dt><dt>15.236. <a href="#N15B10">Delete a user's info - URL parameters</a></dt><dt>15.237. <a href="#N15B35">Delete a user's info - Response codes</a></dt><dt>15.238. <a href="#N15B59">Get a single group - URL parameters</a></dt><dt>15.239. <a href="#N15B7C">Get a single group - Response codes</a></dt><dt>15.240. <a href="#N15B9D">Get a list of groups - URL query parameters</a></dt><dt>15.241. <a href="#N15BFC">Get a list of groups - Response codes</a></dt><dt>15.242. <a href="#N15C21">Update a group - Response codes</a></dt><dt>15.243. <a href="#N15C59">Create a group - Response codes</a></dt><dt>15.244. <a href="#N15C83">Delete a group - URL parameters</a></dt><dt>15.245. <a href="#N15C9F">Delete a group - Response codes</a></dt><dt>15.246. <a href="#N15CCB">Add a member to a group - URL parameters</a></dt><dt>15.247. <a href="#N15CF0">Add a member to a group - Response codes</a></dt><dt>15.248. <a href="#N15D24">Delete a member from a group - URL parameters</a></dt><dt>15.249. <a href="#N15D49">Delete a member from a group - Response codes</a></dt><dt>17.1. <a href="#N1660C">LDAP configuration properties</a></dt><dt>17.2. <a href="#N166B2">Advanced properties</a></dt></dl></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="N10007"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#license">License</a></span></dt><dt><span class="section"><a href="#download">Download</a></span></dt><dt><span class="section"><a href="#sources">Sources</a></span></dt><dt><span class="section"><a href="#required.software">Required software</a></span></dt><dd><dl><dt><span class="section"><a href="#N1002A">JDK 6+</a></span></dt><dt><span class="section"><a href="#N10036">Eclipse Indigo and Juno</a></span></dt></dl></dd><dt><span class="section"><a href="#reporting.problems">Reporting problems</a></span></dt><dt><span class="section"><a href="#experimental">Experimental features</a></span></dt><dt><span class="section"><a href="#internal">Internal implementation classes</a></span></dt></dl></div><div class="section" title="License"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="license"></a>License</h2></div></div></div><p>Activiti is distributed under <a class="ulink" href="../../license.txt" target="_top">the Apache V2 license</a>.</p></div><div class="section" title="Download"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="download"></a>Download</h2></div></div></div><p><a class="ulink" href="http://activiti.org/download.html" target="_top">http://activiti.org/download.html</a></p></div><div class="section" title="Sources"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sources"></a>Sources</h2></div></div></div><p>The distribution contains most of the sources as jar files. 
  To find and build the full source codebase, please read the  
  <a class="ulink" href="http://docs.codehaus.org/display/ACT/Developers+Guide#DevelopersGuide-Buildingthedistribution" target="_top">'Building the distribution' wiki page</a> 
  </p></div><div class="section" title="Required software"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="required.software"></a>Required software</h2></div></div></div><div class="section" title="JDK 6+"><div class="titlepage"><div><div><h3 class="title"><a name="N1002A"></a>JDK 6+</h3></div></div></div><p>Activiti runs on a JDK higher than or equal to version 6.  Go 
    to <a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_top">Oracle Java SE downloads</a>
    and click on button "Download JDK".  There are installation instructions on that page as well.
    To verify that your installation was successful, run <code class="literal">java -version</code> on the 
    command line.  That should print the installed version of your JDK.
    </p></div><div class="section" title="Eclipse Indigo and Juno"><div class="titlepage"><div><div><h3 class="title"><a name="N10036"></a>Eclipse Indigo and Juno</h3></div></div></div><p>Download the the eclipse distribution of your choice from <a class="ulink" href="http://www.eclipse.org/downloads/" target="_top">the Eclipse download page</a>.
    Unzip the downloaded file and then you should be able to start it with the eclipse file in the directory <code class="literal">eclipse</code>. 
    Further in this user guide, there is a section on <a class="link" href="#eclipseDesignerInstallation" title="Installation">installing our eclipse designer plugin</a>.
    </p></div></div><div class="section" title="Reporting problems"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="reporting.problems"></a>Reporting problems</h2></div></div></div><p>Every self-respecting developer should have read 
  <a class="ulink" href="http://www.catb.org/~esr/faqs/smart-questions.html" target="_top">How to ask questions the smart way</a>.
  </p><p>After you've done that you can post questions and comments on <a class="ulink" href="http://forums.activiti.org/en/viewforum.php?f=3" target="_top">the Users forum</a> and 
  create issues in <a class="ulink" href="http://jira.codehaus.org/browse/ACT" target="_top">our JIRA issue tracker</a>.
    </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Even though Activiti is hosted on GitHub, issues should not be reported using GitHub's issue system. If you wish to report an issue, 
        do not create a GitHub issue, but use <a class="ulink" href="http://jira.codehaus.org/browse/ACT" target="_top">JIRA</a>.
      </p></div><p>
  </p></div><div class="section" title="Experimental features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="experimental"></a>Experimental features</h2></div></div></div><p>Sections marked with <span class="bold"><strong>[EXPERIMENTAL]</strong></span> should 
  not be considered stable.
  </p><p>All classes that have <code class="literal">.impl.</code> in the package name are internal implementation classes 
  and can not be considered stable.  However, if the user guide mentions those classes as configuration
  values, they are supported and can be considered stable. 
  </p></div><div class="section" title="Internal implementation classes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="internal"></a>Internal implementation classes</h2></div></div></div><p>In the jar file, all classes in packages that have <code class="literal">.impl.</code> (e.g. <code class="literal">org.activiti.engine.impl.pvm.delegate</code>)
  in them are implementation classes and should be considered internal. No stability guarantees are given on classes or interfaces 
  that are in implementation classes.
  </p></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;Getting Started"><div class="titlepage"><div><div><h2 class="title"><a name="N1007D"></a>Chapter&nbsp;2.&nbsp;Getting Started</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#demo.setup.one.minute.version">One minute version</a></span></dt><dt><span class="section"><a href="#activiti.setup">Activiti setup</a></span></dt><dt><span class="section"><a href="#activiti.setup.database">Activiti database setup</a></span></dt><dt><span class="section"><a href="#getting.started.including.libs">Include the Activiti jar and its dependencies</a></span></dt><dt><span class="section"><a href="#getting.started.next.steps">Next steps</a></span></dt></dl></div><div class="section" title="One minute version"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="demo.setup.one.minute.version"></a>One minute version</h2></div></div></div><p>
      After downloading the Activiti Explorer WAR file from the <a class="ulink" href="http://www.activiti.org" target="_top">Activiti website</a>,
      follow these steps to get the demo setup running with default settings. 
      You'll need a working <a class="ulink" href="http://java.sun.com/javase/downloads/index.jsp" target="_top">Java runtime</a> and
      <a class="ulink" href="http://tomcat.apache.org/download-70.cgi" target="_top">Apache Tomcat</a> installation (actually, 
      any web container would work since we only rely on the servlet capablility. But we test on Tomcat primarily).
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Copy the downloaded activiti-explorer.war to the webapps directory of Tomcat.</p></li><li class="listitem"><p>Start Tomcat by running the startup.bat or startup.sh scripts in the bin folder of Tomcat</p></li><li class="listitem"><p>
            When Tomcat is started open your browser and go to  <a class="ulink" href="http://localhost:8080/activiti-explorer" target="_top">http://localhost:8080/activiti-explorer</a>. 
            Login with kermit/kermit.
          </p></li></ul></div><p>
      That's it! The Activiti Explorer application uses an in-memory H2 database by default, if you want to use another database 
      configuration please read <a class="link" href="#activiti.setup" title="Activiti setup">the longer version</a>.
    </p></div><div class="section" title="Activiti setup"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="activiti.setup"></a>Activiti setup</h2></div></div></div><p>To install Activiti you'll need a working 
    <a class="ulink" href="http://java.sun.com/javase/downloads/index.jsp" target="_top">Java runtime</a> and
    <a class="ulink" href="http://tomcat.apache.org/download-70.cgi" target="_top">Apache Tomcat</a> installation.
    Also make sure that the <span class="emphasis"><em>JAVA_HOME</em></span> system
    variable is correctly set. The way to do this depends on your operating system.
    </p><p>To get the Activiti Explorer and REST web applications running just copy the WARs downloaded from
    the Activiti download page to the <code class="literal">webapps</code> folder in your Tomcat installation directory. By default the Explorer
    application runs with an in-memory database and with example processes, users and groups.
    </p><p>These are the demo users:</p><div class="table"><a name="N100BD"></a><p class="title"><b>Table&nbsp;2.1.&nbsp;The demo users</b></p><div class="table-contents"><table summary="The demo users" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>UserId</th><th>Password</th><th>Security roles</th></tr></thead><tbody><tr><td>kermit</td><td>kermit</td><td>admin</td></tr><tr><td>gonzo</td><td>gonzo</td><td>manager</td></tr><tr><td>fozzie</td><td>fozzie</td><td>user</td></tr></tbody></table></div></div><br class="table-break"><p>Now you can access following web application:</p><div class="table"><a name="N100E2"></a><p class="title"><b>Table&nbsp;2.2.&nbsp;The webapp tools</b></p><div class="table-contents"><table summary="The webapp tools" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Webapp Name</th><th>URL</th><th>Description</th><td class="auto-generated">&nbsp;</td></tr></thead><tbody><tr><td>Activiti Explorer</td><td><a class="ulink" href="http://localhost:8080/activiti-explorer" target="_top">http://localhost:8080/activiti-explorer</a> </td><td>The process engine user console.  Use this tool to start new processes, assign
            tasks, view and claim tasks, etc. This tool also allows to administrate the Activiti engine. 
            </td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><br class="table-break"><p>
      Note that the Activiti Explorer demo setup is a way of showing the capabilities and functionality of
      Activiti as easily and as fast as possible. This does however, <span class="bold"><strong>not</strong></span> mean
      that it is the only way of using Activiti. As Activiti is 'just a jar', it can 
      be embedded in any Java environment: with swing or on a Tomcat, JBoss, WebSphere, etc.
      Or you could very well choose to run Activiti as a typical, standalone BPM server.
      If it is possible in Java, it is possible with Activiti!
    </p></div><div class="section" title="Activiti database setup"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="activiti.setup.database"></a>Activiti database setup</h2></div></div></div><p>As said in the one minute demo setup, the Activiti Explorer runs an in-memory H2 database by default.
    To run the Activiti Explorer with a standalone H2 or another database the db.properties in the WEB-INF/classes of the Activiti Explorer web application
    should be changed.
    </p><p>In addition, be aware that the Activiti Explorer generates demo user and groups, process definitions and models by default.
    To disable this, the activiti-standalone-context.xml file in the WEB-INF folder should be changed. To disable the demo setup fully you can use the following snippet
    of the <code class="literal">demoDataGenerator</code> bean definition. But as you can see you can also enable and disable items individually.
    </p><pre class="prettyprint">
      &lt;bean id="demoDataGenerator" class="org.activiti.explorer.demo.DemoDataGenerator"&gt;
        &lt;property name="processEngine" ref="processEngine" /&gt;
        &lt;property name="createDemoUsersAndGroups" value="false" /&gt;
        &lt;property name="createDemoProcessDefinitions" value="false" /&gt;
        &lt;property name="createDemoModels" value="false" /&gt;
      &lt;/bean&gt;
    </pre></div><div class="section" title="Include the Activiti jar and its dependencies"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="getting.started.including.libs"></a>Include the Activiti jar and its dependencies</h2></div></div></div><p>
        To include the Activiti jar and its dependent libraries, we advise using 
        <a class="ulink" href="http://maven.apache.org/" target="_top">Maven</a> (or <a class="ulink" href="http://ant.apache.org/ivy/" target="_top">Ivy</a>), as it 
        simplifies dependency management on both our and your side a lot. Follow the instructions
        at <a class="ulink" href="http://www.activiti.org/community.html#maven.repository" target="_top">http://www.activiti.org/community.html#maven.repository</a> to
        include the necessary jars in your environment.
    </p><p>
        Alternatively, if you don't want to use Maven you can include the jars in your project
        yourself. The Activiti download zip contains a folder <code class="literal">libs</code> which
        contain all the Activiti jars (and the source jars). The dependencies are not shipped this way.
        The required dependencies of the Activiti engine are (generated using <code class="literal">mvn dependency:tree</code>):
       </p><pre class="prettyprint">
org.activiti:activiti-engine:jar:5.12.1
+- org.apache.commons:commons-email:jar:1.2:compile
|  +- javax.mail:mail:jar:1.4.1:compile
|  \- javax.activation:activation:jar:1.1:compile
+- commons-lang:commons-lang:jar:2.4:compile
+- org.mybatis:mybatis:jar:3.1.1:compile
+- org.springframework:spring-beans:jar:3.1.2.RELEASE:compile
|  \- org.springframework:spring-core:jar:3.1.2.RELEASE:compile
|     +- org.springframework:spring-asm:jar:3.1.2.RELEASE:compile
|     \- commons-logging:commons-logging:jar:1.1.1:compile
\- joda-time:joda-time:jar:2.1:compile       
       </pre><p>
       Note: the mail jars are only needed if you are using the <a class="link" href="#bpmnEmailTask" title="Email Task">mail service task</a>.
    </p><p>
        All the dependencies can easily be downloaded using <code class="literal">mvn dependency:copy-dependencies</code>
        on a module of the <a class="ulink" href="https://github.com/Activiti/Activiti" target="_top">Activiti source code</a>.
    </p></div><div class="section" title="Next steps"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="getting.started.next.steps"></a>Next steps</h2></div></div></div><p>
        Playing around with the <a class="link" href="#activitiExplorer" title="Chapter&nbsp;13.&nbsp;Activiti Explorer">Activiti Explorer</a> web application
        is a good way to get familiar with the Activiti concepts and functionality. However, the 
        main purpose of Activiti is of course to enable powerful BPM and workflow capabilities
        in your own application. The following chapters will help you to get familiar with how to
        use Activiti programmatically in your environment:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    <a class="link" href="#configuration" title="Creating a ProcessEngine">The chapter on configuration</a> will teach you
                    how to set up Activiti and how to obtain an instance of the <code class="literal">ProcessEngine</code>
                    class which is your central access point to all the engine functionality of Activiti.    
                </p></li><li class="listitem"><p>
                    <a class="link" href="#chapterApi" title="Chapter&nbsp;4.&nbsp;The Activiti API">The API chapter</a> will guide you through the 
                    services which form Activiti's API. These services offer the Activiti engine
                    functionality in a convenient yet powerful way and can be used in any Java
                    environment.
                </p></li><li class="listitem"><p>
                    Interested in getting insight on BPMN 2.0, the format in which processes for the 
                    Activiti engine are written? Then continue on to the <a class="link" href="#bpmn20" title="Chapter&nbsp;7.&nbsp;BPMN 2.0 Introduction">BPMN 2.0 section</a>.
                </p></li></ul></div><p>
    </p></div></div><div class="chapter" title="Chapter&nbsp;3.&nbsp;Configuration"><div class="titlepage"><div><div><h2 class="title"><a name="N1015A"></a>Chapter&nbsp;3.&nbsp;Configuration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#configuration">Creating a ProcessEngine</a></span></dt><dt><span class="section"><a href="#configurationRoot">ProcessEngineConfiguration bean</a></span></dt><dt><span class="section"><a href="#databaseConfiguration">Database configuration</a></span></dt><dt><span class="section"><a href="#supporteddatabases">Supported databases</a></span></dt><dt><span class="section"><a href="#creatingDatabaseTable">Creating the database tables</a></span></dt><dt><span class="section"><a href="#database.tables.explained">Database table names explained</a></span></dt><dt><span class="section"><a href="#databaseUpgrade">Database upgrade</a></span></dt><dt><span class="section"><a href="#jobExecutorConfiguration">Job executor activation</a></span></dt><dt><span class="section"><a href="#mailServerConfiguration">Mail server configuration</a></span></dt><dt><span class="section"><a href="#historyConfiguration">History configuration</a></span></dt><dt><span class="section"><a href="#exposingConfigurationBeans">Exposing configuration beans in expressions and scripts</a></span></dt><dt><span class="section"><a href="#processDefinitionCacheConfiguration">Deployment cache configuration</a></span></dt><dt><span class="section"><a href="#loggingConfiguration">Logging</a></span></dt></dl></div><div class="section" title="Creating a ProcessEngine"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration"></a>Creating a ProcessEngine</h2></div></div></div><p>
    The Activiti process engine is configured through an XML file called <code class="literal">activiti.cfg.xml</code>.
    Note that this is <span class="bold"><strong>not</strong></span> applicable if you're 
    using <a class="link" href="#springintegration" title="Chapter&nbsp;5.&nbsp;Spring integration">the Spring style of building a process engine</a>.
    </p><p>
    The easiest way to obtain a <code class="literal">ProcessEngine</code>, is to use the 
    <code class="literal">org.activiti.engine.ProcessEngines</code> class:
    </p><pre class="prettyprint">ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine()</pre><p>
    This will look for an <code class="literal">activiti.cfg.xml</code> file on the classpath and
    construct an engine based on the configuration in that file.
    The following snippet shows an example configuration. 
    The following sections will give a detailed overview of the configuration properties.
    </p><pre class="prettyprint">&lt;beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

  &lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt;
  
    &lt;property name="jdbcUrl" value="jdbc:h2:mem:activiti;DB_CLOSE_DELAY=1000" /&gt;
    &lt;property name="jdbcDriver" value="org.h2.Driver" /&gt;
    &lt;property name="jdbcUsername" value="sa" /&gt;
    &lt;property name="jdbcPassword" value="" /&gt;
    
    &lt;property name="databaseSchemaUpdate" value="true" /&gt;
    
    &lt;property name="jobExecutorActivate" value="false" /&gt;
    
    &lt;property name="mailServerHost" value="mail.my-corp.com" /&gt; 
    &lt;property name="mailServerPort" value="5025" /&gt;    
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
    </p><p>
      Note that the configuration XML is in fact a Spring configuration.
      <span class="bold"><strong>This does not mean that Activiti can only be used in a Spring environment!</strong></span>
      We are simply leveraging the parsing and dependency injection capabilities of Spring
      internally for building up the engine.
    </p><p>
      The ProcessEngineConfiguration object can also be created programmatically using the configuration file.
      It is also possible to use a different bean id (e.g. see line 3).
      </p><pre class="prettyprint">
ProcessEngineConfiguration.createProcessEngineConfigurationFromResourceDefault();
ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource);
ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource, String beanName);
ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream);
ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream, String beanName);</pre><p>
   It is also possible not to use a configuration file, and create a configuration based on 
   defaults (see <a class="link" href="#configurationClasses">the different supported classes</a> for more information).
   </p><pre class="prettyprint">
ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();
ProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration();</pre><p>
   All these <code class="literal">ProcessEngineConfiguration.createXXX()</code> methods return a 
   <code class="literal">ProcessEngineConfiguration</code> that can further be tweaked if needed.
   After calling the <code class="literal">buildProcessEngine()</code> operation, a <code class="literal">ProcessEngine</code>
   is created:
   </p><pre class="prettyprint">
ProcessEngine processEngine = ProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration()
  .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)
  .setJdbcUrl("jdbc:h2:mem:my-own-db;DB_CLOSE_DELAY=1000")
  .setJobExecutorActivate(true)
  .buildProcessEngine();</pre><p>
    </p></div><div class="section" title="ProcessEngineConfiguration bean"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configurationRoot"></a>ProcessEngineConfiguration bean</h2></div></div></div><p>
      The <code class="literal">activiti.cfg.xml</code> must contain a bean that has the id <code class="literal">'processEngineConfiguration'</code>.
      </p><pre class="prettyprint"> &lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt;</pre><p>
      This bean is then used to construct the <code class="literal">ProcessEngine</code>. There are multiple
      classes available that can be used to define the <code class="literal">processEngineConfiguration</code>.
      These classes represent different environments, and set defaults accordingly. It's a best 
      practice to select the class the matches (the most) your environment, to minimalise the
      number of properties needed to configure the engine. The following classes are currently available
      (more will follow in future releases):
      </p><div class="itemizedlist"><a name="configurationClasses"></a><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration</strong></span>:
            the process engine is used in a standalone way. Activiti will take care of the transactions.
            By default, the database will only be checked when the engine boots (and an exception is thrown if there
            is no Activiti schema or the schema version is incorrect). 
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>org.activiti.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration</strong></span>:
            this is a convenience class for unit testing purposes. Activiti will take care of the transactions.
            An H2 in-memory database is used by default. The database will be created and dropped when the engine boots and shuts down.
            When using this, probably no additional configuration is needed (except when using for example the job executor or mail capabilities).
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>org.activiti.spring.SpringProcessEngineConfiguration</strong></span>:
            To be used when the process engine is used in a Spring environment. 
            See <a class="link" href="#springintegration" title="Chapter&nbsp;5.&nbsp;Spring integration">the Spring integration section</a> for more information. 
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>org.activiti.engine.impl.cfg.JtaProcessEngineConfiguration</strong></span>:
            To be used when the engine runs in standalone mode, with JTA transactions.
          </p></li></ul></div><p>
    </p></div><div class="section" title="Database configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="databaseConfiguration"></a>Database configuration</h2></div></div></div><p>
      There are two ways to configure the database that the Activiti engine will use.
      The first option is to define the JDBC properties of the database:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>jdbcUrl</strong></span>: JDBC URL of the database.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>jdbcDriver</strong></span>: implementation of the driver for the specific database type.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>jdbcUsername</strong></span>: username to connect to the database.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>jdbcPassword</strong></span>: password to connect to the database.
          </p></li></ul></div><p>
    </p><p>
      The data source that is constructed based on the provided JDBC properties
      will have the default <a class="ulink" href="http://www.mybatis.org/" target="_top">MyBatis</a> connection pool
      settings. The following attributes can optionally be set to tweak that connection pool (taken from the MyBatis documentation):
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>jdbcMaxActiveConnections</strong></span>: The number of active connections
            that the connection pool at maximum at any time can contain. Default is 10.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>jdbcMaxIdleConnections</strong></span>: The number of idle connections
            that the connection pool at maximum at any time can contain.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>jdbcMaxCheckoutTime</strong></span>: The amount of time in milliseconds a connection
            can be 'checked out' from the connection pool before it is forcefully returned.
            Default is 20000 (20 seconds).
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>jdbcMaxWaitTime</strong></span>: This is a low level setting that gives the pool 
            a chance to print a log status and re-attempt the acquisition of a connection in the 
            case that it&rsquo;s taking unusually long (to avoid failing silently forever if the pool is misconfigured)
            Default is 20000 (20 seconds).
          </p></li></ul></div><p>
    </p><p>
      Example database configuration:
      </p><pre class="prettyprint">
&lt;property name="jdbcUrl" value="jdbc:h2:mem:activiti;DB_CLOSE_DELAY=1000" /&gt;
&lt;property name="jdbcDriver" value="org.h2.Driver" /&gt;
&lt;property name="jdbcUsername" value="sa" /&gt;
&lt;property name="jdbcPassword" value="" /&gt;
      </pre><p>
    </p><p>
      Alternatively, a <code class="literal">javax.sql.DataSource</code> implementation can be used 
      (e.g. DBCP from <a class="ulink" href="http://commons.apache.org/dbcp/" target="_top">Apache Commons</a>):
      </p><pre class="prettyprint">
&lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" &gt;
  &lt;property name="driverClassName" value="com.mysql.jdbc.Driver" /&gt;
  &lt;property name="url" value="jdbc:mysql://localhost:3306/activiti" /&gt;
  &lt;property name="username" value="activiti" /&gt;
  &lt;property name="password" value="activiti" /&gt;
  &lt;property name="defaultAutoCommit" value="false" /&gt;
&lt;/bean&gt;      

&lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt;
  
    &lt;property name="dataSource" ref="dataSource" /&gt;
    ...
      </pre><p>
      Note that Activiti does not ship with a library that allows to define such a data source.
      So you have to make sure that the libraries (e.g. from DBCP) are on your classpath.
    </p><p>
      The following properties can be set, regardless of whether you are using the JDBC or data source approach:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>databaseType</strong></span>: it's normally not necessary to 
            specify this property as it is automatically analyzed from the database connection meta data.  
            Should only be specified in case automatic detection fails.
            Possible values: {h2, mysql, oracle, postgres, mssql, db2}.
            <span class="bold"><strong>This property is required when not using the default H2 database</strong></span>.
            This setting will determine which create/drop scripts and queries will be used. See 
            <a class="link" href="#supporteddatabases" title="Supported databases">the 'supported databases' section</a> for 
            an overview of which types are supported.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>databaseSchemaUpdate</strong></span>: allows to set the strategy to handle
            the database schema on process engine boot and shutdown.
            </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                  <code class="literal">false</code> (default): Checks the version of the DB schema against the
                  library when the process engine is being created and throws an exception if the 
                  versions don't match.
                </p></li><li class="listitem"><p>
                  <code class="literal">true</code>: Upon building the process engine, a check is performed and 
                  an update of the schema is performed if it is necessary. If the schema doesn't exist,
                  it is created.
                </p></li><li class="listitem"><p>
                  <code class="literal">create-drop</code>: Creates the schema when the process engine is being created and 
                  drops the schema when the process engine is being closed.
                </p></li></ul></div><p>
          </p></li></ul></div><p>
    </p></div><div class="section" title="Supported databases"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="supporteddatabases"></a>Supported databases</h2></div></div></div><p>Listed below are the types (case sensitive!) that Activiti uses to refer to databases.</p><div class="table"><a name="databaseTypes"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;Supported databases</b></p><div class="table-contents"><table summary="Supported databases" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Activiti database type</th><th>Versions tested</th><th>Example JDBC URL</th><th>Notes</th></tr></thead><tbody><tr><td>h2</td><td>1.3.168</td><td>jdbc:h2:tcp://localhost/activiti</td><td>Default configured database</td></tr><tr><td>mysql</td><td>5.1.21</td><td>jdbc:mysql://localhost:3306/activiti?autoReconnect=true</td><td>Tested using mysql-connector-java database driver</td></tr><tr><td>oracle</td><td>11.2.0.1.0</td><td>jdbc:oracle:thin:@localhost:1521:xe</td><td>&nbsp;</td></tr><tr><td>postgres</td><td>8.1</td><td>jdbc:postgresql://localhost:5432/activiti</td><td>&nbsp;</td></tr><tr><td>db2</td><td>DB2 10.1 using db2jcc4</td><td>jdbc:db2://localhost:50000/activiti</td><td>&nbsp;</td></tr><tr><td>mssql</td><td>2008 using sqljdbc4</td><td>jdbc:sqlserver://localhost:1433/activiti</td><td>&nbsp;</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="Creating the database tables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="creatingDatabaseTable"></a>Creating the database tables</h2></div></div></div><p>
      The easiest way to create the database tables for your database is to:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Add the activiti-engine jars to your classpath</p></li><li class="listitem"><p>Add a suitable database driver</p></li><li class="listitem"><p>Add an Activiti configuration file (<span class="emphasis"><em>activiti.cfg.xml</em></span>) to your classpath, 
          pointing to your database (see <a class="link" href="#databaseConfiguration" title="Database configuration">database configuration section</a>)</p></li><li class="listitem"><p>Execute the main method of the <span class="emphasis"><em>DbSchemaCreate</em></span> class</p></li></ul></div><p>
    </p><p>
      However, often only database administrators can execute DDL statements on a database.
      The SQL DDL statements can be found on the Activiti downloads page or inside the Activiti distribution folder, in the <code class="literal">database</code> subdirectory. The scripts are also in 
      the engine jar (<span class="emphasis"><em>activiti-engine-x.jar</em></span>), in 
      the package <span class="emphasis"><em>org/activiti/db/create</em></span> (the <span class="emphasis"><em>drop</em></span> folder contains the drop statements).
      The SQL files are of the form
      </p><pre class="prettyprint">activiti.{db}.{create|drop}.{type}.sql</pre><p>
      Where <span class="emphasis"><em>db</em></span> is any of the <a class="link" href="#supporteddatabases" title="Supported databases">supported databases</a>
      and <span class="emphasis"><em>type</em></span> is 
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>engine:</strong></span> the tables needed for engine execution. Required.</p></li><li class="listitem"><p><span class="bold"><strong>identity:</strong></span> the tables containing users, groups and memberships of users to groups. These tables are optional and should be used when using 
          the default identity management as shipped with the engine.</p></li><li class="listitem"><p><span class="bold"><strong>history:</strong></span> the tables that contain the history and audit information. Optional: not needed when history level is set to <span class="emphasis"><em>none</em></span>
          Note that this will also disable some features (such as commenting on tasks) which store the data in the history database.</p></li></ul></div><p>
    </p></div><div class="section" title="Database table names explained"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="database.tables.explained"></a>Database table names explained</h2></div></div></div><p>
      The database names of Activiti all start with <span class="bold"><strong>ACT_</strong></span>. The 
      second part is a two-character identification of the use case of the table. This use case 
      will also roughly match the service API.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>ACT_RE_*</strong></span>: 'RE' stands for <code class="literal">repository</code>. 
            Tables with this prefix contain 'static' information such as process definitions and
            process resources (images, rules, etc.).
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>ACT_RU_*</strong></span>: 'RU' stands for <code class="literal">runtime</code>.
            These are the runtime tables, that contain the runtime data of process instances,
            user tasks, variables, jobs, etc. Activiti only stores the runtime data during process instance
            execution, and removes the records when a process instance ends. This keeps 
            the runtime tables small and fast.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>ACT_ID_*</strong></span>: 'ID' stands for <code class="literal">identity</code>.
            These tables contain identity information, such as users, groups, etc.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>ACT_HI_*</strong></span>: 'HI' stands for <code class="literal">history</code>.
            These are the tables that contain historic data, such as past process instances,
            variables, tasks, etc.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>ACT_GE_*</strong></span>: <code class="literal">general</code> data, which is used
            in various use cases.
          </p></li></ul></div><p>
    </p></div><div class="section" title="Database upgrade"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="databaseUpgrade"></a>Database upgrade</h2></div></div></div><p>Make sure you make a backup of your database 
     (using your database backup capabilities) before you run an upgrade.
     </p><p>By default, a version check will be performed each time a process engine is created.
     This typically happens once at boot time of your application or of the Activiti webapps.
     If the Activiti library notices a difference between the library version and the version  
     of the Activiti database tables, then an exception is thrown.
     </p><p>To upgrade, you have to start with putting the following configuration property in your 
     activiti.cfg.xml configuration file:
     </p><pre class="prettyprint">&lt;beans ... &gt;

  &lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt;
    &lt;!-- ... --&gt;
    &lt;property name="databaseSchemaUpdate" value="true" /&gt;    
    &lt;!-- ... --&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p> <span class="bold"><strong>Also, include a suitable database driver for your database to the classpath.</strong></span>
     Upgrade the Activiti libraries in your application. Or start up a new version 
     of Activiti and point it to a database that contains an older version.  With <code class="literal">databaseSchemaUpdate</code>
     set to <code class="literal">true</code>, Activiti will automatically upgrade the DB schema to the newer version
     the first time when it notices that libraries and DB schema are out of sync.
     </p><p> <span class="bold"><strong>As an alternative you can also run the upgrade DDL statements.</strong></span>
     It's also possible to run the upgrade database scripts, available on the Activiti downloads page.
     </p></div><div class="section" title="Job executor activation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jobExecutorConfiguration"></a>Job executor activation</h2></div></div></div><p>The <code class="literal">JobExecutor</code> is a component that manages a couple of threads to fire timers (and later also asynchronous messages).
    For unit testing scenarios, it is cumbersome to work with multiple threads. Therefore the API allows to query for 
    (<code class="literal">ManagementService.createJobQuery</code>) and execute jobs (<code class="literal">ManagementService.executeJob</code>) through 
    the API so that job execution can be controlled from within a unit test.  To avoid interference by the job executor, it can be turned off. 
    </p><p> 
    By default, the <code class="literal">JobExecutor</code> is activated when the process engine boots. Specify
    </p><pre class="prettyprint">&lt;property name="jobExecutorActivate" value="false" /&gt;</pre><p>
    when you don't want the <code class="literal">JobExecutor</code> to be activated upon booting the process engine.
    </p></div><div class="section" title="Mail server configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mailServerConfiguration"></a>Mail server configuration</h2></div></div></div><p>
      Configuring a mail server is optional. Activiti supports sending e-mails in business processes. To actually send an e-mail, a valid
      SMTP mail server configuration is required. See the 
      <a class="link" href="#bpmnEmailTaskServerConfiguration" title="Mail server configuration">e-mail task</a> for the configuration options.
    </p></div><div class="section" title="History configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="historyConfiguration"></a>History configuration</h2></div></div></div><p>
      Customizing the configuration of history storage is optional. This allows you to tweak settings that influence the <a class="link" href="#history" title="Chapter&nbsp;11.&nbsp;History">history capabilities</a>
      of the engine. See <a class="link" href="#historyConfig" title="History configuration">history configuration</a> for more details.
      </p><pre class="prettyprint">&lt;property name="history" value="audit" /&gt;</pre><p>
    </p></div><div class="section" title="Exposing configuration beans in expressions and scripts"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="exposingConfigurationBeans"></a>Exposing configuration beans in expressions and scripts</h2></div></div></div><p>By default, all beans that you specify in the <code class="literal">activiti.cfg.xml</code> configuration 
    or in your own Spring configuration file are available to expressions and in the scripts.
    If you want to limit the visibility of beans in your configuration file, you can 
    configure a property called <code class="literal">beans</code> in your process engine configuration.
    The beans property in <code class="literal">ProcessEngineConfiguration</code> is a map. When you specify that property,
    only beans specified in that map will be visible to expressions and scripts.  The exposed beans 
    will be exposed with the names as you specify in that map.  
    </p></div><div class="section" title="Deployment cache configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="processDefinitionCacheConfiguration"></a>Deployment cache configuration</h2></div></div></div><p>All process definition are cached (after they're parsed) to avoid hitting
    the database every time a process definition is needed and because process definition data doesn't change.
    By default, there is no limit on this cache. To limit the process definition cache, add following property
    </p><pre class="prettyprint">&lt;property name="processDefinitionCacheLimit" value="10" /&gt;</pre><p>
    Setting this property will swap the default hashmap cache with a LRU cache that has the provided hard limit.
    Of course, the 'best' value of this property depends on the total amount of process definitions stored and the number of
    process definitions actually used at runtime by all the runtime process instances.</p><p>You can also inject your own cache implementation. This must be a bean that implements the
    org.activiti.engine.impl.persistence.deploy.DeploymentCache interface:
    </p><pre class="prettyprint">
&lt;property name="processDefinitionCache"&gt;
  &lt;bean class="org.activiti.MyCache" /&gt;
&lt;/property&gt;</pre><p>There is a similar property called <code class="literal">knowledgeBaseCacheLimit</code> and <code class="literal">knowledgeBaseCache</code> for configuring the rules cache.
     This is only needed when you use the rules task in your processes.</p></div><div class="section" title="Logging"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="loggingConfiguration"></a>Logging</h2></div></div></div><p>As of Activiti 5.12, SLF4J is used as logging framework, replacing the 
    previous used java.util.logging. All logging (activiti, spring, mybatis, ...) is routed through SLF4J and allows for
    selecting the logging-implementation of your choice.</p><p><span class="bold"><strong>By default no SFL4J-binding jar is present in the activiti-engine dependencies, this should be added
    in your project in order to use the logging framework of your choice.</strong></span> If no implementation jar is added, SLF4J will use a NOP-logger,
     not logging anything at all, other than a warning that nothing will be logged. For more info on these bindings <a class="ulink" href="http://www.slf4j.org/codes.html#StaticLoggerBinder" target="_top">http://www.slf4j.org/codes.html#StaticLoggerBinder</a>.</p><p>With Maven, add for example a dependency like this (here using log4j), note that you still need to add a version:
    </p><pre class="prettyprint">
&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
&lt;/dependency&gt;</pre><p>The activiti-explorer and activiti-rest webapps are configured to use Log4j-binding. Log4j is also used when running the tests for all the activiti-* modules.</p><p>
      <span class="bold"><strong>Important note when using a container with commons-logging in the classpath:</strong></span>
      In order to route the spring-logging through SLF4J, a bridge is used (see <a class="ulink" href="http://www.slf4j.org/legacy.html#jclOverSLF4J" target="_top">http://www.slf4j.org/legacy.html#jclOverSLF4J</a>). If your container provides a commons-logging implementation,
      please follow directions on this page: <a class="ulink" href="http://www.slf4j.org/codes.html#release" target="_top">http://www.slf4j.org/codes.html#release</a> to ensure stability.
    </p><p>
      Example when using Maven (version omitted):
      </p><pre class="prettyprint">
&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
&lt;/dependency&gt;</pre><p>
    </p></div></div><div class="chapter" title="Chapter&nbsp;4.&nbsp;The Activiti API"><div class="titlepage"><div><div><h2 class="title"><a name="chapterApi"></a>Chapter&nbsp;4.&nbsp;The Activiti API</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#apiEngine">The Process Engine API and services</a></span></dt><dt><span class="section"><a href="#N1048E">Exception strategy</a></span></dt><dt><span class="section"><a href="#api.services">Working with the Activiti services</a></span></dt><dd><dl><dt><span class="section"><a href="#api.services.deployment">Deploying the process</a></span></dt><dt><span class="section"><a href="#api.services.start.processinstance">Starting a process instance</a></span></dt><dt><span class="section"><a href="#api.services.tasls">Completing tasks</a></span></dt><dt><span class="section"><a href="#api.services.suspend">Suspending and activating a process</a></span></dt><dt><span class="section"><a href="#api.services">Further reading</a></span></dt></dl></dd><dt><span class="section"><a href="#queryAPI">Query API</a></span></dt><dt><span class="section"><a href="#apiExpressions">Expressions</a></span></dt><dt><span class="section"><a href="#apiUnitTesting">Unit testing</a></span></dt><dt><span class="section"><a href="#apiDebuggingUnitTest">Debugging unit tests</a></span></dt><dt><span class="section"><a href="#apiProcessEngineInWebApp">The process engine in a web application</a></span></dt></dl></div><div class="section" title="The Process Engine API and services"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apiEngine"></a>The Process Engine API and services</h2></div></div></div><p>The engine API is the most common way of interacting with
    Activiti. The central starting point is the <code class="literal">ProcessEngine</code>,
    which can be created in several ways as described in the 
    <a class="link" href="#configuration" title="Creating a ProcessEngine">configuration section</a>.
    From the ProcessEngine, you can obtain the
    various services that contain the workflow/BPM
    methods.  ProcessEngine and the services objects are thread safe.
    So you can keep a reference to 1 of those for a whole server.
    </p><div class="mediaobject" align="center"><img src="images/api.services.png" align="middle"></div><pre class="prettyprint">ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();

RuntimeService runtimeService = processEngine.getRuntimeService();
RepositoryService repositoryService = processEngine.getRepositoryService();
TaskService taskService = processEngine.getTaskService();
ManagementService managementService = processEngine.getManagementService();
IdentityService identityService = processEngine.getIdentityService();
HistoryService historyService = processEngine.getHistoryService();
FormService formService = processEngine.getFormService();</pre><p><code class="literal">ProcessEngines.getDefaultProcessEngine()</code> will initialize and build a process 
    engine the first time it is called and afterwards always return the same process engine.  
    Proper creation and closing of all process engines can be done with <code class="literal">ProcessEngines.init()</code> 
    and <code class="literal">ProcessEngines.destroy()</code>.
    </p><p>The ProcessEngines class will scan for all <code class="literal">activiti.cfg.xml</code> and <code class="literal">activiti-context.xml</code> files.
    For all <code class="literal">activiti.cfg.xml</code> files, the process engine will be built in the typical Activiti way: <code class="literal">ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(inputStream).buildProcessEngine()</code>.
    For all <code class="literal">activiti-context.xml</code> files, the process engine will be built in the Spring way: First
    the Spring application context is created and then the process engine is obtained from that application context. 
    </p><p>
        All services are stateless. This means that you can easily run Activiti on multiple nodes in a cluster, each going to the same database,
        without having to worry about which machine actually executed previous calls. Any call to any service
        is idempotent regardless of where it is executed.
    </p><p>
        The <span class="bold"><strong>RepositoryService</strong></span> is probably the first service needed when working with the 
        Activiti engine. This service offers operations for managing and manipulating <code class="literal">deployments</code> and 
        <code class="literal">process definitions</code>. Without going into much detail here, a process definition is a Java counterpart
        of BPMN 2.0 process. It is a representation of the structure and behaviour of each of the steps of a process.
        A <code class="literal">deployment</code> is the unit of packaging within the Activiti engine. A deployment can contain
        multiple BPMN 2.0 xml files and any other resource. The choice of what is included in one deployment is 
        up to the developer. It can range from a single process BPMN 2.0 xml file to a whole package of processes
        and relevant resources (for example the deployment 'hr-processes' could contain everything related to hr processes).
        The <code class="literal">RepositoryService</code> allows to <code class="literal">deploy</code> such packages. Deploying a deployment
        means it is uploaded to the engine, where all processes are inspected and parsed before being stored in the database.
        From that point on, the deployment is known to the system and any process included in the deployment can
        now be started. 
    </p><p>
        Furthermore, this service allows to 
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                query on deployments and process definitions known to the engine.
            </p></li><li class="listitem"><p>
                Suspend and activate deployments as a whole or specific process definitions.
                Suspending means no further operations can be done on them, while activation is the opposite operation.
            </p></li><li class="listitem"><p>
                Retrieve various resources such as files contained within the deployment or process diagrams that
                were auto generated by the engine.
            </p></li><li class="listitem"><p>
                Retrieve a pojo version of the process definition which can be used to introspect the process using 
                Java rather than xml.
            </p></li></ul></div><p>
    </p><p>
        Wile the <code class="literal">RepositoryService</code> is rather about static information (ie. data that doesn't change, or at least not a lot),
        the <span class="bold"><strong>RuntimeService</strong></span> is quite the opposite. It deals with starting new process instances of process definitions.
        As said above, a <code class="literal">process definition</code> defines the structure and behaviour of the different steps in a process.
        A process instance is one execution of such a process definition. For each process definition there typically are many 
        instances running at the same time. The <code class="literal">RuntimeService</code> also is the service which is used to retrieve and store
        <code class="literal">process variables</code>. This is data which is specific to the given process instance and can be used by various
        constructs in the process (eg. an exclusive gateway often uses process variables to determine which path is chosen to continue the process).
        The <code class="literal">Runtimeservice</code> also allows to query on process instances and executions. Executions are a representation
        of the <code class="literal">'token'</code> concept of BPMN 2.0. Basically an execution is a pointer pointing to where the process instance 
        currently is.
        Lastly, the <code class="literal">RuntimeService</code> is used whenever a process instance is waiting for an external trigger and the process
        needs to be continued. A process instance can have various <code class="literal">wait states</code> and this service contains
        various operations to 'signal' the instance that the external trigger is received and the process instance can be continued. 
    </p><p>
        Tasks that need to be performed by actual human users of the system are core to a BPM engine such as Activiti. 
        Everything around tasks is grouped in the <span class="bold"><strong>TaskService</strong></span>, such as
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                Querying tasks assigned to users or groups
            </p></li><li class="listitem"><p>
                Creating new <span class="emphasis"><em>standalone</em></span> tasks. These are tasks that are not related to a process instances.
            </p></li><li class="listitem"><p>
                Manipulating to which user a task is assigned or which users are in some way involved with the task.
            </p></li><li class="listitem"><p>
                Claiming and completing a task. Claiming means that someone decided to be the assigee for the task, meaning
                that this user will complete the task. Completing means 'doing the work of the tasks'. Typically this is 
                filling in a form of sorts.
            </p></li></ul></div><p>
    </p><p>
        The <span class="bold"><strong>IdentityService</strong></span> is pretty simple. It allows the management (creation, update, deletion, querying, ...)
        of groups and users. It is important to understand that Activiti actually doesn't do any checking on users at runtime.
        For example, a task could be assigned to any user, but the engine does not verify if that user is known to the system.
        This is because the Activiti engine can also used in conjunction with services such as ldap, active directory, etc.
    </p><p>
        The <span class="bold"><strong>FormService</strong></span> is an optional service. Meaning that Activiti can perfectly be used without it, 
        without sacrificing any functionality. This service introduces the concept of a <span class="emphasis"><em>start form</em></span> and a <span class="emphasis"><em>task form</em></span>.
        A <span class="emphasis"><em>start form</em></span> is a form that is shown to the user before the process instance is started, while a <span class="emphasis"><em>task form</em></span>
        is the form that is displayed when a user wants to complete a form. Activiti allows to define these forms in the BPMN 2.0 process
        definition. This service exposes this data in an easy way to work with. But again, this is optional as forms don't need to be embedded
        in the process definition.
    </p><p>
        The <span class="bold"><strong>HistoryService</strong></span> exposes all historical data gathered by the Activiti engine. When executing processes,
        a lot of data can be kept by the engine (this is configurable) such as process instance start times, who did which tasks, how long it took to 
        complete the tasks, which path was followed in each process instance, etc. This service exposes mainly query  capabilities to
        access this data.
    </p><p>
        The <span class="bold"><strong>ManagementService</strong></span> is typically not needed when coding custom application using Activiti.
        It allows to retrieve information about the database tables and table metadata. Furthermore, it exposes query capabilities and
        management operations for jobs. Jobs are used in Activiti for various things such as timers, asynchronous continuations, 
        delayed suspension/activation, etc. Later on, these topics will be discussed in more detail.
    </p><p>
    For more detailed information on the service operations and the engine API, see <a class="ulink" href="../javadocs/index.html" target="_top">the javadocs</a>. 
    </p></div><div class="section" title="Exception strategy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1048E"></a>Exception strategy</h2></div></div></div><p>The base exception in Activiti is the <code class="literal">org.activiti.engine.ActivitiException</code>, an unchecked exception. This exception can be thrown at all times by the API, but 'expected' exceptions that 
    happen in specific methods are documented in the <a class="ulink" href="../javadocs/index.html" target="_top"> the javadocs</a>.
    For example, an extract from <code class="literal">TaskService</code>:
    </p><pre class="prettyprint">/**
 * Called when the task is successfully executed.
 * @param taskId the id of the task to complete, cannot be null.
 * @throws ActivitiObjectNotFoundException when no task exists with the given id.
 */
 void complete(String taskId);
    </pre><p>
    
    In the example above, when an id is passed for which no task exists, an exception will be thrown. Also, since the javadoc <span class="bold"><strong>explicitly states that taskId cannot be null, an <code class="literal">ActivitiIllegalArgumentException</code> will be thrown when <code class="literal">null</code> is passed</strong></span>.
    </p><p>
      Even though we want to avoid a big exception hierarchy, the following subclasses were added which are thrown in specific cases. All other errors that occur during process-execution or API-invokation that don't fit into the
      possible exceptions below, are throw as regular <code class="literal">ActivitiExceptions</code>s.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
             <code class="literal">ActivitiWrongDbException</code>: Thrown when the Activiti engine discovers a mismatch between the database schema version and the engine version. 
            </p></li><li class="listitem"><p>
             <code class="literal">ActivitiOptimisticLockingException</code>: Thrown when an optimistic locking occurs in the data store caused by concurrent access of the same data entry. 
            </p></li><li class="listitem"><p>
             <code class="literal">ActivitiClassLoadingException</code>: Thrown when a class requested to load was not found or when an error occurred while loading it (e.g. JavaDelegates, TaskListeners, ...).
            </p></li><li class="listitem"><p>
             <code class="literal">ActivitiObjectNotFoundException: </code> Thrown when an object that is requested or actioned on does not exist.
            </p></li><li class="listitem"><p>
             <code class="literal">ActivitiIllegalArgumentException: </code> An exception indicating that an illegal argument has been supplied in an Activiti API-call, an illegal value was configured in the engine's configuration or an illegal value has been supplied or an illegal value is used in a process-definition.
            </p></li><li class="listitem"><p>
             <code class="literal">ActivitiTaskAlreadyClaimedException: Thrown when a task is already claimed, when the <code class="literal">taskService.claim(...)</code> is called.</code> .
            </p></li></ul></div><p>
    </p></div><div class="section" title="Working with the Activiti services"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="api.services"></a>Working with the Activiti services</h2></div></div></div><p>
        As described above, the way to interact with the Activiti engine is through the services exposed by 
        an instance of the <code class="literal">org.activiti.engine.ProcessEngine</code> class. The following 
        code snippets assume you have a working Activiti environment, ie. you have access
        to a valid <code class="literal">org.activiti.engine.ProcessEngine</code>. If you simply want to try
        out the code below, you can download or clone the 
        <a class="ulink" href="https://github.com/Activiti/activiti-unit-test-template" target="_top">Activiti unit test template</a>,
        import it in your IDE and add a <code class="literal">testUserguideCode()</code> method to the 
        <code class="literal">org.activiti.MyUnitTest</code> unit test.  
    </p><p>
        The end goal of this little tutorial will be to have a working business process which mimics
        a simplistic vacation request process at a company:
        </p><div class="mediaobject" align="center"><img src="images/api.vacationRequest.png" align="middle"></div><p>
    </p><div class="section" title="Deploying the process"><div class="titlepage"><div><div><h3 class="title"><a name="api.services.deployment"></a>Deploying the process</h3></div></div></div><p>
            Everything that is related to 'static' data (such as process definitions) are accessed
            through the <span class="bold"><strong>RepositoryService</strong></span>. Conceptually, every such
            static piece of data is content of the 'repository' of the Activiti engine. 
        </p><p>
            Create a new xml file <code class="literal">VacationRequest.bpmn20.xml</code> in the <code class="literal">src/test/resources/org/activiti/test</code>
            resource folder (or anywhere else if you're not using the unit test template) with the 
            following content. Note that this section won't explain the xml constructs being used in the example above. 
            Please read <a class="link" href="#bpmn20" title="Chapter&nbsp;7.&nbsp;BPMN 2.0 Introduction">the bpmn 2.0 chapter</a> to become familiar
            with these constructs first if needed.
            </p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;definitions id="definitions"
             targetNamespace="http://activiti.org/bpmn20" 
             xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:activiti="http://activiti.org/bpmn"&gt;
  
  &lt;process id="vacationRequest" name="Vacation request"&gt;
  
    &lt;startEvent id="request" activiti:initiator="employeeName"&gt;
      &lt;extensionElements&gt;
        &lt;activiti:formProperty id="numberOfDays" name="Number of days" type="long" value="1" required="true"/&gt;
        &lt;activiti:formProperty id="startDate" name="First day of holiday (dd-MM-yyy)" datePattern="dd-MM-yyyy hh:mm" type="date" required="true" /&gt;
        &lt;activiti:formProperty id="vacationMotivation" name="Motivation" type="string" /&gt;
      &lt;/extensionElements&gt;
    &lt;/startEvent&gt;
    &lt;sequenceFlow id="flow1" sourceRef="request" targetRef="handleRequest" /&gt;
    
    &lt;userTask id="handleRequest" name="Handle vacation request" &gt;
      &lt;documentation&gt;
        ${employeeName} would like to take ${numberOfDays} day(s) of vacation (Motivation: ${vacationMotivation}).
      &lt;/documentation&gt; 
      &lt;extensionElements&gt;
         &lt;activiti:formProperty id="vacationApproved" name="Do you approve this vacation" type="enum" required="true"&gt;
          &lt;activiti:value id="true" name="Approve" /&gt;
          &lt;activiti:value id="false" name="Reject" /&gt;
        &lt;/activiti:formProperty&gt;
        &lt;activiti:formProperty id="managerMotivation" name="Motivation" type="string" /&gt;
      &lt;/extensionElements&gt;
      &lt;potentialOwner&gt;
        &lt;resourceAssignmentExpression&gt;
          &lt;formalExpression&gt;management&lt;/formalExpression&gt;
        &lt;/resourceAssignmentExpression&gt;
      &lt;/potentialOwner&gt;         
    &lt;/userTask&gt;
    &lt;sequenceFlow id="flow2" sourceRef="handleRequest" targetRef="requestApprovedDecision" /&gt;
    
    &lt;exclusiveGateway id="requestApprovedDecision" name="Request approved?" /&gt;
    &lt;sequenceFlow id="flow3" sourceRef="requestApprovedDecision" targetRef="sendApprovalMail"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${vacationApproved == 'true'}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    
    &lt;task id="sendApprovalMail" name="Send confirmation e-mail" /&gt;
    &lt;sequenceFlow id="flow4" sourceRef="sendApprovalMail" targetRef="theEnd1" /&gt;
    &lt;endEvent id="theEnd1" /&gt;
    
    &lt;sequenceFlow id="flow5" sourceRef="requestApprovedDecision" targetRef="adjustVacationRequestTask"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${vacationApproved == 'false'}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    
    &lt;userTask id="adjustVacationRequestTask" name="Adjust vacation request"&gt;
      &lt;documentation&gt;
        Your manager has disapproved your vacation request for ${numberOfDays} days.
        Reason: ${managerMotivation}
      &lt;/documentation&gt;
      &lt;extensionElements&gt;
        &lt;activiti:formProperty id="numberOfDays" name="Number of days" value="${numberOfDays}" type="long" required="true"/&gt;
        &lt;activiti:formProperty id="startDate" name="First day of holiday (dd-MM-yyy)" value="${startDate}" datePattern="dd-MM-yyyy hh:mm" type="date" required="true" /&gt;
        &lt;activiti:formProperty id="vacationMotivation" name="Motivation" value="${vacationMotivation}" type="string" /&gt;
        &lt;activiti:formProperty id="resendRequest" name="Resend vacation request to manager?" type="enum" required="true"&gt;
          &lt;activiti:value id="true" name="Yes" /&gt;
          &lt;activiti:value id="false" name="No" /&gt;
        &lt;/activiti:formProperty&gt;
      &lt;/extensionElements&gt;
      &lt;humanPerformer&gt;
        &lt;resourceAssignmentExpression&gt;
          &lt;formalExpression&gt;${employeeName}&lt;/formalExpression&gt;
        &lt;/resourceAssignmentExpression&gt;
      &lt;/humanPerformer&gt;  
    &lt;/userTask&gt;
    &lt;sequenceFlow id="flow6" sourceRef="adjustVacationRequestTask" targetRef="resendRequestDecision" /&gt;
    
    &lt;exclusiveGateway id="resendRequestDecision" name="Resend request?" /&gt;
    &lt;sequenceFlow id="flow7" sourceRef="resendRequestDecision" targetRef="handleRequest"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${resendRequest == 'true'}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    
     &lt;sequenceFlow id="flow8" sourceRef="resendRequestDecision" targetRef="theEnd2"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${resendRequest == 'false'}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    &lt;endEvent id="theEnd2" /&gt;
      
  &lt;/process&gt;
  
&lt;/definitions&gt;
            </pre><p>
        </p><p>
            To make this process known to the Activiti engine, we must 'deploy' it first.
            Deploying means that the engine will parse the BPMN 2.0 xml to something executable
            and a new database record will be added for each process definition included in the 
            'deployment'. This way, when the engine reboots, it will still know all of the 
            'deployed' processes:
            </p><pre class="prettyprint">
ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();
RepositoryService repositoryService = processEngine.getRepositoryService();
repositoryService.createDeployment()
  .addClasspathResource("org/activiti/test/VacationRequest.bpmn20.xml")
  .deploy();
      
Log.info("Number of process definitions: " + repositoryService.createProcessDefinitionQuery().count());            
            </pre><p>
        </p><p>
            Read more about deployment in the <a class="link" href="#chDeployment" title="Chapter&nbsp;6.&nbsp;Deployment">deployment chapter</a>.
        </p></div><div class="section" title="Starting a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="api.services.start.processinstance"></a>Starting a process instance</h3></div></div></div><p>
            After deploying the process definition to the Activiti engine, we can start new process instances from it.
            For each process definition, there are typically many process instances. The process definition
            is the 'blueprint', while a process instance is a runtime execution of it. 
        </p><p>
            Everything related to the runtime state of processes can be found in the <span class="bold"><strong>RuntimeService</strong></span>.
            There are various way to start a new process instance. In the following snippet, we use the 
            key we defined in the process definition xml to start the process instance. We're also providing
            some process variables at process instance start, because the description of the first 
            user task will use these in its expressions. Process variables are commonly used because they give meaning to the process instances for a certain process definition. Typically, the process variables
            are what make process instances differ from one another.
            </p><pre class="prettyprint">
Map&lt;String, Object&gt; variables = new HashMap&lt;String, Object&gt;();
variables.put("employeeName", "Kermit");
variables.put("numberOfDays", new Integer(4));
variables.put("vacationMotivation", "I'm really tired!");
      
RuntimeService runtimeService = processEngine.getRuntimeService();
ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("vacationRequest", variables);
      
// Verify that we started a new process instance
Log.info("Number of process instances: " + runtimeService.createProcessInstanceQuery().count());           
            </pre><p>
        </p></div><div class="section" title="Completing tasks"><div class="titlepage"><div><div><h3 class="title"><a name="api.services.tasls"></a>Completing tasks</h3></div></div></div><p>
            When the process starts, the first step will be a user task. This is a step that must be performed
            by a user of the system. Typically, such a user will have an 'inbox of tasks' which lists
            all the tasks that need to be done by this user. Following code snippet shows how such a query might be performed:
            </p><pre class="prettyprint">
// Fetch all tasks for the management group
TaskService taskService = processEngine.getTaskService();
List&lt;Task&gt; tasks = taskService.createTaskQuery().taskCandidateGroup("management").list();
for (Task task : tasks) {
  Log.info("Task available: " + task.getName());
}            
            </pre><p>
        </p><p>
            To continue the process instance, we need to finish this task. For the Activiti engine,
            this means you need to <code class="literal">complete</code> the task. Following snippet shows how this is done:
            </p><pre class="prettyprint">
Task task = tasks.get(0);
      
Map&lt;String, Object&gt; taskVariables = new HashMap&lt;String, Object&gt;();
taskVariables.put("vacationApproved", "false");
taskVariables.put("managerMotivation", "We have a tight deadline!");
taskService.complete(task.getId(), taskVariables);            
            </pre><p>
            The process instance will now continue to the next step. In this example, this will
            be the first step again, because the task was not approved.
        </p></div><div class="section" title="Suspending and activating a process"><div class="titlepage"><div><div><h3 class="title"><a name="api.services.suspend"></a>Suspending and activating a process</h3></div></div></div><p>
            It's possible to suspend a process definition. When a process definition is suspended,
            new process instance can't be created (an exception will be thrown). Suspending 
            the process definition is done through the <code class="literal">RepositoryService</code>:
            </p><pre class="prettyprint">
repositoryService.suspendProcessDefinitionByKey("vacationRequest");
try {
  runtimeService.startProcessInstanceByKey("vacationRequest");
} catch (ActivitiException e) {
  e.printStackTrace();
}            
            </pre><p> 
            To reactivate a process definition, simply call one of the <code class="literal">repositoryService.activateProcessDefinitionXXX</code> methods.
        </p><p>
            It's also possible to suspend a process instance. When suspended, the process cannot
            be continued (e.g. completing a task throws an exception) and no jobs (such as timers)
            will executed. Suspending a process instance can be done by calling the 
            <code class="literal">runtimeService.suspendProcessInstance</code> method.
            Activating the process instance again is done by calling the <code class="literal">runtimeService.activateProcessInstanceXXX</code> methods.
        </p></div><div class="section" title="Further reading"><div class="titlepage"><div><div><h3 class="title"><a name="api.services"></a>Further reading</h3></div></div></div><p>
            We've barely scratched the surface in the previous sections regarding Activiti functionality.
            We will expand these sections further in the future with additional coverage of the Activiti API.
            Of course, as with any open source project, the best way to learn is to inspect the code
            and read the Javadocs!
        </p></div></div><div class="section" title="Query API"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryAPI"></a>Query API</h2></div></div></div><p>
      There are two ways of querying data from the engine: The query API and native queries. The Query API allows to 
      program completely typesafe queries with a fluent API. You can add various conditions to your queries 
      (all of which are applied together as a logical AND) and precisely one ordering. The following code shows an example:
      </p><pre class="prettyprint">
      List&lt;Task&gt; tasks = taskService.createTaskQuery()
         .taskAssignee("kermit")
         .processVariableValueEquals("orderId", "0815")
         .orderByDueDate().asc()
         .list();
      </pre><p>
      
      Sometimes you need more powerful queries, e.g. queries using an OR operator or restrictions you can not express using the Query API.
      For these cases, we introduced native queries, which allow you to write your own SQL queries. The return type is defined by the Query object you use
      and the data is mapped into the correct objects, e.g. Task, ProcessInstance, Execution, etc.... Since the query will be fired at the database you have to 
      use table and column names as they are defined in the database; this requires some knowledge about the internal data structure and it is recommended to use native
      queries with care. The table names can be retrieved via the API to keep the dependency as small as possible.
      
      </p><pre class="prettyprint">
      List&lt;Task&gt; tasks = taskService.createNativeTaskQuery()
        .sql("SELECT count(*) FROM " + managementService.getTableName(Task.class) + " T WHERE T.NAME_ = #{taskName}")
        .parameter("taskName", "gonzoTask")
        .list();

      long count = taskService.createNativeTaskQuery()
        .sql("SELECT count(*) FROM " + managementService.getTableName(Task.class) + " T1, "
               + managementService.getTableName(VariableInstanceEntity.class) + " V1 WHERE V1.TASK_ID_ = T1.ID_")
        .count();
      </pre><p>
    </p></div><div class="section" title="Expressions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apiExpressions"></a>Expressions</h2></div></div></div><p>Activiti uses UEL for expression-resolving. UEL stands for <span class="emphasis"><em>Unified Expression Language</em></span> and is part of the EE6 specification (see
          <a class="ulink" href="http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html" target="_top">
          the EE6 specification</a> for detailed information). To support all features of latest UEL spec on ALL environments, we use a modified version of JUEL.
    </p><p>
      Expressions can be used in for example <a class="link" href="#bpmnJavaServiceTaskXML" title="XML representation">Java Service tasks</a>, <a class="link" href="#executionListeners" title="Execution listener">Execution Listeners</a>, <a class="link" href="#taskListeners" title="Task listener">Task Listeners</a> and  <a class="link" href="#conditionalSequenceFlowXml" title="XML representation">Conditional sequence flows</a>.
      Although there are 2 types of expressions, value-expression and method-expression, Activiti abstracts  this so they can both be used where an <code class="literal">expression</code> is needed.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Value expression</strong></span>: resolves to a value. By default, all process variables are available to use. Also all spring-beans (if using Spring) are available to use in expressions. 
            
            Some examples:
</p><pre class="prettyprint">${myVar}
${myBean.myProperty}</pre><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Method expression</strong></span>: invokes a method, with or without parameters. <span class="bold"><strong>When invoking a method without parameters, be sure to add empty parentheses after the method-name (as this distinguishes the expression from a value expression).</strong></span>
            The passed parameters can be literal values or expressions that are resolved themselves. Examples:
</p><pre class="prettyprint">${printer.print()}
${myBean.addNewOrder('orderName')}
${myBean.doSomething(myVar, execution)}
</pre><p>
          </p></li></ul></div><p>
      
      Note that these expressions support resolving primitives (incl. comparing them), beans, lists, arrays and maps.
    </p><p>
      On top of all process variables, there are a few default objects available to be used in expressions:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">execution</code>: The <code class="literal">DelegateExecution</code> that holds additional information about the ongoing execution.</p></li><li class="listitem"><p><code class="literal">task</code>: The <code class="literal">DelegateTask</code> that holds additional information about the current Task. <span class="bold"><strong>Note: Only works in expressions evaluated from task listeners.</strong></span></p></li><li class="listitem"><p><code class="literal">authenticatedUserId</code>: The id of the user that is currently authenticated. If no user is authenticated, the variable is not available.</p></li></ul></div><p>
    </p><p>
      For more concrete usage and examples, check out <a class="link" href="#springExpressions" title="Expressions">Expressions in Spring</a>, <a class="link" href="#bpmnJavaServiceTaskXML" title="XML representation">Java Service tasks</a>, <a class="link" href="#executionListeners" title="Execution listener">Execution Listeners</a>,  <a class="link" href="#taskListeners" title="Task listener">Task Listeners</a> or <a class="link" href="#conditionalSequenceFlowXml" title="XML representation">Conditional sequence flows</a>.
    </p></div><div class="section" title="Unit testing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apiUnitTesting"></a>Unit testing</h2></div></div></div><p>
      Business processes are an integral part of software projects and they should be tested
      in the same way normal application logic is tested: with unit tests. Since Activiti
      is an embeddable Java engine, writing unit tests for business processes is as simple
      as writing regular unit tests.
    </p><p>
      Activiti supports both JUnit versions 3 and 4 styles of unit testing. In the JUnit 3 style,
      the <code class="literal">org.activiti.engine.test.ActivitiTestCase</code> must be extended.
      This will make the ProcessEngine and the services available through protected member fields. 
      In the <code class="literal">setup()</code> of the test,  the processEngine will be initialized
      by default with the <code class="literal">activiti.cfg.xml</code> resource on the classpath.  To specify a different
      configuration file, override the <span class="emphasis"><em>getConfigurationResource()</em></span> method.
      Process engines are cached statically over multiple unit tests when the configuration resource
      is the same. 
   </p><p>
    By extending <code class="literal">ActivitiTestCase</code>, you can annotate test methods 
    with <code class="literal">org.activiti.engine.test.Deployment</code>. Before the test is run,
    a resource file of the form <code class="literal">testClassName.testMethod.bpmn20.xml</code>
    in the same package as the test class, will be deployed. At the end of the test, the deployment
    will be deleted, including all related process instances, tasks, etc. The <code class="literal">Deployment</code>
    annotation also supports setting the resource location explicitly. See 
    <a class="ulink" href="../javadocs/org/activiti/engine/test/Deployment.html" target="_top">the Javadocs</a> for more
    details.
   </p><p>
     Taking all that in account, a JUnit 3 style test looks as follows.
     </p><pre class="prettyprint">
public class MyBusinessProcessTest extends ActivitiTestCase {
   
  @Deployment
  public void testSimpleProcess() {
    runtimeService.startProcessInstanceByKey("simpleProcess");
    
    Task task = taskService.createTaskQuery().singleResult();
    assertEquals("My Task", task.getName());
    
    taskService.complete(task.getId());
    assertEquals(0, runtimeService.createProcessInstanceQuery().count());
  }
}      
      </pre><p>
    </p><p>
      To get the same functionality when using the JUnit 4 style of writing unit tests, 
      the <code class="literal">org.activiti.engine.test.ActivitiRule</code> Rule must be 
      used. Through this rule, the process engine and services are available through getters. As with the 
      <code class="literal">ActivitiTestCase</code> (see above), including this <code class="literal">Rule</code> will enable the use
      of the <code class="literal">org.activiti.engine.test.Deployment</code> annotation (see above for an explanation
      of its use and configuration) and it will look for the default configuration file on the classpath. 
      Process engines are statically cached over multiple unit tests when using the same configuration resource. 
   </p><p>
     The following code snippet shows an example of using the JUnit 4 style of testing and the 
     usage of the <code class="literal">ActivitiRule</code>. 
     </p><pre class="prettyprint">
public class MyBusinessProcessTest {
  
  @Rule
  public ActivitiRule activitiRule = new ActivitiRule();
  
  @Test
  @Deployment
  public void ruleUsageExample() {
    RuntimeService runtimeService = activitiRule.getRuntimeService();
    runtimeService.startProcessInstanceByKey("ruleUsage");
    
    TaskService taskService = activitiRule.getTaskService();
    Task task = taskService.createTaskQuery().singleResult();
    assertEquals("My Task", task.getName());
    
    taskService.complete(task.getId());
    assertEquals(0, runtimeService.createProcessInstanceQuery().count());
  }
}
      </pre><p>
    </p></div><div class="section" title="Debugging unit tests"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apiDebuggingUnitTest"></a>Debugging unit tests</h2></div></div></div><p>
      When using the in-memory H2 database for unit tests, the following instructions allow to
      easily inspect the data in the Activiti database during a debugging session. The 
      screenshots here are taken in Eclipse, but the mechanism should be similar for other 
      IDEs. 
    </p><p>
      Suppose we have put a <span class="emphasis"><em>breakpoint</em></span> somewhere in our unit test.
      In Eclipse this is done by double-clicking in the left border next to the code:
      </p><div class="mediaobject" align="center"><img src="images/api.test.debug.breakpoint.png" align="middle"></div><p>
      If we now run the unit test in <span class="emphasis"><em>debug</em></span> mode (right-click in test class,
      select 'Run as' and then 'JUnit test'), the test execution halts at our breakpoint, where
      we can now inspect the variables of our test as shown in the right upper panel.
      </p><div class="mediaobject" align="center"><img src="images/api.test.debug.view.png" align="middle"></div><p>
      To inspect the Activiti data, open up the <span class="emphasis"><em>'Display'</em></span> window 
      (if this window isn't there, open Window-&gt;Show View-&gt;Other and select <span class="emphasis"><em>Display</em></span>.) 
      and type (code completion is available) <code class="literal">org.h2.tools.Server.createWebServer("-web").start()</code>
      </p><div class="mediaobject" align="center"><img src="images/api.test.debug.start.h2.server.png" align="middle"></div><p>
      Select the line you've just typed and right-click on it. Now select 'Display' (or execute the shortcut instead of right-clicking)
      </p><div class="mediaobject" align="center"><img src="images/api.test.debug.start.h2.server.2.png" align="middle"></div><p>
      Now open up a browser and go to <a class="ulink" href="http://localhost:8082" target="_top">http://localhost:8082</a>,
      and fill in the JDBC URL to the in-memory database (by default this is <code class="literal">jdbc:h2:mem:activiti</code>),
      and hit the connect button.
      </p><div class="mediaobject" align="center"><img src="images/api.test.debug.h2.login.png" align="middle"></div><p>
      You can now see the Activiti data and use it to understand how and why your unit test is executing your
      process in a certain way.
      </p><div class="mediaobject" align="center"><img src="images/api.test.debug.h2.tables.png" align="middle"></div><p>
    </p></div><div class="section" title="The process engine in a web application"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apiProcessEngineInWebApp"></a>The process engine in a web application</h2></div></div></div><p>
      The <code class="literal">ProcessEngine</code> is a thread-safe class and can
      easily be shared among multiple threads. In a web application, this 
      means it is possible to create the process engine once when the container boots
      and shut down the engine when the container goes down.
    </p><p>
      The following code snippet shows how you can write a simple <code class="literal">ServletContextListener</code>
      to initialize and destroy process engines in a plain Servlet environment:
      </p><pre class="prettyprint">
public class ProcessEnginesServletContextListener implements ServletContextListener {
  
  public void contextInitialized(ServletContextEvent servletContextEvent) {
    ProcessEngines.init();
  }

  public void contextDestroyed(ServletContextEvent servletContextEvent) {
    ProcessEngines.destroy();
  }

}</pre><p>
      The <code class="literal">contextInitialized</code> method will delegate to <code class="literal">ProcessEngines.init()</code>. That will
      look for <code class="literal">activiti.cfg.xml</code> resource files on the classpath,
      and create a <code class="literal">ProcessEngine</code> for the given configurations (e.g. multiple jars with a configuration file).
      If you have multiple such resource files on the classpath, make sure they all have different names.
      When the process engine is needed, it can be fetched using </p><pre class="prettyprint">ProcessEngines.getDefaultProcessEngine()</pre><p>
      or </p><pre class="prettyprint">ProcessEngines.getProcessEngine("myName");</pre><p>
      Of course, it is also possible to use any of the variants of creating a process engine, 
      as described in the <a class="link" href="#configuration" title="Creating a ProcessEngine">configuration section</a>.
    </p><p>The <code class="literal">contextDestroyed</code> method of the context-listener delegates to <code class="literal">ProcessEngines.destroy()</code>.
    That will properly close all initialized process engines.
    </p></div></div><div class="chapter" title="Chapter&nbsp;5.&nbsp;Spring integration"><div class="titlepage"><div><div><h2 class="title"><a name="springintegration"></a>Chapter&nbsp;5.&nbsp;Spring integration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N10689">ProcessEngineFactoryBean</a></span></dt><dt><span class="section"><a href="#N106A1">Transactions</a></span></dt><dt><span class="section"><a href="#springExpressions">Expressions</a></span></dt><dt><span class="section"><a href="#N10700">Automatic resource deployment</a></span></dt><dt><span class="section"><a href="#springUnitTest">Unit testing</a></span></dt></dl></div><p>While you can definitely use Activiti without Spring, we've provided some very nice integration features
  that are explained in this chapter.  
  </p><div class="section" title="ProcessEngineFactoryBean"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10689"></a>ProcessEngineFactoryBean</h2></div></div></div><p>
      The <code class="literal">ProcessEngine</code> can be configured as a regular Spring bean.
      The starting point of the integration is the class
	    <code class="literal">org.activiti.spring.ProcessEngineFactoryBean</code>. That bean
	    takes a process engine configuration and creates the process engine. 
	    This means that the creation and configuration of properties for Spring is the same as documented in the <a class="link" href="#configuration" title="Creating a ProcessEngine">configuration section</a>.
	    For Spring integration the configuration and engine beans will look like this:    
    </p><pre class="prettyprint">
&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt;
    ...
&lt;/bean&gt;
  
&lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt;
  &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt;
&lt;/bean&gt;
  </pre><p>
      Note that the <code class="literal">processEngineConfiguration</code> bean now uses the 
      <code class="literal">org.activiti.spring.SpringProcessEngineConfiguration</code> class.
    </p></div><div class="section" title="Transactions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N106A1"></a>Transactions</h2></div></div></div><p>We'll explain the <code class="literal">SpringTransactionIntegrationTest</code> found in the Spring examples
    of the distribution step by step.  
    Below is the Spring configuration file that we use in this example 
    (you can find it in SpringTransactionIntegrationTest-context.xml). The section shown below 
    contains the dataSource, transactionManager, processEngine and the Activiti
    Engine services.
    </p><p>
      When passing the DataSource to the <code class="literal">SpringProcessEngineConfiguration</code> (using property "dataSource"), Activiti uses a <code class="literal">org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy</code> internally, which wraps the passed DataSource.
      This is done to make sure the SQL connections retrieved from the DataSource and the Spring transactions play well together.
      This implies that it's no longer needed to proxy the dataSource yourself in Spring configuration, although it's still allowed to pass a <code class="literal">TransactionAwareDataSourceProxy</code> into the <code class="literal">SpringProcessEngineConfiguration</code>.
      In this case no additional wrapping will occur.
    </p><p>
      <span class="bold"><strong>Make sure when declaring a <code class="literal">TransactionAwareDataSourceProxy</code> in Spring configuration yourself, that you don't use it for resources that are already aware of Spring-transactions (e.g. DataSourceTransactionManager and JPATransactionManager need the un-proxied dataSource).</strong></span>
    </p><pre class="prettyprint">
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
                           http://www.springframework.org/schema/tx      http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"&gt;

  &lt;bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource"&gt;
    &lt;property name="driverClass" value="org.h2.Driver" /&gt;
    &lt;property name="url" value="jdbc:h2:mem:activiti;DB_CLOSE_DELAY=1000" /&gt;
    &lt;property name="username" value="sa" /&gt;
    &lt;property name="password" value="" /&gt;
  &lt;/bean&gt;

  &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
    &lt;property name="dataSource" ref="dataSource" /&gt;
  &lt;/bean&gt;
  
  &lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt;
    &lt;property name="dataSource" ref="dataSource" /&gt;
    &lt;property name="transactionManager" ref="transactionManager" /&gt;
    &lt;property name="databaseSchemaUpdate" value="true" /&gt;
    &lt;property name="jobExecutorActivate" value="false" /&gt;
  &lt;/bean&gt;
  
  &lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt;
    &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt;
  &lt;/bean&gt;
  
  &lt;bean id="repositoryService" factory-bean="processEngine" factory-method="getRepositoryService" /&gt;
  &lt;bean id="runtimeService" factory-bean="processEngine" factory-method="getRuntimeService" /&gt;
  &lt;bean id="taskService" factory-bean="processEngine" factory-method="getTaskService" /&gt;
  &lt;bean id="historyService" factory-bean="processEngine" factory-method="getHistoryService" /&gt;
  &lt;bean id="managementService" factory-bean="processEngine" factory-method="getManagementService" /&gt;

...</pre><p>The remainder of that Spring configuration file contains the beans and configuration that we'll use in this particular
  example:</p><pre class="prettyprint">
&lt;beans&gt;  
  ...
  &lt;tx:annotation-driven transaction-manager="transactionManager"/&gt;

  &lt;bean id="userBean" class="org.activiti.spring.test.UserBean"&gt;
    &lt;property name="runtimeService" ref="runtimeService" /&gt;
  &lt;/bean&gt;

  &lt;bean id="printer" class="org.activiti.spring.test.Printer" /&gt;

&lt;/beans&gt;</pre><p>First the application context is created with any of the Spring ways to do that. In this 
    example you could use a classpath XML resource to configure our Spring application context:
    </p><pre class="prettyprint">ClassPathXmlApplicationContext applicationContext = 
    new ClassPathXmlApplicationContext("org/activiti/examples/spring/SpringTransactionIntegrationTest-context.xml");</pre><p>
    or, since it is a test:
    </p><pre class="prettyprint">@ContextConfiguration("classpath:org/activiti/spring/test/transaction/SpringTransactionIntegrationTest-context.xml")</pre><p>
    </p><p>Then we can get the service beans and invoke methods on them.  The ProcessEngineFactoryBean will have 
    added an extra interceptor to the services that applies Propagation.REQUIRED transaction semantics on 
    the Activiti service methods.  So, for example, we can use the repositoryService to deploy
    a process like this:  
    </p><pre class="prettyprint">RepositoryService repositoryService = (RepositoryService) applicationContext.getBean("repositoryService");
String deploymentId = repositoryService
  .createDeployment()
  .addClasspathResource("org/activiti/spring/test/hello.bpmn20.xml")
  .deploy()
  .getId();
    </pre><p>The other way around also works.  In this case, the Spring transaction will 
    be around the userBean.hello() method and the Activiti service method invocation will join that 
    same transaction. 
    </p><pre class="prettyprint">UserBean userBean = (UserBean) applicationContext.getBean("userBean");
userBean.hello();</pre><p>The UserBean looks like this.  Remember from above in the Spring bean configuration we injected the 
    repositoryService into the userBean.</p><pre class="prettyprint">public class UserBean {

  /** injected by Spring */
  private RuntimeService runtimeService;

  @Transactional
  public void hello() {
    // here you can do transactional stuff in your domain model
    // and it will be combined in the same transaction as 
    // the startProcessInstanceByKey to the Activiti RuntimeService
    runtimeService.startProcessInstanceByKey("helloProcess");
  }
  
  public void setRuntimeService(RuntimeService runtimeService) {
    this.runtimeService = runtimeService;
  }
}</pre></div><div class="section" title="Expressions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="springExpressions"></a>Expressions</h2></div></div></div><p>When using the ProcessEngineFactoryBean, by default, all <a class="link" href="#apiExpressions" title="Expressions">expressions</a> in the BPMN processes
    will also 'see' all the Spring beans. It's possible to limit the beans you want to expose in expressions or even exposing no beans at all using a map that you can configure. 
    The example below exposes a single bean (printer), available to use under the key "printer". 
    <span class="bold"><strong>To have NO beans exposed at all, just pass an empty list as 'beans' property on the SpringProcessEngineConfiguration. 
    When no 'beans' property is set, all Spring beans in the context will be available. </strong></span>
    </p><pre class="prettyprint">
&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt;
  ...
  &lt;property name="beans"&gt;
    &lt;map&gt;
      &lt;entry key="printer" value-ref="printer" /&gt;
    &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;
  
  &lt;bean id="printer" class="org.activiti.examples.spring.Printer" /&gt;
    </pre><p>Now the exposed beans can be used in expressions: for example, the SpringTransactionIntegrationTest <code class="literal">hello.bpmn20.xml</code>
    shows how a method on a Spring bean can be invoked using a UEL method expression:
    </p><pre class="prettyprint">&lt;definitions id="definitions" ...&gt;
  
  &lt;process id="helloProcess"&gt;
  
    &lt;startEvent id="start" /&gt;
    &lt;sequenceFlow id="flow1" sourceRef="start" targetRef="print" /&gt;
    
    &lt;serviceTask id="print" <span class="bold"><strong>activiti:expression="#{printer.printMessage()}"</strong></span> /&gt;
    &lt;sequenceFlow id="flow2" sourceRef="print" targetRef="end" /&gt;
    
    &lt;endEvent id="end" /&gt;
    
  &lt;/process&gt;

&lt;/definitions&gt;</pre><p>Where <code class="literal">Printer</code> looks like this:</p><pre class="prettyprint">public class Printer {

  public void printMessage() {
    System.out.println("hello world");
  }
}</pre><p>And the Spring bean configuration (also shown above) looks like this:</p><pre class="prettyprint">&lt;beans ...&gt;
  ...

  &lt;bean id="printer" class="org.activiti.examples.spring.Printer" /&gt;

&lt;/beans&gt;</pre></div><div class="section" title="Automatic resource deployment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10700"></a>Automatic resource deployment</h2></div></div></div><p>Spring integration also has a special feature for deploying resources.  In the process engine
    configuration, you can specify a set of resources. When the process engine is created,
    all those resources will be scanned and deployed.  There is filtering
    in place that prevents duplicate deployments.  Only when the resources actually have changed, 
    will new deployments be deployed to the Activiti DB. This makes sense in a lot of use case,
    where the Spring container is rebooted often (e.g. testing).
    </p><p>Here's an example:</p><pre class="prettyprint">
&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt;
  ...
  <span class="bold"><strong>&lt;property name="deploymentResources" value="classpath*:/org/activiti/spring/test/autodeployment/autodeploy.*.bpmn20.xml" /&gt;</strong></span>
&lt;/bean&gt;
  
&lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt;
  &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt;
&lt;/bean&gt;</pre></div><div class="section" title="Unit testing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="springUnitTest"></a>Unit testing</h2></div></div></div><p>
      When integrating with Spring, business processes can be tested very easily using the
      standard <a class="link" href="#apiUnitTesting" title="Unit testing">Activiti testing facilities</a>.
      The following example shows how a business process is tested in a typical Spring-based unit test:
      </p><pre class="prettyprint">
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:org/activiti/spring/test/junit4/springTypicalUsageTest-context.xml")
public class MyBusinessProcessTest {
  
  @Autowired
  private RuntimeService runtimeService;
  
  @Autowired
  private TaskService taskService;
  
  @Autowired
  @Rule
  public ActivitiRule activitiSpringRule;
  
  @Test
  @Deployment
  public void simpleProcessTest() {
    runtimeService.startProcessInstanceByKey("simpleProcess");
    Task task = taskService.createTaskQuery().singleResult();
    assertEquals("My Task", task.getName());
  
    taskService.complete(task.getId());
    assertEquals(0, runtimeService.createProcessInstanceQuery().count());
   
  }
}      
      </pre><p>
      Note that for this to work, you need to define a <span class="emphasis"><em>org.activiti.engine.test.ActivitiRule</em></span>
      bean in the Spring configuration (which is injected by auto-wiring in the example above). 
      </p><pre class="prettyprint">
&lt;bean id="activitiRule" class="org.activiti.engine.test.ActivitiRule"&gt;
  &lt;property name="processEngine" ref="processEngine" /&gt;
&lt;/bean&gt;        
      </pre><p>
    </p></div></div><div class="chapter" title="Chapter&nbsp;6.&nbsp;Deployment"><div class="titlepage"><div><div><h2 class="title"><a name="chDeployment"></a>Chapter&nbsp;6.&nbsp;Deployment</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N10724">Business archives</a></span></dt><dd><dl><dt><span class="section"><a href="#N10738">Deploying programmatically</a></span></dt><dt><span class="section"><a href="#deploymentWithExplorer">Deploying with Activiti Explorer</a></span></dt></dl></dd><dt><span class="section"><a href="#N1075C">External resources</a></span></dt><dd><dl><dt><span class="section"><a href="#N10761">Java classes</a></span></dt><dt><span class="section"><a href="#N1076D">Using Spring beans from a process</a></span></dt><dt><span class="section"><a href="#N1077F">Creating a single app</a></span></dt></dl></dd><dt><span class="section"><a href="#versioningOfProcessDefinitions">Versioning of process definitions</a></span></dt><dt><span class="section"><a href="#providingProcessDiagram">Providing a process diagram</a></span></dt><dt><span class="section"><a href="#generatingProcessDiagram">Generating a process diagram</a></span></dt><dt><span class="section"><a href="#deploymentCategory">Category</a></span></dt></dl></div><div class="section" title="Business archives"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10724"></a>Business archives</h2></div></div></div><p>To deploy processes, they have to be wrapped in a business archive.  A business archive is the unit 
    of deployment to an Activiti Engine. A business archive is equivalent to a zip file.  It can contain 
    BPMN 2.0 processes, task forms, rules and any other type of file.  In general, a business archive 
    contains a collection of named resources.  
    </p><p>When a business archive is deployed, it is scanned for BPMN files with a <code class="literal">.bpmn20.xml</code> or <code class="literal">.bpmn</code> extension.
    Each of those will be parsed and may contain multiple process definitions.  
    </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Java classes present in the business archive <span class="bold"><strong>will not be added to the classpath</strong></span>. All custom classes used in process definitions in the business archive (for example Java service tasks or event listener implementations) should be present
        on the activiti-engine's classpath in order to run the processes. 
      </p></div><div class="section" title="Deploying programmatically"><div class="titlepage"><div><div><h3 class="title"><a name="N10738"></a>Deploying programmatically</h3></div></div></div><p>Deploying a business archive from a zip file can be done like this: 
	    </p><pre class="prettyprint">String barFileName = "path/to/process-one.bar";
ZipInputStream inputStream = new ZipInputStream(new FileInputStream(barFileName));
    
repositoryService.createDeployment()
    .name("process-one.bar")
    .addZipInputStream(inputStream)
    .deploy();
	</pre><p>It's also possible to build a deployment from individual resources. 
	    See the javadocs for more details.</p></div><div class="section" title="Deploying with Activiti Explorer"><div class="titlepage"><div><div><h3 class="title"><a name="deploymentWithExplorer"></a>Deploying with Activiti Explorer</h3></div></div></div><p>
        The Activiti Explorer webapp allows uploading bar files (and single <code class="literal">bpmn20.xml</code> files) through the webapp user interface.
        Choose the <span class="emphasis"><em>Management tab</em></span> and click on <span class="emphasis"><em>Deployment</em></span>:
        </p><div class="mediaobject" align="center"><img src="images/deployment.explorer.png" align="middle"></div><p>
        A popup window now allows you to select a file from your computer, or you can simply drag and drop
        to the designated area (if your browser supports it).
        </p><div class="mediaobject" align="center"><img src="images/deployment.explorer.2.png" align="middle"></div><p>
      </p></div></div><div class="section" title="External resources"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1075C"></a>External resources</h2></div></div></div><p>Process definitions live in the Activiti database. These process 
    definitions can reference delegation classes when using Service Tasks or  
    execution listeners or Spring beans from the Activiti configuration file.
    These classes and the Spring configuration file have to be available 
    to all process engines that may execute the process definitions.
    </p><div class="section" title="Java classes"><div class="titlepage"><div><div><h3 class="title"><a name="N10761"></a>Java classes</h3></div></div></div><p>All custom classes that are used in your process (e.g. JavaDelegates used in Service Tasks or event-listeners, TaskListeners, ...) should be 
      present on the engine's classpath when an instance of the process is started.</p><p>During deployment of a business archive however, those classes don't have to be present on the classpath.  
      This means that your delegation classes don't have to be on the classpath when deploying a new 
      business archive with Ant.
      </p><p>When you are using the demo setup and you want to add your custom classes, you should add a jar containing your classes to the activiti-explorer or activiti-rest webapp lib. Don't forget to include the dependencies of your custom classes (if any) as well. Alternatively, you can include your dependencies in the libraries directory of your Tomcat installation, <code class="literal">${tomcat.home}/lib</code>.
      </p></div><div class="section" title="Using Spring beans from a process"><div class="titlepage"><div><div><h3 class="title"><a name="N1076D"></a>Using Spring beans from a process</h3></div></div></div><p>When expressions or scripts use Spring beans, those beans have to be available to the engine when executing the process definition.
      If you are building your own webapp and you configure your process engine in your context as described in 
      <a class="link" href="#springintegration" title="Chapter&nbsp;5.&nbsp;Spring integration">the spring integration section</a>, that is straightforward.
      But bear in mind that you also should update the Activiti rest webapp with that context if you use it.
      You can do that by replacing the <code class="literal">activiti.cfg.xml</code> in the <code class="literal">activiti-rest/lib/activiti-cfg.jar</code> JAR file
      with an <code class="literal">activiti-context.xml</code> file containing your Spring context configuration.
      </p></div><div class="section" title="Creating a single app"><div class="titlepage"><div><div><h3 class="title"><a name="N1077F"></a>Creating a single app</h3></div></div></div><p>Instead of making sure that all process engines have all the delegation classes 
      on their classpath and use the right Spring configuration, you may consider including the Activiti rest webapp inside your own webapp so that there is only
      a single <code class="literal">ProcessEngine</code>.
      </p></div></div><div class="section" title="Versioning of process definitions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="versioningOfProcessDefinitions"></a>Versioning of process definitions</h2></div></div></div><p>BPMN doesn't have a notion of versioning.  That is actually good because the executable BPMN process 
    file will probably live in a version control system repository (e.g. Subversion, Git or Mercurial) as part of your development project.  Versions of process definitions
    are created during deployment. During deployment, Activiti will assign a version to the <code class="literal">ProcessDefinition</code> 
    before it is stored in the Activiti DB.
    </p><p>For each process definition in a business archive the following steps are performed to 
    initialize the properties <code class="literal">key</code>, <code class="literal">version</code>, <code class="literal">name</code> and <code class="literal">id</code>:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The process definition <code class="literal">id</code> attribute in the XML file is used as the process definition <code class="literal">key</code> property.</p></li><li class="listitem"><p>The process definition <code class="literal">name</code> attribute in the XML file is used as the process definition <code class="literal">name</code> property.
        If the name attribute is not specified, then id attribute is used as the name.
      </p></li><li class="listitem"><p>The first time a process with a particular key is deployed, version 1 is assigned.  For all subsequent deployments of
      process definitions with the same key, the version will be set 1 higher then the maximum currently deployed version. The key property
      is used to distinguish process definitions.</p></li><li class="listitem"><p>
          The id property is set to {processDefinitionKey}:{processDefinitionVersion}:{generated-id},
          where <code class="literal">generated-id</code> is a unique number added to guarantee uniqueness
          of the process id for the process definition caches in a clustered environment.
        </p></li></ul></div><p>
      Take for example the following process
</p><pre class="prettyprint">
&lt;definitions id="myDefinitions" &gt;
  &lt;process id="myProcess" name="My important process" &gt;
    ...      
</pre><p>    
      When deploying this process definition, the process definition in the database will look like this:
      </p><div class="table"><a name="N107BF"></a><p class="title"><b>Table&nbsp;6.1.&nbsp;</b></p><div class="table-contents"><table summary="" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>id</th><th>key</th><th>name</th><th>version</th></tr></thead><tbody><tr><td>myProcess:1:676</td><td>myProcess</td><td>My important process</td><td>1</td></tr></tbody></table></div></div><p><br class="table-break">
      Suppose we now deploy an updated version of the same process (e.g. changing some user tasks),
      but the <code class="literal">id</code> of the process definition remains the same. The process
      definition table will now contain the following entries:
       </p><div class="table"><a name="N107DB"></a><p class="title"><b>Table&nbsp;6.2.&nbsp;</b></p><div class="table-contents"><table summary="" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>id</th><th>key</th><th>name</th><th>version</th></tr></thead><tbody><tr><td>myProcess:1:676</td><td>myProcess</td><td>My important process</td><td>1</td></tr><tr><td>myProcess:2:870</td><td>myProcess</td><td>My important process</td><td>2</td></tr></tbody></table></div></div><p><br class="table-break"> 
      When the <code class="literal">runtimeService.startProcessInstanceByKey("myProcess")</code> is called,
      it will now use the process definition with version <code class="literal">2</code>, as this is the 
      latest version of the process definition.
    </p><p>
      Should we create a second process, as defined below and deploy this to Activiti, a third row will be added to the table. 
    </p><pre class="prettyprint">
&lt;definitions id="myNewDefinitions" &gt;
  &lt;process id="myNewProcess" name="My important process" &gt;
    ...      
</pre><p>
    The table will look like this:
  </p><div class="table"><a name="N10809"></a><p class="title"><b>Table&nbsp;6.3.&nbsp;</b></p><div class="table-contents"><table summary="" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>id</th><th>key</th><th>name</th><th>version</th></tr></thead><tbody><tr><td>myProcess:1:676</td><td>myProcess</td><td>My important process</td><td>1</td></tr><tr><td>myProcess:2:870</td><td>myProcess</td><td>My important process</td><td>2</td></tr><tr><td>myNewProcess:1:1033</td><td>myNewProcess</td><td>My important process</td><td>1</td></tr></tbody></table></div></div><br class="table-break"><p>
    Note how the key for the new process is different from our first process. Even though the name is the same (we should probably have changed that too), Activiti only considers the <code class="literal">id</code> attribute when distinguishing processes. The new process is therefore deployed with version 1.
  </p></div><div class="section" title="Providing a process diagram"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="providingProcessDiagram"></a>Providing a process diagram</h2></div></div></div><p>
      A process diagram image can be added to a deployment. This image will be stored in 
      the Activiti repository and is accessible through the API. This image is also used
      to visualize the process in Activiti Explorer.
    </p><p>
      Suppose we have a process on our classpath, <code class="literal">org/activiti/expenseProcess.bpmn20.xml</code> that has a process key 'expense'.
      The following naming conventions for the process diagram image apply (in this specific order):
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            If an image resource exists in the deployment that has a name of the BPMN 2.0 XML file name
            concatenated with the process key and an image suffix, this image is used. In our example,
            this would be <code class="literal">org/activiti/expenseProcess.expense.png</code> (or .jpg/gif).
            In case you have multiple images defined in one BPMN 2.0 XML file, this approach 
            makes most sense. Each diagram image will then have the process key in its file name.
          </p></li><li class="listitem"><p>
            If no such image exists, am image resource in the deployment matching the name
            of the BPMN 2.0 XML file is searched for. In our example this would be 
            <code class="literal">org/activiti/expenseProcess.png</code>. Note that this means that
            <span class="bold"><strong>every process definition</strong></span> defined in the same 
            BPMN 2.0 file has the same process diagram image. In case there is only one 
            process definition in each BPMN 2.0 XML file, this is obviously not a problem.
          </p></li></ul></div><p>
     </p><p>
      Example when deploying programmatically:
      </p><pre class="prettyprint">
repositoryService.createDeployment()
  .name("expense-process.bar")
  .addClasspathResource("org/activiti/expenseProcess.bpmn20.xml")
  .addClasspathResource("org/activiti/expenseProcess.png")
  .deploy();</pre><p>
       The image resource can be retrieved through the API afterwards:
       </p><pre class="prettyprint">
  ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()
                                                         .processDefinitionKey("expense")
                                                         .singleResult();
  
  <span class="bold"><strong>String diagramResourceName = processDefinition.getDiagramResourceName();</strong></span>
  InputStream imageStream = repositoryService.getResourceAsStream(processDefinition.getDeploymentId(), diagramResourceName);
       </pre><p>
     </p></div><div class="section" title="Generating a process diagram"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generatingProcessDiagram"></a>Generating a process diagram</h2></div></div></div><p>
      In case no image is provided in the deployment, as described in the <a class="link" href="#providingProcessDiagram" title="Providing a process diagram">previous section</a>,
      the Activiti engine will generate a diagram image if the process definition
      contains the necessary 'diagram interchange' information.
    </p><p>
      The resource can be retrieved in exactly the same way as when <a class="link" href="#providingProcessDiagram" title="Providing a process diagram">
      an image is provided</a> in the deployment.
      </p><div class="mediaobject" align="center"><img src="images/deployment.image.generation.png" align="middle"></div><p>
    </p><p>
      If, for some reason, it is not necessary or wanted to generate a diagram during deployment the 
      <code class="literal">isCreateDiagramOnDeploy</code> property can be set on the process engine configuration:
      </p><pre class="prettyprint">&lt;property name="createDiagramOnDeploy" value="false" /&gt;</pre><p>
      No diagram will be generated now.
    </p></div><div class="section" title="Category"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="deploymentCategory"></a>Category</h2></div></div></div><p>
    Both deployments and process definitions have user defined categories.  The process definition 
    category is initialized value in attribute in the BPMN file: <code class="literal">&lt;definitions ... targetNamespace="yourCategory" ...</code>
    </p><p>The deployment category can be specified in the API like this:</p><pre class="prettyprint">repositoryService
    .createDeployment()
    .category("yourCategory")
    ...
    .deploy();</pre></div></div><div class="chapter" title="Chapter&nbsp;7.&nbsp;BPMN 2.0 Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="bpmn20"></a>Chapter&nbsp;7.&nbsp;BPMN 2.0 Introduction</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#whatIsBpmn">What is BPMN?</a></span></dt><dt><span class="section"><a href="#bpmnDefiningProcess">Defining a process</a></span></dt><dt><span class="section"><a href="#10minutetutorial">Getting started: 10 minute tutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmn10MinuteTutorialPrerequisites">Prerequisites</a></span></dt><dt><span class="section"><a href="#bpmn10MinuteTutorialGoal">Goal</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleUseCase">Use case</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleDiagram">Process diagram</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleXml">XML representation</a></span></dt><dt><span class="section"><a href="#bpmnFirstExamplStartProcess">Starting a process instance</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleCandidateList">Task lists</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleClaimTask">Claiming the task</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleCompleteTask">Completing the task</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleEndingProcess">Ending the process</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleCode">Code overview</a></span></dt><dt><span class="section"><a href="#bpmnFirstExampleFutureEnhancements">Future enhancements</a></span></dt></dl></dd></dl></div><div class="section" title="What is BPMN?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="whatIsBpmn"></a>What is BPMN?</h2></div></div></div><p>
		  See our <a class="ulink" href="http://activiti.org/faq.html#WhatIsBpmn20" target="_top">FAQ entry on BPMN 2.0</a>.
		</p></div><div class="section" title="Defining a process"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnDefiningProcess"></a>Defining a process</h2></div></div></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This introduction is written under the assumption you are using the <a class="ulink" href="http://eclipse.org/" target="_top">Eclipse IDE</a> to create and edit files. Very little of this is specific to Eclipse, however. You can use any other tool you prefer to create XML files containing BPMN 2.0.
      </p></div><p>
		  Create a new XML file (<span class="emphasis"><em>right-click on any project and select New-&gt;Other-&gt;XML-XML File</em></span>) and give it a name.
		  Make sure that the file <span class="bold"><strong>ends with .bpmn20.xml or .bpmn</strong></span>, since
		  otherwise the engine won't pick up this file for deployment.
		  </p><div class="mediaobject" align="center"><img src="images/new.bpmn.procdef.png" align="middle"></div><p>
		</p><p>
		  The root element of the BPMN 2.0 schema is the <code class="literal">definitions</code> element.
		  Within this element, multiple process definitions can be defined (although we advise to have only one
		  process definition in each file, since this simplifies maintenance later in the development process).
		  An empty process definition looks as listed below. Note that the minimal <code class="literal">definitions</code> element
		  only needs the <code class="literal">xmlns</code> and <code class="literal">targetNamespace</code> declaration.
		  The <code class="literal">targetNamespace</code> can be anything, and is useful for categorizing process definitions.
		  </p><pre class="prettyprint">
&lt;definitions 
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:activiti="http://activiti.org/bpmn"
  targetNamespace="Examples"&gt;

  &lt;process id="myProcess" name="My First Process"&gt;
    ..
  &lt;/process&gt;

&lt;/definitions&gt;</pre><p>
		</p><p>
		  Optionally you can also add the online schema location of the BPMN 2.0 XML schema,
		  as an alternative to the XML catalog configuration in Eclipse.
		  </p><pre class="prettyprint">
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL 
                    http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd</pre><p>
		</p><p>
		  The <code class="literal">process</code> element has two attributes:
		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		        <span class="bold"><strong>id</strong></span>: this attribute is <span class="bold"><strong>required</strong></span>
		        and maps to the <span class="bold"><strong>key</strong></span> property of an Activiti <code class="literal">
		        ProcessDefinition</code> object.
		        This <code class="literal">id</code> can then be used to start a new process instance of the process definition, through the 
		        <code class="literal">startProcessInstanceByKey</code> method on the <code class="literal">RuntimeService</code>.
		        This method will always take the <span class="bold"><strong>latest deployed version</strong></span>
		        of the process definition.
		        </p><pre class="prettyprint">ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("myProcess");</pre><p>
		        Important to note here is that this is not the same as calling the 
		        <code class="literal">startProcessInstanceById</code> method. This method expects the String id 
		        that was generated at deploy time by the Activiti engine, and can be retrieved by calling the
		        <code class="literal">processDefinition.getId()</code> method.
		        The format of the generated id is <span class="bold"><strong>'key:version'</strong></span>, 
		        and the length is <span class="bold"><strong>constrained to 64 characters</strong></span>.
		        If you get an <code class="literal">ActivitiException</code> stating that the generated id
		        is too long, limit the text in the <span class="emphasis"><em>key</em></span> field of the process.
		      </p></li><li class="listitem"><p>
            <span class="bold"><strong>name</strong></span>: this attribute is <span class="bold"><strong>optional</strong></span>
            and maps to the <span class="emphasis"><em>name</em></span> property of a <code class="literal">ProcessDefinition</code>.
            The engine itself doesn't use this property, so it can be used for displaying a more
            human-friendly name in a user interface, for example.
          </p></li></ul></div><p>
		</p></div><div class="section" title="Getting started: 10 minute tutorial"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="10minutetutorial"></a>Getting started: 10 minute tutorial</h2></div></div></div><p>
      In this section we will cover a (very simple) business process that we will use to introduce
      some basic Activiti concepts and the Activiti API. 
    </p><div class="section" title="Prerequisites"><div class="titlepage"><div><div><h3 class="title"><a name="bpmn10MinuteTutorialPrerequisites"></a>Prerequisites</h3></div></div></div><p>
        This tutorial assumes that you have the <a class="link" href="#demo.setup.one.minute.version" title="One minute version">Activiti demo setup running</a>.
      </p></div><div class="section" title="Goal"><div class="titlepage"><div><div><h3 class="title"><a name="bpmn10MinuteTutorialGoal"></a>Goal</h3></div></div></div><p>
        The goal of this tutorial is to learn about Activiti and some basic BPMN 2.0 concepts.
        The end result will be a simple Java SE program that deploys a process definition,
        and interacts with this process through the Activiti engine API. We'll also touch
        some of the tooling around Activiti. Of course, what you'll learn in this tutorial can 
        also be used when building your own web applications around your business processes.
      </p></div><div class="section" title="Use case"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleUseCase"></a>Use case</h3></div></div></div><p>
				The use case is straightforward: we have a company, let's call it BPMCorp.
				In BPMCorp, a financial report needs to be written every month for the
				company shareholders. This is the responsibility of the accountancy
				department. When the report is finished, one of the members of the
				upper management needs to approve the document before it is sent to all
				the shareholders.
      </p></div><div class="section" title="Process diagram"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleDiagram"></a>Process diagram</h3></div></div></div><p>
				The business process as described above can be graphically visualized
				using the  
				<a class="link" href="#activitiDesigner" title="Chapter&nbsp;12.&nbsp;Eclipse Designer">Activiti Designer</a>. However, for this tutorial
				we'll type the XML ourselves, as we learn the most this way at this point. 
				The graphical BPMN 2.0 notation of our process looks like this:
			  </p><div class="mediaobject" align="center"><img src="images/financial.report.example.diagram.png" align="middle"></div><p>
        What we see is a <a class="link" href="#bpmnNoneStartEvent" title="None Start Event">none Start Event</a> (circle on the left),
        followed by two <a class="link" href="#bpmnUserTask" title="User Task">User Tasks</a>:
        <span class="emphasis"><em>'Write monthly financial report'</em></span> and 
        <span class="emphasis"><em>'Verify monthly financial report'</em></span>, ending in
        a <a class="link" href="#bpmnNoneEndEvent" title="None End Event">none end event</a> (circle with thick border on the right).
      </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleXml"></a>XML representation</h3></div></div></div><p>
        The XML version of this business process (<span class="emphasis"><em>FinancialReportProcess.bpmn20.xml</em></span>) looks as shown below.
        It's easy to recognize the main elements of our process (click on the links
        for going to the detailed section of that BPMN 2.0 construct):
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              The <a class="link" href="#bpmnNoneStartEvent" title="None Start Event">(none) start event</a>
              learns us what the <span class="emphasis"><em>entry point</em></span> to the process is.
            </p></li><li class="listitem"><p>
              The <a class="link" href="#bpmnUserTask" title="User Task">User Tasks</a> declarations are the representation
              of the human tasks of our process. Note that the first task is assigned
              to the <span class="emphasis"><em>accountancy</em></span> group, while the second task is 
              assigned to the <span class="emphasis"><em>management</em></span> group.
              See <a class="link" href="#bpmnUserTaskAssignment" title="User assignment">the section on user task assignment</a>
              for more information on how users and groups can be assigned
              to user tasks.
            </p></li><li class="listitem"><p>
              The process ends when the <a class="link" href="#bpmnNoneEndEvent" title="None End Event">none end event</a>
              is reached.
            </p></li><li class="listitem"><p>
              The elements are connected with each other through <a class="link" href="#bpmnSequenceFlow" title="Sequence Flow">sequence flows</a>.
              These sequence flow have a <code class="literal">source</code> and <code class="literal">target</code>,
              defining the <span class="emphasis"><em>direction</em></span> of the sequence flow.
            </p></li></ul></div><p>
        </p><pre class="prettyprint">
&lt;definitions id="definitions"
  targetNamespace="http://activiti.org/bpmn20" 
  xmlns:activiti="http://activiti.org/bpmn"
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"&gt;
	
	&lt;process id="financialReport" name="Monthly financial report reminder process"&gt;
	  
	  &lt;startEvent id="theStart" /&gt;
	    
	  &lt;sequenceFlow id='flow1' sourceRef='theStart' targetRef='writeReportTask' /&gt;
	    
	  &lt;userTask id="writeReportTask" name="Write monthly financial report" &gt;
	    &lt;documentation&gt;
	      Write monthly financial report for publication to shareholders.
	    &lt;/documentation&gt;
	    &lt;potentialOwner&gt;
	      &lt;resourceAssignmentExpression&gt;
	        &lt;formalExpression&gt;accountancy&lt;/formalExpression&gt;
	      &lt;/resourceAssignmentExpression&gt;
	    &lt;/potentialOwner&gt;
	  &lt;/userTask&gt;
	    
	  &lt;sequenceFlow id='flow2' sourceRef='writeReportTask' targetRef='verifyReportTask' /&gt;
	      
	  &lt;userTask id="verifyReportTask" name="Verify monthly financial report" &gt;
	    &lt;documentation&gt;
	      Verify monthly financial report composed by the accountancy department.
	      This financial report is going to be sent to all the company shareholders.  
	    &lt;/documentation&gt;
	    &lt;potentialOwner&gt;
	      &lt;resourceAssignmentExpression&gt;
	        &lt;formalExpression&gt;management&lt;/formalExpression&gt;
	      &lt;/resourceAssignmentExpression&gt;
	    &lt;/potentialOwner&gt;
	  &lt;/userTask&gt;
	    
	  &lt;sequenceFlow id='flow3' sourceRef='verifyReportTask' targetRef='theEnd' /&gt;
	      
	  &lt;endEvent id="theEnd" /&gt;
	      
	&lt;/process&gt;
	
&lt;/definitions&gt;</pre><p>        
      </p></div><div class="section" title="Starting a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExamplStartProcess"></a>Starting a process instance</h3></div></div></div><p>
        We have now created the <span class="bold"><strong>process definition</strong></span> of our
        business process. From such a process
        definition, we can create <span class="bold"><strong>process instances</strong></span>.
        In this case, one process instance would match with the creation and verification
        of a single financial report for a particular month. All the process instances share the same process definition.
      </p><p>
        To be able to create process instances from a given process definition,
        we must first <span class="bold"><strong>deploy</strong></span> this process definition.
        Deploying a process definition means two things:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              The process definition will be stored in the persistent datastore that
              is configured for your Activiti engine. So by deploying our business process,
              we make sure that the engine will find the process definition after an engine reboot.
            </p></li><li class="listitem"><p>
              The BPMN 2.0 process file will be parsed to an in-memory object model
              that can be manipulated through the Activiti API.
            </p></li></ul></div><p>
        More information on deployment can be found <a class="link" href="#chDeployment" title="Chapter&nbsp;6.&nbsp;Deployment">in the dedicated section on deployment</a>.
      </p><p>
        As described in that section, deployment can happen in several
        ways. One way is through the API as follows. Note that all interaction with the Activiti
        engine happens through its <span class="emphasis"><em>services</em></span>.
        </p><pre class="prettyprint">Deployment deployment = repositoryService.createDeployment()
  .addClasspathResource("FinancialReportProcess.bpmn20.xml")
  .deploy();</pre><p>
      </p><p>
        Now we can start a new process instance using 
        the <code class="literal">id</code> we defined in the process definition (see process element in the XML file).
        Note that this <code class="literal">id</code> in Activiti terminology
        is called the <span class="bold"><strong>key</strong></span>.
        </p><pre class="prettyprint">ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("financialReport");</pre><p>
        This will create a process instance that
        will first go through the start event. After the start event, it follows all the outgoing
        sequence flows (only one in this case) and the first task ('write monthly financial report')
        is reached. The Activiti engine will now store a task in the persistent database. 
        At this point, the user or group assignments attached to the task are resolved and also stored in the 
        database. It's important to note that the Activiti engine will continue process execution steps
        until it reaches a <span class="emphasis"><em>wait state</em></span>, such as the user task. At such a wait state,
        the current state of the process instance is stored in the database. It remains in that
        state until a user decides to complete their task. At that point, the engine will continue 
        until it reaches a new wait state or the end of the process. When the engine reboots or crashes
        in the meantime, the state of the process is safe and well in the database.
      </p><p>
        After the task is created, the <code class="literal">startProcessInstanceByKey</code> method will return
        since the user task activity is a <span class="emphasis"><em>wait state</em></span>. In this case, the task is assigned to a group, which means that every
        member of the group is a <span class="bold"><strong>candidate</strong></span> to perform the task.
      </p><p>
        We can now throw this all together and create a simple Java program. Create a new 
        Eclipse project and add the Activiti jars and dependencies to its classpath 
        (these can be found in the <span class="emphasis"><em>libs</em></span> folder of the Activiti distribution).
        Before we can call the Activiti services, we must first construct a <code class="literal">ProcessEngine</code>
        that gives us access to the services. Here we use the <span class="emphasis"><em>'standalone'</em></span> configuration,
        which constructs a <code class="literal">ProcessEngine</code> that uses the database also used in the demo setup.
      </p><p>
        You can download the process definition XML <a class="ulink" href="images/FinancialReportProcess.bpmn20.xml" target="_top">here</a>. This file
        contains the XML as shown above, but also contains the necessary BPMN 
        <a class="link" href="#generatingProcessDiagram" title="Generating a process diagram">diagram interchange information</a> to
        visualize the process in the Activiti tools.
      </p><p>
        </p><pre class="prettyprint">
public static void main(String[] args) {
    
  // Create Activiti process engine
  ProcessEngine processEngine = ProcessEngineConfiguration
    .createStandaloneProcessEngineConfiguration()
    .buildProcessEngine();
  
  // Get Activiti services
  RepositoryService repositoryService = processEngine.getRepositoryService();
  RuntimeService runtimeService = processEngine.getRuntimeService();
  
  // Deploy the process definition
  repositoryService.createDeployment()
    .addClasspathResource("FinancialReportProcess.bpmn20.xml")
    .deploy();
    
  // Start a process instance
  runtimeService.startProcessInstanceByKey("financialReport");
}</pre><p>
      </p></div><div class="section" title="Task lists"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleCandidateList"></a>Task lists</h3></div></div></div><p>
        We can now retrieve this task through the <code class="literal">TaskService</code> by adding the following logic:
        </p><pre class="prettyprint">List&lt;Task&gt; tasks = taskService.createTaskQuery().taskCandidateUser("kermit").list();</pre><p>
        Note that the user we pass to this operation needs to be a member of 
        the <span class="emphasis"><em>accountancy</em></span> group, since that was declared in the process definition:
        </p><pre class="prettyprint">
&lt;potentialOwner&gt;
  &lt;resourceAssignmentExpression&gt;
    &lt;formalExpression&gt;<span class="bold"><strong>accountancy</strong></span>&lt;/formalExpression&gt;
  &lt;/resourceAssignmentExpression&gt;
&lt;/potentialOwner&gt;</pre><p>
     
        We could also use the task query API to get the same results using the name of the group.
        We can now add the following logic to our code:
         </p><pre class="prettyprint">
TaskService taskService = processEngine.getTaskService();
List&lt;Task&gt; tasks = taskService.createTaskQuery().taskCandidateGroup("accountancy").list();</pre><p>
</p><p>
        Since we've configured our <code class="literal">ProcessEngine</code> to use the same database as the demo setup is using,
        we can now log into <a class="ulink" href="http://localhost:8080/activiti-explorer/" target="_top">Activiti Explorer</a> 
        (login with fozzie/fozzie), and we will find that we can start our business process after
        selecting the <span class="emphasis"><em>Processes</em></span> page and
        and clicking on the <span class="emphasis"><em>'Start Process'</em></span> link in the <span class="emphasis"><em>'Actions'</em></span> column corresponding to the <span class="emphasis"><em>'Monthly financial report'</em></span> process.
        
        </p><div class="mediaobject" align="center"><img src="images/bpmn.financial.report.example.start.process.png" align="middle"></div><p>
        
        As explained, the process will execute up to the first user task. Since we're logged in
        as kermit, we can see that there is a new candidate task available for him after we've started
        a process instance. Select the <span class="emphasis"><em>Tasks</em></span> page to view this new task. 
        Note that even if the process was started by someone else, the task would still
        be visible as a candidate task to everyone in the accountancy group.
        
        </p><div class="mediaobject" align="center"><img src="images/bpmn.financial.report.example.task.assigned.png" align="middle"></div><p>
        
      </p></div><div class="section" title="Claiming the task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleClaimTask"></a>Claiming the task</h3></div></div></div><p>
        An accountant now needs to <span class="bold"><strong>claim the task</strong></span>. By claiming the
        task, the specific user will become the <span class="bold"><strong>assignee</strong></span> of the task
        and the task will disappear from every task list of the other members of the accountancy group.
        Claiming a task is programmatically done as follows:
        </p><pre class="prettyprint">taskService.claim(task.getId(), "fozzie");</pre><p>
        The task is now in the <span class="bold"><strong>personal task list of the one
        that claimed the task</strong></span>.
        </p><pre class="prettyprint">List&lt;Task&gt; tasks = taskService.createTaskQuery().taskAssignee("fozzie").list();</pre><p>
      </p><p>
        In the Activiti Explorer UI, clicking the <span class="emphasis"><em>claim</em></span> button will
        call the same operation. The task will now move to the personal task list of the logged
        on user. You also see that the assignee of the task changed to the current logged in user.
        
       </p><div class="mediaobject" align="center"><img src="images/bpmn.financial.report.example.claim.task.png" align="middle"></div><p>
      </p></div><div class="section" title="Completing the task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleCompleteTask"></a>Completing the task</h3></div></div></div><p>
        The accountant can now start working on the financial report. Once the report is finished,
        he can <span class="bold"><strong>complete the task</strong></span>, which means that all
        work for that task is done.
        </p><pre class="prettyprint">taskService.complete(task.getId());</pre><p>
      </p><p>
        For the Activiti engine, this is an external signal that the process instance execution
        must be continued. The task itself is removed from the runtime data.
        The single outgoing transition out of the task is followed, moving
        the execution to the second task (<span class="emphasis"><em>'verification of the report'</em></span>). 
        The same mechanism as described for the first task will now
        be used to assign the second task, with the small difference that the task will be assigned to the 
        <span class="emphasis"><em>management</em></span> group.
      </p><p>
        In the demo setup, completing the task is done by clicking the <span class="emphasis"><em>complete</em></span>
        button in the task list. Since Fozzie isn't an accountant, we need to log out of
        the Activiti Explorer and login in as <span class="emphasis"><em>kermit</em></span> (who is a manager).
        The second task is now visible in the unassigned task lists.
      </p></div><div class="section" title="Ending the process"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleEndingProcess"></a>Ending the process</h3></div></div></div><p>
        The verification task can be retrieved and claimed in exactly the same way as before.
        Completing this second task will move process execution to the end event, which finishes
        the process instance. The process instance and all related runtime execution data
        are removed from the datastore.
      </p><p>
        When you log into Activiti Explorer you can verify this, since no records will be 
        found in the table where the process executions are stored.
        
         </p><div class="mediaobject" align="center"><img src="images/bpmn.financial.report.example.process.ended.png" align="middle"></div><p> 
      </p><p>
        Programmatically, you can also verify that the process is ended using the <code class="literal">historyService</code>
        </p><pre class="prettyprint">
HistoryService historyService = processEngine.getHistoryService();
HistoricProcessInstance historicProcessInstance = 
historyService.createHistoricProcessInstanceQuery().processInstanceId(procId).singleResult();
System.out.println("Process instance end time: " + historicProcessInstance.getEndTime());</pre><p>
      </p></div><div class="section" title="Code overview"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleCode"></a>Code overview</h3></div></div></div><p>
        Combine all the snippets from previous sections, and you should have something like this
        (this code takes in account that you probably will have started a few process instances
        through the Activiti Explorer UI. As such, it always retrieves a list of tasks instead
        of one task, so it always works):
        </p><pre class="prettyprint">
public class TenMinuteTutorial {
  
  public static void main(String[] args) {
    
    // Create Activiti process engine
    ProcessEngine processEngine = ProcessEngineConfiguration
      .createStandaloneProcessEngineConfiguration()
      .buildProcessEngine();
    
    // Get Activiti services
    RepositoryService repositoryService = processEngine.getRepositoryService();
    RuntimeService runtimeService = processEngine.getRuntimeService();
    
    // Deploy the process definition
    repositoryService.createDeployment()
      .addClasspathResource("FinancialReportProcess.bpmn20.xml")
      .deploy();
    
    // Start a process instance
    String procId = runtimeService.startProcessInstanceByKey("financialReport").getId();
    
    // Get the first task
    TaskService taskService = processEngine.getTaskService();
    List&lt;Task&gt; tasks = taskService.createTaskQuery().taskCandidateGroup("accountancy").list();
    for (Task task : tasks) {
      System.out.println("Following task is available for accountancy group: " + task.getName());
      
      // claim it
      taskService.claim(task.getId(), "fozzie");
    }
    
    // Verify Fozzie can now retrieve the task
    tasks = taskService.createTaskQuery().taskAssignee("fozzie").list();
    for (Task task : tasks) {
      System.out.println("Task for fozzie: " + task.getName());
      
      // Complete the task
      taskService.complete(task.getId());
    }
    
    System.out.println("Number of tasks for fozzie: " 
            + taskService.createTaskQuery().taskAssignee("fozzie").count());
    
    // Retrieve and claim the second task
    tasks = taskService.createTaskQuery().taskCandidateGroup("management").list();
    for (Task task : tasks) {
      System.out.println("Following task is available for accountancy group: " + task.getName());
      taskService.claim(task.getId(), "kermit");
    }
    
    // Completing the second task ends the process
    for (Task task : tasks) {
      taskService.complete(task.getId());
    }
    
    // verify that the process is actually finished
    HistoryService historyService = processEngine.getHistoryService();
    HistoricProcessInstance historicProcessInstance = 
      historyService.createHistoricProcessInstanceQuery().processInstanceId(procId).singleResult();
    System.out.println("Process instance end time: " + historicProcessInstance.getEndTime());
  }

}</pre><p>
      </p><p>
        This code is also available as a unit test shipped with the examples (yes, you should unit test your processes! 
        Read all about it in <a class="link" href="#apiUnitTesting" title="Unit testing">the unit testing section</a>).
      </p></div><div class="section" title="Future enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnFirstExampleFutureEnhancements"></a>Future enhancements</h3></div></div></div><p>
        It's easy to see that this business process is too simple to be usable in reality.
        However, as you are going through the BPMN 2.0 constructs available in Activiti, 
        you will be able to enhance the business process by :
        
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              defining <span class="bold"><strong>gateways</strong></span> that act as decisions.
              This way, a manager could reject the financial report which would recreate
              the task for the accountant. 
            </p></li><li class="listitem"><p>
              declaring and using <span class="bold"><strong>variables</strong></span>,
              such that we can store or reference the report so that it can 
              be visualized in the form.
            </p></li><li class="listitem"><p>
              defining a <span class="bold"><strong>service task</strong></span> at the end of
              the process that will send the report to every shareholder.
            </p></li><li class="listitem"><p>
              etc.
            </p></li></ul></div><p>
      </p></div></div></div><div class="chapter" title="Chapter&nbsp;8.&nbsp;BPMN 2.0 Constructs"><div class="titlepage"><div><div><h2 class="title"><a name="bpmnConstructs"></a>Chapter&nbsp;8.&nbsp;BPMN 2.0 Constructs</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#bpmnCustomExtensions">Custom extensions</a></span></dt><dt><span class="section"><a href="#bpmnEvents">Events</a></span></dt><dd><dl><dt><span class="section"><a href="#eventDefinitions">Event Definitions</a></span></dt><dt><span class="section"><a href="#timerEventDefinitions">Timer Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnErrorEventDefinition">Error Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnSignalEventDefinition">Signal Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnMessageEventDefinition">Message Event Definitions</a></span></dt><dt><span class="section"><a href="#bpmnStartEvents">Start Events</a></span></dt><dt><span class="section"><a href="#bpmnNoneStartEvent">None Start Event</a></span></dt><dt><span class="section"><a href="#bpmnTimerStartEvent">Timer Start Event</a></span></dt><dt><span class="section"><a href="#bpmnMessageStartEvent">Message Start Event</a></span></dt><dt><span class="section"><a href="#bpmnErrorStartEvent">Error Start Event</a></span></dt><dt><span class="section"><a href="#bpmnEndEvent">End Events</a></span></dt><dt><span class="section"><a href="#bpmnNoneEndEvent">None End Event</a></span></dt><dt><span class="section"><a href="#bpmnErrorEndEvent">Error End Event</a></span></dt><dt><span class="section"><a href="#bpmnCancelEndEvent">Cancel End Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryEvent">Boundary Events</a></span></dt><dt><span class="section"><a href="#bpmnTimerBoundaryEvent">Timer Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryErrorEvent">Error Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundarySignalEvent">Signal Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryMessageEvent">Message Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryCancelEvent">Cancel Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnBoundaryCompensationEvent">Compensation Boundary Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateCatchingEvent">Intermediate Catching Events</a></span></dt><dt><span class="section"><a href="#bpmnTimerIntermediateEvent">Timer Intermediate Catching Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateSignalEvent">Signal Intermediate Catching Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateMessageEvent">Message Intermediate Catching Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowEvent">Intermediate Throwing Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowNoneEvent">Intermediate Throwing None Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowSignalEvent">Signal Intermediate Throwing Event</a></span></dt><dt><span class="section"><a href="#bpmnIntermediateThrowCompensationEvent">Compensation Intermediate Throwing Event</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnSequenceFlow">Sequence Flow</a></span></dt><dd><dl><dt><span class="section"><a href="#sequenceFlowDescription">Description</a></span></dt><dt><span class="section"><a href="#sequenceFlowGraphicalNotation">Graphical notation</a></span></dt><dt><span class="section"><a href="#sequenceFlowXml">XML representation</a></span></dt><dt><span class="section"><a href="#bpmnConditionalSequenceFlow">Conditional sequence flow</a></span></dt><dt><span class="section"><a href="#bpmnDefaultSequenceFlow">Default sequence flow</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnGateways">Gateways</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnExclusiveGateway">Exclusive Gateway</a></span></dt><dt><span class="section"><a href="#bpmnParallelGateway">Parallel Gateway</a></span></dt><dt><span class="section"><a href="#bpmnInclusiveGateway">Inclusive Gateway</a></span></dt><dt><span class="section"><a href="#bpmnEventbasedGateway">Event-based Gateway</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnTask">Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnUserTask">User Task</a></span></dt><dt><span class="section"><a href="#bpmnScriptTask">Script Task</a></span></dt><dt><span class="section"><a href="#bpmnJavaServiceTask">Java Service Task</a></span></dt><dt><span class="section"><a href="#bpmnWebserviceTask">Web Service Task</a></span></dt><dt><span class="section"><a href="#bpmnBusinessRuleTask">Business Rule Task</a></span></dt><dt><span class="section"><a href="#bpmnEmailTask">Email Task</a></span></dt><dt><span class="section"><a href="#bpmnMuleTask">Mule Task</a></span></dt><dt><span class="section"><a href="#bpmnCamelTask">Camel Task</a></span></dt><dt><span class="section"><a href="#bpmnManualTask">Manual Task</a></span></dt><dt><span class="section"><a href="#bpmnReceiveTask">Java Receive Task</a></span></dt><dt><span class="section"><a href="#bpmnShellTask">Shell Task</a></span></dt><dt><span class="section"><a href="#executionListeners">Execution listener</a></span></dt><dt><span class="section"><a href="#taskListeners">Task listener</a></span></dt><dt><span class="section"><a href="#bpmnMultiInstance">Multi-instance (for each)</a></span></dt><dt><span class="section"><a href="#bpmnCompensationHandlers">Compensation Handlers</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnSubprocessAndCallActivity">Sub-Processes and Call Activities</a></span></dt><dd><dl><dt><span class="section"><a href="#bpmnSubProcess">Sub-Process</a></span></dt><dt><span class="section"><a href="#bpmnEventSubprocess">Event Sub-Process</a></span></dt><dt><span class="section"><a href="#bpmnTransactionSubprocess">Transaction subprocess</a></span></dt><dt><span class="section"><a href="#bpmnCallActivity">Call activity (subprocess)</a></span></dt></dl></dd><dt><span class="section"><a href="#bpmnConcurrencyAndTransactions">Transactions and Concurrency</a></span></dt><dd><dl><dt><span class="section"><a href="#asyncContinuations">Asynchronous Continuations</a></span></dt><dt><span class="section"><a href="#exclusiveJobs">Exclusive Jobs</a></span></dt></dl></dd><dt><span class="section"><a href="#security">Process Initiation Authorization</a></span></dt></dl></div><p>This chapter covers the BPMN 20 constructs supported by 
	Activiti as well as custom extensions to the BPMN standard.</p><div class="section" title="Custom extensions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnCustomExtensions"></a>Custom extensions</h2></div></div></div><p>
	      The BPMN 2.0 standard is a good thing for all parties involved. End-users don't suffer
	      from a vendor lock-in that comes by depending on a proprietary solution. Frameworks,
	      and particularly open-source frameworks such as Activiti, can implement a solution
	      that has the same (and often better implemented ;-) features as those of a big vendor. 
	      Due to the BPMN 2.0 standard, the transition from such a big vendor solution towards
	      Activiti is an easy and smooth path.  
	    </p><p>
	      The downside of a standard however, is the fact that it is always the result of 
	      many discussions and compromises between different companies (and often visions). 
	      As a developer reading the BPMN 2.0 XML of a process definition, sometimes it feels like 
	      certain constructs or way to do things are too cumbersome.
	      Since Activiti puts ease of development as a top-priority, we introduced something called the
	      <span class="bold"><strong>'Activiti BPMN extensions'</strong></span>.
	      These 'extensions' are new constructs or ways to simplify certain constructs, that
	      are not in the BPMN 2.0 specification.
	    </p><p>
	      Although the BPMN 2.0 specification clearly states that it was made for custom extension,
	      we make sure that:
	      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	            The prerequisite of such a custom extension is that there 
	            <span class="bold"><strong>always</strong></span> must be a simple transformation to
	            the <span class="bold"><strong>standard way of doing things</strong></span>.
	            So when you decide to use a custom extension, you don't have to be afraid 
	            that there is no way back.
	          </p></li><li class="listitem"><p>
	            When using a custom extension, this is always clearly indicated by giving
	            the new XML element, attribute, etc. the <span class="bold"><strong>activiti:</strong></span> 
	            namespace prefix.
	          </p></li><li class="listitem"><p>
	            The goal of these extensions is to eventually push them back into a next version
	            of the BPMN specification, or at least trigger a discussion that can lead to a revision
	            of that specific BPMN construct. 
	          </p></li></ul></div><p> 
	    </p><p>
	      So whether you want to use a custom extension or not, is completely up to you. 
	      Several factors will influence this decision (graphical editor usage, company policy, etc.).
	      We only provide them since we believe that some points in the standard can be done
	      simpler or more efficient. Feel free to give us (positive and/or negative) feedback on 
	      our extensions, or to post new ideas for custom extensions. Who knows, some day your idea
	      might pop up in the specification!.
	    </p></div><div class="section" title="Events"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnEvents"></a>Events</h2></div></div></div><p>
	     Events are used to model something that happens during the lifetime process.
	     Events are always visualized as a circle.
	     
	     In BPMN 2.0, there exist
	     two main event categories: <span class="emphasis"><em>catching</em></span> or <span class="emphasis"><em>throwing</em></span> event.
       </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
             <span class="bold"><strong>Catching: </strong></span>when process execution arrives in the event,
             it will wait for a trigger to happen. The type of trigger is defined by the inner icon
             or the type declaration in the XML. Catching events are visually differentiated from a 
             throwing event by the inner icon that is not filled (i.e. it is white).
           </p></li><li class="listitem"><p>
             <span class="bold"><strong>Throwing: </strong></span>when process execution arrives in the event, a 
              trigger is fired. The type of trigger is defined by the inner icon or the type declaration
              in the XML. Throwing events are visually differentiated from a catching event by
              the inner icon that is filled with black.
           </p></li></ul></div><p>
	     
	    </p><div class="section" title="Event Definitions"><div class="titlepage"><div><div><h3 class="title"><a name="eventDefinitions"></a>Event Definitions</h3></div></div></div><p>Event definitions define the semantics of an event. Without an event definition, an event "does nothing special". For instance a start event 
	  	without and event definition does not specify what exactly starts the process. If we add an event definition to the start event (like for instance a 
	  	timer event definition) we declare what "type" of event starts the process (in the case of a timer event definition the fact that a certain 
	  	point in time is reached).  
	  	</p></div><div class="section" title="Timer Event Definitions"><div class="titlepage"><div><div><h3 class="title"><a name="timerEventDefinitions"></a>Timer Event Definitions</h3></div></div></div><p>Timer events are events which are triggered by defined timer. They can be used as
          <a class="link" href="#bpmnTimerStartEvent" title="Timer Start Event">start event</a>,
              <a class="link" href="#bpmnIntermediateCatchingEvent" title="Intermediate Catching Events">intermediate event</a>
          or <a class="link" href="#bpmnTimerBoundaryEvent" title="Timer Boundary Event">boundary event</a></p><p>
              Timer definition must have exactly one element from the following:
              </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>timeDate</strong></span>. This format specifies fixed date in <a class="ulink" href="http://en.wikipedia.org/wiki/ISO_8601#Dates" target="_top">ISO 8601</a> format, when trigger will be fired. Example:

                      </p><pre class="prettyprint">
&lt;timerEventDefinition&gt;
    &lt;timeDate&gt;2011-03-11T12:13:14&lt;/timeDate&gt;
&lt;/timerEventDefinition&gt;</pre><p>
                      </p></li><li class="listitem"><p>
                        <span class="bold"><strong>timeDuration</strong></span>. To specify how long the timer should run before it is fired, a <span class="emphasis"><em>timeDuration</em></span>
                        can be specified as sub-element of <span class="emphasis"><em>timerEventDefinition</em></span>. The format
                        used is the <a class="ulink" href="http://en.wikipedia.org/wiki/ISO_8601#Durations" target="_top">ISO 8601</a>
                        format (as required by the BPMN 2.0 specification). Example (interval lasting 10 days):
                      </p><pre class="prettyprint">
&lt;timerEventDefinition&gt;
    &lt;timeDuration&gt;P10D&lt;/timeDuration&gt;
&lt;/timerEventDefinition&gt;</pre><p>

                      </p></li><li class="listitem"><p><span class="bold"><strong>timeCycle</strong></span>. Specifies repeating interval, which can
                          be useful for starting process periodically, or for sending multiple reminders for overdue user task. Time cycle element can be in two formats. First is the format of recurring time duration,
                          as specified by <a class="ulink" href="http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals" target="_top">ISO 8601</a> standard. Example (3 repeating intervals, each lasting 10 hours):
                          </p><pre class="prettyprint">
&lt;timerEventDefinition&gt;
    &lt;timeCycle&gt;R3/PT10H&lt;/timeCycle&gt;
&lt;/timerEventDefinition&gt;</pre><p>
                      </p><p>Additionally, you can specify time cycle using cron expressions, example below shows trigger firing every 5 minutes,
                          starting at full hour:
                          </p><pre class="prettyprint">
0 0/5 * * * ?</pre><p>
                          Please see <a class="ulink" href="http://www.quartz-scheduler.org/docs/tutorials/crontrigger.html" target="_top">tutorial</a>
                          for using cron expressions.
                      </p><p>
                            <span class="bold"><strong>Note:</strong></span> The first symbol denotes seconds, not minutes as in normal Unix cron.
                      </p><p>The recurring time duration is better suited for handling relative timers, which are calculated with respect to
                      some particular point in time (e.g. time when user task was started), while cron expressions can handle absolute
                      timers - which is particularly useful for <a class="link" href="#timerStartEventDescription" title="Description">timer start events</a>.</p></li></ul></div><p>
          </p><p>
            You can use expressions for the timer event definitions, by doing so you can influence the timer definition
            based on process variables. The process variables must contain the ISO 8601 (or cron for cycle type) string for appropriate timer type.
  </p><pre class="prettyprint">
  &lt;boundaryEvent id="escalationTimer" cancelActivity="true" attachedToRef="firstLineSupport"&gt;
     <span class="bold"><strong>&lt;timerEventDefinition&gt;
      &lt;timeDuration&gt;${duration}&lt;/timeDuration&gt;
    &lt;/timerEventDefinition&gt;</strong></span>
  &lt;/boundaryEvent&gt;
  </pre><p>
          </p><p>
          <span class="bold"><strong>Note:</strong></span> timers are only fired when
          the job executor is enabled (i.e. <span class="emphasis"><em>jobExecutorActivate</em></span>
          needs to be set to <code class="literal">true</code> in the <code class="literal">activiti.cfg.xml</code>, since the job
          executor is disabled by default).
        </p></div><div class="section" title="Error Event Definitions"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnErrorEventDefinition"></a>Error Event Definitions</h3></div></div></div>
      Error events are events which are triggered by a defined error. 
      
        <p>
		      <span class="bold"><strong>Important note:</strong></span> a BPMN error is NOT the same as a 
		      Java exception. In fact, the two have nothing in common. BPMN error events are a way
		      of modeling <span class="emphasis"><em>business exceptions</em></span>. Java exceptions are handled 
		      in <a class="link" href="#serviceTaskExceptionHandling" title="Handling exceptions">their own specific way</a>.
		</p>
		
		
		An error event definition references an error element. The following is an example of an error end event,
		referencing an error declaration:
		
		 <pre class="prettyprint">
&lt;endEvent id="myErrorEndEvent"&gt;
  &lt;errorEventDefinition errorRef="myError" /&gt;
&lt;/endEvent&gt;     
         </pre>
         
         An error event handler references the same error element to declare that it catches the error.      	      
      </div><div class="section" title="Signal Event Definitions"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnSignalEventDefinition"></a>Signal Event Definitions</h3></div></div></div><p>
      		Signal events are events which reference a named signal. A signal is an event of global scope (broadcast semantics)
      		and is delivered to all active handlers.	
      	</p><p>
      		A signal event definition is declared using the <code class="code">signalEventDefinition</code> element. 
      		The attribute <code class="code">signalRef</code> references a <code class="code">signal</code> element declared as a child element 
      		of the <code class="code">definitions</code> root element. The following is an excerpt of a process where a signal event 
      		is thrown and caught by intermediate events. 
</p><pre class="prettyprint">
&lt;definitions... &gt;
	&lt;!-- declaration of the signal --&gt;
	&lt;signal id="alertSignal" name="alert" /&gt;
	
	&lt;process id="catchSignal"&gt;
		&lt;intermediateThrowEvent id="throwSignalEvent" name="Alert"&gt;
			&lt;!-- signal event definition --&gt;
			&lt;signalEventDefinition signalRef="alertSignal" /&gt;
		&lt;/intermediateThrowEvent&gt;
		...
		&lt;intermediateCatchEvent id="catchSignalEvent" name="On Alert"&gt;
			&lt;!-- signal event definition --&gt;
			&lt;signalEventDefinition signalRef="alertSignal" /&gt;
		&lt;/intermediateCatchEvent&gt;
		...		
	&lt;/process&gt;
&lt;/definitions&gt;
</pre><p>
The <code class="code">signalEventDefinition</code>s reference the same <code class="code">signal</code> element.      		  
        </p><div class="section" title="Throwing a Signal Event"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSignalEventDefinitionThrow"></a>Throwing a Signal Event</h4></div></div></div><p>
	        	A signal can either be thrown by a process instance using a bpmn construct
	        	or programmatically using java API. The following methods on the 
	        	<code class="code">org.activiti.engine.RuntimeService</code> can be used to throw a signal programmatically:
	        	</p><pre class="prettyprint">
RuntimeService.signalEventReceived(String signalName);
RuntimeService.signalEventReceived(String signalName, String executionId);  
	  			</pre><p>	  			 
	  			The difference between <code class="code">signalEventReceived(String signalName);</code> and 
	  			<code class="code">signalEventReceived(String signalName, String executionId);</code> is that the 
	  			first method throws the signal globally to all subscribed handlers (broadcast semantics) 
	  			and the second method delivers the signal to a specific execution only. 
	        </p></div><div class="section" title="Catching a Signal Event"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSignalEventDefinitionCatch"></a>Catching a Signal Event</h4></div></div></div><p>
	    		A signal event can be caught by an intermediate catch signal event or a signal boundary event.
	    	</p></div><div class="section" title="Querying for Signal Event subscriptions"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSignalEventDefinitionQuery"></a>Querying for Signal Event subscriptions</h4></div></div></div>
	    	It is possible to query for all executions which have subscribed to a specific signal event:
	    	<pre class="prettyprint">
 List&lt;Execution&gt; executions = runtimeService.createExecutionQuery()
      .signalEventSubscriptionName("alert")
      .list();
	    	</pre>
	    	We could then use the <code class="code">signalEventReceived(String signalName, String executionId)</code> method 
	    	to deliver the signal to these executions.	    		    	
	    </div><div class="section" title="Signal Event example(s)"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSignalEventDefinitionExample"></a>Signal Event example(s)</h4></div></div></div><p>
		    	The following is an example of two separate processes communicating using signals. The first process is started if an insurance policy is 
		    	updated or changed. After the changes have been reviewed by a human participant, a signal event is thrown, signaling that a policy has changed:	    		    	 
	    	</p><div class="mediaobject" align="center"><img src="images/bpmn.signal.event.throw.png" align="middle"></div><p>
		    	This event can now be caught by all process instances which are interested. The following is an example of a process subscribing to the event.		    			    		    		    	 
	    	</p><div class="mediaobject" align="center"><img src="images/bpmn.signal.event.catch.png" align="middle"></div><p>
	    		<span class="bold"><strong>Note:</strong></span> it is important to understand that a signal event is broadcast to <span class="bold"><strong>all</strong></span> active handlers.
	    		This means in the case of the example given above, that all instances of the process catching the signal would receive the event. 
	    		In this case this is what we want. However, there are also situations where the broadcast behavior is unintended. Consider the following process: 
	    	</p><div class="mediaobject" align="center"><img src="images/bpmn.signal.event.warning.1.png" align="middle"></div><p>
	    		The pattern described in the process above is not supported by Activiti. The idea is that the error thrown while performing the "do something" task 
	    		is caught by the boundary error event and would be propagated to the parallel path of execution using the signal throw event and then interrupt the 
	    		"do something in parallel" task. So far Activiti would perform as expected. The signal would be propagated to the catching boundary event and interrupt the 
	    		task. <span class="bold"><strong>However, due to the broadcast semantics of the signal, it would also be propagated to all other process instances which have subscribed 
	    		to the signal event.</strong></span> In this case, this might not be what we want.
	    	</p><p>
	    		<span class="bold"><strong>Note:</strong></span> the signal event does not perform any kind of correlation to a specific process instance. On the contrary, it is broadcast to all 
	    		process instances. If you need to deliver a signal to a specific process instance only, perform correlation manually and use  
	    		<code class="code">signalEventReceived(String signalName, String executionId)</code> and the appropriate <a class="link" href="#bpmnSignalEventDefinitionQuery" title="Querying for Signal Event subscriptions">query mechanisms</a>.
	    	</p></div></div><div class="section" title="Message Event Definitions"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnMessageEventDefinition"></a>Message Event Definitions</h3></div></div></div><p>
      		Message events are events which reference a named message. A message has a name and a payload. Unlike a signal, 
      		a message event is always directed at a single receiver.      		 
      	</p><p>
      		A message event definition is declared using the <code class="code">messageEventDefinition</code> element. 
      		The attribute <code class="code">messaageRef</code> references a <code class="code">message</code> element declared as a child element 
      		of the <code class="code">definitions</code> root element. The following is an excerpt of a process where two message events
      		is declared and referenced by a start event and an intermediate catching message event.
</p><pre class="prettyprint">
&lt;definitions id="definitions" 
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:activiti="http://activiti.org/bpmn"
  targetNamespace="Examples"
  xmlns:tns="Examples"&gt;
  
  &lt;message id="newInvoice" name="newInvoiceMessage" /&gt;
  &lt;message id="payment" name="paymentMessage" /&gt;
  
  &lt;process id="invoiceProcess"&gt;  
  
    &lt;startEvent id="messageStart" &gt;
    	&lt;messageEventDefinition messageRef="newInvoice" /&gt;
    &lt;/startEvent&gt;
    ...    
    &lt;intermediateCatchEvent id="paymentEvt" &gt;
    	&lt;messageEventDefinition messageRef="payment" /&gt;
    &lt;/intermediateCatchEvent&gt;
    ...
  &lt;/process&gt;

&lt;/definitions&gt;</pre><p>		  
        </p><div class="section" title="Throwing a Message Event"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMessageEventDefinitionThrow"></a>Throwing a Message Event</h4></div></div></div><p>
        		As an embeddable process engine, activiti is not concerned with actually receiving a message. This would be environment 
	        	dependenent and entail platform-specific activities like connecting to a JMS (Java Messaging Service) Queue/Topic or 
	        	processing a Webservice or REST request.      	
	        	The reception of messages is therefore something you have to implement as part of the application or infrastructure into 
	        	which the process engine is embedded. 
        	</p><p>
	        	After you have received a messge inside your application, you must decide what to do with it.
	        	If the message should trigger the start of a new process instance, choose between the following methods offered by
	        	the runtime service:	        	
	        	</p><pre class="prettyprint">
ProcessInstance startProcessInstanceByMessage(String messageName);
ProcessInstance startProcessInstanceByMessage(String messageName, Map&lt;String, Object&gt; processVariables);
ProcessInstance startProcessInstanceByMessage(String messageName, String businessKey, Map&lt;String, Object&gt; processVariables); 		</pre><p>
				These methods allow starting a process instance using the referenced message.	        	
	        </p><p>
	        	If the message needs to be received by an existing process instance, you first have to correlate the message to 
	        	a specific process instance (see next section) and then trigger the continuation of the wating execution.
	        	The runtime service offers the following methods for triggering an execution based on a message event subscription:
	        	 	</p><pre class="prettyprint">
void messageEventReceived(String messageName, String executionId);
void messageEventReceived(String messageName, String executionId, HashMap&lt;String, Object&gt; processVariables);	</pre><p>
	        </p></div><div class="section" title="Querying for Message Event subscriptions"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMessageEventDefinitionQuery"></a>Querying for Message Event subscriptions</h4></div></div></div>	    	
	    	Activiti supports message start events and intermediate message events.
	    	<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	    			In the case of a message start event, the message event subscription is associated with a particular 
	    	<span class="emphasis"><em>process definition</em></span>. Such message subscriptions can be queried using a <code class="code">ProcessDefinitionQuery</code>:
	    	</p><pre class="prettyprint">
ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()
      .messageEventSubscription("newCallCenterBooking")
      .singleResult();
	    	</pre><p>
	    	Since there can only be one process definition for a specific message subscription, the query always returns zero or one results. If a process definition is updated,
	    	only the newest version of the process definition has a subscription to the message event.
	    			</p></li><li class="listitem"><p>
	    				In the case of an intermediate catch message event, the message event subscription is associated with a 
	    				particular <span class="emphasis"><em>execution</em></span>. Such message event subscriptions can be queried using a <code class="code">ExecutionQuery</code>:
	    				</p><pre class="prettyprint">
Execution execution = runtimeService.createExecutionQuery()
      .messageEventSubscriptionName("paymentReceived")
      .variableValueEquals("orderId", message.getOrderId())
      .singleResult();</pre><p>		    		
				    	Such queries are called correlation queries and usually require knowledge about the processes (in this case that there will be 
				    	at most one process instance for a given orderId).	
	    			</p></li></ul></div></div><div class="section" title="Message Event example(s)"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMessageEventDefinitionExample"></a>Message Event example(s)</h4></div></div></div><p>
		    	The following is an example of a process which can be started using two different messages:		    		    		    	 
	    	</p><div class="mediaobject" align="center"><img src="images/bpmn.start.message.event.example.1.png" align="middle"></div><p>
		    	This is useful if the process needs alternative ways to react to different start events but eventually continues in a uniform way.     			    		    		    	 
	    	</p></div></div><div class="section" title="Start Events"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnStartEvents"></a>Start Events</h3></div></div></div><p>
	     A start event indicates where a process starts. The type of start event (process starts on arrival of 
	     message, on specific time intervals, etc.), defining <span class="emphasis"><em>how</em></span> the process is
	     started is shown as a small icon in the visual representation of the event. In the XML representation,
	     the type is given by the declaration of a sub-element.
	   </p><p>
	     Start events <span class="bold"><strong>are always catching</strong></span>: conceptually
	     the event is (at any time) waiting until a certain trigger happens.
	   </p><p>
	     In a start event, following Activiti-specific properties can be specified:
	   </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
           <span class="bold"><strong>initiator</strong></span>: identifies the variable name in which the authenticated 
           user id will be stored when the process is started.  Example:
           </p><pre class="prettyprint">&lt;startEvent id="request" activiti:initiator="initiator" /&gt;</pre><p>
           The authenticated user must be set with the method <code class="literal">IdentityService.setAuthenticatedUserId(String)</code>
           in a try-finally block like this:
           </p><pre class="prettyprint">try {
  identityService.setAuthenticatedUserId("bono");
  runtimeService.startProcessInstanceByKey("someProcessKey");
} finally {
  identityService.setAuthenticatedUserId(null);
}
</pre><p>
           This code is baked into the Activiti Explorer application.  So it works in combination with 
           <a class="xref" href="#forms" title="Chapter&nbsp;9.&nbsp;Forms">Chapter&nbsp;9, <i>Forms</i></a>
         </p></li></ul></div></div><div class="section" title="None Start Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnNoneStartEvent"></a>None Start Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="noneStartEventDescription"></a>Description</h4></div></div></div><p>
          A 'none' start event technically means that the trigger for starting the process instance
          is unspecified. This means that the engine cannot anticipate when the process instance must
          be started. The none start event is used when the process instance is started through the API
          by calling one of the <span class="emphasis"><em>startProcessInstanceByXXX</em></span> methods.
          </p><pre class="prettyprint">
ProcessInstance processInstance = runtimeService.startProcessInstanceByXXX();</pre><p>
        </p><p>
          <span class="emphasis"><em>Note: </em></span> a subprocess always has a none start event.
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="noneStartEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
			    A none start event is visualized as a circle with no inner icon (i.e. no trigger type). 
			    </p><div class="mediaobject" align="center"><img src="images/bpmn.none.start.event.png" align="middle"></div><p>
			  </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="noneStartEventXml"></a>XML representation</h4></div></div></div><p>
          The XML representation of a none start event is the normal
          start event declaration, without any sub-element (other start event types
          all have a sub-element declaring the type).
          </p><pre class="prettyprint">
&lt;startEvent id="start" name="my start event" /&gt;</pre><p>
        </p></div><div class="section" title="Custom extensions for the none start event"><div class="titlepage"><div><div><h4 class="title"><a name="noneStartEventCustomExtension"></a>Custom extensions for the none start event</h4></div></div></div><p>
	           <span class="bold"><strong>formKey</strong></span>: references to a form template that users have to fill in
	           when starting a new process instance.  More information can be found in 
	           <a class="link" href="#forms" title="Chapter&nbsp;9.&nbsp;Forms">the forms section</a> Example:
	           </p><pre class="prettyprint">&lt;startEvent id="request" activiti:formKey="org/activiti/examples/taskforms/request.form" /&gt;</pre><p>
	         </p></div></div><div class="section" title="Timer Start Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnTimerStartEvent"></a>Timer Start Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="timerStartEventDescription"></a>Description</h4></div></div></div><p>
            A timer start event is used to create process instance at given time. It can be
            used both for processes which should start only once and for processes that should
            start in specific time intervals.
        </p><p>
          <span class="emphasis"><em>Note: </em></span> a subprocess cannot have a timer start event.
        </p><p>
	  	  <span class="emphasis"><em>Note:</em></span> start timer event is scheduled as soon as process is deployed. There is no need to call startProcessInstanceByXXX, although calling start process methods is not restricted and will cause one more starting of the process at the time of startProcessInstanceByXXX Invocation.
		</p><p>
		   <span class="emphasis"><em>Note:</em></span> when a new version of a process with a start timer event is deployed, the job
		   corresponding with the previous timer will be removed. The reasoning is that normally it is not wanted to
		   keep automatically starting new process instances of this old version of the process. 
		</p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="timerStartEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
                A none start event is visualized as a circle with clock inner icon.
                </p><div class="mediaobject" align="center"><img src="images/bpmn.clock.start.event.png" align="middle"></div><p>
              </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="timerStartEventXml"></a>XML representation</h4></div></div></div><p>
          The XML representation of a timer start event is the normal
          start event declaration, with timer definition sub-element. Please refer to <a class="link" href="#timerEventDefinitions" title="Timer Event Definitions">timer definitions</a> for configuration details.
          for details on configuration details.
         </p><p>Example: process will start 4 times, in 5 minute intervals, starting on 11th march 2011, 12:13
           </p><pre class="prettyprint">
        &lt;startEvent id="theStart"&gt;
            &lt;timerEventDefinition&gt;
                &lt;timeCycle&gt;R4/2011-03-11T12:13/PT5M&lt;/timeCycle&gt;
            &lt;/timerEventDefinition&gt;
        &lt;/startEvent&gt;
           </pre><p>
               </p><p>
               Example: process will start once, on selected date
           </p><pre class="prettyprint">
        &lt;startEvent id="theStart"&gt;
            &lt;timerEventDefinition&gt;
                &lt;timeDate&gt;2011-03-11T12:13:14&lt;/timeDate&gt;
            &lt;/timerEventDefinition&gt;
        &lt;/startEvent&gt;
           </pre><p>
        </p></div></div><div class="section" title="Message Start Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnMessageStartEvent"></a>Message Start Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="messageStartEventDescription"></a>Description</h4></div></div></div><p>
	            A <a class="link" href="#bpmnMessageEventDefinition" title="Message Event Definitions">message</a> start event can be used to start a process instance using a named message. This effectively allows us 
	            to <span class="emphasis"><em>select</em></span> the right start event from a set of alternative start events using the message name.	            
	        </p><p>
				When <span class="bold"><strong>deploying</strong></span> a process definition with one or more message start events, the following considerations apply:	        	
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
							The name of the message start event must be unique across a given process definition. A process definition must not have multiple message start events with the same name. Activiti throws an exception upon deployment of a process definition such that two or more message 
							start events reference the same message	of if two or more message start events reference messages with the same message name.  						
						</p></li><li class="listitem"><p>
							The name of the message start event must be unique across all deployed process definitions. Activiti throws an exception upon deployment of a process definition such that one or more message start events reference a message with the same name 
							as a message start event already deployed by a different process definition. 				
						</p></li><li class="listitem"><p>
							Process versioning: Upon deployment of a new version of a process definition, the message subscriptions of the previous version are cancelled. This is also true for message events
							that are not present in the new version.	
						</p></li></ul></div><p>					
			</p><p>
				When <span class="bold"><strong>starting</strong></span> a process instance, a message start event can be triggered using the following methods on the <code class="code">RuntimeService</code>:
	        	</p><pre class="prettyprint">
ProcessInstance startProcessInstanceByMessage(String messageName);
ProcessInstance startProcessInstanceByMessage(String messageName, Map&lt;String, Object&gt; processVariables);
ProcessInstance startProcessInstanceByMessage(String messageName, String businessKey, Map&lt;String, Object&lt; processVariables); 
	  			</pre><p>
	  			The <code class="code">messageName</code> is the name given in the <code class="code">name</code> attribute of the <code class="code">message</code> element referenced by the <code class="code">messageRef</code>
	  			attribute of the <code class="code">messageEventDefinition</code>.
				The following considerations apply when <span class="bold"><strong>starting</strong></span> a process instance: 
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
							Message start events are only supported on top-level processes. Message start events are not supported on embedded sub processes.							
						</p></li><li class="listitem"><p>
							If a process definition has multiple message start events, <code class="code">runtimeService.startProcessInstanceByMessage(...)</code> allows to select the appropriate 
							start event.
						</p></li><li class="listitem"><p>
							If a process definition has multiple message start events and a single none start event, <code class="code">runtimeService.startProcessInstanceByKey(...)</code> and 
							<code class="code">runtimeService.startProcessInstanceById(...)</code> starts a process instance using the none start event.
						</p></li><li class="listitem"><p>
							If a process definition has multiple message start events and no none start event, <code class="code">runtimeService.startProcessInstanceByKey(...)</code> and 
							<code class="code">runtimeService.startProcessInstanceById(...)</code> throw an exception.
						</p></li><li class="listitem"><p>
							If a process definition has a single message start event, <code class="code">runtimeService.startProcessInstanceByKey(...)</code> and 
							<code class="code">runtimeService.startProcessInstanceById(...)</code> start a new process instance using the message start event.
						</p></li><li class="listitem"><p>
							If a process is started from a call activity, message start event(s) are only supported if
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>in addition to the message start event(s), the process has a single none start event</p></li><li class="listitem"><p>the process has a single message start event and no other start events.</p></li></ul></div><p>							
						</p></li></ul></div><p>
			</p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="messageStartEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
                A message start event is visualized as a circle with a message event symbol. The symbol is unfilled, to visualize the catching (receiving) behavior. 
                </p><div class="mediaobject" align="center"><img src="images/bpmn.start.message.event.png" align="middle"></div><p>
              </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="messageStartEventXml"></a>XML representation</h4></div></div></div><p>
          The XML representation of a message start event is the normal
          start event declaration with a messageEventDefinition child-element:
          
          </p><pre class="prettyprint">
&lt;definitions id="definitions" 
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:activiti="http://activiti.org/bpmn"
  targetNamespace="Examples"
  xmlns:tns="Examples"&gt;
  
  &lt;message id="newInvoice" name="newInvoiceMessage" /&gt;
  
  &lt;process id="invoiceProcess"&gt;  
  
    &lt;startEvent id="messageStart" &gt;
    	&lt;messageEventDefinition messageRef="tns:newInvoice" /&gt;
    &lt;/startEvent&gt;
    ...    
  &lt;/process&gt;

&lt;/definitions&gt;</pre><p>
        
        </p></div></div><div class="section" title="Error Start Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnErrorStartEvent"></a>Error Start Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="errorStartEventDescription"></a>Description</h4></div></div></div><p>
	            An <a class="link" href="#bpmnErrorEventDefinition" title="Error Event Definitions">error</a> start event can be used to trigger an Event Sub-Process. 
	            <span class="bold"><strong>An error start event cannot be used for starting a process instance</strong></span>.
	        </p><p>
	           An error start event is always interrupting.
	        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="errorStartEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
                A error start event is visualized as a circle with an error event symbol. The symbol is unfilled, to visualize the catching (receiving) behavior. 
                </p><div class="mediaobject" align="center"><img src="images/bpmn.start.error.event.png" align="middle"></div><p>
              </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="errorStartEventXml"></a>XML representation</h4></div></div></div><p>
          The XML representation of an error start event is the normal
          start event declaration with an errorEventDefinition child-element:
          
          </p><pre class="prettyprint">
&lt;startEvent id="messageStart" &gt;
	&lt;errorEventDefinition errorRef="someError" /&gt;
&lt;/startEvent&gt;</pre><p>
        
        </p></div></div><div class="section" title="End Events"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnEndEvent"></a>End Events</h3></div></div></div><p>
		    An end event signifies the end (of a path) of a (sub)process. An end event is 
		    <span class="bold"><strong>always throwing</strong></span>. This means that when process execution
		    arrives in the end event, a <span class="emphasis"><em>result</em></span> is thrown. The type of result 
		    is depicted by the inner black icon of the event. In the XML representation,
		    the type is given by the declaration of a sub-element.
		  </p></div><div class="section" title="None End Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnNoneEndEvent"></a>None End Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="noneEndEventDescription"></a>Description</h4></div></div></div><p>
          A 'none' end event means that the <span class="emphasis"><em>result</em></span> thrown when
          the event is reached is unspecified. As such, the engine will not do anything
          extra besides ending the current path of execution.
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnNoneEndEventDescription"></a>Graphical notation</h4></div></div></div><p>
          A none end event is visualized as a circle with a thick border with no inner icon (no result type).
          </p><div class="mediaobject" align="center"><img src="images/bpmn.none.end.event.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnNoneStartEventXml"></a>XML representation</h4></div></div></div><p>
          The XML representation of a none end event is the normal
          end event declaration, without any sub-element (other end event types
          all have a sub-element declaring the type).
          </p><pre class="prettyprint">
&lt;endEvent id="end" name="my end event" /&gt;</pre><p>
        </p></div></div><div class="section" title="Error End Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnErrorEndEvent"></a>Error End Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnErrorEndEventDescription"></a>Description</h4></div></div></div><p>
		      When process execution arrives in an <span class="bold"><strong>error end event</strong></span>, 
		      the current path of execution is ended and an error is thrown. This error
		      can <a class="link" href="#bpmnBoundaryErrorEvent" title="Error Boundary Event">caught by a matching intermediate boundary error event</a>.
		      In case no matching boundary error event is found, an exception will be thrown.
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnErrorEndEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          An error end event is visualized as a typical end event (circle with thick border), with the
          error icon inside. The error icon is completely black, to indicate the throwing semantics.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.error.end.event.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnErrorEndEventXml"></a>XML representation</h4></div></div></div><p>
          And error end event is represented as an end event, with a <span class="emphasis"><em>errorEventDefinition</em></span>
          child element.
          </p><pre class="prettyprint">
&lt;endEvent id="myErrorEndEvent"&gt;
  &lt;errorEventDefinition errorRef="myError" /&gt;
&lt;/endEvent&gt;          
          </pre><p>
          The <span class="emphasis"><em>errorRef</em></span> attribute can reference an <span class="emphasis"><em>error</em></span>
          element that is defined outside the process:
          </p><pre class="prettyprint">
&lt;error id="myError" errorCode="123" /&gt;
...
&lt;process id="myProcess"&gt;  
...        
          </pre><p>
          The <span class="bold"><strong>errorCode</strong></span> of the <span class="emphasis"><em>error</em></span>
          will be used to find the matching catching boundary error event.
          If the <span class="emphasis"><em>errorRef</em></span> does not match any defined <span class="emphasis"><em>error</em></span>,
          then the <span class="emphasis"><em>errorRef</em></span> is used as a shortcut for the <span class="emphasis"><em>errorCode</em></span>.
          This is an Activiti specific shortcut.
          More concretely, following snippets are equivalent in functionality. 
                    </p><pre class="prettyprint">
&lt;error id="myError" errorCode="error123" /&gt;
...
&lt;process id="myProcess"&gt;  
...  
  &lt;endEvent id="myErrorEndEvent"&gt;
    &lt;errorEventDefinition errorRef="myError" /&gt;
  &lt;/endEvent&gt;          
          </pre><p>
          is equivalent with
                    </p><pre class="prettyprint">
&lt;endEvent id="myErrorEndEvent"&gt;
  &lt;errorEventDefinition errorRef="error123" /&gt;
&lt;/endEvent&gt;          
          </pre><p>
        </p>
        Note that the <code class="literal">errorRef</code> must comply with the BPMN 2.0 schema, and must
        be a valid QName.
      </div></div><div class="section" title="Cancel End Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnCancelEndEvent"></a>Cancel End Event</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCancelEndEventDescription"></a>Description</h4></div></div></div><p>
		     	The cancel end event can only be used in combination with a bpmn transaction subprocess.
		     	When the cancel end event is reached, a cancel event is thrown which must be caught by a 
		     	cancel boundary event. The cancel boundary event then cancels the transaction and triggers 
		     	compensation. 
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCancelEndEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          A cancel end event visualized as a typical end event (circle with thick outline), with the
          cancel icon inside. The cancel icon is completely black, to indicate the throwing semantics.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.cancel.end.event.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCancelEndEventXml"></a>XML representation</h4></div></div></div><p>
          A cancel end event is represented as an end event, with a <span class="emphasis"><em>cancelEventDefinition</em></span>
          child element.
          </p><pre class="prettyprint">
&lt;endEvent id="myCancelEndEvent"&gt;
  &lt;cancelEventDefinition /&gt;
&lt;/endEvent&gt;          
          </pre><p>
		</p></div></div><div class="section" title="Boundary Events"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBoundaryEvent"></a>Boundary Events</h3></div></div></div><p>
		    Boundary events are <span class="emphasis"><em>catching</em></span> events that are attached to an activity
		    (a boundary event can never be throwing). This means that while the activity is
		    running, the event is <span class="emphasis"><em>listening</em></span> for a certain type of trigger. 
		    When the event is <span class="emphasis"><em>caught</em></span>, the activity is interrupted and the 
		    sequence flow going out of the event are followed.
		  </p><p>
		    All boundary events are defined in the same way:
</p><pre class="prettyprint">
&lt;boundaryEvent id="myBoundaryEvent" attachedToRef="theActivity"&gt;
      &lt;XXXEventDefinition/&gt;
&lt;/boundaryEvent&gt;</pre><p>
		  </p><p>
		    A boundary event is defined with
		    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		          A unique identifier (process-wide)
		        </p></li><li class="listitem"><p>
		          A reference to the activity to which the event is attached through the
		          <span class="bold"><strong>attachedToRef</strong></span> attribute.
		          Note that a boundary event is defined on the same level as the activities
		          to which they are attached
		          (i.e. no inclusion of the boundary event inside the activity).
		        </p></li><li class="listitem"><p>
		          An XML sub-element of the form <span class="emphasis"><em>XXXEventDefinition</em></span> 
		          (e.g. <span class="emphasis"><em>TimerEventDefinition</em></span>, <span class="emphasis"><em>ErrorEventDefinition</em></span>, etc.)
		          defining the type of the boundary event. See the specific boundary event types
		          for more details.
		        </p></li></ul></div><p>
		  </p></div><div class="section" title="Timer Boundary Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnTimerBoundaryEvent"></a>Timer Boundary Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="timerBoundaryEventDescription"></a>Description</h4></div></div></div><p>
          A timer boundary event acts as a stopwatch and alarm clock. When an execution arrives
          in the activity where the boundary event is attached to, a timer is started.
          When the timer fires (e.g. after a specified interval), the activity is interrupted
          and the sequence flow going out of the timer boundary event are followed.
        </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnTimerBoundaryEventGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          A timer boundary event is visualized as a typical boundary event (i.e. circle
          on the border), with the timer icon on the inside.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.timer.event.png" align="middle"></div><p>
        </p></div><div class="section" title="XML Representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnTimerBoundaryEventXml"></a>XML Representation</h4></div></div></div><p>
          A timer boundary event is defined as a <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">regular boundary event</a>.
          The specific type sub-element is in this case a <span class="bold"><strong>timerEventDefinition</strong></span>
          element.
</p><pre class="prettyprint">
&lt;boundaryEvent id="escalationTimer" cancelActivity="true" attachedToRef="firstLineSupport"&gt;
   <span class="bold"><strong>&lt;timerEventDefinition&gt;
    &lt;timeDuration&gt;PT4H&lt;/timeDuration&gt;
  &lt;/timerEventDefinition&gt;</strong></span>
&lt;/boundaryEvent&gt;          
</pre><p>

        Please refer to <a class="link" href="#timerEventDefinitions" title="Timer Event Definitions">timer event definition</a> for details on timer configuration.
        </p><p>
          In the graphical representation, the line of the circle is dotted as you can see in this example above:
          
          </p><div class="mediaobject" align="center"><img src="images/bpmn.non.interrupting.boundary.timer.event.png" align="middle"></div><p>
          
          A typical use case is sending an escalation email additionally but not interrupt the normal process flow.
        </p><p>
          Since BPMn 2.0 there is the difference between the interrupting and non interrupting timer event. The 
          interrupting is the default. The non-interrupting leads to the original activity is <span class="bold"><strong>not</strong></span>
          interrupted but the activity stays there. Instead an additional executions is created and send over the
          outgoing transition of the event. In the XML representation, the <span class="emphasis"><em>cancelActivity</em></span> attribute
          is set to false:
</p><pre class="prettyprint">
&lt;boundaryEvent id="escalationTimer" cancelActivity="false" attachedToRef="firstLineSupport"/&gt;
</pre><p>
        </p><p>
          <span class="bold"><strong>Note:</strong></span> boundary timer events are only fired when 
          the job executor is enabled (i.e. <span class="emphasis"><em>jobExecutorActivate</em></span>
          needs to be set to <code class="literal">true</code> in the <code class="literal">activiti.cfg.xml</code>, since the job
          executor is disabled by default). 
        </p></div><div class="section" title="Known issue with boundary events"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnKnownIssueBoundaryEvent"></a>Known issue with boundary events</h4></div></div></div><p>
        There is a known issue regarding concurrency when using boundary events of any type.
        Currently, it is not possible to have multiple outgoing sequence flow attached to 
        a boundary event (see issue <a class="ulink" href="http://jira.codehaus.org/browse/ACT-47" target="_top">ACT-47</a>).
        A solution to this problem is to use one outgoing sequence flow that goes to a parallel gateway.
        </p><div class="mediaobject" align="center"><img src="images/bpmn.known.issue.boundary.event.png" align="middle"></div><p>
      </p></div></div><div class="section" title="Error Boundary Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBoundaryErrorEvent"></a>Error Boundary Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryErrorEventDescription"></a>Description</h4></div></div></div><p>
		      An intermediate <span class="emphasis"><em>catching</em></span> error on the boundary of an activity,
		      or <span class="bold"><strong>boundary error event</strong></span> for short, catches errors that are thrown within the scope
		      of the activity on which it is defined.
		    </p><p>
		      Defining a boundary error event makes most sense on an <a class="link" href="#bpmnSubProcess" title="Sub-Process">embedded subprocess</a>,
		      or a <a class="link" href="#bpmnCallActivity" title="Call activity (subprocess)">call activity</a>, as a subprocess creates a scope for all activities inside the subprocess. 
		      Errors are thrown by <a class="link" href="#bpmnErrorEndEvent" title="Error End Event">error end events</a>. Such an error will propagate its
		      parent scopes upwards until a scope is found on which a boundary error event is defined
		      that matches the error event definition.
		    </p><p>
		      When an error event is caught, the activity on which the boundary event is defined
		      is destroyed, also destroying all current executions within
		      (e.g. concurrent activities, nested subprocesses, etc.). Process execution continues
		      following the outgoing sequence flow of the boundary event. 
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryErrorEventgraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          A boundary error event is visualized as a typical intermediate event (Circle with smaller circle inside)
          on the boundary, with the error icon inside. The error icon is white, to indicate
          the <span class="emphasis"><em>catch</em></span> semantics.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.error.event.png" align="middle"></div><p>
        </p></div><div class="section" title="Xml representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryErrorEventXml"></a>Xml representation</h4></div></div></div><p>
          A boundary error event is defined as a typical <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">boundary event</a>:
          </p><pre class="prettyprint">
&lt;boundaryEvent id="catchError" attachedToRef="mySubProcess"&gt;
  &lt;errorEventDefinition errorRef="myError"/&gt;
&lt;/boundaryEvent&gt;
          </pre><p>
          As with the <a class="link" href="#bpmnErrorEndEvent" title="Error End Event">error end event</a>, the <span class="emphasis"><em>errorRef</em></span>
          references an error defined outside the process element:
          </p><pre class="prettyprint">
&lt;error id="myError" errorCode="123" /&gt;
...
&lt;process id="myProcess"&gt;  
...              
          </pre><p>
        </p><p>
          The <span class="bold"><strong>errorCode</strong></span> is used to match the errors that are caught:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                If <span class="emphasis"><em>errorRef</em></span> is omitted, the boundary error event will catch
                <span class="bold"><strong>any error event</strong></span>, regardless of the errorCode of the <span class="emphasis"><em>error</em></span>.
              </p></li><li class="listitem"><p>
                In case an <span class="emphasis"><em>errorRef</em></span> is provided and it references an existing <span class="emphasis"><em>error</em></span>,
                the boundary event will <span class="bold"><strong>only catch errors with the same error code</strong></span>.
              </p></li><li class="listitem"><p>
                In case an <span class="emphasis"><em>errorRef</em></span> is provided, but no <span class="emphasis"><em>error</em></span>
                is defined in the BPMN 2.0 file, then the <span class="bold"><strong>errorRef is used
                as errorCode</strong></span> (similar for with error end events).
              </p></li></ul></div><p>
        </p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryErrorEventExample"></a>Example</h4></div></div></div><p>
          Following example process shows how an error end event can be used. When the 
          <span class="emphasis"><em>'Review profitability'</em></span> user task is completed by stating that
          not enough information is provided, an error is thrown. When this error is caught on
          the boundary of the subprocess, all active activities within the <span class="emphasis"><em>'Review sales lead'</em></span>
          subprocess are destroyed (even if <span class="emphasis"><em>'Review customer rating'</em></span> was not yet completed),
          and the <span class="emphasis"><em>'Provide additional details'</em></span> user task is created.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.error.example.png" align="middle"></div><p>
        </p><p>
          This process is shipped as example in the demo setup. The process XML and unit test can
          be found in the <span class="emphasis"><em>org.activiti.examples.bpmn.event.error</em></span> package.
        </p></div></div><div class="section" title="Signal Boundary Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBoundarySignalEvent"></a>Signal Boundary Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundarySignalEventDescription"></a>Description</h4></div></div></div><p>
		      An attached intermediate <span class="emphasis"><em>catching</em></span> <a class="link" href="#bpmnSignalEventDefinition" title="Signal Event Definitions">signal</a> on the boundary of an activity,
		      or <span class="bold"><strong>boundary signal event</strong></span> for short, catches signals with the same signal name
		      as the referenced signal definition. 
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> contrary to other events like the boundary error event, a boundary signal event does not only catch
		    	signal events thrown from the scope it is attached to. On the contrary, a signal event has global scope
		    	(broadcast semantics) meaning that the signal can be thrown from any place, even from a different process instance. 
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> contrary to other events like an error event, a signal is not consumed if it is caught.
		    	If you have two active signal boundary events catching the same signal event, both boundary events are triggered, event if they are part of 
		    	different process instances.
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundarySignalEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          A boundary signal event is visualized as a typical intermediate event (Circle with smaller circle inside)
	          on the boundary, with the signal icon inside. The signal icon is white (unfilled), to indicate
	          the <span class="emphasis"><em>catch</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.signal.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundarySignalEventXml"></a>XML representation</h4></div></div></div><p>
     	     	A boundary signal event is defined as a typical <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">boundary event</a>:
          		</p><pre class="prettyprint">
&lt;boundaryEvent id="boundary" attachedToRef="task" cancelActivity="true"&gt;       
          &lt;signalEventDefinition signalRef="alertSignal"/&gt;
&lt;/boundaryEvent&gt;
          		</pre><p>         
        	</p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundarySignalEventExample"></a>Example</h4></div></div></div><p>
	        	See section on <a class="link" href="#bpmnSignalEventDefinition" title="Signal Event Definitions">signal event definitions</a>.
	        </p></div></div><div class="section" title="Message Boundary Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBoundaryMessageEvent"></a>Message Boundary Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryMessageEventDescription"></a>Description</h4></div></div></div><p>
		      An attached intermediate <span class="emphasis"><em>catching</em></span> <a class="link" href="#bpmnMessageEventDefinition" title="Message Event Definitions">message</a> on the boundary of an activity,
		      or <span class="bold"><strong>boundary message event</strong></span> for short, catches messages with the same message name
		      as the referenced message definition. 
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryMessageEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          A boundary message event is visualized as a typical intermediate event (Circle with smaller circle inside)
	          on the boundary, with the message icon inside. The message icon is white (unfilled), to indicate
	          the <span class="emphasis"><em>catch</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.message.event.png" align="middle"></div><p>
	          Note that boundary message event can be both interrupting (right hand side) and non interrupting (left hand side).
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryMessageEventXml"></a>XML representation</h4></div></div></div><p>
     	     	A boundary message event is defined as a typical <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">boundary event</a>:
          		</p><pre class="prettyprint">
&lt;boundaryEvent id="boundary" attachedToRef="task" cancelActivity="true"&gt;       
          &lt;messageEventDefinition messageRef="newCustomerMessage"/&gt;
&lt;/boundaryEvent&gt;
          		</pre><p>         
        	</p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryMessageEventExample"></a>Example</h4></div></div></div><p>
	        	See section on <a class="link" href="#bpmnMessageEventDefinition" title="Message Event Definitions">message event definitions</a>.
	        </p></div></div><div class="section" title="Cancel Boundary Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBoundaryCancelEvent"></a>Cancel Boundary Event</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryCancelEventDescription"></a>Description</h4></div></div></div><p>
		      An attached intermediate <span class="emphasis"><em>catching</em></span> cancel on the boundary of a transaction subprocess,
		      or <span class="bold"><strong>boundary cancel event</strong></span> for short, is triggered when a transaction
		      is cancelled. When the cancel boundary event is triggered, it first interrupts all executions active in the 
		      current scope. Next, it starts compensation of all active compensation boundary events in the scope of the 
		      transaction. Compensation is performed synchronously, i.e. the boundary event waits before compensation is 
		      completed before leaving the transaction. When compensation is completed, the transaction subprocess is left 
		      using the sequence flow(s) running out of the cancel boundary event.  
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> Only a single cancel boundary event is allowed for a transaction subprocess.
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> If the transaction subprocess hosts nested subprocesses, compensation is only triggered for subprocesses
		    	that have completed successfully.	
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> If a cancel boundary event is placed on a transaction subprocess with 
		    	multi instance characteristics, if one instance triggers cancellation, the boundary event cancels all 
		    	instances. 
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryCancelEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          A cancel boundary event is visualized as a typical intermediate event (Circle with smaller circle inside)
	          on the boundary, with the cancel icon inside. The cancel icon is white (unfilled), to indicate
	          the <span class="emphasis"><em>catching</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.cancel.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundarySignalEventXml"></a>XML representation</h4></div></div></div><p>
     	     	A cancel boundary event is defined as a typical <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">boundary event</a>:
          		</p><pre class="prettyprint">
&lt;boundaryEvent id="boundary" attachedToRef="transaction" &gt;       
          &lt;cancelEventDefinition /&gt;
&lt;/boundaryEvent&gt;
          		</pre><p>      
          		Since the cancel boundary event is always interrupting, the <code class="code">cancelActivity</code> attribute 
          		is not required.   
        	</p></div></div><div class="section" title="Compensation Boundary Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBoundaryCompensationEvent"></a>Compensation Boundary Event</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryCompensationEventDescription"></a>Description</h4></div></div></div><p>
		      An attached intermediate <span class="emphasis"><em>catching</em></span> compensation on the boundary of an activity
		      or <span class="bold"><strong>compensation boundary event</strong></span> for short, can be used to attach a compensation 
		      handler to an activity.		      
		    </p><p>
		    	The compensation boundary event must reference a single compensation handler using a directed association.		    	 
		    </p><p>
		    	A compensation boundary event has a different activation policy from other boundary events. Other boundary events 
		    	like for instance the signal boundary event are activated when the activity they are attached to is started. 
		    	When the activity is left, they are deactivated and the corresponding event subscription is cancelled. 
		    	The compensation boundary event is different. The compensation boundary event is activated when the activity it is attached
		    	to <span class="bold"><strong>completes successfully</strong></span>. At this point, the corresponding subscription to the
		    	compensation events is created. The subscription is removed either when a compensation event is triggered
		    	or when the corresponding process instance ends. From this, it follows: 
		    	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		    				When compensation is triggered, the compensation handler associated with the compensation 
		    				boundary event is invoked the same number of times the activity it is attached to completed 
		    				successfully.		    				
		    			</p></li><li class="listitem"><p>
		    				If a compensation boundary event is attached to an activity with multiple instance characteristics, 
		    				a compensation event subscription is created for each instance.
		    			</p></li><li class="listitem"><p>
		    				If a compensation boundary event is attached to an activity which is contained inside a loop, 
		    				a compensation event subscription is created for each time the activity is executed.
		    			</p></li><li class="listitem"><p>
		    				If the process instance ends, the subscriptions to compensation events are cancelled. 
		    			</p></li></ul></div><p>
		    	 
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> the compensation boundary event is not supported on embedded subprocesses.
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryCompensationEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          A compensation boundary event is visualized as a typical intermediate event (Circle with smaller circle inside)
	          on the boundary, with the compensation icon inside. The compensation icon is white (unfilled), to indicate
	          the <span class="emphasis"><em>catching</em></span> semantics. In addition to a compensation boundary event, the following 
	          figure shows a compensation handler associated with the boundary event using a unidirectional association:
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.compensation.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBoundaryCompensationEventXml"></a>XML representation</h4></div></div></div><p>
     	     	A compensation boundary event is defined as a typical <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">boundary event</a>:
          		</p><pre class="prettyprint">
&lt;boundaryEvent id="compensateBookHotelEvt" attachedToRef="bookHotel" &gt;       
          &lt;compensateEventDefinition /&gt;
&lt;/boundaryEvent&gt;

&lt;association associationDirection="One" id="a1"  sourceRef="compensateBookHotelEvt" targetRef="undoBookHotel" /&gt;

&lt;serviceTask id="undoBookHotel" isForCompensation="true" activiti:class="..." /&gt;</pre><p>      
          		Since the compensation boundary event is activated after the activity has completed successfully, 
          		the <code class="code">cancelActivity</code> attribute is not supported.   
        	</p></div></div><div class="section" title="Intermediate Catching Events"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateCatchingEvent"></a>Intermediate Catching Events</h3></div></div></div><p>
		    All intermediate catching events events are defined in the same way:
</p><pre class="prettyprint">
&lt;intermediateCatchEvent id="myIntermediateCatchEvent" &gt;
      &lt;XXXEventDefinition/&gt;
&lt;/intermediateCatchEvent&gt;</pre><p>
		  </p><p>
		    An intermediate catching event is defined with
		    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		          A unique identifier (process-wide)
		        </p></li><li class="listitem"><p>
		          An XML sub-element of the form <span class="emphasis"><em>XXXEventDefinition</em></span>
		          (e.g. <span class="emphasis"><em>TimerEventDefinition</em></span>, etc.)
		          defining the type of the intermediate catching event. See the specific catching event types
		          for more details.
		        </p></li></ul></div><p>
		  </p></div><div class="section" title="Timer Intermediate Catching Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnTimerIntermediateEvent"></a>Timer Intermediate Catching Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnTimerIntermediateEventDescription"></a>Description</h4></div></div></div><p>
          A timer intermediate event acts as a stopwatch. When an execution arrives
          in catching event activity, a timer is started.
          When the timer fires (e.g. after a specified interval), the sequence flow going out of the timer intermediate event is followed.
        </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnTimerIntermediateEventGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
                A timer intermediate event is visualized as a intermediate catching event, with the timer icon on the inside.
                </p><div class="mediaobject" align="center"><img src="images/bpmn.intermediate.timer.event.png" align="middle"></div><p>
              </p></div><div class="section" title="XML Representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnTimerIntermediateEventXml"></a>XML Representation</h4></div></div></div><p>

          A timer intermediate event is defined as a <a class="link" href="#bpmnIntermediateCatchingEvent" title="Intermediate Catching Events">intermediate catching event</a>.
          The specific type sub-element is in this case a <span class="bold"><strong>timerEventDefinition</strong></span>
          element.
                 </p><pre class="prettyprint">
        &lt;intermediateCatchEvent id="timer"&gt;
            <span class="bold"><strong>&lt;timerEventDefinition&gt;
                &lt;timeDuration&gt;PT5M&lt;/timeDuration&gt;
            &lt;/timerEventDefinition&gt;</strong></span>
        &lt;/intermediateCatchEvent&gt;
                 </pre><p>
              See <a class="link" href="#timerEventDefinitions" title="Timer Event Definitions">timer event definitions</a> for configuration details.

              </p></div></div><div class="section" title="Signal Intermediate Catching Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateSignalEvent"></a>Signal Intermediate Catching Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateSignalEventDescription"></a>Description</h4></div></div></div><p>
		      An intermediate <span class="emphasis"><em>catching</em></span> <a class="link" href="#bpmnSignalEventDefinition" title="Signal Event Definitions">signal</a> event catches signals with the same signal name
		      as the referenced signal definition. 
		    </p><p>
		    	<span class="bold"><strong>Note:</strong></span> contrary to other events like an error event, a signal is not consumed if it is caught.
		    	If you have two active signal boundary events catching the same signal event, both boundary events are triggered, event if they are part of 
		    	different process instances.
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateSignalEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          An intermediate signal catch event is visualized as a typical intermediate event (Circle with smaller circle inside), 
	          with the signal icon inside. The signal icon is white (unfilled), to indicate
	          the <span class="emphasis"><em>catch</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.intermediate.signal.catch.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateSignalEventXml"></a>XML representation</h4></div></div></div><p>
     	     	 A signal intermediate event is defined as a <a class="link" href="#bpmnIntermediateCatchingEvent" title="Intermediate Catching Events">intermediate catching event</a>.
		          The specific type sub-element is in this case a <span class="bold"><strong>signalEventDefinition</strong></span>
		          element.
                 </p><pre class="prettyprint">
&lt;intermediateCatchEvent id="signal"&gt;
	<span class="bold"><strong>&lt;signalEventDefinition signalRef="newCustomerSignal" /&gt;</strong></span>
&lt;/intermediateCatchEvent&gt;
                 </pre><p>    
        	</p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateSignalEventExample"></a>Example</h4></div></div></div><p>
	        	See section on <a class="link" href="#bpmnSignalEventDefinition" title="Signal Event Definitions">signal event definitions</a>.
	        </p></div></div><div class="section" title="Message Intermediate Catching Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateMessageEvent"></a>Message Intermediate Catching Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateMessageEventDescription"></a>Description</h4></div></div></div><p>
		      An intermediate <span class="emphasis"><em>catching</em></span> <a class="link" href="#bpmnMessageEventDefinition" title="Message Event Definitions">message</a> event catches messages with a specified name. 
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateMessageEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          An intermediate catching message event is visualized as a typical intermediate event (Circle with smaller circle inside), 
	          with the message icon inside. The message icon is white (unfilled), to indicate
	          the <span class="emphasis"><em>catch</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.intermediate.message.catch.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateSignalEventXml"></a>XML representation</h4></div></div></div><p>
     	     	 A message intermediate event is defined as a <a class="link" href="#bpmnIntermediateCatchingEvent" title="Intermediate Catching Events">intermediate catching event</a>.
		          The specific type sub-element is in this case a <span class="bold"><strong>messageEventDefinition</strong></span>
		          element.
                 </p><pre class="prettyprint">
&lt;intermediateCatchEvent id="message"&gt;
	<span class="bold"><strong>&lt;messageEventDefinition signalRef="newCustomerMessage" /&gt;</strong></span>
&lt;/intermediateCatchEvent&gt;
                 </pre><p>    
        	</p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateMessageEventExample"></a>Example</h4></div></div></div><p>
	        	See section on <a class="link" href="#bpmnMessageEventDefinition" title="Message Event Definitions">message event definitions</a>.
	        </p></div></div><div class="section" title="Intermediate Throwing Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateThrowEvent"></a>Intermediate Throwing Event</h3></div></div></div><p>
		    All intermediate throwing events events are defined in the same way:
</p><pre class="prettyprint">
&lt;intermediateThrowEvent id="myIntermediateThrowEvent" &gt;
      &lt;XXXEventDefinition/&gt;
&lt;/intermediateThrowEvent&gt;</pre><p>
		  </p><p>
		    An intermediate throwing event is defined with
		    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		          A unique identifier (process-wide)
		        </p></li><li class="listitem"><p>
		          An XML sub-element of the form <span class="emphasis"><em>XXXEventDefinition</em></span>
		          (e.g. <span class="emphasis"><em>signalEventDefinition</em></span>, etc.)
		          defining the type of the intermediate throwing event. See the specific throwing event types
		          for more details.
		        </p></li></ul></div><p>
		  </p></div><div class="section" title="Intermediate Throwing None Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateThrowNoneEvent"></a>Intermediate Throwing None Event</h3></div></div></div><p>
          The following process diagram shows a simple example of an intermediate none event, which is often used to 
          indicate some state achieved in the process. 

          </p><div class="mediaobject" align="center"><img src="images/bpmn.intermediate.none.event.png" align="middle"></div><p>
          
          This can be a good hook to monitor some KPI's, basically by adding an <a class="link" href="#">execution listener</a>
          
</p><pre class="prettyprint">
&lt;intermediateThrowEvent id="noneEvent"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:executionListener class="org.activiti.engine.test.bpmn.event.IntermediateNoneEventTest$MyExecutionListener" event="start" /&gt;
  &lt;/extensionElements&gt;
&lt;/intermediateThrowEvent&gt;
</pre><p>          
          
          There you can add some own code to maybe send some event to your BAM tool or DWH. The engine itself doesn't do anything in that event, it just
          passes through.
        </p></div><div class="section" title="Signal Intermediate Throwing Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateThrowSignalEvent"></a>Signal Intermediate Throwing Event</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateThrowSignalEventDescription"></a>Description</h4></div></div></div><p>
		      An intermediate <span class="emphasis"><em>throwing</em></span> <a class="link" href="#bpmnSignalEventDefinition" title="Signal Event Definitions">signal</a> event throws a signal event for a defined signal.		      
		    </p><p>
		    	In Activiti, the signal is broadcast to all active handlers (i.e. all catching signal events). Signals can be published synchronous or asynchronous.
		    	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		    				In the default configuration, the signal is delivered <span class="bold"><strong>synchronously</strong></span>. This means that the throwing process instance waits until 
		    				the signal is delivered to all catching process instances. The catching process instances are also notified in the same transaction as the throwing process 
		    				instance, which means that if one of the notified instances produces a technical error (throws an exception), all involved instances fail.
		    			</p></li><li class="listitem"><p>
		    				A signal can also be delivered <span class="bold"><strong>asynchronously</strong></span>. In that case it is determined which handlers are active at the time 
		    				the throwing signal event is reached. For each active handler, an asynchronous notification message (Job) is stored and delivered by the JobExecutor. 			
		    			</p></li></ul></div><p>
		    	  
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateThrowSignalEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          An intermediate signal throw event is visualized as a typical intermediate event (Circle with smaller circle inside), 
	          with the signal icon inside. The signal icon is black (filled), to indicate
	          the <span class="emphasis"><em>throw</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.intermediate.signal.throw.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateThrowSignalEventXml"></a>XML representation</h4></div></div></div><p>
     	     	 A signal intermediate event is defined as a <a class="link" href="#">intermediate throwing event</a>.
		          The specific type sub-element is in this case a <span class="bold"><strong>signalEventDefinition</strong></span>
		          element.
                 </p><pre class="prettyprint">
&lt;intermediateThrowEvent id="signal"&gt;
	<span class="bold"><strong>&lt;signalEventDefinition signalRef="newCustomerSignal" /&gt;</strong></span>
&lt;/intermediateThrowEvent&gt;
                 </pre><p>    
        	</p><p>
        		An asynchronous signal event would look like this:        		
        		</p><pre class="prettyprint">
&lt;intermediateThrowEvent id="signal"&gt;
	<span class="bold"><strong>&lt;signalEventDefinition signalRef="newCustomerSignal" activiti:async="true" /&gt;</strong></span>
&lt;/intermediateThrowEvent&gt;
                 </pre><p>
        	</p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateSignalEventExample"></a>Example</h4></div></div></div><p>
	        	See section on <a class="link" href="#bpmnSignalEventDefinition" title="Signal Event Definitions">signal event definitions</a>.
	        </p></div></div><div class="section" title="Compensation Intermediate Throwing Event"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnIntermediateThrowCompensationEvent"></a>Compensation Intermediate Throwing Event</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateThrowCompensationEventDescription"></a>Description</h4></div></div></div><p>
		      An intermediate <span class="emphasis"><em>throwing</em></span> <a class="link" href="#">compensation</a> 
		      event can be used to trigger compensation.       
		    </p><p>
		   		<span class="bold"><strong>Triggering compensation:</strong></span>
		   		Compensation can either be triggered for a designated activity or for the scope which hosts the compensation 
		   		event. Compensation is performed through execution of the compensation handler associated with an activity.
		   		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
					   		When compensation is thrown for an activity, the associated compensation handler is executed the same
					   		number of times the activity competed successfully. 
					   	</p></li><li class="listitem"><p>
					   		If compensation is thrown for the current scope, all activities withing the current scope are compensated, 
					   		which includes activities on concurrent branches.  
					   	</p></li><li class="listitem"><p>
							Compensation is triggered hierarchically: if an activity to be compensated is a subprocess, compensation is 
							triggered for all activities contained in the subprocess. If the subprocess has nested activities, compensation 
							is thrown recursively. However, compensation is not propagated to the "upper levels" of the process: if compensation 
							is triggered within a subprocess, it is not propagated to activities outside of the subprocess scope. 
							The bpmn specification states that compensation is triggered for activities at "the same level of subprocess". 
						</p></li><li class="listitem"><p>
							In Activiti compensation is performed in reverse order of execution. This means that whichever activity 
							completed last is compensated first, etc.  
						</p></li><li class="listitem"><p>
							The intermediate throwing compensation event can be used to compensate transaction subprocesses which 
							competed successfully.
						</p></li></ul></div><p>  
		   	</p><p>
				<span class="bold"><strong>Note:</strong></span>
				If compensation is thrown within a scope which contains a subprocess and the subprocess contains activities 
				with compensation handlers, compensation is only propagated to the subprocess if it has completed successfully 
				when compensation is thrown. If some of the activities nested inside the subprocess have completed and have attached 
				compensation handlers, the compensation handlers are not executed if the subprocess containing these activities 
				is not completed yet. Consider the following example: 
				</p><div class="mediaobject" align="center"><img src="images/bpmn.throw.compensation.example1.png" align="middle"></div><p>
				In this process we have two concurrent executions, one executing the embedded subprocess and one executing the 
				"charge credit card" activity. Lets assume both executions are started and the first concurrent execution is waiting 
				for a user to complete the "review bookings" task. The second execution performs the "charge credit card" activity 
				and an error is thrown, which causes the "cancel reservations" event to trigger compensation.
				At this point the parallel subprocess is not yet completed which means that the compensation event is not propagated 
				to the subprocess and thus the "cancel hotel reservation"  compensation handler is not executed.
				If the user task (and thus the embedded subprocess) completes before the "cancel reservations" is performed, 
				compensation is propagated to the embedded subprocess.	
			</p><p>
				<span class="bold"><strong>Process variables:</strong></span>
				When compensating an embedded subprocess, the execution used for executing the compensation handlers has access
				to the local process variables of the subprocess in the state they were in when the subprocess completed execution.
				To achieve this, a snapshot of the process variables associated with the scope execution (execution created for executing the 
				subprocess) is taken. Form this, a couple of implications follow:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
							The compensation handler does not have access to variables added to concurrent executions created 
							inside the subprocess scope.
						</p></li><li class="listitem"><p>
							Process variables associated with executions higher up in the hierarchy, (for instance process variables
							associated with the process instance execution are not contained in the snapshot: the compensation handler
							has access to these process variables in the state they are in when compensation is thrown.
						</p></li><li class="listitem"><p>
							A variable snapshot is only taken for embedded subprocesses, not for other activities.
						</p></li></ul></div><p>								  
			</p><p>
				<span class="bold"><strong>Current limitations:</strong></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
							<code class="code">waitForCompletion="false"</code> is currently unsupported. When compensation is triggered
							using the intermediate throwing compensation event, the event is only left, after compensation completed 
							successfully. 
						 </p></li><li class="listitem"><p>
							Compensation itself is currently performed by concurrent executions. The concurrent executions are started 
							in reverse order in which the compensated activities completed. Future versions of activity might include 
							an option to perform compensation sequentially. 
						</p></li><li class="listitem"><p>
							Compensation is not propagated to sub process instances spawned by call activities.
						</p></li></ul></div><p>
			</p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateThrowCompensationEventGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
	          An intermediate compensation throw event is visualized as a typical intermediate event (Circle with smaller circle inside), 
	          with the compensation icon inside. The compensation icon is black (filled), to indicate
	          the <span class="emphasis"><em>throw</em></span> semantics.
	          </p><div class="mediaobject" align="center"><img src="images/bpmn.intermediate.compensation.throw.event.png" align="middle"></div><p>
	        </p></div><div class="section" title="Xml representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnIntermediateThrowSignalEventXml"></a>Xml representation</h4></div></div></div><p>
     	     	 A compensation intermediate event is defined as a <a class="link" href="#">intermediate throwing event</a>.
		          The specific type sub-element is in this case a <span class="bold"><strong>compensateEventDefinition</strong></span>
		          element.
                 </p><pre class="prettyprint">
&lt;intermediateThrowEvent id="throwCompensation"&gt;
	&lt;compensateEventDefinition /&gt;
&lt;/intermediateThrowEvent&gt;</pre><p>    
                 In addition, the optional argument <code class="code">activityRef</code> can be used to trigger compensation of 
                 a specific scope / activity:
                  </p><pre class="prettyprint">
&lt;intermediateThrowEvent id="throwCompensation"&gt;
	&lt;compensateEventDefinition activityRef="bookHotel" /&gt;
&lt;/intermediateThrowEvent&gt;</pre><p>    
        	</p></div></div></div><div class="section" title="Sequence Flow"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnSequenceFlow"></a>Sequence Flow</h2></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h3 class="title"><a name="sequenceFlowDescription"></a>Description</h3></div></div></div><p>
          A sequence flow is the connector between two elements of a process.
          After an element is visited during process execution, all outgoing sequence flow
          will be followed. This means that the default nature of BPMN 2.0 is to be parallel:
          two outgoing sequence flow will create two separate, parallel paths of execution.
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h3 class="title"><a name="sequenceFlowGraphicalNotation"></a>Graphical notation</h3></div></div></div><p>
          A sequence flow is visualized as an arrow going from the source element towards
          the target element. The arrow always points towards the target.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.sequence.flow.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h3 class="title"><a name="sequenceFlowXml"></a>XML representation</h3></div></div></div><p>
          Sequence flow need to have a process-unique <span class="bold"><strong>id</strong></span>,
          and a reference to an existing <span class="bold"><strong>source</strong></span>
          and <span class="bold"><strong>target</strong></span> element.
          </p><pre class="prettyprint">
&lt;sequenceFlow id="flow1" sourceRef="theStart" targetRef="theTask" /&gt;</pre><p>
        </p></div><div class="section" title="Conditional sequence flow"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnConditionalSequenceFlow"></a>Conditional sequence flow</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="condSeqFlowDescription"></a>Description</h4></div></div></div><p>
          A sequence flow can have a condition defined on it. When a BPMN 2.0 activity
          is left, the default behavior is to evaluate the conditions on the outgoing
          sequence flow. When a condition evaluates to <span class="emphasis"><em>true</em></span>, that
          outgoing sequence flow is selected. When multiple sequence flow are selected
          that way, multiple <span class="emphasis"><em>executions</em></span> will be generated
          and the process will be continued in a parallel way.
        </p><p>
          <span class="bold"><strong>Note:</strong></span> the above holds for BPMN 2.0 activities (and events),
          but not for gateways. Gateways will handle sequence flow with conditions in specific ways,
          depending on the gateway type.
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="conditionalSequenceFlowGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          A conditional sequence flow is visualized as a regular sequence flow,
          with a small diamond at the beginning. The condition expression is shown
          next to the sequence flow.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.conditional.sequence.flow.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="conditionalSequenceFlowXml"></a>XML representation</h4></div></div></div><p>
          A conditional sequence flow is represented in XML as a regular sequence flow,
          containing a <span class="bold"><strong>conditionExpression</strong></span> sub-element.
          Note that for the moment only <span class="emphasis"><em>tFormalExpressions</em></span> are supported,
          Omitting the <span class="emphasis"><em>xsi:type=""</em></span> definition will simply
          default to this only supported type of expressions. 
          </p><pre class="prettyprint">&lt;sequenceFlow id="flow" sourceRef="theStart" targetRef="theTask"&gt;
  &lt;conditionExpression xsi:type="tFormalExpression"&gt;
    &lt;![CDATA[${order.price &gt; 100 &amp;&amp; order.price &lt; 250}]]&gt;
  &lt;/conditionExpression&gt;
&lt;/sequenceFlow&gt;</pre><p>
        </p><p> 
          Currently conditionalExpressions can <span class="bold"><strong>only be used with UEL</strong></span>, detailed info about these can be found in section <a class="link" href="#apiExpressions" title="Expressions">Expressions</a>.
          The expression used should resolve to a boolean value, otherwise an exception is thrown while evaluating the condition.  
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                The example below references data of a process 
                variable, in the typical JavaBean style through getters. 
              </p><p>
</p><pre class="prettyprint">&lt;conditionExpression xsi:type="tFormalExpression"&gt;
  &lt;![CDATA[${order.price &gt; 100 &amp;&amp; order.price &lt; 250}]]&gt;
&lt;/conditionExpression&gt;</pre><p>
              </p></li><li class="listitem"><p>
                This example invokes a method that resolves to a boolean value.
</p><pre class="prettyprint">&lt;conditionExpression xsi:type="tFormalExpression"&gt;
  &lt;![CDATA[${order.isStandardOrder()}]]&gt;
&lt;/conditionExpression&gt;</pre><p>                
              </p></li></ul></div><p>
          
        </p><p>
          The Activiti distribution contains the following example process using value and method expressions
          (see <span class="emphasis"><em>org.activiti.examples.bpmn.expression)</em></span>:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.uel-expression.on.seq.flow.png" align="middle"></div><p>
        </p></div></div><div class="section" title="Default sequence flow"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnDefaultSequenceFlow"></a>Default sequence flow</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnDefaultSequenceFlowDescription"></a>Description</h4></div></div></div><p>
          All BPMN 2.0 tasks and gateways can have a <span class="bold"><strong>default sequence flow</strong></span>.
          This sequence flow is only selected as the outgoing sequence flow for that activity 
          if and only if none of the other sequence flow could be selected. Conditions
          on a default sequence flow are always ignored.
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnDefaultSequenceFlowGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          A default sequence flow is visualized as a regular sequence flow, with a 'slash' marker
          at the beginning.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.default.sequence.flow.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnDefaultSequenceFlowXmlRepresentation"></a>XML representation</h4></div></div></div><p>
          A default sequence flow for a certain activity is defined by the <span class="bold"><strong>default attribute</strong></span>
          on that activity. The following XML snippet shows for example an exclusive gateway that
          has as default sequence flow <span class="emphasis"><em>flow 2</em></span>. Only when <span class="emphasis"><em>conditionA</em></span>
          and <span class="emphasis"><em>conditionB</em></span> both evaluate to false, will it be chosen as outgoing 
          sequence flow for the gateway.
          </p><pre class="prettyprint">
&lt;exclusiveGateway id="exclusiveGw" name="Exclusive Gateway" <span class="bold"><strong>default="flow2"</strong></span> /&gt;
&lt;sequenceFlow id="flow1" sourceRef="exclusiveGw" targetRef="task1"&gt;
  &lt;conditionExpression xsi:type="tFormalExpression"&gt;${conditionA}&lt;/conditionExpression&gt;
&lt;/sequenceFlow&gt;
&lt;sequenceFlow id="flow2" sourceRef="exclusiveGw" targetRef="task2"/&gt;
&lt;sequenceFlow id="flow3" sourceRef="exclusiveGw" targetRef="task3"&gt;
  &lt;conditionExpression xsi:type="tFormalExpression"&gt;${conditionB}&lt;/conditionExpression&gt;
&lt;/sequenceFlow&gt;          
          </pre><p>
          Which corresponds with the following graphical representation:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.default.sequence.flow.example.png" align="middle"></div><p>
        </p></div></div></div><div class="section" title="Gateways"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnGateways"></a>Gateways</h2></div></div></div><p>
        A gateway is used to control the flow of execution (or as the BPMN 2.0 describes,
        the <span class="emphasis"><em>tokens</em></span> of execution). A gateway is capable of <span class="emphasis"><em>consuming</em></span>
        or <span class="emphasis"><em>generating</em></span> tokens.
      </p><p>  
        A gateway is graphically visualized as a diamond shape, with an icon inside. 
        The icon shows the type of gateway.
        </p><div class="mediaobject" align="center"><img src="images/bpmn.gateway.png" align="middle"></div><p>
      </p><div class="section" title="Exclusive Gateway"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnExclusiveGateway"></a>Exclusive Gateway</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="exclusiveGatewayDescription"></a>Description</h4></div></div></div><p>
          An exclusive gateway (also called the <span class="emphasis"><em>XOR gateway</em></span> 
          or more technical the <span class="emphasis"><em>exclusive data-based gateway</em></span>),
          is used to model a <span class="bold"><strong>decision</strong></span> in the process.
          When the execution arrives at this gateway, all outgoing sequence flow are
          evaluated in the order in which they are defined. The sequence flow
          which condition evaluates to true (or which doesn't have a condition set, 
          conceptually having a <span class="emphasis"><em>'true'</em></span> defined on the sequence flow)
          is selected for continuing the process. 
        </p><p>
          <span class="bold"><strong>Note that the semantics of outgoing sequence flow is 
          different to that of the general case in BPMN 2.0. While in general all sequence
          flow which condition evaluates to true are selected to continue in a parallel way,
          only one sequence flow is selected when using the exclusive gateway. 
          In case multiple sequence flow have a condition that evaluates to true, the 
          first one defined in the XML (and only that one!) is selected for continuing the process.
          If no sequence flow can be selected, an exception will be thrown.</strong></span>
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="exclusiveGatewayGraphNotation"></a>Graphical notation</h4></div></div></div><p>
          An exclusive gateway is visualized as a typical gateway (i.e. a diamond shape)
          with an 'X' icon inside, referring to the <span class="emphasis"><em>XOR</em></span> semantics.
          Note that a gateway without an icon inside defaults to an exclusive gateway.
          The BPMN 2.0 specification does not allow mixing the diamond with and without an X
          in the same process definition.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.exclusive.gateway.notation.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="exclusiveGatewayXML"></a>XML representation</h4></div></div></div><p>
          The XML representation of an exclusive gateway is straight-forward: one line defining
          the gateway and condition expressions defined on the outgoing sequence flow. 
          See the section on <a class="link" href="#bpmnConditionalSequenceFlow" title="Conditional sequence flow">conditional sequence flow</a>
          to see which options are available for such expressions.
       </p><p>   
          Take for example the following model:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.exclusive.gateway.png" align="middle"></div><p> 
          Which is represented in XML as follows:
          </p><pre class="prettyprint">&lt;exclusiveGateway id="exclusiveGw" name="Exclusive Gateway" /&gt;
    
&lt;sequenceFlow id="flow2" sourceRef="exclusiveGw" targetRef="theTask1"&gt;
  &lt;conditionExpression xsi:type="tFormalExpression"&gt;${input == 1}&lt;/conditionExpression&gt;
&lt;/sequenceFlow&gt;
    
&lt;sequenceFlow id="flow3" sourceRef="exclusiveGw" targetRef="theTask2"&gt;
  &lt;conditionExpression xsi:type="tFormalExpression"&gt;${input == 2}&lt;/conditionExpression&gt;
&lt;/sequenceFlow&gt;
    
&lt;sequenceFlow id="flow4" sourceRef="exclusiveGw" targetRef="theTask3"&gt;
  &lt;conditionExpression xsi:type="tFormalExpression"&gt;${input == 3}&lt;/conditionExpression&gt;
&lt;/sequenceFlow&gt;</pre><p>
        </p></div></div><div class="section" title="Parallel Gateway"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnParallelGateway"></a>Parallel Gateway</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnParallelGatewayDescription"></a>Description</h4></div></div></div><p>
          Gateways can also be used to model concurrency in a process. The most straightforward
          gateway to introduce concurrency in a process model, is the 
          <span class="bold"><strong>Parallel Gateway</strong></span>, which allows to <span class="emphasis"><em>fork</em></span> 
          into multiple paths of execution or <span class="emphasis"><em>join</em></span> multiple incoming paths
          of execution.
        </p><p>
          The functionality of the parallel gateway is based on the incoming and outgoing sequence flow:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>fork:</strong></span>
                all outgoing sequence flow are followed in parallel, creating one concurrent
                execution for each sequence flow.
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>join:</strong></span>   
                all concurrent executions arriving at the parallel gateway wait in the gateway
                until an execution has arrived for each of the incoming sequence flow. Then the 
                process continues past the joining gateway.
              </p></li></ul></div><p>
          Note that a parallel gateway can have <span class="bold"><strong>both fork and join behavior</strong></span>,
          if there are multiple incoming and outgoing sequence flow for the same parallel gateway.
          In that case, the gateway will first join all incoming sequence flow, before splitting
          into multiple concurrent paths of executions.
        </p><p>
          <span class="bold"><strong>An important difference with other gateway types is that
          the parallel gateway does not evaluate conditions. If conditions are defined
          on the sequence flow connected with the parallel gateway, they are simply neglected.</strong></span>  
        </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnParallelGatewayGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          A parallel gateway is visualized as a gateway (diamond shape) with the 'plus' symbol inside,
          referring to the 'AND' semantics.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.parallel.gateway.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnParallelGatewayyXML"></a>XML representation</h4></div></div></div><p>
          Defining a parallel gateway needs one line of XML:
          </p><pre class="prettyprint">&lt;parallelGateway id="myParallelGateway" /&gt;</pre><p>
          The actual behavior (fork, join or both), is defined by 
          the sequence flow connected to the parallel gateway.
        </p><p>
          For example, the model above comes down to the following XML:
</p><pre class="prettyprint">
    &lt;startEvent id="theStart" /&gt;
    &lt;sequenceFlow id="flow1" sourceRef="theStart" targetRef="fork" /&gt;
    
    <span class="bold"><strong>&lt;parallelGateway id="fork" /&gt;</strong></span>
    &lt;sequenceFlow sourceRef="fork" targetRef="receivePayment" /&gt;
    &lt;sequenceFlow sourceRef="fork" targetRef="shipOrder" /&gt;
    
    &lt;userTask id="receivePayment" name="Receive Payment" /&gt;  
    &lt;sequenceFlow sourceRef="receivePayment" targetRef="join" /&gt;
    
    &lt;userTask id="shipOrder" name="Ship Order" /&gt; 
    &lt;sequenceFlow sourceRef="shipOrder" targetRef="join" /&gt;
    
    <span class="bold"><strong>&lt;parallelGateway id="join" /&gt;</strong></span>
    &lt;sequenceFlow sourceRef="join" targetRef="archiveOrder" /&gt;
    
    &lt;userTask id="archiveOrder" name="Archive Order" /&gt; 
    &lt;sequenceFlow sourceRef="archiveOrder" targetRef="theEnd" /&gt;
    
    &lt;endEvent id="theEnd" /&gt;
</pre><p>
        </p><p>
          In the above example, after the process is started, two tasks will be created:
          </p><pre class="prettyprint">ProcessInstance pi = runtimeService.startProcessInstanceByKey("forkJoin");
TaskQuery query = taskService.createTaskQuery()
                         .processInstanceId(pi.getId())
                         .orderByTaskName()
                         .asc();

List&lt;Task&gt; tasks = query.list();
assertEquals(2, tasks.size());

Task task1 = tasks.get(0);
assertEquals("Receive Payment", task1.getName());
Task task2 = tasks.get(1);
assertEquals("Ship Order", task2.getName());</pre><p>
          When these two tasks are completed, the second parallel gateway will join the two
          executions and since there is only one outgoing sequence flow, no concurrent paths
          of execution will be created, and only the <span class="emphasis"><em>Archive Order</em></span>
          task will be active.
        </p><p>
          Note that a parallel gateway does not need to be 'balanced' (i.e. a matching number
          of incoming/outgoing sequence flow for corresponding parallel gateways). 
          A parallel gateway will simply wait for all incoming sequence flow and create 
          a concurrent path of execution for each outgoing sequence flow, not influenced by
          other constructs in the process model. So, the following process is legal in BPMN 2.0:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.unbalanced.parallel.gateway.png" align="middle"></div><p>
        </p></div></div><div class="section" title="Inclusive Gateway"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnInclusiveGateway"></a>Inclusive Gateway</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnInclusiveGatewayDescription"></a>Description</h4></div></div></div><p>
          The <span class="bold"><strong>Inclusive Gateway</strong></span> can be seen as a combination of an exclusive
          and a parallel gateway. Like an exclusive gateway you can define conditions on outgoing sequence flows
          and the inclusive gateway will evaluate them. But the main difference is that the inclusive gateway can take
          more than one sequence flow, like the parallel gateway.
        </p><p>
          The functionality of the inclusive gateway is based on the incoming and outgoing sequence flow:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>fork:</strong></span>
                all outgoing sequence flow conditions are evaluated and for the sequence flow conditions that 
                evaluate to true the flows are followed in parallel, creating one concurrent
                execution for each sequence flow.
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>join:</strong></span>   
                all concurrent executions arriving at the inclusive gateway wait in the gateway
                until an execution has arrived for each of the incoming sequence flows that have a process token. 
                This is an important difference with the parallel gateway. So in other words, the inclusive gateway will only wait
                for the incoming sequence flows that will be executed.
                After the join, the process continues past the joining inclusive gateway.
              </p></li></ul></div><p>
          Note that an inclusive gateway can have <span class="bold"><strong>both fork and join behavior</strong></span>,
          if there are multiple incoming and outgoing sequence flow for the same inclusive gateway.
          In that case, the gateway will first join all incoming sequence flows that have a process token, before splitting
          into multiple concurrent paths of executions for the outgoing sequence flows that have a condition that evaluates to true.
        </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnInclusiveGatewayGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          A parallel gateway is visualized as a gateway (diamond shape) with the 'circle' symbol inside.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.inclusive.gateway.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnInclusiveGatewayXML"></a>XML representation</h4></div></div></div><p>
          Defining an inclusive gateway needs one line of XML:
          </p><pre class="prettyprint">&lt;inclusiveGateway id="myInclusiveGateway" /&gt;</pre><p>
          The actual behavior (fork, join or both), is defined by 
          the sequence flows connected to the inclusive gateway.
        </p><p>
          For example, the model above comes down to the following XML:
</p><pre class="prettyprint">
    &lt;startEvent id="theStart" /&gt;
    &lt;sequenceFlow id="flow1" sourceRef="theStart" targetRef="fork" /&gt;
    
    <span class="bold"><strong>&lt;inclusiveGateway id="fork" /&gt;</strong></span>
    &lt;sequenceFlow sourceRef="fork" targetRef="receivePayment" &gt;
    &lt;conditionExpression xsi:type="tFormalExpression"&gt;${paymentReceived == false}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    &lt;sequenceFlow sourceRef="fork" targetRef="shipOrder" &gt;
    &lt;conditionExpression xsi:type="tFormalExpression"&gt;${shipOrder == true}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    
    &lt;userTask id="receivePayment" name="Receive Payment" /&gt;  
    &lt;sequenceFlow sourceRef="receivePayment" targetRef="join" /&gt;
    
    &lt;userTask id="shipOrder" name="Ship Order" /&gt; 
    &lt;sequenceFlow sourceRef="shipOrder" targetRef="join" /&gt;
    
    <span class="bold"><strong>&lt;inclusiveGateway id="join" /&gt;</strong></span>
    &lt;sequenceFlow sourceRef="join" targetRef="archiveOrder" /&gt;
    
    &lt;userTask id="archiveOrder" name="Archive Order" /&gt; 
    &lt;sequenceFlow sourceRef="archiveOrder" targetRef="theEnd" /&gt;
    
    &lt;endEvent id="theEnd" /&gt;
</pre><p>
        </p><p>
          In the above example, after the process is started, two tasks will be created if the process variables
          paymentReceived == false and shipOrder == true. In case only one of these process variables equals to true
          only one task will be created. If no condition evaluates to true and exception is thrown. This can be prevented
          by specifying a default outgoing sequence flow. In the following example one task will be created, the ship order task:
          </p><pre class="prettyprint">HashMap&lt;String, Object&gt; variableMap = new HashMap&lt;String, Object&gt;();
          variableMap.put("receivedPayment", true);
          variableMap.put("shipOrder", true);
          ProcessInstance pi = runtimeService.startProcessInstanceByKey("forkJoin");
TaskQuery query = taskService.createTaskQuery()
                         .processInstanceId(pi.getId())
                         .orderByTaskName()
                         .asc();

List&lt;Task&gt; tasks = query.list();
assertEquals(1, tasks.size());

Task task = tasks.get(0);
assertEquals("Ship Order", task.getName());</pre><p>
          When this task is completed, the second inclusive gateway will join the two
          executions and since there is only one outgoing sequence flow, no concurrent paths
          of execution will be created, and only the <span class="emphasis"><em>Archive Order</em></span>
          task will be active.
        </p><p>
          Note that an inclusive gateway does not need to be 'balanced' (i.e. a matching number
          of incoming/outgoing sequence flow for corresponding inclusive gateways). 
          An inclusive gateway will simply wait for all incoming sequence flow and create 
          a concurrent path of execution for each outgoing sequence flow, not influenced by
          other constructs in the process model.
        </p></div></div><div class="section" title="Event-based Gateway"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnEventbasedGateway"></a>Event-based Gateway</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="eventBasedGatewayDescription"></a>Description</h4></div></div></div><p>
        	The Event-based Gateway allows to take a decision based on events. Each outgoing sequence flow of the gateway needs to be connected to an 
        	intermediate catching event. When process execution reaches an Event-based Gateway, the gateway acts like a wait state: execution is suspended. 
        	In addition, for each outgoing sequence flow, an event subscription is created.   
        </p><p>
        	Note the sequence flows running out of an Event-based Gateway are different from ordinary sequence flows. These sequence flows are never actually 
        	"executed". On the contrary, they allow the process engine to determine which events an execution arriving at an Event-based Gateway needs to 
        	subscribe to. The following restrictions apply:        	
        	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        				An Event-based Gateway must have two or more outgoing sequence flows.
        			</p></li><li class="listitem"><p>
        				An Event-based Gateway must only be to elements of type <code class="code">intermediateCatchEvent</code> only. 
        				(Receive Tasks after an Event-based Gateway are not supported by Activiti.)
        			</p></li><li class="listitem"><p>
        				An <code class="code">intermediateCatchEvent</code> connected to an Event-based Gateway must have a single incoming sequence flow.
        			</p></li></ul></div><p>
        	
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="eventBasedGatewayGraphNotation"></a>Graphical notation</h4></div></div></div><p>
          An Event-based Gateway is visualized as a diamond shape like other BPMN gateways
          with a special icon inside.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.event.based.gateway.notation.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="eventBasedGatewayXML"></a>XML representation</h4></div></div></div><p>
          The XML element used to define an Event-based Gateway is <code class="code">eventBasedGateway</code>.
        </p></div><div class="section" title="Example(s)"><div class="titlepage"><div><div><h4 class="title"><a name="eventBasedGatewayExample"></a>Example(s)</h4></div></div></div><p>
	      	The following process is an example of a process with an Event-based Gateway. When the execution arrives at the Event-based Gateway,
	      	process execution is suspended. In addition, the process instance subscribes to the alert signal event and created a timer which fires after 10 minutes.
	      	This effectively causes the process engine to wait for ten minutes for a signal event. If the signal occurs within 10 minutes, the timer is cancelled and 
	      	execution continues after the signal. If the signal is not fired, execution continues after the timer and the signal subscription is cancelled. 
	      	
	      	</p><div class="mediaobject" align="center"><img src="images/bpmn.event.based.gateway.example.png" align="middle"></div><p>
</p><pre class="prettyprint">      	
&lt;definitions id="definitions"
	xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
	xmlns:activiti="http://activiti.org/bpmn" 
	targetNamespace="Examples"&gt;

	&lt;signal id="alertSignal" name="alert" /&gt;

	&lt;process id="catchSignal"&gt;

		&lt;startEvent id="start" /&gt;

		&lt;sequenceFlow sourceRef="start" targetRef="gw1" /&gt;

		&lt;eventBasedGateway id="gw1" /&gt;
		
		&lt;sequenceFlow sourceRef="gw1" targetRef="signalEvent" /&gt;		
		&lt;sequenceFlow sourceRef="gw1" targetRef="timerEvent" /&gt;

		&lt;intermediateCatchEvent id="signalEvent" name="Alert"&gt;
			&lt;signalEventDefinition signalRef="alertSignal" /&gt;
		&lt;/intermediateCatchEvent&gt;
		
		&lt;intermediateCatchEvent id="timerEvent" name="Alert"&gt;
			&lt;timerEventDefinition&gt;
				&lt;timeDuration&gt;PT10M&lt;/timeDuration&gt;
			&lt;/timerEventDefinition&gt;		
		&lt;/intermediateCatchEvent&gt;
		
		&lt;sequenceFlow sourceRef="timerEvent" targetRef="exGw1" /&gt;
		&lt;sequenceFlow sourceRef="signalEvent" targetRef="task" /&gt;
			
		&lt;userTask id="task" name="Handle alert"/&gt;
		
		&lt;exclusiveGateway id="exGw1" /&gt;
		
		&lt;sequenceFlow sourceRef="task" targetRef="exGw1" /&gt;
		&lt;sequenceFlow sourceRef="exGw1" targetRef="end" /&gt;

		&lt;endEvent id="end" /&gt;
&lt;/process&gt;
&lt;/definitions&gt;</pre><p>
      	</p></div></div></div><div class="section" title="Tasks"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnTask"></a>Tasks</h2></div></div></div><div class="section" title="User Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnUserTask"></a>User Task</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnUserTaskDescription"></a>Description</h4></div></div></div><p>
			   A 'user task' is used to model work that needs to be done by a human actor. 
			   When the process execution arrives at such a user task, a new task is created in the 
			   task list of the user(s) or group(s) assigned to that task.
			 </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnUserTaskGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
			   A user task is visualized as a typical task (rounded rectangle), with a small
			   user icon in the left upper corner.
			   </p><div class="mediaobject" align="center"><img src="images/bpmn.user.task.png" align="middle"></div><p>
			 </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnUserTaskXml"></a>XML representation</h4></div></div></div><p>
				  A user task is defined in XML as follows. The <span class="emphasis"><em>id</em></span> attribute
				  is required, the <span class="emphasis"><em>name</em></span> attribute is optional.
				  </p><pre class="prettyprint">
&lt;userTask id="theTask" name="Important task" /&gt;			  
				  </pre><p>
				</p><p>
			    A user task can have also a description. In fact any BPMN 2.0 element can have
				  a description. A description is defined by adding
				  the <span class="bold"><strong>documentation</strong></span> element.
				  </p><pre class="prettyprint">
&lt;userTask id="theTask" name="Schedule meeting" &gt;
  &lt;documentation&gt;
	  Schedule an engineering meeting for next week with the new hire.
  &lt;/documentation&gt;</pre><p>
				
				  The description text can be retrieved from the task in the standard Java way:
				  </p><pre class="prettyprint">task.getDescription()</pre><p>
				</p></div><div class="section" title="Due Date"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnUserTaskDueDate"></a>Due Date</h4></div></div></div><p>
                Each task has a field, indicating the due date of that task. The Query API can be used to query for tasks that are due 
                on, before or after a certain date.
              </p><p>
                There is an activity extension which allows you to specify an expression in your task-definition to set the initial due
                date of a task when it is created. The expression <span class="bold"><strong>should always resolve to a <code class="literal">java.util.Date</code>, 
                <code class="literal">java.util.String (ISO8601 formatted)</code>, ISO8601 time-duration (eg. PT50M) or <code class="literal">null</code></strong></span>. 
                For example, you could use a date that was entered in a previous form in the process or calculated in a previous Service Task. In case a time-duration is used, the due-date is calculated based on the current time, incremented by the given period. For example, when "PT30M" is used as dueDate, the task is due in thirty minutes from now.
              </p><pre class="prettyprint">
&lt;userTask id="theTask" name="Important task" <span class="bold"><strong>activiti:dueDate="${dateVariable}"</strong></span>/&gt;</pre></div><p>
              The due date of a task can also be altered using the <code class="literal">TaskService</code> or in <code class="literal">TaskListener</code>s using the passed
              <code class="literal">DelegateTask</code>.
            </p><div class="section" title="User assignment"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnUserTaskAssignment"></a>User assignment</h4></div></div></div><p>
				  A user task can be directly assigned to a user. This is done by defining a
				  <span class="bold"><strong>humanPerformer</strong></span> sub element.
				  Such a <span class="emphasis"><em>humanPerformer</em></span> definition needs a 
				  <span class="bold"><strong>resourceAssignmentExpression</strong></span> that actually defines
				  the user. Currently, only <span class="bold"><strong>formalExpressions</strong></span> are supported.
				  </p><pre class="prettyprint">
&lt;process ... &gt;
  
  ...
  
  &lt;userTask id='theTask' name='important task' &gt;
    &lt;humanPerformer&gt;
      &lt;resourceAssignmentExpression&gt;
        &lt;formalExpression&gt;kermit&lt;/formalExpression&gt;
      &lt;/resourceAssignmentExpression&gt;
    &lt;/humanPerformer&gt;
  &lt;/userTask&gt;</pre><p>
				</p><p>
				  <span class="bold"><strong>Only one</strong></span> user can be assigned as human performer to the task.
				  In Activiti terminology, this user is called the <span class="bold"><strong>assignee</strong></span>.
				  Tasks that have an assignee are not visible in the task lists of other people and
				  can be found in the so-called <span class="bold"><strong>personal task list</strong></span> of the assignee instead. 
				</p><p>
				  Tasks directly assigned to users can be retrieved through the TaskService as follows:
				  </p><pre class="prettyprint">List&lt;Task&gt; tasks = taskService.createTaskQuery().taskAssignee("kermit").list();</pre><p>
				</p><p>
          Tasks can also be put in the so-called <span class="bold"><strong>candidate task list</strong></span>
          of people. In that case, the <span class="bold"><strong>potentialOwner</strong></span> construct must be used.
          The usage is similar to the <span class="emphasis"><em>humanPerformer</em></span> construct. Do note that it is 
          required to define for each element in the formal expression to specify if it is
          a user or a group (the engine cannot guess this).
          </p><pre class="prettyprint">
&lt;process ... &gt;
  
  ...
  
  &lt;userTask id='theTask' name='important task' &gt;
    &lt;potentialOwner&gt;
      &lt;resourceAssignmentExpression&gt;
        <span class="bold"><strong>&lt;formalExpression&gt;user(kermit), group(management)&lt;/formalExpression&gt;</strong></span>
      &lt;/resourceAssignmentExpression&gt;
    &lt;/potentialOwner&gt;
  &lt;/userTask&gt;</pre><p>
        </p><p>
          Tasks defines with the <span class="emphasis"><em>potential owner</em></span> construct, can be retrieved as follows
          (or a similar <span class="emphasis"><em>TaskQuery</em></span> usage as for the tasks with an assignee):
          </p><pre class="prettyprint">
 List&lt;Task&gt; tasks = taskService.createTaskQuery().taskCandidateUser("kermit");</pre><p>
          
          This will retrieve all tasks where kermit is a <span class="bold"><strong>candidate user</strong></span>,
          i.e. the formal expression contains <span class="emphasis"><em>user(kermit)</em></span>. This will also
          retrieve all tasks that are <span class="bold"><strong>assigned to a group where kermit is
          a member of</strong></span> (e.g. <span class="emphasis"><em>group(management)</em></span>, if kermit is a member of that group
          and the Activiti identity component is used).
          The groups of a user are resolved at runtime and these can be 
          managed through the <a class="link" href="#apiEngine" title="The Process Engine API and services">IdentityService</a>.
        </p><p>
          If no specifics are given whether the given text string is a user or group, 
          the engine defaults to group. So the following would be the same as when
          <span class="emphasis"><em>group(accountancy) was declared</em></span>.
          </p><pre class="prettyprint">
&lt;formalExpression&gt;accountancy&lt;/formalExpression&gt;</pre><p>
        </p></div><div class="section" title="Activiti extensions for task assignment"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnUserTaskUserAssignmentExtension"></a>Activiti extensions for task assignment</h4></div></div></div><p>
            It is clear that user and group assignments are quite cumbersome
            for use cases where the assignment is not complex. 
            To avoid these complexities, <a class="link" href="#bpmnCustomExtensions" title="Custom extensions">custom extensions</a>
            on the user task are possible.
          </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  <span class="bold"><strong>assignee attribute</strong></span>: this custom extension allows to
                  directly assign a user task to a given user.
                  </p><pre class="prettyprint">
&lt;userTask id="theTask" name="my task" activiti:assignee="kermit" /&gt;</pre><p>

                  This is exactly the same as using a <span class="bold"><strong>humanPerformer</strong></span> 
                  construct as defined <a class="link" href="#bpmnUserTaskAssignment" title="User assignment">above</a>.
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>candidateUsers attribute</strong></span>: this custom extension allows to
                  make a user a candidate for a task.
                  </p><pre class="prettyprint">
&lt;userTask id="theTask" name="my task" activiti:candidateUsers="kermit, gonzo" /&gt;</pre><p>

                  This is exactly the same as using a <span class="bold"><strong>potentialOwner</strong></span> 
                  construct as defined <a class="link" href="#bpmnUserTaskAssignment" title="User assignment">above</a>.
                  Note that it is not required to use the <span class="emphasis"><em>user(kermit)</em></span> declaration
                  as is the case with the <span class="emphasis"><em>potential owner</em></span> construct, since the attribute 
                  can only be used for users.
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>candidateGroups attribute</strong></span>: this custom extension allows to
                  make a group a candidate for a task.
                  </p><pre class="prettyprint">
&lt;userTask id="theTask" name="my task" activiti:candidateGroups="management, accountancy" /&gt;</pre><p>

                  This is exactly the same as using a <span class="bold"><strong>potentialOwner</strong></span> 
                  construct as defined <a class="link" href="#bpmnUserTaskAssignment" title="User assignment">above</a>.
                  Note that it is not required to use the <span class="emphasis"><em>group(management)</em></span> declaration
                  as is the case with the <span class="emphasis"><em>potential owner</em></span> construct, since the attribute 
                  can only be used for groups.
                </p></li><li class="listitem"><p>
                  <span class="emphasis"><em>candidateUsers</em></span> and <span class="emphasis"><em>candidateGroups</em></span> can both
                  be defined on the same user task.
                </p></li></ul></div><p>
          </p><p>
            Note: Although Actviti provides an identity management component,
            which is exposed through the <a class="link" href="#apiEngine" title="The Process Engine API and services">IdentityService</a>,
            no check is done whether a provided user is known by the identity component.
            This allows Activiti to integrate with existing identity management solutions
            when it is embedded into an application.
          </p><p>
            In case the previous approaches are not sufficient, it is possible to delegate to 
            custom assignment logic using a <a class="link" href="#taskListeners" title="Task listener">task listener</a>
            on the create event:
            </p><pre class="prettyprint">
&lt;userTask id="task1" name="My task" &gt;
  &lt;extensionElements&gt;
    &lt;activiti:taskListener event="create" class="org.activiti.MyAssignmentHandler" /&gt;
  &lt;/extensionElements&gt;
&lt;/userTask&gt;</pre><p>
            The <code class="literal">DelegateTask</code> that is passed to the <code class="literal">TaskListener</code>
            implementation, allows to set the assignee and candidate-users/groups:
            </p><pre class="prettyprint">
public class MyAssignmentHandler implements TaskListener {

  public void notify(DelegateTask delegateTask) {
    // Execute custom identity lookups here
    
    // and then for example call following methods:
    delegateTask.setAssignee("kermit");
    delegateTask.addCandidateUser("fozzie");
    delegateTask.addCandidateGroup("management");
    ...
  }
  
}</pre><p>
          </p><p>
            When using Spring it is possible to use the custom assignment attributes as described in the section above,
            and delegate to a Spring bean using a <a class="link" href="#taskListeners" title="Task listener">task listener</a>
            with an <a class="link" href="#springExpressions" title="Expressions">expression</a> that listens to task <span class="emphasis"><em>create</em></span> events.
            In the following example, the assignee will be set by calling the <code class="literal">findManagerOfEmployee</code>
            on the <code class="literal">ldapService</code> Spring bean. The <span class="emphasis"><em>emp</em></span> parameter
            that is passed, is a process variable&gt;.
            </p><pre class="prettyprint">&lt;userTask id="task" name="My Task" activiti:assignee="${ldapService.findManagerForEmployee(emp)}"/&gt;</pre><p>
            This also works similar for candidate users and groups:
            </p><pre class="prettyprint">&lt;userTask id="task" name="My Task" activiti:candidateUsers="${ldapService.findAllSales()}"/&gt;</pre><p>
            Note that this will only work if the return type of the invoked methods is <code class="literal">String</code>
            or <code class="literal">Collection&lt;String&gt;</code> (for candidate users and groups):
            </p><pre class="prettyprint">            
public class FakeLdapService {
  
  public String findManagerForEmployee(String employee) {
    return "Kermit The Frog";
  }
  
  public List&lt;String&gt; findAllSales() {
    return Arrays.asList("kermit", "gonzo", "fozzie");
  }

}</pre><p>
          </p></div></div><div class="section" title="Script Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnScriptTask"></a>Script Task</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnScriptTaskDescription"></a>Description</h4></div></div></div><p>
		      A script task is an automatic activity. When a process execution arrives at the 
		      script task, the corresponding script is executed. 
		    </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnScriptTaskGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
		      A script task is visualized as a typical BPMN 2.0 task (rounded rectangle),
		      with a small 'script' icon in the top-left corner of the rectangle.
		      </p><div class="mediaobject" align="center"><img src="images/bpmn.scripttask.png" align="middle"></div><p>
		    </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnScriptTaskXml"></a>XML representation</h4></div></div></div><p>
		      A script task is defined by specifying the <span class="bold"><strong>script</strong></span>
		      and the <span class="bold"><strong>scriptFormat</strong></span>.
</p><pre class="prettyprint">
&lt;scriptTask id="theScriptTask" name="Execute script" scriptFormat="groovy"&gt;
  &lt;script&gt;
    sum = 0
    for ( i in inputArray ) {
      sum += i
    }
  &lt;/script&gt;
&lt;/scriptTask&gt;</pre><p>
		    </p><p>
		      The value of the <span class="bold"><strong>scriptFormat</strong></span> attribute must be a
		      name that is compatible with the <a class="ulink" href="http://jcp.org/en/jsr/detail?id=223" target="_top">JSR-223</a>
		      (scripting for the Java platform). By default JavaScript is included in every JDK and as such
		      doesn't need any additional jars. If you want to use another (JSR-223 compatible) scripting
		      engine, it is sufficient to add the corresponding jar to the classpath and use
		      the appropriate name. For example, the Activiti unit tests often use Groovy because 
		      the syntax is pretty similar to that of Java.
		    </p><p>
		      Do note that the Grovy scripting engine is bundled with the groovy-all jar. Before version 2.0,
		      the scripting engine was part of the regular Groovy jar. As such, one must now add following dependency:
		      </p><pre class="prettyprint">
&lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;version&gt;2.x.x&lt;version&gt;
&lt;/dependency&gt;</pre><p>
		    </p></div><div class="section" title="Variables in scripts"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnScriptTaskVariables"></a>Variables in scripts</h4></div></div></div><p>
		      All process variables that are accessible through the execution that arrives in the
		      script task, can be used within the script. In the example, the script variable
		      <span class="emphasis"><em>'inputArray'</em></span> is in fact a process variable (an array of integers).
</p><pre class="prettyprint">
&lt;script&gt;
    sum = 0
    for ( i in <span class="bold"><strong>inputArray</strong></span> ) {
      sum += i
    }
&lt;/script&gt;</pre><p>
		    </p><p>
		      It's also possible to set process variables in a script, simply by calling 
		      <span class="emphasis"><em>execution.setVariable("variableName", variableValue)</em></span>.
		      By default, no variables are stored automatically (<span class="bold"><strong>Note: before Activiti 5.12 this was the case!</strong></span>).
		      It is possible to automatically store any variable defined in the script
		      (eg. <span class="emphasis"><em>sum</em></span> in the example above) by setting the property
		      <code class="literal">autoStoreVariables</code> on the <code class="literal">scriptTask</code> to <code class="literal">true</code>.
		      However, <span class="bold"><strong>the best practice is not to do this and use an explicit execution.setVariable() call</strong></span>,
		      as on some recent versions of the JDK auto storing of variables does not work for some scripting languages.
		      See <a class="ulink" href="http://www.jorambarrez.be/blog/2013/03/25/bug-on-jdk-1-7-0_17-when-using-scripttask-in-activiti/" target="_top">this link</a> for more details.
		    </p><p>
</p><pre class="prettyprint">
&lt;scriptTask id="script" scriptFormat="JavaScript" activiti:autoStoreVariables="false"&gt;
</pre><p>
              The default of this parameter is <code class="literal">false</code>, meaning that if the parameter is omitted
              from the script task definition, all the declared variables will only exist during the duration of the script.
		    </p><p>
		      Example on how to set a variable in a script:
</p><pre class="prettyprint">
&lt;script&gt;
    def scriptVar = "test123"
    execution.setVariable("myVar", scriptVar)
&lt;/script&gt;</pre><p>
		    </p><p>
		      Note: the following names are reserved and <span class="bold"><strong>cannot be used</strong></span> 
		      as variable names: <span class="bold"><strong>out, out:print, lang:import, context, elcontext</strong></span>.
		    </p></div><div class="section" title="Script results"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnScriptTaskResultValue"></a>Script results</h4></div></div></div><p>
		      The return value of a script task can be assigned to an already existing or to a new process variable by
              specifying the process variable name as a literal value for the <span class="emphasis"><em>'activiti:resultVariable'</em></span> attribute
              of a script task definition. Any existing value for a specific process variable will be overwritten by the result
              value of the script execution. When not specifying a result variable name, the script result value gets ignored.
</p><pre class="prettyprint">
&lt;scriptTask id="theScriptTask" name="Execute script" scriptFormat="juel" activiti:resultVariable="myVar"&gt;
  &lt;script&gt;#{echo}&lt;/script&gt;
&lt;/scriptTask&gt;</pre><p>

              In the above example, the result of the script execution (the value of the resolved expression <span class="emphasis"><em>'#{echo}'</em></span>) is set
              to the process variable named <span class="emphasis"><em>'myVar'</em></span> after the script completes.
		    </p></div></div><div class="section" title="Java Service Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnJavaServiceTask"></a>Java Service Task</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnJavaServiceTaskDescription"></a>Description</h4></div></div></div><p>
	       A Java service task is used to invoke an external Java class.
	     </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnJavaServiceTaskGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
        A service task is visualized as a rounded rectangle with a small gear icon in the top-left corner.
        </p><div class="mediaobject" align="center"><img src="images/bpmn.java.service.task.png" align="middle"></div><p>
       </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnJavaServiceTaskXML"></a>XML representation</h4></div></div></div><p>
         There are 4 ways of declaring how to invoke Java logic:
       </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Specifying a class that implements JavaDelegate or ActivityBehavior</p></li><li class="listitem"><p>Evaluating an expression that resolves to a delegation object</p></li><li class="listitem"><p>Invoking a method expression</p></li><li class="listitem"><p>Evaluating a value expression</p></li></ul></div><p>
         To specify a class that is called during process execution, the fully qualified classname 
         needs to be provided by the <span class="bold"><strong>'activiti:class'</strong></span>
         attribute.
</p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
             name="My Java Service Task" 
             activiti:class="org.activiti.MyJavaDelegate" /&gt;
</pre><p>
         See <a class="link" href="#bpmnJavaServiceTaskImplementation" title="Implementation">the <span class="emphasis"><em>implementation</em></span> section</a>
         for more details on how to use such a class.
       </p><p>
         It is also possible to use an expression that resolves to an object. This object must follow
         the same rules as objects that are created when the <code class="literal">activiti:class</code>
         attribute is used (see <a class="link" href="#bpmnJavaServiceTaskImplementation" title="Implementation">further</a>).
         </p><pre class="prettyprint"> &lt;serviceTask id="serviceTask" <span class="bold"><strong>activiti:delegateExpression="${delegateExpressionBean}"</strong></span> /&gt;</pre><p> 
         Here, the <code class="literal">delegateExpressionBean</code> is a bean that implements the <code class="literal">JavaDelegate</code> interface,
         defined in for example the Spring container.
       </p><p>
         To specify a UEL method expression that should be evaluated, use 
         attribute <span class="bold"><strong>activiti:expression</strong></span>.
</p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
             name="My Java Service Task" 
             activiti:expression="#{printer.printMessage()}" /&gt;
</pre><p>
         Method <code class="literal">printMessage</code> (without parameters) will 
         be called on the named object called <code class="literal">printer</code>.
       </p><p>
       	It's also possible to pass parameters with an method used in the expression.
       	</p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
             name="My Java Service Task" 
             activiti:expression="#{printer.printMessage(execution, myVar)}" /&gt;
</pre><p>
		Method <code class="literal">printMessage</code> will be called on the object named <code class="literal">printer</code>. The first
		parameter passed is the <code class="literal">DelegateExecution</code>, which is available in the expression context by default
		available as <code class="literal">execution</code>. The second parameter passed, is the value of the variable with name <code class="literal">myVar</code>
		in the current execution. 
       </p><p>
         To specify a UEL value expression that should be evaluated, use 
         attribute <span class="bold"><strong>activiti:expression</strong></span>.
</p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
             name="My Java Service Task" 
             activiti:expression="#{split.ready}" /&gt;
</pre><p>
         The getter method of property <code class="literal">ready</code>, <code class="literal">getReady</code> (without parameters), will 
         be called on the named bean called <code class="literal">split</code>.
         The named objects are resolved in the execution's process variables and 
         (if applicable) in the Spring context.
       </p></div><div class="section" title="Implementation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnJavaServiceTaskImplementation"></a>Implementation</h4></div></div></div><p>
        To implement a class that can be called during process execution, this class needs to
        implement the <span class="emphasis"><em>org.activiti.engine.delegate.JavaDelegate</em></span> interface and provide the required
        logic in the <span class="emphasis"><em>execute</em></span> method. When process execution arrives
        at this particular step, it will execute this logic defined in that method and leave 
        the activity in the default BPMN 2.0 way.
      </p><p>
        Let's create for example a Java class that can be used to change a process variable String
        to uppercase. This class needs to implement the <span class="emphasis"><em>org.activiti.engine.delegate.JavaDelegate</em></span>
        interface, which requires us to implement the <span class="emphasis"><em>execute(DelegateExecution)</em></span>
        method. It's this operation that will be called by the engine and which needs to contain
        the business logic. Process instance information such as process variables  and other
        can be accessed and manipulated through the 
        <a class="ulink" href="http://activiti.org/javadocs/org/activiti/engine/delegate/DelegateExecution.html" target="_top">DelegateExecution</a>
        interface (click on the link for a detailed Javadoc of its operations).
</p><pre class="prettyprint">
public class ToUppercase implements JavaDelegate {
  
  public void execute(DelegateExecution execution) throws Exception {
    String var = (String) execution.getVariable("input");
    var = var.toUpperCase();
    execution.setVariable("input", var);
  }
  
}
</pre><p>
      </p><p>
        Note: there will be <span class="bold"><strong>only one instance of that Java class created for the serviceTask it is defined on</strong></span>.
        All process-instances share the same class instance that will be used to call <span class="emphasis"><em>execute(DelegateExecution)</em></span>. 
        This means that the class must not use any member variables and must be thread-safe, since it can be executed simultaneously from different threads.
        This also influences the way <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">Field injection</a> is handled.
      </p><p>
        The classes that are referenced in the process definition (i.e. by using <code class="literal">activiti:class</code>) are <span class="bold"><strong>NOT
        instantiated during deployment</strong></span>. Only when a process execution arrives 
        for the first time at the point in the process where the class is used, an instance
        of that class will be created. If the class cannot be found, an <code class="literal">ActivitiException</code>
        will be thrown. The reasoning for this is that the environment (and more
        specifically the <span class="emphasis"><em>classpath</em></span>) when you are deploying is often
        different from the actual runtime environment. For example when using <span class="emphasis"><em>ant</em></span>
        or the business archive upload in Activiti Explorer to deploy processes,
        the classpath does not contain the referenced classes.  
      </p><p><a class="link" href="#internal" title="Internal implementation classes"><span class="bold"><strong>[INTERNAL: non-public implementation classes]</strong></span></a>
        It is also possible to provide a class that implements the 
        <span class="emphasis"><em>org.activiti.engine.impl.pvm.delegate.ActivityBehavior</em></span> interface.
        Implementations have then access to the more powerful <span class="emphasis"><em>ActivityExecution</em></span>
        that for example also allows to influence the control flow of the process. Note however
        that this is not a very good practice, and should be avoided as much as possible.
        So, it is advised to use the <span class="emphasis"><em>ActivityBehavior</em></span> interface only for 
        advanced use cases and if you know exactly what you're doing.
      </p></div><div class="section" title="Field Injection"><div class="titlepage"><div><div><h4 class="title"><a name="serviceTaskFieldInjection"></a>Field Injection</h4></div></div></div><p>
          It's possible to inject values into the fields of the delegated classes. The following types of injection are supported:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Fixed string values</p></li><li class="listitem"><p>Expressions</p></li></ul></div><p>
        </p><p>
          If available, the value is injected through a public setter method on your delegated class, following the Java Bean naming conventions (e.g. field <code class="literal">fistName</code> has setter <code class="literal">setFirstName(...)</code>).
          If no setter is available for that field, the value of private member will be set on the delegate. SecurityManagers in some environments don't allow modifying private fields,
          so it's safer to expose a public setter-method for the fields you want to have injected. <span class="bold"><strong>Regardless of the type of value declared in the process-definition, the type of the setter/private field on the injection target should always be 
          <code class="literal">org.activiti.engine.delegate.Expression</code>.</strong></span>
        </p><p>
          The following code snippet shows how to inject a constant value into a field. Field injection
          is supported when using the <span class="emphasis"><em>'class'</em></span> attribute.
          Note that we need to <span class="bold"><strong>declare a 'extensionElements' XML element
          before the actual field injection declarations</strong></span>, which is a requirement of
          the BPMN 2.0 XML Schema.
          </p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
    name="Java service invocation" 
    activiti:class="org.activiti.examples.bpmn.servicetask.ToUpperCaseFieldInjected"&gt;
    <span class="bold"><strong>&lt;extensionElements&gt;
      &lt;activiti:field name="text" stringValue="Hello World" /&gt;
  &lt;/extensionElements&gt;</strong></span>           
&lt;/serviceTask&gt;        
          </pre><p>
          The class <code class="literal">ToUpperCaseFieldInjected</code> has a field <code class="literal">text</code> which is of type <code class="literal">org.activiti.engine.delegate.Expression</code>. 
          When calling <code class="literal">text.getValue(execution)</code>, the configured string value <code class="literal">Hello World</code> will be returned.
        </p><p>
          Alternatively, for longs texts (e.g. an inline e-mail) the <span class="emphasis"><em>'activiti:string'</em></span>
          sub element can be used:
          </p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
    name="Java service invocation" 
    activiti:class="org.activiti.examples.bpmn.servicetask.ToUpperCaseFieldInjected"&gt;
  &lt;extensionElements&gt;   
    &lt;activiti:field name="text"&gt;
        <span class="bold"><strong>&lt;activiti:string&gt;
          Hello World
      &lt;/activiti:string&gt;</strong></span>
    &lt;/activiti:field&gt;
  &lt;/extensionElements&gt;        
&lt;/serviceTask&gt;        
          </pre><p>
        </p><p>
        To inject values that are dynamically resolved at runtime, expressions can be used. Those expressions can use process variables, or Spring defined beans (if Spring is used).
        As noted in <a class="link" href="#bpmnJavaServiceTaskImplementation" title="Implementation">Service Task Implementation</a>, an instance of the Java class is shared among all process-instances in a service task.
        To have dynamic injection of values in fields, you can inject value and method expressions in a <code class="literal">org.activiti.engine.delegate.Expression</code> 
        which can be evaluated/invoked using the <code class="literal">DelegateExecution</code> passed in the <code class="literal">execute</code> method.
</p><pre class="prettyprint">
&lt;serviceTask id="javaService" name="Java service invocation" 
  activiti:class="org.activiti.examples.bpmn.servicetask.ReverseStringsFieldInjected"&gt;
  
  &lt;extensionElements&gt;
    &lt;activiti:field name="text1"&gt;
      <span class="bold"><strong>&lt;activiti:expression&gt;${genderBean.getGenderString(gender)}&lt;/activiti:expression&gt;</strong></span>
    &lt;/activiti:field&gt;
    &lt;activiti:field name="text2"&gt;
       <span class="bold"><strong>&lt;activiti:expression&gt;Hello ${gender == 'male' ? 'Mr.' : 'Mrs.'} ${name}&lt;/activiti:expression&gt;</strong></span>
    &lt;/activiti:field&gt;
  &lt;/ extensionElements&gt;
&lt;/ serviceTask&gt;
</pre><p>
  </p><p>
  The example class below uses the injected expressions and resolves them using the current <code class="literal">DelegateExecution</code>.
  Full code and test can be found in <code class="literal">org.activiti.examples.bpmn.servicetask.JavaServiceTaskTest.testExpressionFieldInjection</code>
</p><pre class="prettyprint">

public class ReverseStringsFieldInjected implements JavaDelegate {

  private Expression text1;
  private Expression text2;

  public void execute(DelegateExecution execution) {
    String value1 = (String) text1.getValue(execution);
    execution.setVariable("var1", new StringBuffer(value1).reverse().toString());

    String value2 = (String) text2.getValue(execution);
    execution.setVariable("var2", new StringBuffer(value2).reverse().toString());
  }
}
</pre><p>
  </p><p>
  Alternatively, you can also set the expressions as an attribute instead of a child-element, to make the XML less verbose.
</p><pre class="prettyprint">
&lt;activiti:field name="text1" <span class="bold"><strong>expression="${genderBean.getGenderString(gender)}"</strong></span> /&gt;
&lt;activiti:field name="text1" <span class="bold"><strong>expression="Hello ${gender == 'male' ? 'Mr.' : 'Mrs.'} ${name}"</strong></span> /&gt;
</pre><p>
        </p><p>
          <span class="bold"><strong>
            Since the Java class instance is reused, the injection only happens once, when the serviceTask is called the first time. When the fields are altered by your code,
            the values won't be re-injected so you should treat them as immutable and don't make any changes to them.
          </strong></span>
        </p></div><div class="section" title="Service task results"><div class="titlepage"><div><div><h4 class="title"><a name="serviceTaskResultValue"></a>Service task results</h4></div></div></div><p>
           The return value of a service execution (for service task using expression only) can be assigned to an already existing or to a new process variable by
           specifying the process variable name as a literal value for the <span class="emphasis"><em>'activiti:resultVariable'</em></span> attribute
           of a service task definition. Any existing value for a specific process variable will be overwritten by the result
           value of the service execution. When not specifying a result variable name, the service execution result value gets ignored.
</p><pre class="prettyprint">
&lt;serviceTask id="aMethodExpressionServiceTask"
    activiti:expression="#{myService.doSomething()}"
    activiti:resultVariable="myVar" /&gt;
</pre><p>
             
           In the example above, the result of the service execution (the return value of the <span class="emphasis"><em>'doSomething()'</em></span> method invocation on an object that is made available
           under the name <span class="emphasis"><em>'myService'</em></span> either in the process variables or as a Spring bean) is set to the process variable named <span class="emphasis"><em>'myVar'</em></span> after the service execution completes.
         </p></div><div class="section" title="Handling exceptions"><div class="titlepage"><div><div><h4 class="title"><a name="serviceTaskExceptionHandling"></a>Handling exceptions</h4></div></div></div><p>
        When custom logic is executed, it is often required to catch certain
        business exceptions and handle them inside the surrounding process.
        Activiti provides different options to do that.
      </p><div class="section" title="Throwing BPMN Errors"><div class="titlepage"><div><div><h5 class="title"><a name="serviceTaskBpmnErrors"></a>Throwing BPMN Errors</h5></div></div></div><p>
            It is possible to throw BPMN Errors from user code inside Service Tasks or Script Tasks.
            In order to do this, a special ActivitiException called
            <span class="emphasis"><em>BpmnError</em></span> can be thrown in JavaDelegates, scripts, expressions and delegate expressions.
            The engine will catch this exception and forward it to an appropriate
            error handler, e.g., a Boundary Error Event or an Error Event Sub-Process.
            </p><pre class="prettyprint">
public class ThrowBpmnErrorDelegate implements JavaDelegate {

  public void execute(DelegateExecution execution) throws Exception {
    try {
      executeBusinessLogic();
    } catch (BusinessExeption e) {
      throw new BpmnError("BusinessExeptionOccured");
    }
  }

}</pre><p>
            The constructor argument is an error code, which will be used to
            determine the error handler that is responsible for the error.
            See <a class="link" href="#bpmnBoundaryErrorEvent" title="Error Boundary Event">Boundary Error Event</a>
            for information on how to catch a BPMN Error.
          </p><p>
            This mechanism should be used
            <span class="bold"><strong>only for business faults</strong></span>
            that shall be handled by a Boundary Error Event or Error Event Sub-Process
            modeled in the process definition.
            Technical errors should be represented by other exception types
            and are usually not handled inside a process.
          </p></div><div class="section" title="Exception Sequence Flow"><div class="titlepage"><div><div><h5 class="title"><a name="serviceTaskExceptionSequenceFlow"></a>Exception Sequence Flow</h5></div></div></div><p>
            <a class="link" href="#internal" title="Internal implementation classes">
              <span class="bold"><strong>[INTERNAL: non-public implementation classes]</strong></span>
            </a>
            Another option is to route process execution through another path
            in case some exception occurs. The following example shows how this is done.
            </p><pre class="prettyprint">
&lt;serviceTask id="javaService" 
  name="Java service invocation" 
  activiti:class="org.activiti.ThrowsExceptionBehavior"&gt;            
&lt;/serviceTask&gt;
    
&lt;sequenceFlow id="no-exception" sourceRef="javaService" targetRef="theEnd" /&gt;
&lt;sequenceFlow id="exception" sourceRef="javaService" targetRef="fixException" /&gt;</pre><p>
            Here, the service task has two outgoing sequence flow, called <code class="literal">exception</code>
            and <code class="literal">no-exception</code>. This sequence flow id will be used to direct
            process flow in case of an exception:
            </p><pre class="prettyprint">
public class ThrowsExceptionBehavior implements ActivityBehavior {

  public void execute(ActivityExecution execution) throws Exception {
    String var = (String) execution.getVariable("var");

    PvmTransition transition = null;
    try {
      executeLogic(var);
      transition = execution.getActivity().findOutgoingTransition("no-exception");
    } catch (Exception e) {
      transition = execution.getActivity().findOutgoingTransition("exception");
    }
    execution.take(transition);
  }
  
}</pre><p>
          </p></div></div><div class="section" title="Using an Activiti service from within a JavaDelegate"><div class="titlepage"><div><div><h4 class="title"><a name="serviceTaskCallActivitiService"></a>Using an Activiti service from within a JavaDelegate</h4></div></div></div><p>
            For some use cases, it might be needed to use the Activiti services from within a Java service task 
            (eg. starting a process instance through the RuntimeService, if the callActivity doesn't suit your needs).
            The <span class="emphasis"><em>org.activiti.engine.delegate.DelegateExecution</em></span> allows to easily 
            use these services through the <span class="emphasis"><em>org.activiti.engine.EngineServices</em></span> interface:
            </p><pre class="prettyprint">
public class StartProcessInstanceTestDelegate implements JavaDelegate {

  public void execute(DelegateExecution execution) throws Exception {
    RuntimeService runtimeService = execution.getEngineServices().getRuntimeService();
    runtimeService.startProcessInstanceByKey("myProcess");
  }

}            
            </pre><p>
            All of the Activiti service API's are available through this interface.
            </p><p>
            All data changes that occur as an effect of using these API calls, will be part of the current transaction.
            This also works in environments with dependency injection like Spring and CDI with or without a JTA enabled datasource.
            For example, the following snippet of code will do the same as the snippet above,
            but now the RuntimeService is injected rather than it is being fetched through the
            <span class="emphasis"><em>org.activiti.engine.EngineServices</em></span> interface.
            </p><pre class="prettyprint">
@Component("startProcessInstanceDelegate")
public class StartProcessInstanceTestDelegateWithInjection {
  
    @Autowired
    private RuntimeService runtimeService;
    
    public void startProcess() {
      runtimeService.startProcessInstanceByKey("oneTaskProcess");
    }
    
}
            </pre><p>
          </p><p>
            <span class="bold"><strong>Important technical note:</strong></span> since the service call
            is being done as part of the current transaction any data that was produced or altered
            <span class="emphasis"><em>before</em></span> the service task is executed, is not yet flushed to
            the database. All API calls work on the database data, which means that these uncommitted
            changes are not be 'visible' within the api call of the service task.          
          </p></div></div><div class="section" title="Web Service Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnWebserviceTask"></a>Web Service Task</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
		<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
	</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnWebserviceTaskDescription"></a>Description</h4></div></div></div><p>
			A Web Service task is used to synchronously invoke an external Web service.
		</p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnWebserviceTaskGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
			A Web Service task is visualized the same as a Java service task.
			</p><div class="mediaobject" align="center"><img src="images/bpmn.web.service.task.png" align="middle"></div><p>
		</p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnWebserviceTaskXML"></a>XML representation</h4></div></div></div><p>
			To use a Web service we need to import its operations and complex types. This can be done
			automatically by using the import tag pointing to the WSDL of the Web service:
       </p><pre class="prettyprint">
&lt;import importType="http://schemas.xmlsoap.org/wsdl/"
	location="http://localhost:63081/counter?wsdl"
	namespace="http://webservice.activiti.org/" /&gt;</pre><p>
			The previous declaration tells Activiti to import the definitions but it doesn't create
			the item definitions and messages for you. Let's suppose we want to invoke a specific method called
			'prettyPrint', therefore we will need to create the corresponding message and item definitions for
			the request and response messages:
		</p><pre class="prettyprint">
&lt;message id="prettyPrintCountRequestMessage" itemRef="tns:prettyPrintCountRequestItem" /&gt;
&lt;message id="prettyPrintCountResponseMessage" itemRef="tns:prettyPrintCountResponseItem" /&gt;
  
&lt;itemDefinition id="prettyPrintCountRequestItem" structureRef="counter:prettyPrintCount" /&gt;
&lt;itemDefinition id="prettyPrintCountResponseItem" structureRef="counter:prettyPrintCountResponse" /&gt;</pre><p>
			Before declaring the service task, we have to define the BPMN interfaces and operations that actually reference the Web service ones.
			Basically, we define and 'interface' and the required 'operation's'. For each operation we reuse the previous defined
			message for in and out. For example, the following declaration defines the 'counter' interface and the 'prettyPrintCountOperation' operation:
		</p><pre class="prettyprint">
&lt;interface name="Counter Interface" implementationRef="counter:Counter"&gt;
	&lt;operation id="prettyPrintCountOperation" name="prettyPrintCount Operation" 
			implementationRef="counter:prettyPrintCount"&gt;
		&lt;inMessageRef&gt;tns:prettyPrintCountRequestMessage&lt;/inMessageRef&gt;
		&lt;outMessageRef&gt;tns:prettyPrintCountResponseMessage&lt;/outMessageRef&gt;
	&lt;/operation&gt;
&lt;/interface&gt;</pre><p>
			Then we can declare a Web Service Task by using the ##WebService implementation 
			and a reference to the Web service operation. 
		</p><pre class="prettyprint">
&lt;serviceTask id="webService" 
	name="Web service invocation"
	implementation="##WebService"
	operationRef="tns:prettyPrintCountOperation"&gt;</pre></div><div class="section" title="Web Service Task IO Specification"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnWebserviceTaskIOSpecification"></a>Web Service Task IO Specification</h4></div></div></div><p>
			Unless we are using the simplistic approach for data input and output associations (See below), each Web Service Task
			needs to declare an IO Specification which states which are the inputs and outputs of the task. The approach is pretty
			straightforward and BPMN 2.0 complaint, for our prettyPrint example we define the input and output sets according to
			the previously declared item definitions:  
		</p><pre class="prettyprint">
&lt;ioSpecification&gt;
	&lt;dataInput itemSubjectRef="tns:prettyPrintCountRequestItem" id="dataInputOfServiceTask" /&gt;
	&lt;dataOutput itemSubjectRef="tns:prettyPrintCountResponseItem" id="dataOutputOfServiceTask" /&gt;
	&lt;inputSet&gt;
		&lt;dataInputRefs&gt;dataInputOfServiceTask&lt;/dataInputRefs&gt;
	&lt;/inputSet&gt;
	&lt;outputSet&gt;
		&lt;dataOutputRefs&gt;dataOutputOfServiceTask&lt;/dataOutputRefs&gt;
	&lt;/outputSet&gt;
&lt;/ioSpecification&gt;</pre></div><div class="section" title="Web Service Task data input associations"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnWebserviceTaskDataInputAssociation"></a>Web Service Task data input associations</h4></div></div></div><p>
			There are 2 ways of specifying data input associations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Using expressions</p></li><li class="listitem"><p>Using the simplistic approach</p></li></ul></div><p>
       		To specify the data input association using expressions we need to define the source and target items
       		and specify the corresponding assignments between the fields of each item. In the following example we assign
       		prefix and suffix fields of the items:
       </p><pre class="prettyprint">
&lt;dataInputAssociation&gt;
	&lt;sourceRef&gt;dataInputOfProcess&lt;/sourceRef&gt;
	&lt;targetRef&gt;dataInputOfServiceTask&lt;/targetRef&gt;
	&lt;assignment&gt;
		&lt;from&gt;${dataInputOfProcess.prefix}&lt;/from&gt;
		&lt;to&gt;${dataInputOfServiceTask.prefix}&lt;/to&gt;
	&lt;/assignment&gt;
	&lt;assignment&gt;
		&lt;from&gt;${dataInputOfProcess.suffix}&lt;/from&gt;
		&lt;to&gt;${dataInputOfServiceTask.suffix}&lt;/to&gt;
	&lt;/assignment&gt;
&lt;/dataInputAssociation&gt;</pre><p>
       		On the other hand we can use the simplistic approach which is much more simple. The 'sourceRef' element is an Activiti
       		variable name and the 'targetRef' element is a property of the item definition. In the following example we assign to
       		the 'prefix' field the value of the variable 'PrefixVariable' and to the 'suffix' field the value of the variable 'SuffixVariable'.
       </p><pre class="prettyprint">
&lt;dataInputAssociation&gt;
	&lt;sourceRef&gt;PrefixVariable&lt;/sourceRef&gt;
	&lt;targetRef&gt;prefix&lt;/targetRef&gt;
&lt;/dataInputAssociation&gt;
&lt;dataInputAssociation&gt;
	&lt;sourceRef&gt;SuffixVariable&lt;/sourceRef&gt;
	&lt;targetRef&gt;suffix&lt;/targetRef&gt;
&lt;/dataInputAssociation&gt;</pre></div><div class="section" title="Web Service Task data output associations"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnWebserviceTaskDataOutputAssociation"></a>Web Service Task data output associations</h4></div></div></div><p>
			There are 2 ways of specifying data out associations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Using expressions</p></li><li class="listitem"><p>Using the simplistic approach</p></li></ul></div><p>
       		To specify the data out association using expressions we need to define the target variable and the source expression. The approach is pretty
			straightforward and similar data input associations:
       </p><pre class="prettyprint">
&lt;dataOutputAssociation&gt;
	&lt;targetRef&gt;dataOutputOfProcess&lt;/targetRef&gt;
	&lt;transformation&gt;${dataOutputOfServiceTask.prettyPrint}&lt;/transformation&gt;
&lt;/dataOutputAssociation&gt;</pre><p>
       		On the other hand we can use the simplistic approach which is much more simple. The 'sourceRef' element is a property
       		of the item definition and the 'targetRef' element is an Activiti variable name. The approach is pretty
			straightforward and similar data input associations: 
       </p><pre class="prettyprint">
&lt;dataOutputAssociation&gt;
	&lt;sourceRef&gt;prettyPrint&lt;/sourceRef&gt;
	&lt;targetRef&gt;OutputVariable&lt;/targetRef&gt;
&lt;/dataOutputAssociation&gt;</pre></div></div><div class="section" title="Business Rule Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnBusinessRuleTask"></a>Business Rule Task</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBusinessRuleTaskDescription"></a>Description</h4></div></div></div><p>
				A Business Rule task is used to synchronously execute one or more rules. Activiti uses Drools Expert, the Drools rule engine
				to execute business rules. Currently, the .drl files containing the business rules have to be deployed together with the process definition
				that defines a business rule task to execute those rules. This means that all .drl files that are used in a process have to be packaged 
				in the process BAR file like for example the task forms. For more information about creating business rules for Drools Expert please refer to the Drools
				documentation at <a class="ulink" href="http://www.jboss.org/drools/documentation" target="_top">JBoss Drools</a>
			</p><p>
			  if you want to plug in your implementation of the rule task, e.g. because you want to use Drools differently or you want to use a completly
			  different rule engine, then you can use the class or expression attribute on the BusinessRuleTask and it will behave exactly like a
			  <a class="ulink" href="#bpmnJavaServiceTask" target="_top">ServiceTask</a>
			</p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBusinessRuleTaskGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
				A Business Rule task is visualized the with a table icon.
				</p><div class="mediaobject" align="center"><img src="images/bpmn.business.rule.task.png" align="middle"></div><p>
			</p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnBusinessRuleTaskXML"></a>XML representation</h4></div></div></div><p>
				To execute one or more business rules that are deployed in the same BAR file as the process definition, we need to define the input and result variables.
				For the input variable definition a list of process variables can be defined separated by a comma.
				The output variable definition can only contain one variable name that will be used to store the output objects of the executed business rules in a process variable.
				Note that the result variable will contain a List of objects. If no result variable name is specified by default org.activiti.engine.rules.OUTPUT is used.
	   	</p><p>
        The following business rule task executes all business rules deployed with the process definition:
        </p><pre class="prettyprint">
&lt;process id="simpleBusinessRuleProcess"&gt;
  
  &lt;startEvent id="theStart" /&gt;
  &lt;sequenceFlow sourceRef="theStart" targetRef="businessRuleTask" /&gt;
  
  <span class="bold"><strong>&lt;businessRuleTask id="businessRuleTask" activiti:ruleVariablesInput="${order}"
      activiti:resultVariable="rulesOutput" /&gt;</strong></span>
 	
  &lt;sequenceFlow sourceRef="businessRuleTask" targetRef="theEnd" /&gt;

  &lt;endEvent id="theEnd" /&gt;
 
&lt;/process&gt;
			  </pre><p>
			</p><p>
				The business rule task can also be configured to execute only a defined set of rules from the deployed .drl files.
				A list of rule names separated by a comma must be specified for this.
				</p><pre class="prettyprint">
&lt;businessRuleTask id="businessRuleTask" activiti:ruleVariablesInput="${order}"
      activiti:rules="rule1, rule2" /&gt;
			  </pre><p>
			  In this case only rule1 and rule2 are executed.
	   	</p><p>
				You can also define a list of rules that should be excluded from execution.
				</p><pre class="prettyprint">
&lt;businessRuleTask id="businessRuleTask" activiti:ruleVariablesInput="${order}"
      activiti:rules="rule1, rule2" exclude="true" /&gt;
			  </pre><p>
			  In this case all rules deployed in the same BAR file as the process definition will be executed, except for rule1 and rule2.
			</p><p>
				As mentioned earlier another option is to hook in the implementation of the BusinessRuleTask yourself:
				</p><pre class="prettyprint">
&lt;businessRuleTask id="businessRuleTask" activiti:class="${MyRuleServiceDelegate}" /&gt;
			  </pre><p>
			  Now the BusinessRuleTask behaves exactly like a ServiceTask, but still keeps the BusinessRuleTask icon to visualize
			  that we do business rule processing here.
			</p></div></div><div class="section" title="Email Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnEmailTask"></a>Email Task</h3></div></div></div><p>
		    Activiti allows to enhance business processes with automatic mail service tasks that send
		    e-mails to one or more recipients, including support for cc, bcc, HTML content, ... etc.
		    Note that the mail task is <span class="bold"><strong>not</strong></span> an 'official' task 
		    of the BPMN 2.0 spec (and it does not have a dedicated icon as a consequence).
		    Hence, in Activiti the mail task is implemented as a dedicated service task.
		  </p><div class="section" title="Mail server configuration"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEmailTaskServerConfiguration"></a>Mail server configuration</h4></div></div></div><p>
		      The Activiti engine sends e-mails trough an external mail server with SMTP capabilities.
		      To actually send e-mails, the engine needs to know how to reach the mail server.
		      Following properties can be set in the <span class="emphasis"><em>activiti.cfg.xml</em></span> 
		      configuration file:
		      </p><div class="table"><a name="N118E7"></a><p class="title"><b>Table&nbsp;8.1.&nbsp;Mail server configuration</b></p><div class="table-contents"><table summary="Mail server configuration" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Property</th><th>Required?</th><th>Description</th></tr></thead><tbody><tr><td>mailServerHost</td><td>no</td><td>The hostname of your mail server (e.g. mail.mycorp.com). Default is <code class="literal">localhost</code></td></tr><tr><td>mailServerPort</td><td>yes, if not on the default port</td><td>The port for SMTP traffic on the mail server. The default is <span class="emphasis"><em>25</em></span></td></tr><tr><td>mailServerDefaultFrom</td><td>no</td><td>The default e-mail address of the sender of e-mails, when none is provided by the user. By default this is <span class="emphasis"><em>activiti@activiti.org</em></span></td></tr><tr><td>mailServerUsername</td><td>if applicable for your server</td><td>Some mail servers require credentials for sending e-mail. By default not set.</td></tr><tr><td>mailServerPassword</td><td>if applicable for your server</td><td>Some mail servers require credentials for sending e-mail. By default not set.</td></tr><tr><td>mailServerUseSSL</td><td>if applicable for your server</td><td>Some mail servers require ssl communication. By default set to false.</td></tr></tbody></table></div></div><p><br class="table-break">
		    </p></div><div class="section" title="Defining an Email Task"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEmailTaskUsage"></a>Defining an Email Task</h4></div></div></div><p>
		      The Email task is implemented as a dedicated <a class="link" href="#bpmnJavaServiceTask" title="Java Service Task">Service Task</a>
		      and is defined by setting <span class="emphasis"><em>'mail'</em></span> for the <span class="emphasis"><em>type</em></span> of the service task.
		      </p><pre class="prettyprint">
&lt;serviceTask id="sendMail" <span class="bold"><strong>activiti:type="mail"</strong></span>&gt;		      
		      </pre><p>
		    </p><p>
		      The Email task is configured by <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">field injection</a>.
		      All the values for these properties can contain EL expression, which are resolved at runtime
		      during process execution.
		      Following properties can be set:
		      </p><div class="table"><a name="N11943"></a><p class="title"><b>Table&nbsp;8.2.&nbsp;Mail server configuration</b></p><div class="table-contents"><table summary="Mail server configuration" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Property</th><th>Required?</th><th>Description</th></tr></thead><tbody><tr><td>to</td><td>yes</td><td>The recipients if the e-mail. Multiple recipients are defined in a comma-separated list</td></tr><tr><td>from</td><td>no</td><td>The sender e-mail address. If not provided, the <a class="link" href="#bpmnEmailTaskServerConfiguration" title="Mail server configuration">default configured</a> from address is used.</td></tr><tr><td>subject</td><td>no</td><td>The subject of the e-mail.</td></tr><tr><td>cc</td><td>no</td><td>The cc's of the e-mail. Multiple recipients are defined in a comma-separated list</td></tr><tr><td>bcc</td><td>no</td><td>The bcc's of the e-mail. Multiple recipients are defined in a comma-separated list</td></tr><tr><td>charset</td><td>no</td><td>Allows to change the charset of the email, which is necessary for many
                 non-English languages.
                 </td></tr><tr><td>html</td><td>no</td><td>A piece of HTML that is the content of the e-mail.</td></tr><tr><td>text</td><td>no</td><td>The content of the e-mail, in case one needs to send plain none-rich e-mails.
                   Can be used in combination with <span class="emphasis"><em>html</em></span>, for e-mail clients
                   that don't support rich content. The client will then fall back to this text-only alternative.
                 </td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Example usage"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEmailTaskExampleUsage"></a>Example usage</h4></div></div></div><p>
		      The following XML snippet shows an example of using the Email Task.
		      </p><pre class="prettyprint">
&lt;serviceTask id="sendMail" activiti:type="mail"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:field name="from" stringValue="order-shipping@thecompany.com" /&gt;
    &lt;activiti:field name="to" expression="${recipient}" /&gt;
    &lt;activiti:field name="subject" expression="Your order ${orderId} has been shipped" /&gt;
    &lt;activiti:field name="html"&gt;
      &lt;activiti:expression&gt;
        &lt;![CDATA[
          &lt;html&gt;
            &lt;body&gt;
              Hello ${male ? 'Mr.' : 'Mrs.' } ${recipientName},&lt;br/&gt;&lt;br/&gt;
                 
              As of ${now}, your order has been &lt;b&gt;processed and shipped&lt;/b&gt;.&lt;br/&gt;&lt;br/&gt;
                  
              Kind regards,&lt;br/&gt;
                  
              TheCompany.
            &lt;/body&gt;
          &lt;/html&gt;
        ]]&gt;
      &lt;/activiti:expression&gt;
    &lt;/activiti:field&gt;      
  &lt;/extensionElements&gt;
&lt;/serviceTask&gt;		      
		      </pre><p>
		      with the following result:
		      </p><div class="mediaobject" align="center"><img src="images/email.task.result.png" align="middle"></div><p>
		    </p></div></div><div class="section" title="Mule Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnMuleTask"></a>Mule Task</h3></div></div></div><p>
		    The mule task allows to send messages to Mule enhancing the integration features of Activiti.
		    Note that the mule task is <span class="bold"><strong>not</strong></span> an 'official' task 
		    of the BPMN 2.0 spec (and it does not have a dedicated icon as a consequence).
		    Hence, in Activiti the mule task is implemented as a dedicated service task.
		  </p><div class="section" title="Defining an Mule Task"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMuleTaskUsage"></a>Defining an Mule Task</h4></div></div></div><p>
		      The Mule task is implemented as a dedicated <a class="link" href="#bpmnJavaServiceTask" title="Java Service Task">Service Task</a>
		      and is defined by setting <span class="emphasis"><em>'mule'</em></span> for the <span class="emphasis"><em>type</em></span> of the service task.
		      </p><pre class="prettyprint">
&lt;serviceTask id="sendMule" <span class="bold"><strong>activiti:type="mule"</strong></span>&gt;		      
		      </pre><p>
		    </p><p>
		      The Mule task is configured by <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">field injection</a>.
		      All the values for these properties can contain EL expression, which are resolved at runtime
		      during process execution.
		      Following properties can be set:
		      </p><div class="table"><a name="N119C7"></a><p class="title"><b>Table&nbsp;8.3.&nbsp;Mule server configuration</b></p><div class="table-contents"><table summary="Mule server configuration" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Property</th><th>Required?</th><th>Description</th></tr></thead><tbody><tr><td>endpointUrl</td><td>yes</td><td>The Mule endpoint you want to invoke.</td></tr><tr><td>language</td><td>yes</td><td>The language you want to use to evaluate the payloadExpression field.</td></tr><tr><td>payloadExpression</td><td>yes</td><td>An expression that will be the message's payload.</td></tr><tr><td>resultVariable</td><td>no</td><td>The name of the variable which will store the result of the invocation.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Example usage"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMuleTaskExampleUsage"></a>Example usage</h4></div></div></div><p>
		      The following XML snippet shows an example of using the Mule Task.
		      </p><pre class="prettyprint">
      &lt;extensionElements&gt;
        &lt;activiti:field name="endpointUrl"&gt;
          &lt;activiti:string&gt;vm://in&lt;/activiti:string&gt;
        &lt;/activiti:field&gt;
        &lt;activiti:field name="language"&gt;
          &lt;activiti:string&gt;juel&lt;/activiti:string&gt;
        &lt;/activiti:field&gt;
        &lt;activiti:field name="payloadExpression"&gt;
          &lt;activiti:string&gt;"hi"&lt;/activiti:string&gt;
        &lt;/activiti:field&gt;
        &lt;activiti:field name="resultVariable"&gt;
          &lt;activiti:string&gt;theVariable&lt;/activiti:string&gt;
        &lt;/activiti:field&gt;
      &lt;/extensionElements&gt;	      
		      </pre><p>
		    </p></div></div><div class="section" title="Camel Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnCamelTask"></a>Camel Task</h3></div></div></div><p>
        The Camel task allows to send messages to and receive messages from Camel and thereby enhances the integration features of Activiti.
        Note that the Camel task is <span class="bold"><strong>not</strong></span> an 'official' task 
        of the BPMN 2.0 spec (and it does not have a dedicated icon as a consequence).
        Hence, in Activiti the Camel task is implemented as a dedicated service task. 
        Also note to include the Activiti Camel module in your project to use the Camel task functionality.
      </p><div class="section" title="Defining a Camel Task"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCamelTaskUsage"></a>Defining a Camel Task</h4></div></div></div><p>
          The Camel task is implemented as a dedicated <a class="link" href="#bpmnJavaServiceTask" title="Java Service Task">Service Task</a>
          and is defined by setting <span class="emphasis"><em>'camel'</em></span> for the <span class="emphasis"><em>type</em></span> of the service task.
          </p><pre class="prettyprint">
&lt;serviceTask id="sendCamel" <span class="bold"><strong>activiti:type="camel"</strong></span>&gt;         
          </pre><p>
        </p><p>
          The process definition itself needs nothing else then the camel type definition on a service task.
          The integration logic is all delegated to the Camel container. By default the Activiti Engine looks for a camelContext bean in the Spring container.
          The camelContext bean defines the Camel routes that will be loaded by the Camel container. In the following example the routes are loaded from a specific Java package,
          but you can also define routes directly in the Spring configuration itself.
         </p><pre class="prettyprint">
&lt;camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;packageScan&gt;
    &lt;package&gt;org.activiti.camel.route&lt;/package&gt;
  &lt;/packageScan&gt;
&lt;/camelContext&gt;</pre><p>
        </p><p>
          For more documentation about Camel routes you can look on the Camel website. This user guide only shows an example route definition related to the Activiti integration.
          When a Camel task is executed a route is searched for that corresponds to the key of process definition and the identifier of that task, like in the short example above "sendCamel".
          An example route defined in Java can look like this:
          </p><pre class="prettyprint">
public class AsyncCamelRoute extends RouteBuilder {

  @Override
  public void configure() throws Exception {

    from("activiti:asyncCamelProcess:serviceTaskAsync1?copyVariablesToProperties=true").setHeader("destination", constant("activiti:asyncCamelProcess:receive1")).to("seda:asyncQueue");
    from("seda:asyncQueue").to("bean:sleepBean?method=sleep").to("seda:receiveQueue");
    
    from("activiti:asyncCamelProcess:serviceTaskAsync2?copyVariablesToProperties=true").setHeader("destination", constant("activiti:asyncCamelProcess:receive2")).to("seda:asyncQueue2");
    from("seda:asyncQueue2").to("bean:sleepBean?method=sleep").to("seda:receiveQueue");
    
    from("seda:receiveQueue").recipientList(header("destination"));
  }
}</pre><p>
          Note the from endpoint definition "activiti:asyncCamelProcess:serviceTaskAsync1" where activiti relates to the Activiti Camel component. asyncCamelProcess refers to the process definition
          key of the process definition. And serviceTaskAsync1 relates to the identifier of the Camel task. The process variables can be copied to the body or the properties of the Camel payload.
          In this example the variables are copied as message properties (the default). copyVariablesToBodyAsMap=true will copy the variables to the body of the Camel message in a Map instance. 
          copyCamelBodyToBody=true will copy the camelBody process variable to the body of the Camel message
          In this example you can also see that a Camel message can be sent to a receive task of an Activiti process instance. In this example a bit of additional Camel logic is used to send the Camel message
          to the receive task that's defined in the message header destination property. But eventually the message will be sent to the receive1 or receive2 receive tasks.
          By default the message body of the Camel message is expected as a Map (all Map entries will be copied to the Activiti execution) or as a String that will be copied to the camelBody process variable. 
          When defining the copyVariablesToProperties=true option the message properties are copied to the Activiti execution.
        </p><p>
          In addition to sending messages from a process instance to Camel and back again you can also start a process instance from a Camel message.
          </p><pre class="prettyprint">from("direct:start").to("activiti:camelProcess");</pre><p>
          Note that camelProcess is the process definition key of the process definition for which a process instance will be created when a message is read from the direct:start queue.
        </p><p>
          If you want to define multiple Camel context beans and/or want to use a different bean name, this can be overriden on the Camel task definition like this:
          </p><pre class="prettyprint">
&lt;serviceTask id="serviceTask1" activiti:type="camel"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:field name="camelContext" stringValue="customCamelContext" /&gt;
  &lt;/extensionElements&gt;
&lt;/serviceTask&gt;</pre><p>
        </p><p>
          You can also override the default Camel behavior class (org.activiti.camel.impl.CamelBehaviorDefaultImpl). This can be handy to customize the Camel logic or to change the default behavior of copying the process
          variables to something else. The Activiti Camel module provide two additional Camel behavior classes, CamelBehaviorBodyAsMapImpl and CamelBehaviorCamelBodyImpl. CamelBehaviorBodyAsMapImpl copies the process variables
          to a Map instance in the Camel message body by default (remember that you can override this on the endpoint using for example copyVariablesToProperties=true). CamelBehaviorCamelBodyImpl expects a camelBody process variable
          and copies it to the Camel message body. The default Camel behavior class can be overriden by using the following field definition:
          </p><pre class="prettyprint">
&lt;serviceTask id="serviceTask1" activiti:type="camel"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:field name="camelBehaviorClass" stringValue="org.activiti.camel.impl.CamelBehaviorCamelBodyImpl" /&gt;
  &lt;/extensionElements&gt;
&lt;/serviceTask&gt;</pre><p>
        </p></div></div><div class="section" title="Manual Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnManualTask"></a>Manual Task</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnManualTaskDescription"></a>Description</h4></div></div></div><p>
		      A <span class="emphasis"><em>Manual Task</em></span> defines a task that is external to the BPM engine.
		      It is used to model work that is done by somebody, which the engine
		      does not need to know of, nor is there a system or UI interface.
		      For the engine, a manual task is handled as a <span class="bold"><strong>pass-through activity</strong></span>,
		      automatically continuing the process from the moment process execution arrives into it.
		    </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnManualTaskGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
		      A manual task is visualized as a rounded rectangle, with a little 'hand' icon 
		      in the upper left corner
		      </p><div class="mediaobject" align="center"><img src="images/bpmn.manual.task.png" align="middle"></div><p>
		    </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnManualTaskXml"></a>XML representation</h4></div></div></div><p>
		      </p><pre class="prettyprint">&lt;manualTask id="myManualTask" name="Call client for more information" /&gt;</pre><p>
		    </p></div></div><div class="section" title="Java Receive Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnReceiveTask"></a>Java Receive Task</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnReceiveTaskDescription"></a>Description</h4></div></div></div><p>
          A Receive Task is a simple task that waits for the arrival of a certain message.
          Currently, we have only implemented Java semantics for this task. When process
          execution arrives at a Receive Task, the process state is committed to the 
          persistence store. This means that the process will stay in this wait state, 
          until a specific message is received by the engine, which triggers the continuation
          of the process past the Receive Task.
		    </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="N11A65"></a>Graphical notation</h4></div></div></div><p>
          A Receive Task is visualized as a task (rounded rectangle) with a message icon in
          the top left corner. The message is white (a black message icon would have send semantics)
          </p><div class="mediaobject" align="center"><img src="images/bpmn.receive.task.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="N11A70"></a>XML representation</h4></div></div></div><p>
          </p><pre class="prettyprint">&lt;receiveTask id="waitState" name="wait" /&gt;    </pre><p>
        </p><p>
          To continue a process instance that is currently waiting at such a Receive Task,
          the <span class="emphasis"><em>runtimeService.signal(executionId)</em></span> must be called using
          the id of the execution that arrived in the Receive Task.
          The following code snippet shows how this works in practice:
          </p><pre class="prettyprint">
ProcessInstance pi = runtimeService.startProcessInstanceByKey("receiveTask");
Execution execution = runtimeService.createExecutionQuery()
  .processInstanceId(pi.getId())
  .activityId("waitState")
  .singleResult();
assertNotNull(execution);
    
<span class="bold"><strong>runtimeService.signal(execution.getId());</strong></span>   
          </pre><p>
        </p></div></div><div class="section" title="Shell Task"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnShellTask"></a>Shell Task</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnShellTaskDescription"></a>Description</h4></div></div></div><p>
				The shell task allows to run shell scripts and commands. Note that the Shell task is <span class="bold"><strong>not</strong></span> an 'official' task of BPMN 2.0 spec
				(and it does not have a dedicated icon as a consequence).
				</p></div><div class="section" title="defining a shell task"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnShellTaskUsage"></a>defining a shell task</h4></div></div></div><p>The shell task is implemented as a dedicated <a class="link" href="#bpmnJavaServiceTask" title="Java Service Task">Service Task</a>
		      and is defined by setting <span class="emphasis"><em>'shell'</em></span> for the <span class="emphasis"><em>type</em></span> of the service task.
		      </p><pre class="prettyprint">
&lt;serviceTask id="shellEcho" <span class="bold"><strong>activiti:type="shell"</strong></span>&gt;		      
		      </pre><p>
		    </p><p>
		      The Shell task is configured by <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">field injection</a>.
		      All the values for these properties can contain EL expression, which are resolved at runtime
		      during process execution.
		      Following properties could be set:
		      </p><div class="table"><a name="N11AAF"></a><p class="title"><b>Table&nbsp;8.4.&nbsp;Shell task parameter configuration</b></p><div class="table-contents"><table summary="Shell task parameter configuration" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Property</th><th>Required?</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>command</td><td>yes</td><td>String</td><td>Shell command to execute.</td><td>&nbsp;</td></tr><tr><td>arg0-5</td><td>no</td><td>String</td><td>Parameter 0 to Parameter 5</td><td>&nbsp;</td></tr><tr><td>wait</td><td>no</td><td>true/false</td><td>wait if necessary, until the shell process has terminated.</td><td>true</td></tr><tr><td>redirectError</td><td>no</td><td>true/false</td><td>Merge standard error with the standard output.</td><td>false</td></tr><tr><td>cleanEnv</td><td>no</td><td>true/false</td><td>Shell process does not inherit current environment.</td><td>false</td></tr><tr><td>outputVariable</td><td>no</td><td>String</td><td>Name of variable to contain the output</td><td>Output is not recorded.</td></tr><tr><td>errorCodeVariable</td><td>no</td><td>String</td><td>Name of variable to contain result error code</td><td>Error level is not registered.</td></tr><tr><td>directory</td><td>no</td><td>String</td><td>Default directory of shell process</td><td>Current directory</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Example usage"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnShellTaskExampleUsage"></a>Example usage</h4></div></div></div><p>
		      The following XML snippet shows an example of using the shell Task. It runs shell script "cmd /c echo EchoTest", waits for it to be terminated and puts the result in resultVar
		      </p><pre class="prettyprint">
&lt;serviceTask id="shellEcho" activiti:type="shell" &gt;
  &lt;extensionElements&gt;
    &lt;activiti:field name="command" stringValue="cmd" /&gt;  
    &lt;activiti:field name="arg1" stringValue="/c" /&gt;  
    &lt;activiti:field name="arg2" stringValue="echo" /&gt;  
    &lt;activiti:field name="arg3" stringValue="EchoTest" /&gt;  
    &lt;activiti:field name="wait" stringValue="true" /&gt;  
    &lt;activiti:field name="outputVariable" stringValue="resultVar" /&gt;  
  &lt;/extensionElements&gt;
&lt;/serviceTask&gt;		      
		      </pre><p>
		      
		    </p></div></div><div class="section" title="Execution listener"><div class="titlepage"><div><div><h3 class="title"><a name="executionListeners"></a>Execution listener</h3></div></div></div><p><span class="bold"><strong>Compatibility note</strong></span>: After releasing 5.3, we discovered that
      execution listeners and task listeners and expressions were still in non-public API. Those classes were in subpackages 
      of <code class="literal">org.activiti.engine.impl...</code>,  which has <code class="literal">impl</code> in it).  
      <code class="literal">org.activiti.engine.impl.pvm.delegate.ExecutionListener</code>, 
      <code class="literal">org.activiti.engine.impl.pvm.delegate.TaskListener</code> and 
      <code class="literal">org.activiti.engine.impl.pvm.el.Expression</code> 
      have been deprecated. From now on, you should use <code class="literal">org.activiti.engine.delegate.ExecutionListener</code>,
      <code class="literal">org.activiti.engine.delegate.TaskListener</code> and <code class="literal">org.activiti.engine.delegate.Expression</code>.
      In the new publicly available API, access to  
      <code class="literal">ExecutionListenerExecution.getEventSource()</code> has been removed.  Apart from the deprecation 
      compiler warning, the existing code should run fine.  But consider switching to the new public 
      API interfaces (without .impl. in the package name).
      </p><p>Execution listeners allow you to execute external Java code or evaluate an expression when certain events occur
      during process execution. The events that can be captured are:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Start and ending of a process instance.</p></li><li class="listitem"><p>Taking a transition.</p></li><li class="listitem"><p>Start and ending of an activity.</p></li><li class="listitem"><p>Start and ending of a gateway.</p></li><li class="listitem"><p>Start and ending of intermediate events.</p></li><li class="listitem"><p>Ending an start event or starting an end event.</p></li></ul></div><p>
      </p><p>
        The following process definition contains 3 execution listeners:
        </p><pre class="prettyprint">
  &lt;process id="executionListenersProcess"&gt;
  
    <span class="bold"><strong>&lt;extensionElements&gt;
      &lt;activiti:executionListener class="org.activiti.examples.bpmn.executionlistener.ExampleExecutionListenerOne" event="start" /&gt;
    &lt;/extensionElements&gt;</strong></span>
    
    &lt;startEvent id="theStart" /&gt;
    &lt;sequenceFlow sourceRef="theStart" targetRef="firstTask" /&gt;
    
    &lt;userTask id="firstTask" /&gt;
    &lt;sequenceFlow sourceRef="firstTask" targetRef="secondTask"&gt;
    <span class="bold"><strong>&lt;extensionElements&gt;
      &lt;activiti:executionListener class="org.activiti.examples.bpmn.executionListener.ExampleExecutionListenerTwo" /&gt;
    &lt;/extensionElements&gt;</strong></span>
    &lt;/sequenceFlow&gt;
    
    &lt;userTask id="secondTask" &gt;
    <span class="bold"><strong>&lt;extensionElements&gt;
      &lt;activiti:executionListener expression="${myPojo.myMethod(execution.event)}" event="end" /&gt;
    &lt;/extensionElements&gt;</strong></span>
    &lt;/userTask&gt;
    &lt;sequenceFlow sourceRef="secondTask" targetRef="thirdTask" /&gt;
       
    &lt;userTask id="thirdTask" /&gt;
    &lt;sequenceFlow sourceRef="thirdTask" targetRef="theEnd" /&gt;

    &lt;endEvent id="theEnd" /&gt;
    
  &lt;/process&gt;</pre><p>
        </p><p>The first execution listener is notified when the process starts. The listener is an external Java-class (like <code class="literal">ExampleExecutionListenerOne</code>) 
        and should implement <code class="literal">org.activiti.engine.delegate.ExecutionListener</code> interface. When the event occurs (in this case <code class="literal">end</code> event)
        the method <code class="literal">notify(ExecutionListenerExecution execution)</code> is called.
        </p><pre class="prettyprint">
public class ExampleExecutionListenerOne implements <span class="bold"><strong>ExecutionListener</strong></span> {

  <span class="bold"><strong>public void notify(ExecutionListenerExecution execution) throws Exception {</strong></span>
    execution.setVariable("variableSetInExecutionListener", "firstValue");
    execution.setVariable("eventReceived", execution.getEventName());
  }
}</pre><p>
        It is also possible to use a delegation class that implements the <code class="literal">org.activiti.engine.delegate.JavaDelegate</code>
        interface. These delegation classes can then be reused in other constructs, such as a delegation for a serviceTask.
        </p><p>
           The second execution listener is called when the transition is taken. Note that the <code class="literal">listener</code> element doesn't define an
          <code class="literal">event</code>, since only <code class="literal">take</code> events are fired on transitions. 
          <span class="bold"><strong>Values in the <code class="literal">event</code> attribute are ignored when a listener is defined on a transition.</strong></span>
        </p><p>
          The last execution listener is called when activity <code class="literal">secondTask</code> ends. Instead of using the <code class="literal">class</code> on the listener declaration,
          a <code class="literal">expression</code> is defined instead which is evaluated/invoked when the event is fired. 
        </p><pre class="prettyprint">
&lt;activiti:executionListener expression="<span class="bold"><strong>${myPojo.myMethod(execution.eventName)}</strong></span>" event="end" /&gt;</pre><p>
          As with other expressions, execution variables are resolved and can be used. Because the execution implementation object has a property that exposes the event name, it's
          possible to pass the event-name to your methods using <code class="literal">execution.eventName</code>.
        </p><p>
          Execution listeners also support using a <code class="literal">delegateExpression</code>,
          <a class="link" href="#bpmnJavaServiceTaskXML" title="XML representation">similar to a service task</a>.
          </p><pre class="prettyprint">&lt;activiti:executionListener event="start" delegateExpression="${myExecutionListenerBean}" /&gt;</pre><p>         
        </p><p>
          In Activiti 5.12 we also introduced a new type of execution listener, the org.activiti.engine.impl.bpmn.listener.ScriptExecutionListener.
          This script execution listener allows you to execute a piece of script logic for an execution listener event.
</p><pre class="prettyprint">
&lt;activiti:executionListener event="start" class="org.activiti.engine.impl.bpmn.listener.ScriptExecutionListener" &gt;
  &lt;activiti:field name="script"&gt;
    &lt;activiti:string&gt;
      def bar = "BAR";  // local variable
      foo = "FOO"; // pushes variable to execution context
      execution.setVariable("var1", "test"); // test access to execution instance
      bar // implicit return value
    &lt;/activiti:string&gt;
  &lt;/activiti:field&gt;
  &lt;activiti:field name="language" stringValue="groovy" /&gt;
  &lt;activiti:field name="resultVariable" stringValue="myVar" /&gt;
&lt;activiti:executionListener&gt;</pre><p>         
        </p><div class="section" title="Field injection on execution listeners"><div class="titlepage"><div><div><h4 class="title"><a name="executionListenerFieldInjection"></a>Field injection on execution listeners</h4></div></div></div><p>
         When using an execution listener that is configured with the <code class="literal">class</code> attribute, field injection can be applied. This is exactly the same
         mechanism as used <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">Service task field injection</a>, which contains an overview of the possibilities provided by field injection. 
        </p><p>
         The fragment below shows a simple example process with an execution listener with fields injected. 
        </p><pre class="prettyprint">
 &lt;process id="executionListenersProcess"&gt;
    <span class="bold"><strong>&lt;extensionElements&gt;
      &lt;activiti:executionListener class="org.activiti.examples.bpmn.executionListener.ExampleFieldInjectedExecutionListener" event="start"&gt;
        &lt;activiti:field name="fixedValue" stringValue="Yes, I am " /&gt;
        &lt;activiti:field name="dynamicValue" expression="${myVar}" /&gt;
      &lt;/activiti:executionListener&gt;
    &lt;/extensionElements&gt;</strong></span>
    
    &lt;startEvent id="theStart" /&gt;
    &lt;sequenceFlow sourceRef="theStart" targetRef="firstTask" /&gt;
    
    &lt;userTask id="firstTask" /&gt;
    &lt;sequenceFlow sourceRef="firstTask" targetRef="theEnd" /&gt;
    
    &lt;endEvent id="theEnd" /&gt;
  &lt;/process&gt;
        </pre><p>
        </p><p>
          </p><pre class="prettyprint">
public class ExampleFieldInjectedExecutionListener implements ExecutionListener {

  <span class="bold"><strong>private Expression fixedValue;

  private Expression dynamicValue;</strong></span>

  public void notify(ExecutionListenerExecution execution) throws Exception {
    execution.setVariable("var", <span class="bold"><strong>fixedValue.getValue(execution).toString()</strong></span> + <span class="bold"><strong>dynamicValue.getValue(execution).toString()</strong></span>);
  }
}
          </pre><p>
          The class <code class="literal">ExampleFieldInjectedExecutionListener</code> concatenates the 2 injected fields (one fixed an the other dynamic) and stores this in the process variable '<code class="literal">var</code>'.
        </p><p>
        </p><pre class="prettyprint">
@Deployment(resources = {"org/activiti/examples/bpmn/executionListener/ExecutionListenersFieldInjectionProcess.bpmn20.xml"})
public void testExecutionListenerFieldInjection() {
  Map&lt;String, Object&gt; variables = new HashMap&lt;String, Object&gt;();
  <span class="bold"><strong>variables.put("myVar", "listening!");</strong></span>
    
  ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("executionListenersProcess", variables);
    
  Object varSetByListener = runtimeService.getVariable(processInstance.getId(), "var");
  assertNotNull(varSetByListener);
  assertTrue(varSetByListener instanceof String);
    
  // Result is a concatenation of fixed injected field and injected expression
  <span class="bold"><strong>assertEquals("Yes, I am listening!", varSetByListener);</strong></span>
}
        </pre><p>
        </p></div></div><div class="section" title="Task listener"><div class="titlepage"><div><div><h3 class="title"><a name="taskListeners"></a>Task listener</h3></div></div></div><p>
      A <span class="emphasis"><em>task listener</em></span> is used to execute custom Java logic or an expression
      upon the occurrence of a certain task-related event.
    </p><p>
      A task listener can only be added in the process definition as a child element of a <a class="link" href="#bpmnUserTask" title="User Task">user task</a>.
      Note that this also must happen as a child of the <span class="emphasis"><em>BPMN 2.0 extensionElements</em></span>
      and in the <span class="emphasis"><em>activiti</em></span> namespace, since a task listener is an Activiti-specific construct.      
      </p><pre class="prettyprint">
&lt;userTask id="myTask" name="My Task" &gt;
  &lt;extensionElements&gt;
    <span class="bold"><strong>&lt;activiti:taskListener event="create" class="org.activiti.MyTaskCreateListener" /&gt;</strong></span>
  &lt;/extensionElements&gt;
&lt;/userTask&gt;</pre><p>
      A <span class="emphasis"><em>task listener</em></span> supports following attributes:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>event</strong></span> (required): the type of task event on which the task listener will
            be invoked. Possible events are 
            </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p> 
                  <span class="bold"><strong>create</strong></span>: occurs when the task 
                  has been created an <span class="bold"><strong>all task properties are set</strong></span>.
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>assignment</strong></span>: occurs when the task is assigned to somebody.
                  Note: when process execution arrives in a userTask, first an 
                  <span class="emphasis"><em>assignment</em></span> event will be fired, <span class="bold"><strong>before</strong></span>
                  the <span class="emphasis"><em>create</em></span> event is fired. This might seem an unnatural order, 
                  but the reason is pragmatic: when receiving the <span class="emphasis"><em>create</em></span> event,
                  we usually want to inspect all properties of the task including the assignee.
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>complete</strong></span>: occurs when the task is completed 
                  and just before the task is deleted from the runtime data.
                </p></li></ul></div><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>class</strong></span>: the delegation class that must be called. 
            This class must implement the <code class="literal">org.activiti.engine.impl.pvm.delegate.TaskListener</code>
            interface.
            </p><pre class="prettyprint">
public class MyTaskCreateListener implements TaskListener {

  public void notify(DelegateTask delegateTask) {
    // Custom logic goes here
  }

}</pre><p>
            
            It is also possible to use <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">field injection</a> to pass
            process variables or the execution to the delegation class.
            Note that an instance of the delegation class is created upon process deployment
            (as is the case with any class delegation in Activiti), which means that the 
            instance is shared between all process instance executions.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>expression</strong></span>: (cannot be used together with the <span class="emphasis"><em>class</em></span> attribute):
            specifies an expression that will be executed when the event happens. 
            It is possible to pass the <code class="literal">DelegateTask</code> object and the name
            of the event (using <code class="literal">task.eventName</code>) as parameter to the called object. 
            </p><pre class="prettyprint">&lt;activiti:taskListener event="create" expression="${myObject.callMethod(task, task.eventName)}" /&gt;</pre><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>delegateExpression</strong></span> allows to specify an expression
            that resolves to an object implementing the <code class="literal">TaskListener</code> interface,
            <a class="link" href="#bpmnJavaServiceTaskXML" title="XML representation">similar to a service task</a>. 
            </p><pre class="prettyprint">&lt;activiti:taskListener event="create" delegateExpression="${myTaskListenerBean}" /&gt;</pre><p>        
          </p></li><li class="listitem"><p>
          In Activiti 5.12 we also introduced a new type of task listener, the org.activiti.engine.impl.bpmn.listener.ScriptTaskListener.
          This script task listener allows you to execute a piece of script logic for an task listener event.
</p><pre class="prettyprint">
&lt;activiti:taskListener event="complete" class="org.activiti.engine.impl.bpmn.listener.ScriptTaskListener" &gt;
  &lt;activiti:field name="script"&gt;
    &lt;activiti:string&gt;
      def bar = "BAR";  // local variable
      foo = "FOO"; // pushes variable to execution context
      task.setOwner("kermit"); // test access to task instance
      bar // implicit return value
    &lt;/activiti:string&gt;
  &lt;/activiti:field&gt;
  &lt;activiti:field name="language" stringValue="groovy" /&gt;
  &lt;activiti:field name="resultVariable" stringValue="myVar" /&gt;
&lt;activiti:taskListener&gt;</pre><p>         
        </p></li></ul></div><p>
    </p></div><div class="section" title="Multi-instance (for each)"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnMultiInstance"></a>Multi-instance (for each)</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMultiInstanceDescription"></a>Description</h4></div></div></div><p>
          A <span class="emphasis"><em>multi-instance activity</em></span> is a way of defining repetition for 
          a certain step in a business process. In programming concepts, a multi-instance
          matches the <span class="bold"><strong>for each</strong></span> construct: it allows to execute
          a certain step or even a complete subprocess for each item in a given collection, 
          <span class="bold"><strong>sequentially or in parallel</strong></span>.
        </p><p>
          A <span class="emphasis"><em>multi-instance</em></span> is a regular activity that has extra properties
          defined (so-called <span class="emphasis"><em>'multi-instance</em></span> characteristics'') which
          will cause the activity to be executed multiple times at runtime. Following
          activities can become a <span class="emphasis"><em>multi-instance activity:</em></span>
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="link" href="#bpmnUserTask" title="User Task">User Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnScriptTask" title="Script Task">Script Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnJavaServiceTask" title="Java Service Task">Java Service Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnWebserviceTask" title="Web Service Task">Web Service Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnBusinessRuleTask" title="Business Rule Task">Business Rule Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnEmailTask" title="Email Task">Email Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnManualTask" title="Manual Task">Manual Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnReceiveTask" title="Java Receive Task">Receive Task</a></p></li><li class="listitem"><p><a class="link" href="#bpmnSubProcess" title="Sub-Process">(Embedded) Sub-Process</a></p></li><li class="listitem"><p><a class="link" href="#bpmnCallActivity" title="Call activity (subprocess)">Call Activity</a></p></li></ul></div><p>
          A <a class="link" href="#bpmnGateways" title="Gateways">Gateway</a> or <a class="link" href="#bpmnEvents" title="Events">Event</a>
          can <span class="bold"><strong>not</strong></span> become multi-instance.
        </p><p>
          As required by the spec, each parent execution of the created executions for each instance
          will have following variables:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>nrOfInstances</strong></span>: the total number of instances</p></li><li class="listitem"><p><span class="bold"><strong>nrOfActiveInstances</strong></span>: the number of currently active, i.e. not yet finished, instances. For a sequential multi-instance, this will always be 1.</p></li><li class="listitem"><p><span class="bold"><strong>nrOfCompletedInstances</strong></span>: the number of already completed instances.</p></li></ul></div><p>
          These values can be retrieved by calling the <code class="literal">execution.getVariable(x)</code> method.
        </p><p>
          Additionally, each of the created executions will have an execution-local variable (i.e. not visible
          for the other executions, and not stored on process instance level) :
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>loopCounter</strong></span>: indicates the <span class="emphasis"><em>index in the for-each loop</em></span> of that particular instance.</p></li></ul></div><p>
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMultiInstanceGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          If an activity is multi-instance, this is indicated by three short lines at the bottom
          of that activity. Three <span class="emphasis"><em>vertical</em></span> lines indicates that the instances will be executed
          in parallel, while three <span class="emphasis"><em>horizontal</em></span> lines indicate sequential execution.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.multi.instance.png" align="middle"></div><p>
        </p></div><div class="section" title="Xml representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMultiInstanceXml"></a>Xml representation</h4></div></div></div><p>
         To make an activity multi-instance, the activity xml element must have a
         <code class="literal">multiInstanceLoopCharacteristics</code> child element.
         </p><pre class="prettyprint">
&lt;multiInstanceLoopCharacteristics isSequential="false|true"&gt;
 ...
&lt;/multiInstanceLoopCharacteristics&gt;</pre><p>
         The <span class="bold"><strong>isSequential</strong></span> attribute indicates if the 
         instances of that activity are executed sequentially or parallel.
        </p><p>
          The number of instances are <span class="bold"><strong>calculated once, when entering the activity</strong></span>.
          There are a few ways of configuring this. On way is directly specifying a number, by using
          the <span class="bold"><strong>loopCardinality</strong></span> child element.
          </p><pre class="prettyprint">
&lt;multiInstanceLoopCharacteristics isSequential="false|true"&gt;
  &lt;loopCardinality&gt;5&lt;/loopCardinality&gt;
&lt;/multiInstanceLoopCharacteristics&gt;</pre><p>
          Expressions that resolve to a positive number are also possible:
          </p><pre class="prettyprint">
&lt;multiInstanceLoopCharacteristics isSequential="false|true"&gt;
  &lt;loopCardinality&gt;${nrOfOrders-nrOfCancellations}&lt;/loopCardinality&gt;
&lt;/multiInstanceLoopCharacteristics&gt;</pre><p>
        </p><p>
          Another way to define the number of instances, is to specify the name of a process variable which is a collection using the <code class="literal">loopDataInputRef</code> 
          child element. For each item in the collection, an instance will be created.
          Optionally, it is possible to set that specific item of the collection for the instance
          using the <code class="literal">inputDataItem</code> child element. This is shown in the following
          XML example:
          </p><pre class="prettyprint">
&lt;userTask id="miTasks" name="My Task ${loopCounter}" activiti:assignee="${assignee}"&gt;
  &lt;multiInstanceLoopCharacteristics isSequential="false"&gt;
    &lt;loopDataInputRef&gt;assigneeList&lt;/loopDataInputRef&gt;
    &lt;inputDataItem name="assignee" /&gt;
  &lt;/multiInstanceLoopCharacteristics&gt;
&lt;/userTask&gt;</pre><p>
          Suppose the variable <code class="literal">assigneeList</code> contains the values <code class="literal">[kermit, gonzo, foziee]</code>.
          In the snippet above, three user tasks will be created in parallel. Each of the executions
          will have a process variable named <code class="literal">assignee</code> containing one value of the 
          collection, which is used to assign the user task in this example.
        </p><p>
          The downside of the <code class="literal">loopDataInputRef</code> and <code class="literal">inputDataItem</code>
          is that 1) the names are pretty hard to remember and 2) due to the BPMN 2.0 schema restrictions
          they can't contain expressions. Activiti solves this by offering the 
          <span class="bold"><strong>collection</strong></span> and <span class="bold"><strong>elementVariable</strong></span>
          attributes on the <code class="literal">multiInstanceCharacteristics</code>:
          </p><pre class="prettyprint">
&lt;userTask id="miTasks" name="My Task" activiti:assignee="${assignee}"&gt;
  &lt;multiInstanceLoopCharacteristics isSequential="true" 
     <span class="bold"><strong>activiti:collection="${myService.resolveUsersForTask()}" activiti:elementVariable="assignee" </strong></span>&gt;
  &lt;/multiInstanceLoopCharacteristics&gt;
&lt;/userTask&gt;</pre><p> 
        </p><p>
          A multi-instance activity ends when all instances are finished. However, it is possible
          to specify an expression that is evaluated every time one instance ends. When this
          expression evaluates to true, all remaining instances are destroyed and the multi-instance
          activity ends, continuing the process. Such an expression must be defined in
          the <span class="bold"><strong>completionCondition</strong></span> child element.
          </p><pre class="prettyprint">
&lt;userTask id="miTasks" name="My Task" activiti:assignee="${assignee}"&gt;
  &lt;multiInstanceLoopCharacteristics isSequential="false" 
     activiti:collection="assigneeList" activiti:elementVariable="assignee" &gt;
    <span class="bold"><strong>&lt;completionCondition&gt;${nrOfCompletedInstances/nrOfInstances &gt;= 0.6 }&lt;/completionCondition&gt;</strong></span>
  &lt;/multiInstanceLoopCharacteristics&gt;
&lt;/userTask&gt;</pre><p>
          In this example, there will be parallel instances created for each element of the <code class="literal">assigneeList</code>
          collection. However, when 60% of the tasks are completed, the other tasks are deleted
          and the process continues.       
        </p></div><div class="section" title="Boundary events and multi-instance"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnMultiInstanceBoundaryEvent"></a>Boundary events and multi-instance</h4></div></div></div><p>
          Since a multi-instance is a regular activity, it is possible to define a 
          <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">boundary event</a> on its boundary.
          In case of an interrupting boundary event, when the event is caught, <span class="bold"><strong>all instances</strong></span>
          that are still active will be destroyed. Take for example following multi-instance subprocess:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.multi.instance.boundary.event.png" align="middle"></div><p>
          Here, all instances of the subprocess will be destroyed when the timer fires, regardless
          of how many instances there are or which inner activities are currently not yet completed.
        </p></div></div><div class="section" title="Compensation Handlers"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnCompensationHandlers"></a>Compensation Handlers</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCompensationHandlerDescription"></a>Description</h4></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><p>
         If an activity is used for compensating the effects of another activity, it can be declared to be a compensation handler.
         Compensation handlers are not contained in normal flow and are only executed when a compensation event is thrown. 
        </p><p>
        	Compensation handlers must not have incoming or outgoing sequence flows.
        </p><p>
        	A compensation handler must be associated with a compensation boundary event using a directed association.
        </p></div><div class="section" title="Graphical notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCompensationHandlerGraphicalNotation"></a>Graphical notation</h4></div></div></div><p>
          If an activity is a compensation handler, the compensation event icon is displayed in the center bottom area. The following
          excerpt from a process diagram shows a service task with an attached compensation boundary event which is associated to a 
          compensation handler. Notice the compensation handler icon in the bottom canter area of the "cancel hotel reservation" service task
          </p><div class="mediaobject" align="center"><img src="images/bpmn.boundary.compensation.event.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCompensationHandlerXml"></a>XML representation</h4></div></div></div>
      	In order to declare an activity to be a compensation handler, we need to set the attribute <code class="code">isForCompensation</code>
      	to <code class="code">true</code>:
      	<pre class="prettyprint">
&lt;serviceTask id="undoBookHotel" isForCompensation="true" activiti:class="..."&gt;
&lt;/serviceTask&gt;</pre></div></div></div><div class="section" title="Sub-Processes and Call Activities"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnSubprocessAndCallActivity"></a>Sub-Processes and Call Activities</h2></div></div></div><div class="section" title="Sub-Process"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnSubProcess"></a>Sub-Process</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSubProcessDescription"></a>Description</h4></div></div></div><p>
		      A <span class="emphasis"><em>Sub-Process</em></span> is an activity that contains other activities, gateways,
		      events, etc. which on itself form a process that is part of the bigger process. 
		      A <span class="emphasis"><em>Sub-Process</em></span> is completely defined inside a parent process
		      (that's why it's often called an <span class="emphasis"><em>embedded</em></span> Sub-Process).
		    </p><p>
		      Sub-Processes have two major use cases:
		      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		            Sub-Processes allow <span class="bold"><strong>hierarchical modeling</strong></span>.
		            Many modeling tools allow that Sub-Processes can be <span class="emphasis"><em>collapsed</em></span>, 
		            hiding all the details of the Sub-Process and displaying a high-level end-to-end
		            overview of the business process.
		          </p></li><li class="listitem"><p>
		            A Sub-Process creates a new <span class="bold"><strong>scope for events</strong></span>.
		            Events that are thrown during execution of the Sub-Process, can be caught by
		            <a class="link" href="#bpmnBoundaryEvent" title="Boundary Events">a boundary event</a> on the boundary 
		            of the Sub-Process, thus creating a scope for that event limited to the Sub-Process.
		          </p></li></ul></div><p>
		    </p><p>
		      Using a Sub-Process does impose some constraints:
		      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		            A Sub-Process can only have <span class="bold"><strong>one none start event</strong></span>, no other
		            start event types are allowed. A Sub-Process must <span class="bold"><strong>
		            at least have one end event</strong></span>. Note that the BPMN 2.0 specification
		            allows to omit the start and end events in a Sub-Process, but the current
		            Activiti implementation does not support this.
		          </p></li><li class="listitem"><p>
		            <span class="bold"><strong>Sequence flow can not cross Sub-Process boundaries.</strong></span>
		          </p></li></ul></div><p>
		    </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSubProcessGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          A Sub-Process is visualized as a typical activity, i.e. a rounded rectangle.
          In case the Sub-Process is <span class="emphasis"><em>collapsed</em></span>, only the name and a plus-sign are displayed,
          giving a high-level overview of the process:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.collapsed.subprocess.png" align="middle"></div><p>
        </p><p>  
          In case the Sub-Process is <span class="emphasis"><em>expanded</em></span>, the steps of the Sub-Process
          are displayed within the Sub-Process boundaries:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.expanded.subprocess.png" align="middle"></div><p>
        </p><p>
          One of the main reasons to use a Sub-Process, is to define a scope for a certain event.
          The following process model shows this: both the <span class="emphasis"><em>investigate software/investigate hardware</em></span>
          tasks need to be done in parallel, but both tasks need to be done within a certain time,
          before <span class="emphasis"><em>Level 2 support</em></span> is consulted.
          Here, the scope of the timer (i.e. which activities must be done in time) is constrained by the Sub-Process. 
          </p><div class="mediaobject" align="center"><img src="images/bpmn.subprocess.with.boundary.timer.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnSubProcessXML"></a>XML representation</h4></div></div></div><p>
          A Sub-Process is defined by the <span class="emphasis"><em>subprocess</em></span> element.
          All activities, gateways, events, etc. that are part of the Sub-Process, need
          to be enclosed within this element.
          </p><pre class="prettyprint">
&lt;subProcess id="subProcess"&gt;
    
  &lt;startEvent id="subProcessStart" /&gt;
  
  ... other Sub-Process elements ...

  &lt;endEvent id="subProcessEnd" /&gt;
    
 &lt;/subProcess&gt;          
          </pre><p> 
        </p></div></div><div class="section" title="Event Sub-Process"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnEventSubprocess"></a>Event Sub-Process</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessDescription"></a>Description</h4></div></div></div><p>
		      The Event Sub-Process is new in BPMN 2.0. An Event Sub-Process is a subprocess that is triggered by an event. 
		      An Event Sub-Process can be added at the process level or at any subprocess level. The event used to trigger an event 
		      subprocess is configured using a start event. From this, it follows that none start events are not supported for 
		      Event Sub-Processes. An Event Sub-Process might be triggered using events like message events, error events, signal events, 
		      timer events, or compensation events.
		      The subscription to the start event is created when the scope (process instance or subprocess) 
		      hosting the Event Sub-Process is created. The subscription is removed when the scope is destroyed. 	      
		    </p><p>
				An Event Sub-Process may be interrupting or non-interrupting. An interrupting subprocess cancels any executions 
				in the current scope. A non-interrupting Event Sub-Process spawns a new concurrent execution. While an interrupting 
				Event Sub-Process can only be triggered once for each activation of the scope hosting it, a non-interrupting Event Sub-Process
				can be triggered multiple times. The fact whether the subprocess is interrupting is configured using the start event triggering the 
				Event Sub-Process.
		   	</p><p>
		   		An Event Sub-Process must not have any incoming or outgoing sequence flows. Since an Event Sub-Process is triggered
		   		by an event, an incoming sequence flow makes no sense. When an Event Sub-Process is ended, either the current scope is ended 
		   		(in case of an interrupting Event Sub-Process), or the concurrent execution spawned for the non-interrupting subprocess is ended.
		   	</p><p>
		   		<span class="bold"><strong>Current limitations:</strong></span>
		   		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		   					Activiti only supports interrupting Event Sub-Processes.
		   				</p></li><li class="listitem"><p>
		   					Activiti only supports Event Sub-Process triggered using an Error Start Event or Message Start Event.
		   				</p></li></ul></div><p>
		   	</p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          An Event Sub-Process might be visualized as a an <a class="link" href="#bpmnSubProcessGraphicalNotation" title="Graphical Notation">embedded subprocess</a> with a dotted outline.          
          </p><div class="mediaobject" align="center"><img src="images/bpmn.subprocess.eventSubprocess.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessXMLRepresentation"></a>XML representation</h4></div></div></div><p>
      		An Event Sub-Process is represented using XML in the same way as a an <a class="link" href="#">embedded subprocess</a>.
      		In addition the attribute <code class="code">triggeredByEvent</code> must have the value <code class="code">true</code>:
</p><pre class="prettyprint">
&lt;subProcess id="eventSubProcess" triggeredByEvent="true"&gt;
	...
&lt;/subProcess&gt;
</pre><p>      		 
        </p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessExample"></a>Example</h4></div></div></div><p>
  			The following is an example of an Event Sub-Process triggered using an Error Start Event. The Event Sub-Process is located at the "process level", i.e. is scoped to the process
  			instance:
  			</p><div class="mediaobject" align="center"><img src="images/bpmn.subprocess.eventSubprocess.example.1.png" align="middle"></div><p>
  			This is how the Event Sub-Process would look like in XML:  			
</p><pre class="prettyprint">
&lt;subProcess id="eventSubProcess" triggeredByEvent="true"&gt;
	&lt;startEvent id="catchError"&gt;
		&lt;errorEventDefinition errorRef="error" /&gt; 
	&lt;/startEvent&gt;
	&lt;sequenceFlow id="flow2" sourceRef="catchError" targetRef="taskAfterErrorCatch" /&gt;
	&lt;userTask id="taskAfterErrorCatch" name="Provide additional data" /&gt;
&lt;/subProcess&gt;
</pre><p> 
        </p><p>
        	As already stated, an Event Sub-Process can also be added to an embedded subprocess. If it is added to an embedded subprocess, it becomes an alternative to a
        	boundary event. Consider the two following process diagrams. In both cases the embedded subprocess throws an error event. Both times the error is caught and 
        	handled using a user task.          
        	</p><div class="mediaobject" align="center"><img src="images/bpmn.subprocess.eventSubprocess.example.2a.png" align="middle"></div><p>
        	</p><p>as opposed to:</p><p>
        	</p><div class="mediaobject" align="center"><img src="images/bpmn.subprocess.eventSubprocess.example.2b.png" align="middle"></div><p>	
        	 In both cases the same tasks are executed. However, there are differences between both modelling alternatives:
        	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        				The embedded subprocess is executed using the same execution which executed the scope it is hosted in. This means that an embedded subprocess has
        				access to the variables local to it's scope. When using a boundary event, the execution created for executing the embedded subprocess is deleted
        				by the sequence flow leaving the boundary event. This means that the variables created by the embedded subprocess are not available anymore.				
        			</p></li><li class="listitem"><p>
        				When using an Event Sub-Process, the event is completely handled by the subprocess it is added to. 
        				When using a boundary event, the event is handled by the parent process.				
        			</p></li></ul></div><p>
        	These two differences can help you decide whether a boundary event or an embedded subprocess is better suited for solving a particular process modeling 
        	/ implementation problem.
        </p></div></div><div class="section" title="Transaction subprocess"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnTransactionSubprocess"></a>Transaction subprocess</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnTransactionSubprocessDescription"></a>Description</h4></div></div></div><p>
		      A transaction subprocess is an embedded subprocess, which can be used to group multiple activities to a transaction. 
		      A transaction is a logical unit of work which allows to group a set of individual activities, 
		      such that they either succeed or fail collectively.		      		      		      
		    </p><p>
		    	<span class="bold"><strong>Possible outcomes of a transaction:</strong></span>
		    	A transaction can have three different outcomes:
		    	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		    				A transaction is <span class="emphasis"><em>successful</em></span>, if it is neither cancelled not terminated by a hazard. If a transaction subprocess
		    				is successful, it is left using the outgoing sequenceflow(s). A successful transaction might be compensated if a compensation
		    				event is thrown later in the process.		    				
							   	</p><p>
							   		<span class="bols">Note:</span> just as "ordinary" embedded subprocesses, a transaction may be compensated 
							   		after successful completion using an intermediary throwing compensation event. 
							   	</p><p> 
		    			</p></li><li class="listitem"><p>
		    				A transaction is <span class="emphasis"><em>cancelled</em></span>, if an execution reaches the cancel end event. In that case, all executions are 
		    				terminated and removed. A single remaining execution is then set to the cancel boundary event, which triggers compensation.
		    				After compensation is completed, the transaction subprocess is left using the outgoing sequence flow(s) of the cancel boundary event.		    				  
		    			</p></li><li class="listitem"><p>
		    				A transaction is ended by a <span class="emphasis"><em>hazard</em></span>, if an error event is thrown, that is not caught within the scope of the 
		    				transaction subprocess. (This also applies if the error is caught on the boundary of the transaction subprocess.)
		    				In this case, compensation is not performed.
		    			</p></li></ul></div><p>
		    	The following diagram illustrates the three different outcomes:
		    	</p><div class="mediaobject" align="center"><img src="images/bpmn.transaction.subprocess.example.1.png" align="middle"></div><p>		    	
		    </p><p>
				<span class="bold"><strong>Relation to ACID transactions:</strong></span> it is important not to confuse the bpmn transaction subprocess with 
				technical (ACID) transactions. The bpmn transaction subprocess is not a way to scope technical transactions.
				In order to understand transaction management in Activiti, read the section on 
				<a class="link" href="#bpmnConcurrencyAndTransactions" title="Transactions and Concurrency">concurrency and transactions</a>.
		   		A bpmn transaction is different from a technical transaction in the following ways:
		   		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		   					While an ACID transaction is typically short lived, a bpmn transaction may take hours, days or even months 
		   					to complete. (Consider the case where one of the activities grouped by a transaction is a usertask, 
		   					typically people have longer response times than applications. Or, in another situation, a bpmn transaction might wait 
		   					for some business event to occur, like the fact that a particular order has been fulfilled.) Such operations
		   					usually take considerably longer to complete than updating a record in a database, or storing a message using 
		   					a transactional queue.  
		   				</p></li><li class="listitem"><p>
		   					Because it is impossible to scope a technical transaction to the duration of a business activity, a bpmn transaction typically 
		   					spans multiple ACID transactions.
		   				</p></li><li class="listitem"><p>
		   					Since a bpmn transaction spans multiple ACID transactions, we loose ACID properties. For example, consider the example given above.
		   					Let's assume the "book hotel" and the "charge credit card" operations are performed in separate ACID transactions. Let's also assume that 
		   					the "book hotel" activity is successful. Now we have an intermediary inconsistent state, because we have performed an hotel booking but have 
		   					not yet charged the credit card. Now, in an ACID transaction, we would also perform different operations sequentially and thus also have an 
		   					intermediary inconsistent state. What is different here, is that the inconsistent state is visible outside of the scope of the transaction. 
		   					For example, if the reservations are made using an external booking service, other parties using the same booking service might already see that 
		   					the hotel is booked. This means, that when implementing business transactions, we completely loose the isolation property (Granted: we usually also 
		   					relax isolation when working with ACID transactions to allow for higher levels of concurrency, but there we have fine grained control and intermediary 
		   					inconsistencies are only present for very short periods of times). 		   					  		   				   
		   				</p></li><li class="listitem"><p>
		   					A bpmn business transaction can also not be rolled back in the traditional sense. Since it spans multiple ACID transactions, some of these ACID 
		   					transactions might already be committed at the time the bpmn transaction is cancelled. At this point, they cannot be rolled back anymore. 
		   				</p></li></ul></div><p>
		   	</p><p>
		   		Since bpmn transactions are long-running in nature, the lack of isolation and a rollback mechanism need to be dealt with differently. In practice, there is usually 
		   		no better solution than to deal with these problems in a domain specific way:
		   		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		   					The rollback is performed using compensation. If a cancel event is thrown in the scope of a transaction, the effects of all activities that executed 
		   					successfully and have a compensation handler are compensated. 		   				
		   				</p></li><li class="listitem"><p>
		   					The lack of isolation is also often dealt with using domain specific solutions. For instance, in the example above, an hotel room might appear to be
		   					booked to a second customer, before we have actually made sure that the first customer can pay for it. Since this might be undesirable from a business 
		   					perspective, a booking service might choose to allow for a certain amount of overbooking.
		   				</p></li><li class="listitem"><p>
		   					In addition, since the transaction can be aborted in case of a hazard, the booking service has to deal with the situation where a hotel room is booked 
		   					but payment is never attempted (since the transaction was aborted). In that case the booking service might choose a strategy where a hotel room is
		   					reserved for a maximum period of time and if payment is not received until then, the booking is cancelled. 
		   				</p></li></ul></div><p>
		   		To sum it up: while ACID transactions offer a generic solution to such problems (rollback, isolation levels and heuristic outcomes), 
		   		we need to find domain specific solutions to these problems when implementing business transactions. 
		   	</p><p>
		   		<span class="bold"><strong>Current limitations:</strong></span>
		   		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		   					The bpmn specification requires that the process engine reacts to events issued by the underlying transaction protocol 
		   					and for instance that a transaction is cancelled, if a cancel event occurs in the underlying protocol.
		   					As an embeddable engine, Activiti does currently not support this. (For some ramifications of this, see paragraph on consistency below.)		   					
		   				</p></li></ul></div><p>
		   	</p><p>
		   		<span class="bold"><strong>Consistency on top of ACID transactions and optimistic concurrency:</strong></span>
		   		A bpmn transaction guarantees consistency in the sense that either all activities compete successfully, or if some activity 
		   		cannot be performed, the effects of all other successful activities are compensated. So either way we end up in a consistent 
		   		state. However, it is important to recognize that in Activiti, the consistency model for bpmn transactions is superposed 
		   		on top of the consistency model for process execution. 
		   		Activiti executes processes in a transactional way. Concurrency is addressed using optimistic
		   		locking. In Activiti, bpmn error, cancel and compensation events 
		   		are built on top of the same acid transactions and optimistic locking. For example, a cancel end event can only trigger compensation 
		   		if it is actually reached. It is not reached if some undeclared exception is thrown by a service task before. Or, the 
		   		effects of a compensation handler can not be committed if some other participant in the underlying ACID transaction 
		   		sets the transaction to the state rollback-only. Or, when two concurrent executions reach a cancel end event, compensation 
		   		might be triggered twice and fail with an optimistic locking exception. All of this is to say that when implementing 
		   		bpmn transactions in Activiti, the same set of rules apply as when implementing "ordinary" processes and subprocesses.
		   		So to effectively guarantee consistency, it is important to implement processes in a way that does take the optimistic, transactional 
		   		execution model into consideration.		   		 
		   	</p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          An transaction subprocess might be visualized as a an <a class="link" href="#bpmnSubProcessGraphicalNotation" title="Graphical Notation">embedded subprocess</a> with a double outline.          
          </p><div class="mediaobject" align="center"><img src="images/bpmn.transaction.subprocess.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessXMLRepresentation"></a>XML representation</h4></div></div></div><p>
      		A transaction subprocess is represented using xml using the  <code class="code">transaction</code> tag:
</p><pre class="prettyprint">
&lt;transaction id="myTransaction" &gt;
	...
&lt;/transaction&gt;
</pre><p>      		 
        </p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnEventSubprocessExample"></a>Example</h4></div></div></div><p>
        	The following is an example of a transaction subprocess:
        	</p><div class="mediaobject" align="center"><img src="images/bpmn.transaction.subprocess.example.2.png" align="middle"></div><p>
        </p></div></div><div class="section" title="Call activity (subprocess)"><div class="titlepage"><div><div><h3 class="title"><a name="bpmnCallActivity"></a>Call activity (subprocess)</h3></div></div></div><div class="section" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCallActivityDescription"></a>Description</h4></div></div></div><p>
		      BPMN 2.0 makes a distinction between a regular <span class="emphasis"><em><a class="link" href="#bpmnSubProcess" title="Sub-Process">subprocess</a></em></span>,
		      often also called <span class="emphasis"><em>embedded subprocess</em></span>, and the call activity, which
		      looks very similar. From a conceptual point of view, both will call a subprocess when
		      process execution arrives at the activity.
		    </p><p>
		      The difference is that the call activity references a process that is external to
		      the process definition, whereas the <span class="emphasis"><em><a class="link" href="#bpmnSubProcess" title="Sub-Process">subprocess</a></em></span>
		      is embedded within the original process definition. The main use case for the call
		      activity is to have a reusable process definition that can be called from multiple
		      other process definitions.
		    </p><p>
		      When process execution arrives in the <span class="emphasis"><em>call activity</em></span>, a new 
		      execution is created that is a sub-execution of the execution that arrives in the
		      call activity. This sub-execution is then used to execute the subprocess, potentially
		      creating parallel child execution as within a regular process. The super-execution
		      waits until the subprocess is completely ended, and continues the original 
		      process afterwards.
		    </p></div><div class="section" title="Graphical Notation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCallActivityGraphicalNotation"></a>Graphical Notation</h4></div></div></div><p>
          A call activity is visualized the same as a <a class="link" href="#bpmnSubProcessGraphicalNotation" title="Graphical Notation">subprocess</a>,
          however with a thick border (collapsed and expanded).
          Depending on the modeling tool, a call activity can also be expanded, but the default
          visualization is the collapsed subprocess representation.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.collapsed.call.activity.png" align="middle"></div><p>
        </p></div><div class="section" title="XML representation"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCallActivityXMLRepresentation"></a>XML representation</h4></div></div></div><p>
          A call activity is a regular activity, that requires a <span class="emphasis"><em>calledElement</em></span>
          that references a process definition by its <span class="bold"><strong>key</strong></span>.
          In practice, this means that the <span class="bold"><strong>id of the process</strong></span> is
          used in the <span class="emphasis"><em>calledElement</em></span>.
</p><pre class="prettyprint">
&lt;callActivity id="callCheckCreditProcess" name="Check credit" calledElement="checkCreditProcess" /&gt;
</pre><p>
        </p><p>
          Note that the process definition of the subprocess is <span class="bold"><strong>resolved 
          at runtime</strong></span>. This means that the subprocess can be deployed independently
          from the calling process, if needed.
        </p></div><div class="section" title="Passing variables"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCallActivityPassVariables"></a>Passing variables</h4></div></div></div><p>
          You can pass process variables to the sub process and vice versa. The data is copied into the subprocess when it is
          started and copied back into the main process when it ends.
</p><pre class="prettyprint">
&lt;callActivity id="callSubProcess" calledElement="checkCreditProcess" &gt;
  &lt;extensionElements&gt;
	  &lt;activiti:in source="someVariableInMainProcess" target="nameOfVariableInSubProcess" /&gt;
	  &lt;activiti:out source="someVariableInSubProcss" target="nameOfVariableInMainProcess" /&gt;
  &lt;/extensionElements&gt;
&lt;/callActivity&gt;
</pre><p>
          We use an Activiti Extension as a shortcut for the BPMN standard elements called <span class="emphasis"><em>dataInputAssociation</em></span>
          and <span class="emphasis"><em>dataOutputAssociation</em></span>, which only work if you declare process variables in the BPMN 2.0
          standard way.
        </p><p>
          It is possible to use expressions here as well:
</p><pre class="prettyprint">
&lt;callActivity id="callSubProcess" calledElement="checkCreditProcess" &gt;
	&lt;extensionElements&gt;
	  &lt;activiti:in sourceExpression="${x+5}"" target="y" /&gt;
	  &lt;activiti:out source="${y+5}" target="z" /&gt;
	&lt;/extensionElements&gt;
&lt;/callActivity&gt;
</pre><p>
          So in the end z = y+5 = x+5+5 
        </p></div><div class="section" title="Example"><div class="titlepage"><div><div><h4 class="title"><a name="bpmnCallActivityExample"></a>Example</h4></div></div></div><p>
          The following process diagram shows a simple handling of an order. Since the
          checking of the customer's credit could be common to many other processes, the 
          <span class="emphasis"><em>check credit step</em></span> is modeled here as a call activity.
          </p><div class="mediaobject" align="center"><img src="images/bpmn.call.activity.super.process.png" align="middle"></div><p>
          The process looks as follows:
</p><pre class="prettyprint">
&lt;startEvent id="theStart" /&gt;
&lt;sequenceFlow id="flow1" sourceRef="theStart" targetRef="receiveOrder" /&gt;

&lt;manualTask id="receiveOrder" name="Receive Order" /&gt;
&lt;sequenceFlow id="flow2" sourceRef="receiveOrder" targetRef="callCheckCreditProcess" /&gt;
    
<span class="bold"><strong>&lt;callActivity id="callCheckCreditProcess" name="Check credit" calledElement="checkCreditProcess" /&gt;</strong></span>
&lt;sequenceFlow id="flow3" sourceRef="callCheckCreditProcess" targetRef="prepareAndShipTask" /&gt;
   
&lt;userTask id="prepareAndShipTask" name="Prepare and Ship" /&gt;
&lt;sequenceFlow id="flow4" sourceRef="prepareAndShipTask" targetRef="end" /&gt;
    
&lt;endEvent id="end" /&gt;
</pre><p>
          The subprocess looks as follows:
          </p><div class="mediaobject" align="center"><img src="images/bpmn.call.activity.sub.process.png" align="middle"></div><p>
          There is nothing special to the process definition of the subprocess. It could as well
          be used without being called from another process.
        </p></div></div></div><div class="section" title="Transactions and Concurrency"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bpmnConcurrencyAndTransactions"></a>Transactions and Concurrency</h2></div></div></div><div class="section" title="Asynchronous Continuations"><div class="titlepage"><div><div><h3 class="title"><a name="asyncContinuations"></a>Asynchronous Continuations</h3></div></div></div><p>
        Activiti executes processes in a transactional way which can be configured to suite your needs. Lets start by looking at how Activiti scopes transactions normally. 
        If you trigger Activiti (i.e. start a process, complete a task, signal an execution),
        Activiti is going to advance in the process, until it reaches wait states on each active path of execution. More concretely speaking it performs a depth-first search through 
        the process graph and returns if it has reached wait states on every branch of execution. A wait state is a task which is performed "later" which means that Activiti
        persists the current execution and waits to be triggered again. The trigger can either come from an external source for example if we have a user task or a receive message task, 
        or from Activiti itself, if we have a timer event.
        This is illustrated in the following picture:
        
        </p><div class="mediaobject" align="center"><img src="images/activiti.async.example.no.async.PNG" align="middle"></div><p>
               
        We see a segment of a BPMN processes with a usertask, a service task and a timer event. Completing the usertask and validating the address is part of the 
        same unit of work, so it should succeed or fail atomically. That means that if the service task throws an exception we want to rollback the current transaction, 
        such that the execution tracks back to the user task and the user task is still
        present in the database. This is also the default behavior of Activiti. In (1) an application or client thread completes the task. In that same thread Activiti is now 
        executing the service and advances until it reaches a wait state, in this case the timer event (2). Then it returns the control to the caller (3) potentially committing 
        the transaction (if it was started by Activiti).
    </p><p>
        In some cases this is not what we want. Sometimes we need custom control over transaction boundaries in a process, in order to be able to scope logical units of work.
        This is where asynchronous continuations come into play. Consider the following process (fragment): 
        
        </p><div class="mediaobject" align="center"><img src="images/activiti.async.example.async.PNG" align="middle"></div><p>
        
        This time we are completing the user task, generating an invoice and then send that invoice to the customer.
        This time the generation of the invoice is not part of the same unit of work so we do not want to rollback the completion of the usertask if generating an invoice fails.
        So what we want Activiti to do is complete the user task (1), commit the transaction and return the control to the calling application. Then we want to generate the invoice 
        asynchronously, in a background thread. This background thread is the Activiti job executor (actually a thread pool) which periodically polls the database for jobs. So behind 
        the scenes, when we reach the "generate invoice" task, we are creating a job "message" for Activiti to continue the process later and persisting it into the database. 
        This job is then picked up by the job executor and executed. We are also giving the local job executor a little hint that there is a new job, to improve performance.      
    </p><p>
        In order to use this feature, we can use the <span class="emphasis"><em>activiti:async="true"</em></span> extension. So for example, the service task would look like this:
        </p><pre class="prettyprint">
&lt;serviceTask id="service1" name="Generate Invoice" activiti:class="my.custom.Delegate" activiti:async="true" /&gt; 
        </pre><p>
        activiti:async ca be specified on the following bpmn task types:
        task, serviceTask, scriptTask, businessRuleTask, sendTask, receiveTask, userTask, subProcess, callActivity
    </p><p>
        On a userTask, receiveTask or other wait states, the async continuation allows us to execute the start execution listeners in a separate thread/transaction.
    </p></div><div class="section" title="Exclusive Jobs"><div class="titlepage"><div><div><h3 class="title"><a name="exclusiveJobs"></a>Exclusive Jobs</h3></div></div></div>
        
        Since Activiti 5.9, the JobExecutor makes sure that jobs from a single process instance are never executed concurrently. Why is this?
        
        <div class="section" title="Why exclusive Jobs?"><div class="titlepage"><div><div><h4 class="title"><a name="N11FDC"></a>Why exclusive Jobs?</h4></div></div></div><p> Consider the following process definition:</p><div class="mediaobject" align="center"><img src="images/bpmn.why.exclusive.jobs.png" align="middle"></div><p>We have a parallel gateway followed by three service tasks which all perform an asynchronous continuation. As a result of this, three jobs are added to the database.
	        Once such a job is present in the database it can be processes by the JobExecutor. The JobExecutor acquires the jobs and delegates them to a thread pool of worker threads 
	        which actually process the jobs. This means that using an asynchronous continuation, you can distribute the work to this thread pool (and in a clustered scenario even 
	        across multiple thread pools in the cluster). This is usually a good thing. However it also bears an inherent problem: consistency. Consider the parallel join after the service
	        tasks. When execution of a service tasks is completed, we arrive at the parallel join and need to decide whether to wait for the other executions or whether we can move forward. 
	        That means, for each branch 
	        arriving at the parallel join, we need to take a decision whether we can continue or whether we need to wait for one or more other executions on the other branches.</p><p>
	        Why is this a problem? Since the service tasks are configured using an asynchronous continuation, it is possible that the corresponding jobs are all acquired at the same time and 
	        delegated to different worker threads by the JobExecutor. The consequence is that the transactions in which the services are executed and in which the 3 individual executions arrive
	        at the parallel join can overlap. And if they do so, each individual transaction will not "see", that another transaction is arriving at the same parallel join concurrently and 
	        thus assume that it has to wait for the others. However, if each transaction assumes that it has to wait for the other ones, none will continue the process after the parallel 
	        join and the process instance will remain in that state forever.    
	         </p><p>
	         How does Activiti address this problem? Activiti performs optimistic locking. Whenever we take a decision based on data that might not be current (because another 
	         transaction might modify it before we commit, we make sure to increment the version of the same database row in both transactions). This way, whichever transaction commits first wins 
	         and the other ones fail with an optimistic locking exception. This solves the problem in the case of the process discussed above: if multiple executions arrive at the parallel join 
	         concurrently, they all assume that they have to wait, increment the version of their parent execution (the process instance) and then try to commit. Whichever execution is first will 
	         be able to commit and the other ones will fail with an optimistic locking exception. Since the executions are triggered by a job, Activiti will retry to perform the same job after waiting
	         for a certain amount of time and hopefully this time pass the synchronizing gateway.            
	         </p><p>
	         Is this a good solution? As we have seen, optimistic locking allows Activiti to prevent inconsistencies. It makes sure that we do not "keep stuck at the joining gateway", meaning: either 
	         all executions have passed the gateway or, there are jobs in the database making sure that we retry passing it. However, while this is a perfectly fine solution from the point of view 
	         of persistence and consistency, this might not always be desirable behavior at an higher level: 
	         
	          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
			          Activiti will retry the same job for a fixed maximum number of times only ('3' in the default configuration). After that, the job will still be present in the database but not be retried 
			          actively anymore. That means that an operator would need to trigger the job manually.
			        </p></li><li class="listitem"><p>
			          If a job has non-transactional side effects, those will not be rolled back by the failing transaction. For instance, if the "book concert tickets" service does not 
			          share the same transaction as Activiti, we might book multiple tickets if we retry the job. 
			        </p></li></ul></div><p>         
	           
	         </p>
	         In Activiti 5.9 we thus introduced a concept, which was already present in jBPM 4 and is called 'exclusive jobs'.
	         
         </div><div class="section" title="What are exclusive jobs?"><div class="titlepage"><div><div><h4 class="title"><a name="N11FF7"></a>What are exclusive jobs?</h4></div></div></div><p>
        		An exclusive job cannot be performed at the same time as another exclusive job from the same process instance. Consider the process shown above: if we declare the service tasks to be exclusive,
        	 	the JobExecutor will make sure that the corresponding jobs are not executed concurrently. Instead, it will make sure that whenever it acquires an exclusive job from a certain process instance, 
        	 	it acquires all other exclusive jobs from the same process instance and delegates them to the same worker thread. This ensures sequential execution execution of the jobs.           	 	
        	</p><p>
        		How can I enable this feature? Since Activiti 5.9, exclusive jobs are the default configuration. All asynchronous continuations and timer events are thus exclusive by default. In addition, if you want a 
        		job to be non-exclusive, you can configure it as such using <code class="code">activiti:exclusive="false"</code>. For example, the following servicetask would be asynchronous but non-exclusive.
        		
        		</p><pre class="prettyprint">
&lt;serviceTask id="service" activiti:expression="${myService.performBooking(hotel, dates)}" activiti:async="true" activiti:exclusive="false" /&gt;        		
        		</pre><p>
        	</p><p>
        		Is this a good solution?
        		We had some people asking whether this was a good solution. Their concern was that this would to prevent you from "doing things" in parallel and would thus be a performance problem.
        		Again, two things have to be taken into consideration: 
        		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
			          It can be turned off if you are an expert and know what you are doing (and have understood the section named "Why exclusive Jobs?"). Other than that, it is more intuitive 
			          for most users if things like asynchronous continuations and timers just work.
			        </p></li><li class="listitem"><p>
			          It is actually not a performance issue. Performance is an issue under heavy load. Heavy load means that all worker threads of the job executor are busy all the time.
			          With exclusive jobs, Activiti will simply distribute the load differently. Exclusive jobs means that jobs from a single process instance are performed by the same
			          thread sequentially. But consider: you have more than one single process instance.
			          And jobs from other process instances are delegated to other threads and executed concurrently. 
			          This means that with exclusive jobs Activiti will not execute jobs from the same process instance concurrently, but it will still execute multiple instances concurrently. 
                From an overall throughput perspective this is desirable in most scenarios as it usually leads to individual instances being done more quickly.
                Furthermore, data that is required for executing subsequent jobs
                of the same process instance will already be in the cache of
                the executing cluster node.
                If the jobs do not have this node affinity,
                that data might need to be fetched from the database again.
			        </p></li></ul></div><p>
			             
        	</p></div></div></div><div class="section" title="Process Initiation Authorization"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="security"></a>Process Initiation Authorization</h2></div></div></div>
      By default everyone is allowed to start a new process instance of deployed process definitions. The process initiation authorization functionality allows to define
      users and groups so that web clients can optionally restrict users to start a new process instance. <span class="bold"><strong>NOTE</strong></span> that the authorization definition
      is <span class="bold"><strong>NOT</strong></span> validated by the Activiti Engine in any way. This functionality is only meant for developers to ease the implemention of authorization
      rules in a web client. The syntax is similar to the syntax of user assignment for a user task. 
      A user or group can be assigned as potential initiator of a process using &lt;activiti:potentialStarter&gt; tag. Here is an example:
 <pre class="prettyprint">
   &lt;process id="potentialStarter"&gt;
     &lt;extensionElements&gt;
       &lt;activiti:potentialStarter&gt;
         &lt;resourceAssignmentExpression&gt;
           &lt;formalExpression&gt;group2, group(group3), user(user3)&lt;/formalExpression&gt;
         &lt;/resourceAssignmentExpression&gt;
       &lt;/activiti:potentialStarter&gt;
     &lt;/extensionElements&gt;
   &lt;startEvent id="theStart"/&gt;
   ...
 </pre> 
In the above xml excerpt user(user3) refers directly to user user3 and group(group3) to group group3. No indicator will default to a group type.
It is also possible to use attributes of the &lt;process&gt; tag, namely &lt;activiti:candidateStarterUsers&gt; and &lt;activiti:candidateStarterGroups&gt;. Here is an example:

  <pre class="prettyprint">
      &lt;process id="potentialStarter" activiti:candidateStarterUsers="user1, user2"  
                                        activiti:candidateStarterGroups="group1"&gt;
      ...
  </pre><p>
It is possible to use both attributes simultaneously. 
</p><p>
After the process initiation authorizations are defined, a developer can retrieve the authorization definition using the following methods.
This code retrieves the list of process definitions which can be initiated by the given user:
   </p><pre class="prettyprint">
      processDefinitions = repositoryService.createProcessDefinitionQuery().startableByUser("userxxx").list();
   </pre><p> 
</p><p>
It's also possible to retrieve all identity links that are defined as potential starter for a specific process definition
   </p><pre class="prettyprint">
      identityLinks = repositoryService.getIdentityLinksForProcessDefinition("processDefinitionId");
   </pre><p> 
</p><p>
The following example shows how to get list of users who can initiate the given process:
   </p><pre class="prettyprint">
      List&lt;User&gt; authorizedUsers =  identityService().createUserQuery().potentialStarter("processDefinitionId").list();
   </pre><p>
</p><p>
Exactly the same way, the list of groups that is configured as a potential starter to a given process definition can be retrieved:
   </p><pre class="prettyprint">     
      List&lt;Group&gt; authorizedGroups =  identityService().createGroupQuery().potentialStarter("processDefinitionId").list();
   </pre><p>
</p></div></div><div class="chapter" title="Chapter&nbsp;9.&nbsp;Forms"><div class="titlepage"><div><div><h2 class="title"><a name="forms"></a>Chapter&nbsp;9.&nbsp;Forms</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#formProperties">Form properties</a></span></dt><dt><span class="section"><a href="#externalFormRendering">External form rendering</a></span></dt></dl></div><p>
	 Activiti provides a convenient and flexible way to add forms for the manual steps of 
	 your business processes.  We support two strategies to work with forms:
	 Build-in form rendering with form properties and external form rendering.
	</p><div class="section" title="Form properties"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="formProperties"></a>Form properties</h2></div></div></div><p>All information relevant to a business process is either included in the process 
    variables themselves or referenced through the process variables.  Activiti supports
    complex Java objects to be stored as process variables like <code class="literal">Serializable</code>
    objects, JPA entities or whole XML documents as <code class="literal">String</code>s.
    </p><p>Starting a process and completing user tasks is where people are involved into a process.
    Communicating with people requires forms to be rendered in some UI technology.  
    In order to facilitate multiple UI technologies easy, the process definition 
    can include the logic of transforming of the complex Java typed objects in the process variables 
    to a <code class="literal">Map&lt;String,String&gt;</code> of <span class="bold"><strong>'properties'</strong></span>.
    </p><p>Any UI technology can then build a form on top of those properties, using the Activiti API 
    methods that expose the property information.  
    The properties can provide a dedicated (and more limited) view on the process variables.
    The properties needed to display a form are available in the <span class="bold"><strong>FormData</strong></span> return values of for example
    </p><pre class="prettyprint">StartFormData FormService.getStartFormData(String processDefinitionId)</pre><p>
    or </p><pre class="prettyprint">TaskFormdata FormService.getTaskFormData(String taskId)</pre><p>.
    </p><p>By default, the build-in form engines, 'sees' the properties as well 
    as the process variables.  So there is no need to declare task form properties 
    if they match 1-1 with the process variables.  For example, with the following 
    declaration:  
    </p><pre class="prettyprint">&lt;startEvent id="start" /&gt;</pre><p>
    All process variables are available when execution arrives in the startEvent, but 
    </p><pre class="prettyprint">formService.getStartFormData(String processDefinitionId).getFormProperties()</pre><p>
    will be empty since no specific mapping was defined.
    </p><p>In the above case, all the submitted properties will be stored as process variables.  
    This means that by simply adding a new input field in the form, a new variable can be stored.
    </p><p>Properties are derived from process variables, but they don't have to be stored
    as process variables.  For example, a process variable could be a JPA entity of 
    class Address.  And a form property <code class="literal">StreetName</code> used by the UI 
    technology could be linked with an expression <code class="literal">#{address.street}</code>
    </p><p>Analogue, the properties that a user is supposed to submit in a form can be
    stored as a process variable or as a nested property in one of the process variables
    with a UEL value expression like e.g. <code class="literal">#{address.street}</code> . 
    </p><p>Analogue the default behavior of properties that are submitted is that 
    they will be stored as process variables unless a <code class="literal">formProperty</code> 
    declaration specifies otherwise.</p><p>Also type conversions can be applied as part of the processing between 
    form properties and process variables.</p><p>For example:</p><pre class="prettyprint">&lt;userTask id="task"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:formProperty id="room" /&gt;
    &lt;activiti:formProperty id="duration" type="long"/&gt;
    &lt;activiti:formProperty id="speaker" variable="SpeakerName" writable="false" /&gt;
    &lt;activiti:formProperty id="street" expression="#{address.street}" required="true" /&gt;
  &lt;/extensionElements&gt;
&lt;/userTask&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Form property <code class="literal">room</code> will be mapped to 
      process variable <code class="literal">room</code> as a String.</p></li><li class="listitem"><p>Form property <code class="literal">duration</code> will be mapped to 
      process variable <code class="literal">duration</code> as a java.lang.Long</p></li><li class="listitem"><p>Form property <code class="literal">speaker</code> will be mapped to 
      process variable <code class="literal">SpeakerName</code>.  It will only be available 
      in the TaskFormData object.  If property speaker is submitted, an ActivitiException will be thrown.
      Analogue, with attribute <code class="literal">readable="false"</code>, a 
      property can be excluded from the FormData, but still be processed in the submit.
      </p></li><li class="listitem"><p>Form property <code class="literal">street</code> will be mapped to 
      Java bean property <code class="literal">street</code> in process variable <code class="literal">address</code>
      as a String.  And required="true" will throw an exception during the 
      submit if the property is not provided.</p></li></ul></div><p>It's also possible to provide type meta data as part of the FormData that is 
    returned from methods <code class="literal">StartFormData FormService.getStartFormData(String processDefinitionId)</code>
    and <code class="literal">TaskFormdata FormService.getTaskFormData(String taskId)</code></p><p>We support the following form property types:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">string</code> (org.activiti.engine.impl.form.StringFormType)</p></li><li class="listitem"><p><code class="literal">long</code> (org.activiti.engine.impl.form.LongFormType)</p></li><li class="listitem"><p><code class="literal">enum</code> (org.activiti.engine.impl.form.EnumFormType)</p></li><li class="listitem"><p><code class="literal">date</code> (org.activiti.engine.impl.form.DateFormType)</p></li><li class="listitem"><p><code class="literal">boolean</code> (org.activiti.engine.impl.form.BooleanFormType)</p></li></ul></div><p>For each form property declared, the following <code class="literal">FormProperty</code>
    information will be made available through 
    <code class="literal">List&lt;FormProperty&gt; formService.getStartFormData(String processDefinitionId).getFormProperties()</code>
    and <code class="literal">List&lt;FormProperty&gt; formService.getTaskFormData(String taskId).getFormProperties()</code>
    </p><pre class="prettyprint">public interface FormProperty {
  /** the key used to submit the property in {@link FormService#submitStartFormData(String, java.util.Map)} 
   * or {@link FormService#submitTaskFormData(String, java.util.Map)} */
  String getId();
  /** the display label */
  String getName();
  /** one of the types defined in this interface like e.g. {@link #TYPE_STRING} */
  FormType getType();
  /** optional value that should be used to display in this property */
  String getValue();
  /** is this property read to be displayed in the form and made accessible with the methods 
   * {@link FormService#getStartFormData(String)} and {@link FormService#getTaskFormData(String)}. */
  boolean isReadable();
  /** is this property expected when a user submits the form? */
  boolean isWritable();
  /** is this property a required input field */
  boolean isRequired();
}</pre><p>For example:</p><pre class="prettyprint">&lt;startEvent id="start"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:formProperty id="speaker" 
      name="Speaker"
      variable="SpeakerName" 
      type="string" /&gt;

    &lt;activiti:formProperty id="start" 
      type="date" 
      datePattern="dd-MMM-yyyy" /&gt;

    &lt;activiti:formProperty id="direction" type="enum"&gt;
      &lt;activiti:value id="left" name="Go Left" /&gt;
      &lt;activiti:value id="right" name="Go Right" /&gt;
      &lt;activiti:value id="up" name="Go Up" /&gt;
      &lt;activiti:value id="down" name="Go Down" /&gt;
    &lt;/activiti:formProperty&gt;
    
  &lt;/extensionElements&gt;
&lt;/startEvent&gt;</pre><p>All that information is accessible through the API. The type names can be 
    obtained with  <code class="literal">formProperty.getType().getName()</code>.  And even the 
    date pattern is available with <code class="literal">formProperty.getType().getInformation("datePattern")</code>
    and the enumeration values are accessible with
    <code class="literal">formProperty.getType().getInformation("values")</code> </p><p>
      Activiti explorer supports the form properties and will render the form accordingly to the form definition.
      The following XML snippet
      </p><pre class="prettyprint">
&lt;startEvent ... &gt;
  &lt;extensionElements&gt;
    &lt;activiti:formProperty id="numberOfDays" name="Number of days" value="${numberOfDays}" type="long" required="true"/&gt;
    &lt;activiti:formProperty id="startDate" name="First day of holiday (dd-MM-yyy)" value="${startDate}" datePattern="dd-MM-yyyy hh:mm" type="date" required="true" /&gt;
    &lt;activiti:formProperty id="vacationMotivation" name="Motivation" value="${vacationMotivation}" type="string" /&gt;
  &lt;/extensionElements&gt;
&lt;/userTask&gt;
      </pre><p>
      will render to a process start form when used in Activiti Explorer
     </p><div class="mediaobject" align="center"><img src="images/forms.explorer.png" align="middle"></div><p>
    </p></div><div class="section" title="External form rendering"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="externalFormRendering"></a>External form rendering</h2></div></div></div><p>The API also allows for you to perform your 
    own task form rendering outside of the Activiti Engine. These steps explain the hooks that you can use to
    render your task forms yourself.  </p><p>Essentially, all the data that's needed to render a form is assembled in one of these two service methods:
    <code class="literal">StartFormData FormService.getStartFormData(String processDefinitionId)</code>
    and <code class="literal">TaskFormdata FormService.getTaskFormData(String taskId)</code>. 
    </p><p>Submitting form properties can be done with 
    <code class="literal">ProcessInstance FormService.submitStartFormData(String processDefinitionId, Map&lt;String,String&gt; properties)</code>
    and <code class="literal">void FormService.submitStartFormData(String taskId, Map&lt;String,String&gt; properties)</code></p><p>To learn about how form properties map to process variables, see <a class="xref" href="#formProperties" title="Form properties">the section called &ldquo;Form properties&rdquo;</a> </p><p>You can place any form template resource inside the business archives that you deploy (in case 
    you want to store them versioned with the process).  It will be available as a resource in the deployment, which you can retrieve using: <code class="literal">String ProcessDefinition.getDeploymentId()</code> and 
    <code class="literal">InputStream RepositoryService.getResourceAsStream(String deploymentId, String resourceName);</code>
    This could be your template definition file, which you can use to render/show the form in your
    own application.
    </p><p>You can use this capability of accessing the deployment resources beyond task forms for any other 
    purposes as well. </p><p>The attribute <code class="literal">&lt;userTask activiti:formKey="..."</code> is exposed by the API through 
    <code class="literal">String FormService.getStartFormData(String processDefinitionId).getFormKey()</code>
    and <code class="literal">String FormService.getTaskFormData(String taskId).getFormKey()</code>. You could use this to
    store the full name of the template within your deployment (e.g. <code class="literal">org/activiti/example/form/my-custom-form.xml</code>), but this is not required at all.
    For instance, you could also store a generic key in the form 
    attribute and apply an algorithm or transformation to get to the actual template that needs to be used.
    This might be handy when you want to render different forms for different UI technologies like e.g. 
    one form for usage in a web app of normal screen size, one form for mobile phone's small screens and 
    maybe even a template for an IM form or an email form.
    </p></div></div><div class="chapter" title="Chapter&nbsp;10.&nbsp;JPA"><div class="titlepage"><div><div><h2 class="title"><a name="N12127"></a>Chapter&nbsp;10.&nbsp;JPA</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N1213A">Requirements</a></span></dt><dt><span class="section"><a href="#jpaconfiguration">Configuration</a></span></dt><dt><span class="section"><a href="#N121CA">Usage</a></span></dt><dd><dl><dt><span class="section"><a href="#N121CD">Simple Example</a></span></dt><dt><span class="section"><a href="#N12214">Query JPA process variables</a></span></dt><dt><span class="section"><a href="#N12240">Advanced example using Spring beans and JPA</a></span></dt></dl></dd></dl></div><p>
    You can use JPA-Entities as process variables, allowing you to:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Updating existing JPA-entities based on process variables, that can be filled in on a form in a userTask or generated in a serviceTask.</p></li><li class="listitem"><p>Reusing existing domain model without having to write explicit services to fetch the entities and update the values</p></li><li class="listitem"><p>Make decisions (gateways) based on properties of existing entities.</p></li><li class="listitem"><p>...</p></li></ul></div><p>
  </p><div class="section" title="Requirements"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1213A"></a>Requirements</h2></div></div></div><p>
      Only entities that comply to the following are supported:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Entities should be configured using JPA-annotations, we support both field and property-access. Mapped super classes can
            also be used.
	      </p></li><li class="listitem"><p>
            Entity should have a primary key annotated with <code class="literal">@Id</code>, compound primary keys are not supported 
            (<code class="literal">@EmbeddedId</code> and <code class="literal">@IdClass</code>). The Id field/property can be of any type supported in the JPA-spec:
            Primitive types and their wrappers (excluding boolean), <code class="literal">String</code>, <code class="literal">BigInteger</code>, <code class="literal">BigDecimal</code>,
            <code class="literal">java.util.Date</code> and <code class="literal">java.sql.Date</code>.
          </p></li></ul></div><p>
    </p></div><div class="section" title="Configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jpaconfiguration"></a>Configuration</h2></div></div></div><p>To be able to use JPA-entities, the engine must have a reference to an <code class="literal">EntityManagerFactory</code>. This can be done by configuring a reference or by supplying a persistence-unit name. JPA-entities used as variables
    will be detected automatically and will be handled accordingly.</p><p>
        The example configuration below uses the jpaPersistenceUnitName:
        </p><pre class="prettyprint">
&lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration"&gt;
  
    &lt;!-- Database configurations --&gt;
    &lt;property name="databaseSchemaUpdate" value="true" /&gt;
    &lt;property name="jdbcUrl" value="jdbc:h2:mem:JpaVariableTest;DB_CLOSE_DELAY=1000" /&gt;

    <span class="bold"><strong>&lt;property name="jpaPersistenceUnitName" value="activiti-jpa-pu" /&gt;
    &lt;property name="jpaHandleTransaction" value="true" /&gt;
    &lt;property name="jpaCloseEntityManager" value="true" /&gt;</strong></span>
    
    &lt;!-- job executor configurations --&gt;
    &lt;property name="jobExecutorActivate" value="false" /&gt;
    
    &lt;!-- mail server configurations --&gt;
    &lt;property name="mailServerPort" value="5025" /&gt;    
&lt;/bean&gt;
        </pre><p>  
         The next example configuration below provides a <code class="literal">EntityManagerFactory</code> which we define ourselves (in this case, an open-jpa entity manager). 
         Note that the snippet only contains the beans that are relevant for the example, the others are omitted. Full working example with open-jpa entity manager can be found in the activiti-spring-examples (<code class="literal">/activiti-spring/src/test/java/org/activiti/spring/test/jpa/JPASpringTest.java</code>)
        </p><pre class="prettyprint">
&lt;bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
  &lt;property name="persistenceUnitManager" ref="pum"/&gt;
  &lt;property name="jpaVendorAdapter"&gt;
    &lt;bean class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter"&gt;
      &lt;property name="databasePlatform" value="org.apache.openjpa.jdbc.sql.H2Dictionary" /&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt;
  &lt;property name="dataSource" ref="dataSource" /&gt;
  &lt;property name="transactionManager" ref="transactionManager" /&gt;
  &lt;property name="databaseSchemaUpdate" value="true" /&gt;
  <span class="bold"><strong>&lt;property name="jpaEntityManagerFactory" ref="entityManagerFactory" /&gt;
  &lt;property name="jpaHandleTransaction" value="true" /&gt;
  &lt;property name="jpaCloseEntityManager" value="true" /&gt;</strong></span>
  &lt;property name="jobExecutorActivate" value="false" /&gt;
&lt;/bean&gt;
        </pre><p>
        The same configurations can also be done when building an engine programmatically, example:
        </p><pre class="prettyprint">
ProcessEngine processEngine = ProcessEngineConfiguration
  .createProcessEngineConfigurationFromResourceDefault()
  <span class="bold"><strong>.setJpaPersistenceUnitName("activiti-pu")</strong></span>
  .buildProcessEngine();
        </pre><p>
        </p><p>
        Configuration properties:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong><code class="literal">jpaPersistenceUnitName: </code></strong></span>The name of the persistence-unit to use. (Make sure the persistence-unit is available on the classpath. According to the spec, the default
              location is <code class="literal">/META-INF/persistence.xml</code>). Use either <code class="literal">jpaEntityManagerFactory</code> or <code class="literal">jpaPersistenceUnitName</code>.
            </p></li><li class="listitem"><p>
              <span class="bold"><strong><code class="literal">jpaEntityManagerFactory: </code></strong></span>An reference to a bean implementing <code class="literal">javax.persistence.EntityManagerFactory</code>
              that will be used to load the Entities and flushing the updates. Use either <code class="literal">jpaEntityManagerFactory</code> or <code class="literal">jpaPersistenceUnitName</code>.
            </p></li><li class="listitem"><p>
              <span class="bold"><strong><code class="literal">jpaHandleTransaction: </code></strong></span>Flag indicating that the engine should begin and commit/rollback the transaction
              on the used <code class="literal">EntityManager</code> instances. Set to false when <code class="literal">Java Transaction API (JTA)</code> is used.
            </p></li><li class="listitem"><p>
              <span class="bold"><strong><code class="literal">jpaCloseEntityManager: </code></strong></span>Flag indicating that the engine should close the <code class="literal">EntityManager</code> instance
              that was obtained from the <code class="literal">EntityManagerFactory</code>. Set to false when the <code class="literal">EntityManager</code> is container-managed
              (e.g. when using an Extended Persistence Context which isn't scoped to a single transaction').
            </p></li></ul></div><p>
      </p></div><div class="section" title="Usage"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N121CA"></a>Usage</h2></div></div></div><div class="section" title="Simple Example"><div class="titlepage"><div><div><h3 class="title"><a name="N121CD"></a>Simple Example</h3></div></div></div><p>
        Examples for using JPA variables can be found in <code class="literal"><a class="ulink" href="http://svn.codehaus.org/activiti/activiti/trunk/modules/activiti-engine/src/test/java/org/activiti/standalone/jpa/JPAVariableTest.java" target="_top">JPAVariableTest</a></code>. We'll explain <code class="literal">JPAVariableTest.testUpdateJPAEntityValues</code> step by step.
      </p><p>
        First of all, we create a <code class="literal">EntityManagerFactory</code> for our persistence-unit, which is based on <code class="literal">META-INF/persistence.xml</code>. This contains classes which should be included in 
        the persistence unit and some vendor-specific configuration.
      </p><p>
        We are using a simple entity in the test, having an id and <code class="literal">String</code> value property, which is also persisted. Before running the test, we create an entity and save this.
        </p><pre class="prettyprint">
@Entity(name = "JPA_ENTITY_FIELD")
public class FieldAccessJPAEntity {

  @Id
  @Column(name = "ID_")
  private Long id;

  private String value;

  public FieldAccessJPAEntity() {
    // Empty constructor needed for JPA
  }

  public Long getId() {
    return id;
  }

  public void setId(Long id) {
    this.id = id;
  }

  public String getValue() {
    return value;
  }

  public void setValue(String value) {
    this.value = value;
  }
}       
        </pre><p>
      </p><p>
        We start a new process instance, adding the entity as a variable. As with other variables, they are stored in the persistent storage of the engine. When the variable is requested the next time, it will be loaded from the <code class="literal">EntityManager</code>
        based on the class and Id stored.
        </p><pre class="prettyprint">
Map&lt;String, Object&gt; variables = new HashMap&lt;String, Object&gt;();
variables.put("entityToUpdate", entityToUpdate);
    
ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("UpdateJPAValuesProcess", variables);
        </pre><p>
      </p><p>
        The first node in our process definition contains a <code class="literal">serviceTask</code> that will invoke the method <code class="literal">setValue</code> on <code class="literal">entityToUpdate</code>, which resolves to
        the JPA variable we set earlier when starting the process instance and will be loaded from the <code class="literal">EntityManager</code> associated with the current engine's context'.
        </p><pre class="prettyprint">
&lt;serviceTask id='theTask' name='updateJPAEntityTask' activiti:expression="${entityToUpdate.setValue('updatedValue')}" /&gt;        
        </pre><p>
      </p><p>
        When the service-task is finished, the process instance waits in a userTask defined in the process definition, which allows us to inspect the process instance. At this point, the <code class="literal">EntityManager</code> has been flushed
        and the changes to the entity have been pushed to the database. When we get the value of the variable <code class="literal">entityToUpdate</code>, it's loaded again and we get
        the entity with it's <code class="literal">value</code> property set to <code class="literal">updatedValue</code>. 
        </p><pre class="prettyprint">
// Servicetask in process 'UpdateJPAValuesProcess' should have set value on entityToUpdate.
Object updatedEntity = runtimeService.getVariable(processInstance.getId(), "entityToUpdate");
assertTrue(updatedEntity instanceof FieldAccessJPAEntity);
assertEquals("updatedValue", ((FieldAccessJPAEntity)updatedEntity).getValue());
        </pre><p>
      </p></div><div class="section" title="Query JPA process variables"><div class="titlepage"><div><div><h3 class="title"><a name="N12214"></a>Query JPA process variables</h3></div></div></div><p>
        You can query for <code class="literal">ProcessInstance</code>s and <code class="literal">Execution</code>s that have a certain JPA-entity as variable value. 
        <span class="bold"><strong>Note that only <code class="literal">variableValueEquals(name, entity)</code> is supported for JPA-Entities on <code class="literal">ProcessInstanceQuery</code> and <code class="literal">ExecutionQuery</code></strong></span>.
        Methods <code class="literal">variableValueNotEquals</code>, <code class="literal">variableValueGreaterThan</code>, <code class="literal">variableValueGreaterThanOrEqual</code>, <code class="literal">variableValueLessThan</code> 
        and <code class="literal">variableValueLessThanOrEqual</code> are unsupported and will throw an <code class="literal">ActivitiException</code>
        when an JPA-Entity is passed as value.
        </p><pre class="prettyprint">
 ProcessInstance result = runtimeService.createProcessInstanceQuery().variableValueEquals("entityToQuery", entityToQuery).singleResult();
        </pre><p>
      </p></div><div class="section" title="Advanced example using Spring beans and JPA"><div class="titlepage"><div><div><h3 class="title"><a name="N12240"></a>Advanced example using Spring beans and JPA</h3></div></div></div><p>
        A more advanced example, <code class="literal">JPASpringTest</code>, can be found in <code class="literal">activiti-spring-examples</code>. It describes the following simple use case:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>An existing Spring-bean which uses JPA entities already exists which allows for Loan Requests to be stored.</p></li><li class="listitem"><p>Using Activiti, we can use the existing entities, obtained through the existing bean, and use them as variable in our process.</p><p>
              Process is defined in the following steps:
               </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Service task that creates a new LoanRequest, using the existing <code class="literal">LoanRequestBean</code> using variables received
                  when starting the process (e.g. could come from a start form). The created entity is stored as a variable, using <code class="literal">activiti:resultVariable</code>
                  which stores the expression result as a variable.
                  </p></li><li class="listitem"><p>UserTask that allows a manager to review the request and approve/disapprove, which is stored as a boolean variable <code class="literal">approvedByManager</code></p></li><li class="listitem"><p>ServiceTask that updates the loan request entity so the entity is in sync with the process.</p></li><li class="listitem"><p>Depending on the value of the entity property <code class="literal">approved</code>, an exclusive gateway is used to make a decision
                    about what path to take next: When the request is approved, process ends, otherwise, an extra task will become available (Send rejection letter), so the
                    customer can be notified manually by a rejection letter.
                  </p></li></ul></div><p>
            </p></li></ul></div><p>
        Please note that the process doesn't contain any forms, since it is only used in a unit test.
        </p><div class="mediaobject" align="center"><img src="images/jpa.spring.example.process.png" align="middle"></div><p>
      </p><p>
        </p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;definitions id="taskAssigneeExample" 
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:activiti="http://activiti.org/bpmn"
  targetNamespace="org.activiti.examples"&gt;
  
  &lt;process id="LoanRequestProcess" name="Process creating and handling loan request"&gt;
    &lt;startEvent id='theStart' /&gt;
    &lt;sequenceFlow id='flow1' sourceRef='theStart' targetRef='createLoanRequest' /&gt;
    
    &lt;serviceTask id='createLoanRequest' name='Create loan request' 
      activiti:expression="${loanRequestBean.newLoanRequest(customerName, amount)}" 
      activiti:resultVariable="loanRequest"/&gt;    
    &lt;sequenceFlow id='flow2' sourceRef='createLoanRequest' targetRef='approveTask' /&gt;
    
    &lt;userTask id="approveTask" name="Approve request" /&gt;
    &lt;sequenceFlow id='flow3' sourceRef='approveTask' targetRef='approveOrDissaprove' /&gt;
    
    &lt;serviceTask id='approveOrDissaprove' name='Store decision' 
      activiti:expression="${loanRequest.setApproved(approvedByManager)}" /&gt;
    &lt;sequenceFlow id='flow4' sourceRef='approveOrDissaprove' targetRef='exclusiveGw' /&gt;
    
    &lt;exclusiveGateway id="exclusiveGw" name="Exclusive Gateway approval" /&gt; 
    &lt;sequenceFlow id="endFlow1" sourceRef="exclusiveGw" targetRef="theEnd"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${loanRequest.approved}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    &lt;sequenceFlow id="endFlow2" sourceRef="exclusiveGw" targetRef="sendRejectionLetter"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${!loanRequest.approved}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    
    &lt;userTask id="sendRejectionLetter" name="Send rejection letter" /&gt;
    &lt;sequenceFlow id='flow5' sourceRef='sendRejectionLetter' targetRef='theOtherEnd' /&gt;
    
    &lt;endEvent id='theEnd' /&gt;
    &lt;endEvent id='theOtherEnd' /&gt;
  &lt;/process&gt;

&lt;/definitions&gt;

        </pre><p>
      </p><p>Although the example above is quite simple, it shows the power of using JPA combined with Spring and parametrized method-expressions. The process requires
      no custom java-code at all (except for the Spring-bean off course) and speeds up development drastically.
      </p></div></div></div><div class="chapter" title="Chapter&nbsp;11.&nbsp;History"><div class="titlepage"><div><div><h2 class="title"><a name="history"></a>Chapter&nbsp;11.&nbsp;History</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#historyQuery">Querying history</a></span></dt><dd><dl><dt><span class="section"><a href="#historyQueryProcessInstance">HistoricProcessInstanceQuery</a></span></dt><dt><span class="section"><a href="#historyQueryVariableInstance">HistoricVariableInstanceQuery</a></span></dt><dt><span class="section"><a href="#historyQueryActivityInstance">HistoricActivityInstanceQuery</a></span></dt><dt><span class="section"><a href="#historyQueryDetail">HistoricDetailQuery</a></span></dt><dt><span class="section"><a href="#historyQueryTaskInstance">HistoricTaskInstanceQuery</a></span></dt></dl></dd><dt><span class="section"><a href="#historyConfig">History configuration</a></span></dt><dt><span class="section"><a href="#historyFormAuditPurposes">History for audit purposes</a></span></dt></dl></div><p>History is the component that captures what happened
  during process execution and stores it permanently.  In contrast to the runtime data, 
  the history data will remain present in the DB also after process instances have completed.
  </p><p>There are 5 history entities:
  
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">HistoricProcessInstance</code>s containing information about current and past process instances.</p></li><li class="listitem"><p><code class="literal">HistoricVariableInstance</code>s containing the latest value of a process variable or task variable.</p></li><li class="listitem"><p><code class="literal">HistoricActivityInstance</code>s containing information about a single execution of an activity (node in the process).</p></li><li class="listitem"><p><code class="literal">HistoricTaskInstance</code>s containing information about current and past (completed and deleted) task instances.</p></li><li class="listitem"><p><code class="literal">HistoricDetail</code>s containing various kinds of information related to either a historic process instances, an activity instance or a task instance.</p></li></ul></div><p>
  </p><p>Since the DB contains historic entities for past as well as ongoing instances, you might want to consider 
  querying these tables in order to minimize access to the runtime process instance data 
  and that way keeping the runtime execution performant.
  </p><p>Later on, this information will be exposed in Activiti Explorer.
  Also, it will be the information from which the reports will be generated.
  </p><div class="section" title="Querying history"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="historyQuery"></a>Querying history</h2></div></div></div><p>In the API, it's possible to query all 5 of the History entities. The HistoryService exposes the the methods 
      <code class="literal">createHistoricProcessInstanceQuery()</code>, <code class="literal">createHistoricVariableInstanceQuery()</code>, <code class="literal">createHistoricActivityInstanceQuery()</code>, 
      <code class="literal">createHistoricDetailQuery()</code> and <code class="literal">createHistoricTaskInstanceQuery()</code>.
    </p><p>Below are a couple of examples that show some of the possibilities of the query API for history. Full description of the possibilities can be found in the <a class="ulink" href="../javadocs/index.html" target="_top">the javadocs</a>, in the <code class="literal">org.activiti.engine.history</code> package.</p><div class="section" title="HistoricProcessInstanceQuery"><div class="titlepage"><div><div><h3 class="title"><a name="historyQueryProcessInstance"></a>HistoricProcessInstanceQuery</h3></div></div></div><p>Get 10 <code class="literal">HistoricProcessInstances</code> that are finished and which took the most time to complete (the longest duration) of all finished processes with definition 'XXX'.
          </p><pre class="prettyprint">
historyService.createHistoricProcessInstanceQuery()
  .finished()
  .processDefinitionId("XXX")
  .orderByProcessInstanceDuration().desc()
  .listPage(0, 10);</pre><p>
      </p></div><div class="section" title="HistoricVariableInstanceQuery"><div class="titlepage"><div><div><h3 class="title"><a name="historyQueryVariableInstance"></a>HistoricVariableInstanceQuery</h3></div></div></div><p>Get all <code class="literal">HistoricVariableInstances</code> from a finished process instance with id 'xxx' ordered by variable name.
          </p><pre class="prettyprint">
historyService.createHistoricVariableInstanceQuery()
  .processInstanceId("XXX")
  .orderByVariableName.desc()
  .list();</pre><p>
      </p></div><div class="section" title="HistoricActivityInstanceQuery"><div class="titlepage"><div><div><h3 class="title"><a name="historyQueryActivityInstance"></a>HistoricActivityInstanceQuery</h3></div></div></div><p>Get the last <code class="literal">HistoricActivityInstance</code> of type 'serviceTask' that has been finished in any process that uses the processDefinition with id XXX.
  </p><pre class="prettyprint">
historyService.createHistoricActivityInstanceQuery()
  .activityType("serviceTask")
  .processDefinitionId("XXX")
  .finished()
  .orderByHistoricActivityInstanceEndTime().desc()
  .listPage(0, 1);</pre><p>
      </p></div><div class="section" title="HistoricDetailQuery"><div class="titlepage"><div><div><h3 class="title"><a name="historyQueryDetail"></a>HistoricDetailQuery</h3></div></div></div><p>The next example, gets all variable-updates that have been done in process with id 123. Only <code class="literal">HistoricVariableUpdate</code>s will be returned by this query. Note that it's possible that a certain variable name has multiple <code class="literal">HistoricVariableUpdate</code>
    entries, for each time the variable was updated in the process. You can use <code class="literal">orderByTime</code> (the time the variable update was done) or <code class="literal">orderByVariableRevision</code> (revision of runtime variable at the time of updating) to find out in what order they occurred.
  </p><pre class="prettyprint">
historyService.createHistoricDetailQuery()
  .variableUpdates()
  .processInstanceId("123")
  .orderByVariableName().asc()
  .list()</pre><p>
    </p><p>This example gets all <a class="link" href="#formProperties" title="Form properties">form-properties</a> that were submitted in any task or when starting the process with id "123". Only <code class="literal">HistoricFormProperties</code>s will be returned by this query.
  </p><pre class="prettyprint">
historyService.createHistoricDetailQuery()
  .formProperties()
  .processInstanceId("123")
  .orderByVariableName().asc()
  .list()</pre><p>
  </p><p>The last example gets all variable updates that were performed on the task with id "123". This returns all <code class="literal">HistoricVariableUpdates</code> for variables that were set on the task (task local variables), and NOT on the process instance.</p><pre class="prettyprint">
historyService.createHistoricDetailQuery()
  .variableUpdates()
  .taskId("123")
  .orderByVariableName().asc()
  .list()
  </pre><p>
  Task local variables can be set using the <code class="literal">TaskService</code> or on a <code class="literal">DelegateTask</code>, inside <code class="literal">TaskListener</code>:
  </p><pre class="prettyprint">
taskService.setVariableLocal("123", "myVariable", "Variable value");</pre><p>
  </p><pre class="prettyprint">
public void notify(DelegateTask delegateTask) {
  delegateTask.setVariableLocal("myVariable", "Variable value");
}</pre><p>
</p></div><div class="section" title="HistoricTaskInstanceQuery"><div class="titlepage"><div><div><h3 class="title"><a name="historyQueryTaskInstance"></a>HistoricTaskInstanceQuery</h3></div></div></div><p>Get 10 <code class="literal">HistoricTaskInstance</code>s that are finished and which took the most time to complete (the longest duration) of all tasks.
          </p><pre class="prettyprint">
historyService.createHistoricTaskInstanceQuery()
  .finished()
  .orderByHistoricTaskInstanceDuration().desc()
  .listPage(0, 10);</pre><p>
      </p><p>Get <code class="literal">HistoricTaskInstance</code>s that are deleted with a delete reason that contains "invalid", which were last assigned to user 'kermit'.
          </p><pre class="prettyprint">
historyService.createHistoricTaskInstanceQuery()
  .finished()
  .taskDeleteReasonLike("%invalid%")
  .taskAssignee("kermit")
  .listPage(0, 10);</pre><p>
      </p></div></div><div class="section" title="History configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="historyConfig"></a>History configuration</h2></div></div></div><p>The history level can be configured programmatically, using the enum org.activiti.engine.impl.history.HistoryLevel (or <code class="literal">HISTORY_*</code>constants defined on <code class="literal">ProcessEngineConfiguration</code> for versions prior to 5.11):</p><pre class="prettyprint">
ProcessEngine processEngine = ProcessEngineConfiguration
  .createProcessEngineConfigurationFromResourceDefault()
  <span class="bold"><strong>.setHistory(HistoryLevel.AUDIT.getKey())</strong></span>
  .buildProcessEngine();
      </pre><p>The level can also be configured in activiti.cfg.xml or in a spring-context:</p><pre class="prettyprint">&lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration"&gt;
  &lt;property name="history" value="audit" /&gt;
  ...
&lt;/bean&gt;</pre><p>Following history levels can be configured:
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">none</code>: skips all history archiving.  This is the most performant for runtime 
	    process execution, but no historical information will be available. </p></li><li class="listitem"><p><code class="literal">activity</code>: archives all process instances and activity instances. 
	    At the end of the process instance, the latest values of the top level process instance variables 
	    will be copied to historic variable instances.  No details will be archived.</p></li><li class="listitem"><p><code class="literal">audit</code>: This is the default. It archives all process instances, 
	    activity instances, keeps variable values continuously in sync and all form properties that are submitted 
	    so that all user interaction through forms is traceable and can be audited.</p></li><li class="listitem"><p><code class="literal">full</code>: This is the highest level of history archiving and hence the 
	    slowest.  This level stores all information as in the <code class="literal">audit</code> level 
	    plus all other possible details, mostly this are process variable updates.</p></li></ul></div><p><span class="bold"><strong>Prior to Activiti 5.11, the history level was stored in the database (table <code class="literal">ACT_GE_PROPERTY</code>, property with name <code class="literal">historyLevel</code>). Starting from 5.11, this value
     is not used anymore and is ignored/deleted from the database. The history can now be changed between 2 boots of the engine, without an exception being thrown in case the level changed from the previous engine-boot.</strong></span></p></div><div class="section" title="History for audit purposes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="historyFormAuditPurposes"></a>History for audit purposes</h2></div></div></div><p>When <a class="link" href="#historyConfig" title="History configuration">configuring</a> at least <code class="literal">audit</code> level
    for configuration. Then all properties submitted through methods 
    <code class="literal">FormService.submitStartFormData(String processDefinitionId, Map&lt;String, String&gt; properties)</code>
    and <code class="literal">FormService.submitTaskFormData(String taskId, Map&lt;String, String&gt; properties)</code>
    are recorded.
    </p><p>Form properties can be retrieved with the query API like this:</p><pre class="prettyprint">historyService
      .createHistoricDetailQuery()
      .formProperties()
      ...
      .list();</pre><p>In that case only historic details of type <code class="literal">HistoricFormProperty</code> are returned.
    </p><p>If you've set the authenticated user before calling the submit methods with
    <code class="literal">IdentityService.setAuthenticatedUserId(String)</code> then that authenticated user 
    who submitted the form will be accessible in the history as well with
    <code class="literal">HistoricProcessInstance.getStartUserId()</code> for start forms and 
    <code class="literal">HistoricActivityInstance.getAssignee()</code> for task forms.
    </p></div></div><div class="chapter" title="Chapter&nbsp;12.&nbsp;Eclipse Designer"><div class="titlepage"><div><div><h2 class="title"><a name="activitiDesigner"></a>Chapter&nbsp;12.&nbsp;Eclipse Designer</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#eclipseDesignerInstallation">Installation</a></span></dt><dt><span class="section"><a href="#eclipseDesignerEditorFeatures">Activiti Designer editor features</a></span></dt><dt><span class="section"><a href="#eclipseDesignerBPMNFeatures">Activiti Designer BPMN features</a></span></dt><dt><span class="section"><a href="#eclipseDesignerDeployment">Activiti Designer deployment features</a></span></dt><dt><span class="section"><a href="#eclipseDesignerExtending">Extending Activiti Designer</a></span></dt><dd><dl><dt><span class="section"><a href="#eclipseDesignerCustomizingPalette">Customizing the palette</a></span></dt><dt><span class="section"><a href="#N12803">Validating diagrams and exporting to custom output formats</a></span></dt></dl></dd></dl></div><p>
  	Activiti comes with an Eclipse plugin, the Activiti Eclipse Designer, that can be used to
    graphically model, test and deploy BPMN 2.0 processes.
  </p><div class="section" title="Installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eclipseDesignerInstallation"></a>Installation</h2></div></div></div><p>
    	The following installation instructions are verified on <a class="ulink" href="http://www.eclipse.org/downloads/" target="_top">Eclipse Indigo</a>. Note that Eclipse Helio is <span class="bold"><strong>NOT</strong></span> supported.
    </p><p>
    	Go to <span class="bold"><strong>Help -&gt; Install New Software</strong></span>. In the following
      panel, click on <span class="emphasis"><em>Add</em></span> button and fill in the following fields:
      
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Name: </strong></span>Activiti BPMN 2.0 designer</p></li><li class="listitem"><p><span class="bold"><strong>Location:
            </strong></span>http://activiti.org/designer/update/</p></li></ul></div><p>
      </p><div class="mediaobject" align="center"><img src="images/designer.add.update.site.png" align="middle"></div><p>
      Make sure the <span class="bold"><strong>"Contact all updates sites.."</strong></span>
      checkbox is <span class="bold"><strong>checked</strong></span>, because all the necessary plugins will then be downloaded by Eclipse.
    </p></div><div class="section" title="Activiti Designer editor features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eclipseDesignerEditorFeatures"></a>Activiti Designer editor features</h2></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          	Create Activiti projects and diagrams.
          	
          	</p><div class="mediaobject" align="center"><img src="images/designer.create.activiti.project.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	The Activiti Designer creates a .bpmn file when creating a new Activiti diagram. When opened with the Activiti Diagram Editor view
            this will provide a graphical modeling canvas and palette. The same file can however be opened with an XML editor and it then shows
            the BPMN 2.0 XML elements of the process definition. So the Activiti Designer works with only one file for both the graphical diagram
            as well as the BPMN 2.0 XML. Note that in Activiti 5.9 the .bpmn extension is not yet supported as deployment artifact for a process definition.
            Therefore the "create deployment artifacts" feature of the Activiti Designer generates a BAR file with a .bpmn20.xml file that contains the content
            of the .bpmn file. You can also do a quick file rename yourself. Also note that you can open a .bpmn20.xml file with the Activiti Diagram Editor view as well.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.bpmn.file.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	BPMN 2.0 XML files can be imported into the Activiti Designer and a diagram will be created. Just copy the BPMN 2.0 XML file
            to your project and open the file with the Activiti Diagram Editor view.
            The Activiti Designer uses the BPMN DI information of the file to create the diagram. If you have a BPMN 2.0 XML file without
            BPMN DI information, no diagram can be created.
          
            </p><div class="mediaobject" align="center"><img src="images/designer.open.importedfile.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	For deployment a BAR file and optionally a JAR file is created by the Activiti Designer by right-clicking on an
          	Activiti project in the package explorer and choosing the <span class="emphasis"><em>Create deployment artifacts</em></span> option
          	at the bottom of the popup menu. For more information about the deployment functionality of the Designer look a the
          	<a class="link" href="#eclipseDesignerDeployment" title="Activiti Designer deployment features">deployment</a> section.
          
            </p><div class="mediaobject" align="center"><img src="images/designer.create.deployment.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>Generate a unit test (right click on a BPMN 2.0 XML file in the package explorer
            and select <span class="emphasis"><em>generate unit test</em></span>) A unit test is generated with an
            Activiti configuration that runs on an embedded H2 database. You can now run the unit
            test to test your process definition.
            </p><div class="mediaobject" align="center"><img src="images/designer.unittest.generate.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	The Activiti project is generated as a Maven project. To configure the dependencies
            you need to run <span class="emphasis"><em>mvn eclipse:eclipse</em></span> and the Maven dependencies
            will be configured as expected. Note that for process design Maven dependencies are not needed.
            They are only needed to run unit tests.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.project.maven.png" align="middle"></div><p>
          </p></li></ul></div><p>
    </p></div><div class="section" title="Activiti Designer BPMN features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eclipseDesignerBPMNFeatures"></a>Activiti Designer BPMN features</h2></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          	Support for start none event, start error event, timer start event, end none event, end error event, sequence flow, 
            parallel gateway, exclusive gateway, inclusive gateway, event gateway, embedded subprocess, event sub process, call activity, pool, lane, 
            script task, user task, service task, mail task, manual task, business rule task, receive task,
            timer boundary event, error boundary event, signal boundary event, timer catching event, signal catching event, signal throwing event,
            none throwing event and four Alfresco specific elements (user, script, mail tasks and start event).
            
            </p><div class="mediaobject" align="center"><img src="images/designer.model.process.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            You can quickly change the type of a task by hovering over the element and choosing the new task type.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.model.quick.change.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            You can quickly add new elements hovering over an element and choosing a new element type.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.model.quick.new.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	Java class, expression or delegate expression configuration is supported for the Java service task. In
            addition field extensions can be configured.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.servicetask.property.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            Support for pools and lanes. Because Activiti reads different pools as different process definition, it makes the most sense to use only one pool.
            If you use multiple pools, be aware that drawing sequence flows between the pools will result in problems when deploying the process in the Activiti Engine.
            You can add as much lanes to a pool as you want.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.model.poolandlanes.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            You can add labels to sequence flows by filling the name property. 
            You can position the labels yourself as the position is saved as part of the BPMN 2.0 XML DI information.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.model.labels.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            Support for event sub processes.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.model.eventsubprocess.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	Support for expanded embedded sub processes. You can also add an embedded sub process in another embedded sub process.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.embeddedprocess.canvas.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	Support for timer boundary events on tasks and embedded sub processes. Although, the timer boundary event makes 
          	the most sense when using it on a user task or an embedded sub process in the Activiti Designer.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.timerboundary.canvas.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	Support for additional Activiti extensions like the Mail task, the candidate
            configuration of User tasks and Script task configuration.
            
            </p><div class="mediaobject" align="center"><img src="images/designer.mailtask.property.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
          	Support for the Activiti execution and task listeners. You can also add field extensions for execution listeners.
          
          	</p><div class="mediaobject" align="center"><img src="images/designer.listener.configuration.png" align="middle"></div><p>
          </p></li><li class="listitem"><p> Support for conditions on sequence flows. </p><div class="mediaobject" align="center"><img src="images/designer.sequence.condition.png" align="middle"></div><p>
          </p></li></ul></div><p>
    </p></div><div class="section" title="Activiti Designer deployment features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eclipseDesignerDeployment"></a>Activiti Designer deployment features</h2></div></div></div><p>
    	Deploying process definitions and task forms on the Activiti Engine is not hard. You need a BAR file containing the process
    	definition BPMN 2.0 XML file and optionally task forms and an image of the process that can be viewed in the Activiti
    	Explorer. In the Activiti Designer it's made very easy to create a BAR file. When you've finished your process
    	implementation just right-click on your Activiti project in the package explorer and choose for the
    	<span class="bold"><strong>Create deployment artifacts</strong></span> option at the bottom of the popup menu.
    	
    	</p><div class="mediaobject" align="center"><img src="images/designer.create.deployment.png" align="middle"></div><p>
   	</p><p>
    	Then a deployment directory is created containing the BAR file and optionally a JAR file with the Java classes of your
    	Activiti project.
    	
    	</p><div class="mediaobject" align="center"><img src="images/designer.deployment.dir.png" align="middle"></div><p>
    </p><p>
    	This file can now be uploaded to the Activiti Engine using the deployments tab in Activiti Explorer, and you are ready to go.
    	
    </p><p>
    	When your project contains Java classes, the deployment is a bit more work. In that case the 
    	<span class="bold"><strong>Create deployment artifacts</strong></span> step in the Activiti Designer will also generate a JAR
    	file containing the compiled classes. This JAR file must be deployed to the activiti-XXX/WEB-INF/lib directory
    	in your Activiti Tomcat installation directory. This makes the classes available on the classpath of the Activiti Engine.
    </p></div><div class="section" title="Extending Activiti Designer"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eclipseDesignerExtending"></a>Extending Activiti Designer</h2></div></div></div><p>You can extend the default functionality
      offered by Activiti Designer. This section documents which extensions are available, how they
      can be used and provides some usage examples. Extending Activiti Designer is useful in cases
      where the default functionality doesn't suit your needs, you require additional capabilities
      or have domain specific requirements when modeling business processes. Extension of Activiti
      Designer falls into two distinct categories, extending the palette and extending output
      formats. Each of these extension ways requires a specific approach and different technical
      expertise.</p><p>
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Extending Activiti Designer requires technical knowledge and more specifically,
          knowledge of programming in Java. Depending on the type of extension you want to create,
          you might also need to be familiar with Maven, Eclipse, OSGi, Eclipse extensions and
          SWT.</p></div><p>
    </p><div class="section" title="Customizing the palette"><div class="titlepage"><div><div><h3 class="title"><a name="eclipseDesignerCustomizingPalette"></a>Customizing the palette</h3></div></div></div><p>You can customize the palette that is offered to users when modeling processes. The
        palette is the collection of shapes that can be dragged onto the canvas in a process diagram
        and is displayed to the right hand side of the canvas. As you can see in the default
        palette, the default shapes are grouped into compartments (these are called "drawers") for
        Events, Gateways and so on. There are two options built-in to Activiti Designer to customize
        the drawers and shapes in the palette:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Adding your own shapes / nodes to existing or new drawers </p></li><li class="listitem"><p>Disabling any or all of the default BPMN 2.0 shapes offered by Activiti Designer,
              with the exception of the connection and selection tools</p></li></ul></div><p>In order to customize the palette, you create a JAR file that is added to a specific
        installation of Activiti Designer (more on <a class="link" href="#eclipseDesignerApplyingExtension" title="Applying your extension to Activiti Designer">how
          to do that</a> later). Such a JAR file is called an <span class="emphasis"><em>extension</em></span>. By
        writing classes that are included in your extension, Activiti Designer understands which
        customizations you wish to make. In order for this to work, your classes should implement
        certain interfaces. There is an integration library available with those interfaces and base
        classes to extend which you should add to your project's classpath. </p><p>You can find the code examples listed below in source control with Activiti Designer.
        Take a look in the <code class="literal">examples/money-tasks</code> directory in the
          <code class="literal">projects/designer</code> directory of Activiti's source code.</p><p>
        </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can setup your project in whichever tool you prefer and build the JAR with your
            build tool of choice. For the instructions below, a setup is assumed with Eclipse
            Helios, using Maven (3.x) as build tool, but any setup should enable you to create the
            same results.</p></div><p>
      </p><div class="section" title="Extension setup (Eclipse/Maven)"><div class="titlepage"><div><div><h4 class="title"><a name="N124DA"></a>Extension setup (Eclipse/Maven)</h4></div></div></div><p>Download and extract <a class="ulink" href="http://www.eclipse.org/downloads" target="_top">Eclipse</a>
          (most recent versions should work) and a recent version (3.x) of <a class="ulink" href="http://maven.apache.org/download.html" target="_top">Apache Maven</a>. If you use a 2.x
          version of Maven, you will run into problems when building your project, so make sure your
          version is up to date. We assume you are familiar with using basic features and the Java
          editor in Eclipse. It's up to you whether your prefer to use Eclipse's features for Maven
          or run Maven commands from a command prompt.</p><p>Create a new project in Eclipse. This can be a general project type. Create a
            <code class="literal">pom.xml</code> file at the root of the project to contain the Maven project
          setup. Also create folders for the <code class="literal">src/main/java</code> and
            <code class="literal">src/main/resources</code> folders, which are Maven conventions for your Java
          source files and resources respectively. Open the <code class="literal">pom.xml</code> file and add
          the following lines:</p><p>
          </p><pre class="prettyprint">&lt;project 
  xmlns="http://maven.apache.org/POM/4.0.0" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;

  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;groupId&gt;org.acme&lt;/groupId&gt;
  &lt;artifactId&gt;money-tasks&lt;/artifactId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;name&gt;Acme Corporation Money Tasks&lt;/name&gt;
...
&lt;/project&gt;</pre><p>
        </p><p>As you can see, this is just a basic pom.xml file that defines a
            <code class="literal">groupId</code>, <code class="literal">artifactId</code> and <code class="literal">version</code>
          for the project. We will create a customization that includes a single custom node for our
          money business.</p><p>Add the integration library to your project's dependencies by including this
          dependency in your <code class="literal">pom.xml</code> file:</p><p>
          </p><pre class="prettyprint">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.activiti.designer&lt;/groupId&gt;
    &lt;artifactId&gt;org.activiti.designer.integration&lt;/artifactId&gt;
    &lt;version&gt;5.12.0&lt;/version&gt; &lt;!-- Use the current Activiti Designer version --&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
...
&lt;repositories&gt;
  &lt;repository&gt;
      &lt;id&gt;Activiti&lt;/id&gt;
      &lt;url&gt;https://maven.alfresco.com/nexus/content/groups/public/&lt;/url&gt;
   &lt;/repository&gt;
&lt;/repositories&gt;</pre><p>
        </p><p>Finally, in the<code class="literal"> pom.xml</code> file, add the configuration for the
            <code class="literal">maven-compiler-plugin</code> so the Java source level is at least 1.5 (see
          snippet below). You will need this in order to use annotations. You can also include
          instructions for Maven to generate the JAR's <code class="literal">MANIFEST.MF</code> file. This is
          not required, but you can use a specific property in the manifest to provide a name for
          your extension (this name may be shown at certain places in the designer and is primarily
          intended for future use if you have several extensions in the designer). If you wish to do
          so, include the following snippet in <code class="literal">pom.xml</code>: </p><p>
          </p><pre class="prettyprint">&lt;build&gt;
  &lt;plugins&gt;
        &lt;plugin&gt;
      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;source&gt;1.5&lt;/source&gt;
        &lt;target&gt;1.5&lt;/target&gt;
        &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;
        &lt;showWarnings&gt;true&lt;/showWarnings&gt;
        &lt;optimize&gt;true&lt;/optimize&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.3.1&lt;/version&gt;
      &lt;configuration&gt;
        &lt;archive&gt;
          &lt;index&gt;true&lt;/index&gt;
          &lt;manifest&gt;
            &lt;addClasspath&gt;false&lt;/addClasspath&gt;
            &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;
          &lt;/manifest&gt;
          &lt;manifestEntries&gt;
            &lt;ActivitiDesigner-Extension-Name&gt;Acme Money&lt;/ActivitiDesigner-Extension-Name&gt;
          &lt;/manifestEntries&gt;
        &lt;/archive&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre><p>
        </p><p>The name for the extension is described by the
            <code class="literal">ActivitiDesigner-Extension-Name</code> property. The only thing left to do
          now is tell Eclipse to setup the project according to the instructions in
            <code class="literal">pom.xml</code>. So open up a command shell and go to the root folder of your
          project in the Eclipse workspace. Then execute the following Maven command:</p><p>
          </p><pre class="prettyprint">mvn eclipse:eclipse</pre><p>
        </p><p>Wait until the build is successful. Refresh the project (use the project's context
          menu (right-click) and select <code class="literal">Refresh</code>). You should now have the
            <code class="literal">src/main/java</code> and <code class="literal">src/main/resources</code> folders as
          source folders in the Eclipse project.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can of course also use the <a class="ulink" href="http://www.eclipse.org/m2e" target="_top">m2eclipse</a> plugin and simply enable Maven dependency management from the
            context menu (right-click) of the project. Then choose <code class="literal">Maven</code> &gt;
              <code class="literal">Update project configuration</code> from the project's context menu. That
            should setup the source folders as well. </p></div><p>That's it for the setup. Now you're ready to start creating customizations to Activiti
          Designer!</p></div><div class="section" title="Applying your extension to Activiti Designer"><div class="titlepage"><div><div><h4 class="title"><a name="eclipseDesignerApplyingExtension"></a>Applying your extension to Activiti Designer</h4></div></div></div><p>You might be wondering how you can add your extension to Activiti Designer so your
          customizations are applied. These are the steps to do just that: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Once you've created your extension JAR (for instance, by performing a mvn
                install in your project to build it with Maven), you need to transfer the extension
                to the computer where Activiti Designer is installed; </p></li><li class="listitem"><p>Store the extension somewhere on the hard drive where it will be able to remain
                and remember the location. <span class="emphasis"><em>Note: </em></span> the location must be outside the Eclipse workspace of Activiti Designer - 
                storing the extension inside the workspace will lead to the user getting a popup error message and the extensions being unavailable;</p></li><li class="listitem"><p>Start Activiti Designer and from the menu, select <code class="literal">Window</code> &gt;
                  <code class="literal">Preferences</code>
              </p></li><li class="listitem"><p>In the preferences screen, type <code class="literal">user</code> as keyword. You should
                see an option to access the <code class="literal">User Libraries</code> in Eclipse in the
                  <code class="literal">Java</code> section.</p><p>
                </p><div class="mediaobject" align="center"><img src="images/designer.preferences.userlibraries.png" align="middle"></div><p>
              </p></li><li class="listitem"><p>Select the User Libraries item and a tree view shows up to the right where you
                can add libraries. You should see the default group where you can add extensions to
                Activiti Designer (depending on your Eclipse installation, you might see several
                others as well). </p><p>
                </p><div class="mediaobject" align="center"><img src="images/designer.preferences.userlibraries.activiti.empty.png" align="middle"></div><p>
              </p></li><li class="listitem"><p>Select the <code class="literal">Activiti Designer Extensions</code> group and click the
                  <code class="literal">Add JARs...</code> button. Navigate to to folder where your extension
                is stored and select the extension file you want to add. After completing this, your
                preferences screen should show the extension as part of the <code class="literal">Activiti
                  Designer Extensions</code> group, as shown below.</p><p>
                </p><div class="mediaobject" align="center"><img src="images/designer.preferences.userlibraries.activiti.moneytasks.png" align="middle"></div><p>
              </p></li><li class="listitem"><p>Click the <code class="literal">OK</code> button to save and close the preferences dialog.
                The <code class="literal">Activiti Designer Extensions</code> group is automatically added to
                new Activiti projects you create. You can see the user library as entry in the
                project's tree in the Navigator or Package Explorer. If you already had Activiti
                projects in the workspace, you should also see the new extensions show up in the
                group. An example is shown below.</p><p>
                </p><div class="mediaobject" align="center"><img src="images/designer.userlibraries.project.png" align="middle"></div><p>
              </p></li></ul></div><p>Diagrams you open will now have the shapes from the new extension in their palette (or
          shapes disabled, depending on the customizations in your extension). If you already had a
          diagram opened, close and reopen it to see the changes in the palette.</p></div><div class="section" title="Adding shapes to the palette"><div class="titlepage"><div><div><h4 class="title"><a name="N125A8"></a>Adding shapes to the palette</h4></div></div></div><p>
          With your project set up, you can now easily add shapes to the palette. Each shape you
          wish to add is represented by a class in your JAR. Take note that these classes are not
          the classes that will be used by the Activiti engine during runtime. In your extension you
          describe the properties that can be set in Activiti Designer for each shape. From these
          shapes, you can also define the runtime characteristics that should be used by the engine 
          when a process instance reaches the node in the process. The runtime characteristics can use any 
          of the options that Activiti supports for regular <code class="literal">ServiceTask</code>s. 
          See <a class="link" href="#eclipseDesignerConfiguringRuntime" title="Configuring runtime execution of Custom Service Tasks">this section</a> for more 
          details.
        </p><p>A shape's class is a simple Java class, to which a number of annotations are added.
          The class should implement the <code class="literal">CustomServiceTask</code> interface, but you
          shouldn't implement this interface yourself. Extend the
            <code class="literal">AbstractCustomServiceTask</code> base class instead (at the moment you MUST
          extend this class directly, so no abstract classes in between). In the Javadoc for that
          class you can find instructions on the defaults it provides and when you should override
          any of the methods it already implements. Overrides allow you to do things such as
          providing icons for the palette and in the shape on the canvas (these can be different)
          and specifying the base shape you want the node to have (activity, event, gateway).</p><p>
          </p><pre class="prettyprint">/**
 * @author John Doe
 * @version 1
 * @since 1.0.0
 */
public class AcmeMoneyTask extends AbstractCustomServiceTask {
...
}</pre><p>
        </p><p>You will need to implement the <code class="literal">getName()</code> method to determine the
          name the node will have in the palette. You can also put the nodes in their own drawer and
          provide an icon. Override the appropriate methods from
            <code class="literal">AbstractCustomServiceTask</code>. If you want to provide an icon, make sure
          it's in the <code class="literal">src/main/resources</code> package in your JAR and is about 16x16
          pixels and a JPEG or PNG format. The path you supply is relative to that folder.</p><p>You can add properties to the shape by adding members to the class and annotating them
          with the <code class="literal">@Property</code> annotation like this:</p><p>
          </p><pre class="prettyprint">@Property(type = PropertyType.TEXT, displayName = "Account Number")
@Help(displayHelpShort = "Provide an account number", displayHelpLong = HELP_ACCOUNT_NUMBER_LONG)
private String accountNumber;</pre><p>
        </p><p>There are several <code class="literal">PropertyType</code> values you can use, which are
          described in more detail in <a class="link" href="#eclipseDesignerPropertyTypes" title="Property types">this section</a>. You
          can make a field required by setting the required attribute to true. A message and red
          background will appear if the user doesn't fill out the field.</p><p>If you want to ensure the order of the various properties in your class as they appear
          in the property screen, you should specify the order attribute of the
            <code class="literal">@Property</code> annotation.</p><p>As you can see, there's also an <code class="literal">@Help</code> annotation that's used to
          provide the user some guidance when filling out the field. You can also use the
            <code class="literal">@Help</code> annotation on the class itself - this information is shown at
          the top of the property sheet presented to the user.</p><p>Below is the listing for a further elaboration of the <code class="literal">MoneyTask</code>. A
          comment field has been added and you can see an icon is included for the node.</p><p>
          </p><pre class="prettyprint">/**
 * @author John Doe
 * @version 1
 * @since 1.0.0
 */
@Runtime(javaDelegateClass = "org.acme.runtime.AcmeMoneyJavaDelegation")
@Help(displayHelpShort = "Creates a new account", displayHelpLong = "Creates a new account using the account number specified")
public class AcmeMoneyTask extends AbstractCustomServiceTask {

  private static final String HELP_ACCOUNT_NUMBER_LONG = "Provide a number that is suitable as an account number.";

  @Property(type = PropertyType.TEXT, displayName = "Account Number", required = true)
  @Help(displayHelpShort = "Provide an account number", displayHelpLong = HELP_ACCOUNT_NUMBER_LONG)
  private String accountNumber;

  @Property(type = PropertyType.MULTILINE_TEXT, displayName = "Comments")
  @Help(displayHelpShort = "Provide comments", displayHelpLong = "You can add comments to the node to provide a brief description.")
  private String comments;

  /*
   * (non-Javadoc)
   * 
   * @see org.activiti.designer.integration.servicetask.AbstractCustomServiceTask #contributeToPaletteDrawer()
   */
  @Override
  public String contributeToPaletteDrawer() {
    return "Acme Corporation";
  }

  @Override
  public String getName() {
    return "Money node";
  }

  /*
   * (non-Javadoc)
   * 
   * @see org.activiti.designer.integration.servicetask.AbstractCustomServiceTask #getSmallIconPath()
   */
  @Override
  public String getSmallIconPath() {
    return "icons/coins.png";
  }
}</pre><p>
        </p><p>If you extend Activiti Designer with this shape, The palette and corresponding node
          will look like this:</p><p>
          </p><div class="mediaobject" align="center"><img src="images/designer.palette.add.money.png" align="middle"></div><p>
        </p><p>The properties screen for the money task is shown below. Note the required message for
          the <code class="literal">accountNumber</code> field.</p><p>
          </p><div class="mediaobject" align="center"><img src="images/designer.palette.add.money.properties.required.png" align="middle"></div><p>
        </p><p>
        	Users can enter static text or use expressions that use process variables in the property fields when creating diagrams 
        	(e.g. "This little piggy went to ${piggyLocation}"). Generally, 
        	this applies to text fields where users are free to enter any text. If you expect users to want to use expressions and you apply runtime behavior 
        	to your <code class="literal">CustomServiceTask</code> (using <code class="literal">@Runtime</code>), make sure to use <code class="literal">Expression</code> fields in the 
        	delegate class so the expressions are correctly resolved at runtime. More information on runtime behavior can be found in  
        	<a class="link" href="#eclipseDesignerConfiguringRuntime" title="Configuring runtime execution of Custom Service Tasks">this section</a>.
        </p><p>The help for fields is offered by the buttons to the right of each property. Clicking
          on the button shows a popup as displayed below.</p><p>
          </p><div class="mediaobject" align="center"><img src="images/designer.palette.add.money.help.png" align="middle"></div><p>
        </p><div class="section" title="Configuring runtime execution of Custom Service Tasks"><div class="titlepage"><div><div><h5 class="title"><a name="eclipseDesignerConfiguringRuntime"></a>Configuring runtime execution of Custom Service Tasks</h5></div></div></div><p>
      			With your fields setup and your extension applied to Designer, users can configure 
      			the properties of the service task when modelling a process. In most cases, you will 
      			want to use these user-configured properties when the process is executed by Activiti. 
      			To do this, you must instruct Activiti which class to instantiate when the process reaches 
      			your <code class="literal">CustomServiceTask</code>. 
      		</p><p>
      			There is a special annotation for specifying the runtime characteristics of your <code class="literal">CustomServiceTask</code>, 
      			the <code class="literal">@Runtime</code> annotation. Here's an example of how to use it:
      		</p><pre class="prettyprint">@Runtime(javaDelegateClass = "org.acme.runtime.AcmeMoneyJavaDelegation")</pre><p>
            Your <code class="literal">CustomServiceTask</code> will result in a normal <code class="literal">ServiceTask</code> in the BPMN output 
            of processes modelled with it. Activiti enables <a class="link" href="#bpmnJavaServiceTask" title="Java Service Task">several ways</a> to define the runtime characteristics of <code class="literal">ServiceTask</code>s. Therefore, the <code class="literal">@Runtime</code> annotation can take one of three attributes, which match directly to the options 
            Activiti provides, like this:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  <code class="literal">javaDelegateClass</code> maps to <code class="literal">activiti:class</code> in the BPMN output. Specify the fully qualified classname of a class that implements <code class="literal">JavaDelegate</code>. 
                </p></li><li class="listitem"><p>
                  <code class="literal">expression</code> maps to <code class="literal">activiti:expression</code> in the BPMN output. Specify an expression to a method to be executed, such as a method in a Spring Bean. You should <span class="emphasis"><em>not</em></span> specify any <code class="literal">@Property</code> 
                  annotations on fields when using this option. For more information, see below.
                </p></li><li class="listitem"><p>
                  <code class="literal">javaDelegateExpression</code> maps to <code class="literal">activiti:delegateExpression</code> in the BPMN output. Specify an expression to  a class that implements <code class="literal">JavaDelegate</code>.
                </p></li></ul></div><p>
          </p><p>
          		The user's property values will be injected into the runtime class 
          		if you provide members in the class for Activiti to inject into. The names should match the names of the members 
          		in your <code class="literal">CustomServiceTask</code>. For more information, consult <a class="link" href="#serviceTaskFieldInjection" title="Field Injection">this part</a> 
          		of the userguide. Note that since version 5.11.0 of the Designer you can use the <code class="literal">Expression</code> interface for dynamic field values.
              This means that the value of the property in the Activiti Designer must contain an expression and this expression will then be injected
              into an <code class="literal">Expression</code> property in the <code class="literal">JavaDelegate</code> implementation class.
          	</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                You can use <code class="literal">@Property</code> annotations on members of your <code class="literal">CustomServiceTask</code>, but this will not work if you use <code class="literal">@Runtime</code>'s <code class="literal">expression</code> attribute. The reason for this is that the 
                expression you specify will be attempted to be resolved to a <span class="emphasis"><em>method</em></span> by Activiti, not to a class. Therefore, no injection into 
                a class will be performed. Any members marked with <code class="literal">@Property</code> will be ignored by Designer if you use <code class="literal">expression</code> in your <code class="literal">@Runtime</code> annotation. Designer will not render them as editable fields in the node's property pane and will produce no output 
                for the properties in the process' BPMN.
              </p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                Note that the runtime class shouldn't be in your extension JAR, as it's dependent on the Activiti
                libraries. Activiti needs to be able to find it at runtime, so it needs to be on the Activiti engine's 
                classpath.
              </p></div><p>
              The examples project in Designer's source tree contains examples of the different options for configuring <code class="literal">@Runtime</code>. Take a look in the money-tasks project for some starting points. The examples refer to delegate class examples that are in the money-delegates project.
            </p></div></div><div class="section" title="Property types"><div class="titlepage"><div><div><h4 class="title"><a name="eclipseDesignerPropertyTypes"></a>Property types </h4></div></div></div><p>This section describes the property types you can use for a
            <code class="literal">CustomServiceTask</code> by setting its type to a
            <code class="literal">PropertyType</code> value.</p><div class="section" title="PropertyType.TEXT"><div class="titlepage"><div><div><h5 class="title"><a name="N126B5"></a>PropertyType.TEXT</h5></div></div></div><p>Creates a single line text field as shown below. Can be a required field and shows
            validation messages as a tooltip. Validation failures are displayed by changing the
            background of the field to a light red color.</p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.text.png" align="middle"></div><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.text.invalid.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.MULTILINE_TEXT"><div class="titlepage"><div><div><h5 class="title"><a name="N126CA"></a>PropertyType.MULTILINE_TEXT</h5></div></div></div><p>Creates a multiline text field as shown below (height is fixed at 80 pixels). Can be
            a required field and shows validation messages as a tooltip. Validation failures are
            displayed by changing the background of the field to a light red color.</p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.multiline.text.png" align="middle"></div><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.multiline.text.invalid.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.PERIOD"><div class="titlepage"><div><div><h5 class="title"><a name="N126DF"></a>PropertyType.PERIOD</h5></div></div></div><p>Creates a structured editor for specifying a period of time by editing amounts of
            each unit with a spinner control. The result is shown below. Can be a required field
            (which is interpreted such that not all values may be 0, so at least 1 part of the
            period must have a non-zero value) and shows validation messages as a tooltip.
            Validation failures are displayed by changing the background of the entire field to a
            light red color. The value of the field is stored as a string of the form 1y 2mo 3w 4d
            5h 6m 7s, which represents 1 year, 2 months, 3 weeks, 4 days, 6 minutes and 7 seconds.
            The entire string is always stored, even if parts are 0.</p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.period.png" align="middle"></div><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.period.invalid.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.BOOLEAN_CHOICE"><div class="titlepage"><div><div><h5 class="title"><a name="N126F4"></a>PropertyType.BOOLEAN_CHOICE</h5></div></div></div><p>Creates a single checkbox control for boolean or toggle choices. Note that you can
            specify the <code class="literal">required</code> attribute on the <code class="literal">Property</code>
            annotation, but it will not be evaluated because that would leave the user without a
            choice whether to check the box or not. The value stored in the diagram is
            java.lang.Boolean.toString(boolean), which results in "true" or "false".</p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.boolean.choice.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.RADIO_CHOICE"><div class="titlepage"><div><div><h5 class="title"><a name="N12707"></a>PropertyType.RADIO_CHOICE</h5></div></div></div><p>Creates a group of radio buttons as shown below. Selection of any of the radio
            buttons is mutually exclusive with selection of any of the others (i.e., only one
            selection allowed). Can be a required field and shows validation messages as a tooltip.
            Validation failures are displayed by changing the background of the group to a light red
            color.</p><p>This property type expects the class member you have annotated to also have an
            accompanying <code class="literal">@PropertyItems</code> annotation (for an example, see below).
            Using this additional annotation, you can specify the list of items that should be
            offered in an array of Strings. Specify the items by adding two array entries for each
            item: first, the label to be shown; second, the value to be stored. </p><p>
            </p><pre class="prettyprint">@Property(type = PropertyType.RADIO_CHOICE, displayName = "Withdrawl limit", required = true)
@Help(displayHelpShort = "The maximum daily withdrawl amount ", displayHelpLong = "Choose the maximum daily amount that can be withdrawn from the account.")
@PropertyItems({ LIMIT_LOW_LABEL, LIMIT_LOW_VALUE, LIMIT_MEDIUM_LABEL, LIMIT_MEDIUM_VALUE, LIMIT_HIGH_LABEL, LIMIT_HIGH_VALUE })
private String withdrawlLimit;</pre><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.radio.choice.png" align="middle"></div><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.radio.choice.invalid.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.COMBOBOX_CHOICE"><div class="titlepage"><div><div><h5 class="title"><a name="N12726"></a>PropertyType.COMBOBOX_CHOICE</h5></div></div></div><p>Creates a combobox with fixed options as shown below. Can be a required field and
            shows validation messages as a tooltip. Validation failures are displayed by changing
            the background of the combobox to a light red color.</p><p>This property type expects the class member you have annotated to also have an
            accompanying <code class="literal">@PropertyItems</code> annotation (for an example, see below).
            Using this additional annotation, you can specify the list of items that should be
            offered in an array of Strings. Specify the items by adding two array entries for each
            item: first, the label to be shown; second, the value to be stored. </p><p>
            </p><pre class="prettyprint">@Property(type = PropertyType.COMBOBOX_CHOICE, displayName = "Account type", required = true)
@Help(displayHelpShort = "The type of account", displayHelpLong = "Choose a type of account from the list of options")
@PropertyItems({ ACCOUNT_TYPE_SAVINGS_LABEL, ACCOUNT_TYPE_SAVINGS_VALUE, ACCOUNT_TYPE_JUNIOR_LABEL, ACCOUNT_TYPE_JUNIOR_VALUE, ACCOUNT_TYPE_JOINT_LABEL,
  ACCOUNT_TYPE_JOINT_VALUE, ACCOUNT_TYPE_TRANSACTIONAL_LABEL, ACCOUNT_TYPE_TRANSACTIONAL_VALUE, ACCOUNT_TYPE_STUDENT_LABEL, ACCOUNT_TYPE_STUDENT_VALUE,
  ACCOUNT_TYPE_SENIOR_LABEL, ACCOUNT_TYPE_SENIOR_VALUE })
private String accountType;</pre><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.combobox.choice.png" align="middle"></div><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.combobox.choice.invalid.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.DATE_PICKER"><div class="titlepage"><div><div><h5 class="title"><a name="N12745"></a>PropertyType.DATE_PICKER</h5></div></div></div><p>Creates a date selection control as shown below. Can be a required field and shows
            validation messages as a tooltip (note, that the control used will auto-set the
            selection to the date on the system, so the value is seldom empty). Validation failures
            are displayed by changing the background of the control to a light red color.</p><p>This property type expects the class member you have annotated to also have an
            accompanying <code class="literal">@DatePickerProperty</code> annotation (for an example, see
            below). Using this additional annotation, you can specify the date time pattern to be
            used to store dates in the diagram and the type of datepicker you would like to be
            shown. Both attributes are optional and have default values that will be used if you
            don't specify them (these are static variables in the
              <code class="literal">DatePickerProperty</code> annotation). The
              <code class="literal">dateTimePattern</code> attribute should be used to supply a pattern to the
              <code class="literal">SimpleDateFormat</code> class. When using the <code class="literal">swtStyle</code>
            attribute, you should specify an integer value that is supported by
              <code class="literal">SWT</code>'s <code class="literal">DateTime</code> control, because this is the
            control that is used to render this type of property.</p><p>
            </p><pre class="prettyprint">@Property(type = PropertyType.DATE_PICKER, displayName = "Expiry date", required = true)
@Help(displayHelpShort = "The date the account expires ", displayHelpLong = "Choose the date when the account will expire if no extended before the date.")
@DatePickerProperty(dateTimePattern = "MM-dd-yyyy", swtStyle = 32)
private String expiryDate;</pre><p>
          </p><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.date.picker.png" align="middle"></div><p>
          </p></div><div class="section" title="PropertyType.DATA_GRID"><div class="titlepage"><div><div><h5 class="title"><a name="N1276E"></a>PropertyType.DATA_GRID</h5></div></div></div><p>Creates a data grid control as shown below. A data grid can be used to allow the
            user to enter an arbitrary amount of rows of data and enter values for a fixed set of
            columns in each of those rows (each individual combination of row and column is referred
            to as a cell). Rows can be added and removed as the user sees fit.</p><p>This property type expects the class member you have annotated to also have an
            accompanying <code class="literal">@DataGridProperty</code> annotation (for an example, see
            below). Using this additional annotation, you can specify some specific attributes of
            the data grid. You are required to reference a different class to determine which
            columns go into the grid with the <code class="literal">itemClass</code> attribute. Activiti
            Designer expects the member type to be a <code class="literal">List</code>. By convention, you can
            use the class of the <code class="literal">itemClass</code> attribute as its generic type. If, for
            example, you have a grocery list that you edit in the grid, you would define the columns
            of the grid in the <code class="literal">GroceryListItem</code> class. From your
              <code class="literal">CustomServiceTask</code>, you would refer to it like this:</p><p>
            </p><pre class="prettyprint">@Property(type = PropertyType.DATA_GRID, displayName = "Grocery List")
@DataGridProperty(itemClass = GroceryListItem.class)
private List&lt;GroceryListItem&gt; groceryList;</pre><p>
          </p><p>The "itemClass" class uses the same annotations you would otherwise use to specify
            fields of a <code class="literal">CustomServiceTask</code>, with the exception of using a data
            grid. Specifically, <code class="literal">TEXT</code>, <code class="literal">MULTILINE_TEXT</code> and
              <code class="literal">PERIOD</code> are currently supported. You'll notice the grid will create
            single line text controls for each field, regardless of the
              <code class="literal">PropertyType</code>. This is done on purpose to keep the grid graphically
            appealing and readable. If you consider the regular display mode for a
              <code class="literal">PERIOD</code>
            <code class="literal">PropertyType</code> for instance, you can imagine it would never properly
            fit in a grid cell without cluttering the screen. For <code class="literal">MULTILINE_TEXT</code>
            and <code class="literal">PERIOD</code>, a double-click mechanism is added to each field which
            pops up a larger editor for the <code class="literal">PropertyType</code>. The value is stored to
            the field after the user clicks OK and is therefore readable within the grid.</p><p>Required attributes are handled in a similar manner to regular fields of type
              <code class="literal">TEXT</code> and the entire grid is validated as soon as any field loses
            focus. The background color of the text control in a specific cell of the data grid is
            changed to light red if there are validation failures.</p><p>By default, the component allows the user to add rows, but not to determine the
            order of those rows. If you wish to allow this, you should set the
              <code class="literal">orderable</code> attribute to true, which enables buttons at the end of
            each row to move it up or down in the grid. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>At the moment, this property type is not correctly injected into your runtime
                class.</p></div><p>
            </p><div class="mediaobject" align="center"><img src="images/designer.property.datagrid.png" align="middle"></div><p>
          </p></div></div><div class="section" title="Disabling default shapes in the palette"><div class="titlepage"><div><div><h4 class="title"><a name="N127C1"></a>Disabling default shapes in the palette</h4></div></div></div><p>This customization requires you to include a class in your extension that implements
          the <code class="literal">DefaultPaletteCustomizer</code> interface. You should not implement this
          interface directly, but subclass the <code class="literal">AbstractDefaultPaletteCustomizer</code>
          base class. Currently, this class provides no functionality, but future versions of the
            <code class="literal">DefaultPaletteCustomizer</code> interface will offer more capabilities for
          which this base class will provide some sensible defaults so it's best to subclass so your
          extension will be compatible with future releases. </p><p>Extending the <code class="literal">AbstractDefaultPaletteCustomizer</code> class requires you
          to implement one method, <code class="literal">disablePaletteEntries()</code>, from which you must
          return a list of <code class="literal">PaletteEntry</code> values. For each of the default shapes,
          you can disable it by adding its corresponding <code class="literal">PaletteEntry</code> value to
          your list. Note that if you remove shapes from the default set and there are no remaining
          shapes in a particular drawer, that drawer will be removed from the palette in its
          entirety. If you wish to disable all of the default shapes, you only need to add
            <code class="literal">PaletteEntry.ALL</code> to your result. As an example, the code below
          disables the Manual task and Script task shapes in the palette.</p><p>
          </p><pre class="prettyprint">public class MyPaletteCustomizer extends AbstractDefaultPaletteCustomizer {

  /*
   * (non-Javadoc)
   *
   * @see org.activiti.designer.integration.palette.DefaultPaletteCustomizer#disablePaletteEntries()
   */
  @Override
  public List&lt;PaletteEntry&gt; disablePaletteEntries() {
    List&lt;PaletteEntry&gt; result = new ArrayList&lt;PaletteEntry&gt;();
    result.add(PaletteEntry.MANUAL_TASK);
    result.add(PaletteEntry.SCRIPT_TASK);
    return result;
  }

}</pre><p>
        </p><p>The result of applying this extension is shown in the picture below. As you can see,
          the manual task and script task shapes are no longer available in the
            <code class="literal">Tasks</code> drawer.</p><p>
          </p><div class="mediaobject" align="center"><img src="images/designer.palette.disable.manual.and.script.png" align="middle"></div><p>
        </p><p>To disable all of the default shapes, you could use something similar to the code
          below.</p><p>
          </p><pre class="prettyprint">public class MyPaletteCustomizer extends AbstractDefaultPaletteCustomizer {

  /*
   * (non-Javadoc)
   *
   * @see org.activiti.designer.integration.palette.DefaultPaletteCustomizer#disablePaletteEntries()
   */
  @Override
  public List&lt;PaletteEntry&gt; disablePaletteEntries() {
    List&lt;PaletteEntry&gt; result = new ArrayList&lt;PaletteEntry&gt;();
    result.add(PaletteEntry.ALL);
    return result;
  }

}</pre><p>
        </p><p>The result will look like this (notice that the drawers the default shapes were in are
          no longer in the palette):</p><p>
          </p><div class="mediaobject" align="center"><img src="images/designer.palette.disable.all.png" align="middle"></div><p>
        </p></div></div><div class="section" title="Validating diagrams and exporting to custom output formats"><div class="titlepage"><div><div><h3 class="title"><a name="N12803"></a>Validating diagrams and exporting to custom output formats</h3></div></div></div><p>Besides customizing the palette, you can also create extensions to Activiti Designer
        that can perform validations and save information from the diagram to custom resources in
        the Eclipse workspace. There are built-in extension points for doing this and this section
        explains how to use them.</p><p>Activiti Designer allows you to write extensions that validate diagrams. There are
        already validations of BPMN constructs in the tool by default, but you can add your own if
        you want to validate additional items such as modeling conventions or the values in
        properties of <code class="literal">CustomServiceTask</code>s. These extensions are known as
          <code class="literal">Process Validators</code>.</p><p>You can also Activiti Designer to publish to additional formats when saving diagrams.
        These extensions are called <code class="literal">Export Marshallers</code> and are invoked
        automatically by Activiti Designer on each save action by the user. This behavior can be
        enabled or disabled by setting a preference in Eclipse's preferences dialog for each format
        to be saved.</p><p>You can compare these extensions to the BPMN 2.0 validation, BPMN 2.0 export and process
        image saving that's performed during save actions by default in Activiti Designer. In fact,
        these functions use exactly the same extension features you can use to save to your own
        formats.</p><p>Often, you will want to combine a <code class="literal">ProcessValidator</code> and an
          <code class="literal">ExportMarshaller</code>. Let's say you have a number of
          <code class="literal">CustomServiceTask</code>s in use that have properties you would like to use in
        the process that gets generated. However, before the process is generated, you want to
        validate some of those values first. Combining a <code class="literal">ProcessValidator</code> and
          <code class="literal">ExportMarshaller</code> is the best way to accomplish this and Activiti
        Designer enables you to plug your extensions into the tool seamlessly.</p><p>To create a <code class="literal">ProcessValidator</code> or an
          <code class="literal">ExportMarshaller</code>, you need to create a different kind of extension than
        for extending the palette. The reason for this is simple: from your code you will need
        access to more APIs than are offered by the integration library. In particular, you will
        need classes that are available in Eclipse itself. So to get started, you should create an
        Eclipse plugin (which you can do by using Eclipse's PDE support) and package it in a custom
        Eclipse product or feature. It's beyond the scope of this user guide to explain all the
        details involved in developing Eclipse plugins, so the instructions below are limited to the
        functionality for extending Activiti Designer.</p><p>Your bundle should be dependent on the following libraries:</p><p>
        </p><div class="mediaobject" align="center"><img src="images/designer.export.dependencies.png" align="middle"></div><p>
      </p><p>Both <code class="literal">ProcessValidator</code>s and <code class="literal">ExportMarshaller</code>s are
        created by extending a base class. These base classes inherit some useful methods from their
        superclass, the <code class="literal">AbstractDiagramWorker</code> class. Using these methods you can
        create information, warning and error markers that show up in Eclipse's problems view for
        the user to figure out what's wrong or important. You can also access the diagram through
          <code class="literal">Resources</code> and <code class="literal">InputStreams</code> for the diagram's content
        using these methods in the <code class="literal">AbstractDiagramWorker</code> class.</p><p>It's probably a good idea to invoke <code class="literal">clearMarkers()</code> as one of the
        first things you do in either a <code class="literal">ProcessValidator</code> or an
          <code class="literal">ExportMarshaller</code>; this will clear any previous markers for your worker
        (markers are automatically linked to the worker and clearing markers for one worker leaves
        other markers untouched). For example:</p><p>
        </p><pre class="prettyprint">// Clear markers for this diagram first
clearMarkers(getResource(diagram.eResource().getURI()));</pre><p>
      </p><p>You should also use the progress monitor provided to report your progress back to the
        user because validations and/or marshalling actions can take up some time during which the
        user is forced to wait. Reporting progress requires some knowledge of how you should use
        Eclipse's features. Take a look at <a class="ulink" href="http://www.eclipse.org/articles/Article-Progress-Monitors/article.html" target="_top">this
          article</a> for a thorough explanation of the concepts and usage.</p><div class="section" title="Creating a ProcessValidator extension"><div class="titlepage"><div><div><h4 class="title"><a name="N12864"></a>Creating a ProcessValidator extension</h4></div></div></div><p>Create an extension to the
            <code class="literal">org.activiti.designer.eclipse.extension.validation.ProcessValidator</code>
          extension point in your <code class="literal">plugin.xml</code> file. For this extension point, you
          are required to subclass the <code class="literal">AbstractProcessValidator</code> class. </p><p>
          </p><pre class="prettyprint">&lt;?eclipse version="3.6"?&gt;
&lt;plugin&gt;
  &lt;extension
    point="org.activiti.designer.eclipse.extension.validation.ProcessValidator"&gt;
    &lt;ProcessValidator
      class="org.acme.validation.AcmeProcessValidator"&gt;
    &lt;/ProcessValidator&gt;
  &lt;/extension&gt;
&lt;/plugin&gt;</pre><p>
          </p><pre class="prettyprint">public class AcmeProcessValidator extends AbstractProcessValidator {
}</pre><p>
        </p><p>You have to implement a number of methods. Most importantly, implement
            <code class="literal">getValidatorId()</code> so you return a globally unique ID for your
          validator. This will enable you to invoke it from and <code class="literal">ExportMarshaller</code>,
          or event let someone <span class="emphasis"><em>else</em></span> invoke your validator from their
            <code class="literal">ExportMarshaller</code>. Implement <code class="literal">getValidatorName()</code> and
          return a logical name for your validator. This name is shown to the user in dialogs. In
            <code class="literal">getFormatName()</code>, you can return the type of diagram the validator
          typically validates.</p><p>The validation work itself is done in the <code class="literal">validateDiagram()</code> method.
          From this point on, it's up to your specific functionality what you code here. Typically,
          however, you will want to start by getting hold of the nodes in the diagram's process, so
          you can iterate through them, collect, compare and validate data. This snippet shows you
          how to do this:</p><p>
          </p><pre class="prettyprint">final EList&lt;EObject&gt; contents = getResourceForDiagram(diagram).getContents();
for (final EObject object : contents) {
  if (object instanceof StartEvent ) {
  // Perform some validations for StartEvents
  }
  // Other node types and validations
}</pre><p>
        </p><p>Don't forget to invoke <code class="literal">addProblemToDiagram()</code> and/or
            <code class="literal">addWarningToDiagram()</code>, etc as you go through your validations. Make
          sure you return a correct boolean result at the end to indicate whether you consider the
          validation as succeeded or failed. This can be used by and invoking
            <code class="literal">ExportMarshaller</code> to determine the next course of action.</p></div><div class="section" title="Creating an ExportMarshaller extension"><div class="titlepage"><div><div><h4 class="title"><a name="N128A3"></a>Creating an ExportMarshaller extension</h4></div></div></div><p>Create an extension to the
            <code class="literal">org.activiti.designer.eclipse.extension.export.ExportMarshaller</code>
          extension point in your <code class="literal">plugin.xml</code> file. For this extension point, you
          are required to subclass the <code class="literal">AbstractExportMarshaller</code> class. This
          abstract base class provides you with a number of useful methods when marshalling to your
          own format, but most importantly it allows you to save resources to the workspace and to
          invoke validators.</p><p>
          </p><pre class="prettyprint">&lt;?eclipse version="3.6"?&gt;
&lt;plugin&gt;
  &lt;extension
    point="org.activiti.designer.eclipse.extension.export.ExportMarshaller"&gt;
    &lt;ExportMarshaller
      class="org.acme.export.AcmeExportMarshaller"&gt;
    &lt;/ExportMarshaller&gt;
  &lt;/extension&gt;
  &lt;/plugin&gt;</pre><p>
          </p><pre class="prettyprint">public class AcmeExportMarshaller extends AbstractExportMarshaller {
}</pre><p>
        </p><p>You are required to implement some methods, such as
            <code class="literal">getMarshallerName()</code> and <code class="literal">getFormatName()</code>. These
          methods are used to display options to the user and to show information in progress
          dialogs, so make sure the descriptions you return reflect the functionality you are
          implementing. </p><p>The bulk of your work is performed in the <code class="literal">marshallDiagram(Diagram diagram,
            IProgressMonitor monitor)</code> method. You are provided with the diagram object,
          which contains all of the information about the objects in the diagram (BPMN constructs)
          and the graphical representation.</p><p>If you want to perform a certain validation first, you can invoke the validator
          directly from your marshaller. You receive a boolean result from the validator, so you
          know whether validation succeeded. In most cases you won't want to proceed with
          marshalling the diagram if it's not valid, but you might choose to go ahead anyway or even
          create a different resource if validation fails. For example:</p><p>
          </p><pre class="prettyprint">final boolean validDiagram = invokeValidator(AcmeConstants.ACME_VALIDATOR_ID, diagram, monitor);
if (!validDiagram) { 
  addProblemToDiagram(diagram, "Marshalling to " + getFormatName() + " format was skipped because validation of the diagram failed.", null);
} else {
  //proceed with marshalling
}</pre><p>
        </p><p>As you can see, here we have chosen to cancel the marshalling if the validator
          (identified by a constant here) returns false as result. We have also added an additional
          marker to the diagram so the user can see an explanation why the file wasn't created. This
          is not required, but seems helpful to the user and shows how you can use these utilities
          from both <code class="literal">ProcessValidator</code>s and <code class="literal">ExportMarshaller</code>s. </p><p>Once you have all the data you need, you should invoke the
            <code class="literal">saveResource()</code> method to create a file containing your data. You can
          invoke <code class="literal">saveResource()</code> as many times as you wish from a single
            <span class="markup">ExportMarshaller</span>; a marshaller can therefore be used to create more
          than one output file.</p><p>You can construct a filename for your output resource(s) by using some of the methods
          in the <code class="literal">AbstractDiagramWorker</code> class. There are a couple of useful
          variables you can have parsed, allowing you to create filenames such as
          &lt;original-filename&gt;_&lt;my-format-name&gt;.xml. These variables are described in the
          Javadocs, but here's an example how to use one of them:</p><p>
          </p><pre class="prettyprint">private static final String FILENAME_PATTERN = ExportMarshaller.PLACEHOLDER_ORIGINAL_FILENAME + ".acme.axml";
...
saveResource(getRelativeURIForDiagram(diagram, FILENAME_PATTERN), bais, this.monitor);</pre><p>
        </p><p>What happens here is that a static member is used to describe the filename pattern
          (this is just a best practice, you can specify the string any way you like of course) and
          the pattern uses the <code class="literal">ExportMarshaller.PLACEHOLDER_ORIGINAL_FILENAME</code>
          constant to insert a variable for the original filename. Later on in the
            <code class="literal">marshallDiagram()</code> method,
            <code class="literal">getRelativeURIForDiagram()</code> is invoked and it will parse the filename
          for any variables and substitute them. You provide <code class="literal">saveResource()</code> with
          an <code class="literal">InputStream</code> to your data and it will save the data to a resource
          with a relative path to the original diagram.</p><p>Again, you should also use the progress monitor provided to report your progress back
          to the user. How to do this is described in <a class="ulink" href="http://www.eclipse.org/articles/Article-Progress-Monitors/article.html" target="_top">this
            article</a>.</p></div></div></div></div><div class="chapter" title="Chapter&nbsp;13.&nbsp;Activiti Explorer"><div class="titlepage"><div><div><h2 class="title"><a name="activitiExplorer"></a>Chapter&nbsp;13.&nbsp;Activiti Explorer</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N12931">Process diagram</a></span></dt><dt><span class="section"><a href="#N1294D">Tasks</a></span></dt><dt><span class="section"><a href="#N1297D">Start process instances</a></span></dt><dt><span class="section"><a href="#N12990">My instances</a></span></dt><dt><span class="section"><a href="#N1299F">Administration</a></span></dt><dt><span class="section"><a href="#explorer.reporting">Reporting</a></span></dt><dd><dl><dt><span class="section"><a href="#explorer.reporting.json">Report data JSON</a></span></dt><dt><span class="section"><a href="#explorer.reporting.example">Example process</a></span></dt><dt><span class="section"><a href="#explorer.reporting.start.form">Report start forms</a></span></dt><dt><span class="section"><a href="#explorer.reporting.examples">Example processes</a></span></dt></dl></dd><dt><span class="section"><a href="#explorer.change.database">Changing the database</a></span></dt></dl></div><p>
    Activiti Explorer is a web application that is included when you download Activiti from the
    Activiti website. The purpose of Explorer is not a finished, end-user ready application, but 
    rather to excersise and show the functionality of Activiti. As such, Explorer is meant as a demo,
    or maybe inspiration for people using Activti in there own applications. Out of the box, Explorer 
    uses an in-memory database, but it is easy to switch to your own database (see the applicationContext files in the WEB-INF folder).
  </p><p> 
    After logging into the application, you will see three large icons that show the main capabilities.
    </p><div class="mediaobject" align="center"><img src="images/explorer.tabs.png" align="middle"></div><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <span class="bold"><strong>Tasks</strong></span>: Task management functionality.
          Here you can see user tasks from running processes that are assigned to you, or
          see group tasks which you can claim. Explorer allows to relate content, divide
          work into subtasks, involve people in different roles, etc ... Explorer can also be used
          to create standalone tasks that are not related to any process.
        </p></li><li class="listitem"><p>
          <span class="bold"><strong>Process</strong></span>: shows the deployed process definitions,
          and allows to start new process instances.
        </p></li><li class="listitem"><p>
          <span class="bold"><strong>Reporting</strong></span>: generate reports and view previously 
          saved results. See <a class="link" href="#explorer.reporting" title="Reporting">the section on reporting</a> for more details.
        </p></li><li class="listitem"><p>
          <span class="bold"><strong>Manage</strong></span>: only visible when the logged in user has 
          administrator rights. Allows to administrate the Activiti engine: manage users and groups,
          execute and see stuck jobs, see the database and deploy new process definitions.
        </p></li></ul></div><p> 
  </p><div class="section" title="Process diagram"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12931"></a>Process diagram</h2></div></div></div><p>
      The Explorer includes functionality to dynamically generate an overview of a process definition using the <a class="ulink" href="http://raphaeljs.com/" target="_top">Rapha&euml;l</a> Javascript framework.
      This process image can only be generated when the process definition XML contains BPMN DI information. When there's no BPMN DI information in the process definition XML and the deployment contains a process definition image, that image will be shown.
      </p><div class="mediaobject" align="center"><img src="images/explorer.process.definition.image.png" align="middle"></div><p>
    </p><p>
      When you don't want to use the Javascript process definition overview you can disable it in the ui.properties file
      </p><pre class="prettyprint">activiti.ui.jsdiagram = false</pre><p>
    </p><p>
      In addition to showing the process diagram in the Explorer it's also easy to include the process diagram anywhere you want.
      The following URL will show the process definition image, based on a process definition id: 
      </p><pre class="prettyprint">http://localhost:8080/activiti-explorer/diagram-viewer/index.html?processDefinitionId=reviewSaledLead:1:36</pre><p>
      It's also possible to show the current state of a process instance by adding a processInstanceId request parameter like this: 
      </p><pre class="prettyprint">http://localhost:8080/activiti-explorer/diagram-viewer/index.html?processDefinitionId=reviewSaledLead:1:36&amp;processInstanceId=41</pre><p>
    </p></div><div class="section" title="Tasks"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1294D"></a>Tasks</h2></div></div></div><p>
      </p><div class="mediaobject" align="center"><img src="images/explorer.tasks.png" align="middle"></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Inbox:</strong></span> shows the tasks where the logged in user is the assignee.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>My tasks:</strong></span> shows the tasks where the logged in user is the owner.
            When you create a standalone task, you are automatically made owner of the task.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Queued:</strong></span> shows the different groups which you are part
            of. Tasks here must first be claimed before they can be completed.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Involved:</strong></span> shows the tasks where the logged in user is
            involved with (i.e. not assignee or owner).
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Archived</strong></span> contains the past (historical) tasks.
          </p></li></ul></div><p>
    </p></div><div class="section" title="Start process instances"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1297D"></a>Start process instances</h2></div></div></div><p>
      The <span class="bold"><strong>Process definitions</strong></span> tab, allows to see all process definitions
      that are deployed to the Activiti engine. You can start new process instances using the 
      button on the top right. If the process definition has a start <a class="link" href="#forms" title="Chapter&nbsp;9.&nbsp;Forms">form</a>, the form will
      be displayed before starting the process instance.
      </p><div class="mediaobject" align="center"><img src="images/explorer.process.definitions.png" align="middle"></div><p>
    </p></div><div class="section" title="My instances"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12990"></a>My instances</h2></div></div></div><p>
      The <span class="bold"><strong>My instances</strong></span> tab, shows all the process instances 
      where you currently have an uncompleted user task. It also visually shows the current activities
      of the process instance and the stored process variables.
      </p><div class="mediaobject" align="center"><img src="images/explorer.my.instances.png" align="middle"></div><p>
    </p></div><div class="section" title="Administration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1299F"></a>Administration</h2></div></div></div><p>
      The administration functionality is only available when the logged in user is part
      of the security group <span class="emphasis"><em>admin</em></span>.
      When clicking the <span class="emphasis"><em>Manage</em></span> icon, following tabs are available:
      
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Database:</strong></span> Shows the content of the database.
            Extremely useful when developing processes or troubleshooting problems.
            </p><div class="mediaobject" align="center"><img src="images/explorer.database.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Deployments:</strong></span>
            Shows the current deployments of the engine, and see the content of a deployment (process definitions, images, business rules, etc.)
            </p><div class="mediaobject" align="center"><img src="images/explorer.deployments.png" align="middle"></div><p>
            You can also upload new deployments when clicking the <span class="emphasis"><em>deployment</em></span> tab.
            Select a business archive or a bpmn20.xml file from your computer, or simply drag and drop to
            the designated area to deploy the new business processes.
            </p><div class="mediaobject" align="center"><img src="images/explorer.upload.deployment.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Jobs:</strong></span> Shows the current jobs (timers, etc.) on the left
            and allows to manually execute them (e.g. firing a timer before the deadline). Also
            shows any exceptions, if the jobs failed to execute (e.g. mail server could not be reached)
            </p><div class="mediaobject" align="center"><img src="images/explorer.jobs.png" align="middle"></div><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Users and Groups:</strong></span> manage the users and groups: create, edit and delete 
            users and groups. Relate users to groups such they have more privileges or they can see
            tasks assigned to specific groups.
            </p><div class="mediaobject" align="center"><img src="images/explorer.users.png" align="middle"></div><p>
          </p></li></ul></div><p>
       
    </p></div><div class="section" title="Reporting"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="explorer.reporting"></a>Reporting</h2></div></div></div><p>
      Activiti Explorer ships with some report examples and has the capability to easily
      add new reports to the system. The report functionality is grouped under the 
      main tab <span class="emphasis"><em>'Reports'</em></span>.
      </p><div class="mediaobject" align="center"><img src="images/explorer.reporting.png" align="middle"></div><p>
      <span class="bold"><strong>Important</strong></span>: for reporting to work, Explorer needs to 
      be configured with a history level different from none. The default configuration 
      fulfills this requirement.                       
    </p><p>
        The reporting tab currently shows two sub-tabs:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    <span class="bold"><strong>Generate reports</strong></span>: shows a list of all reports
                    known to the system. Allows to run the report generation.
                </p></li><li class="listitem"><p>
                    <span class="bold"><strong>Saved reports</strong></span>: shows a list of all reports
                    that were previously saved. Note that these are personal saved reports only,
                    and it is not possible to see the saved reports of someone else.
                </p></li></ul></div><p>
    </p><p>
      The data that is used to create lists and charts in the report is generated by a process.
      While this may seem odd at first, using a process to generate the report data has several advantages
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                The process has straight access to the internals of the Activiti engine. It has
                direct access to the database used by the engine.
            </p></li><li class="listitem"><p>
                The job executor can be used as for any other process. This means that
                you can asynchronously generate the process or only execute certain steps
                asynchronously. It also means you can use timers, eg. to generate the report data
                on certain points in time.
            </p></li><li class="listitem"><p>
                Creating a new report can be done with known tools and known concepts.
                Also, no new concepts, services or applications are needed. Deploying or
                uploading a new report is the same as deploying a new process.
            </p></li><li class="listitem"><p>
                It allows to use the BPMN 2.0 constructs. This means that all things like 
                parallel steps, do branching based on data or even request user input during the generation
                are possible out-of-the-box.
            </p></li></ul></div><p> 
      
      Process definitions that generate report data need to have <span class="bold"><strong>'activiti-report' as category</strong></span> 
      to be seen in the list of known reports in Explorer. A 'report process' can be as simple or as complex as wanted.
      The only requirement to actually be able to see the report, is that the process produces a variable
      called <span class="bold"><strong>reportData</strong></span> is created. This variable must be a byte array representation
      of a json object. This variable is stored in the hisory tables of Activiti
      (hence the requirement that history must be enabled for the engine) so it can be retrieved later 
      when the report is saved. 
      </p><div class="mediaobject" align="center"><img src="images/explorer.reporting.explained.png" align="middle"></div><p>
    </p><div class="section" title="Report data JSON"><div class="titlepage"><div><div><h3 class="title"><a name="explorer.reporting.json"></a>Report data JSON</h3></div></div></div><p>
          A report process must generate a variable <span class="emphasis"><em>reportData</em></span> that is a JSON representation
          of the data that must be displayed to the user. The json should look as follows:
          </p><pre class="prettyprint">
{
  "title": "My Report",
  "datasets": [
    {
      "type" : "lineChart",
      "description" : "My first chart",
      "xaxis" : "Category"
      "yaxis" : "Total sales"
      "data" : 
      {
        "A" : 50,
        "B" : 33,
        "C" : 17,
        "D" : 87,
      }
    }
  ]
}          
          </pre><p>
          This json will be fetched at runtime in Explorer and will be used to generate 
          charts or lists. The elements in the json are:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>title</strong></span>: this is the general title for the whole report</p></li><li class="listitem"><p><span class="bold"><strong>datasets</strong></span>: this is an array of datasets corresponding with
                the different charts and lists on the report.</p></li><li class="listitem"><p><span class="bold"><strong>type</strong></span>Each dataset has a type. This type will be used
                to determine how the data will be rendered. Currently supported values are:
                <span class="bold"><strong>pieChart, lineChart, barChart and list.</strong></span></p></li><li class="listitem"><p><span class="bold"><strong>description</strong></span>: each chart can have an optional description
                that will be shown in the report.</p></li><li class="listitem"><p><span class="bold"><strong>x- and yaxis</strong></span>: only usable for type <span class="emphasis"><em>lineChart</em></span>.
                Optional parameter that determines the name of the axes of the chart</p></li><li class="listitem"><p><span class="bold"><strong>data</strong></span>: this is the actual data. The data is a json 
                object with key-value elements.</p></li></ul></div><p>
        </p></div><div class="section" title="Example process"><div class="titlepage"><div><div><h3 class="title"><a name="explorer.reporting.example"></a>Example process</h3></div></div></div><p>
            The following example shows a 'process instance overview' report. The process itself is very easy and
            contains only a script task (besides start and end) that generates the json dataset using javascript. Altough all of the 
            examples in Explorer use scripting, this can very well be done using Java service tasks. The end result of
            running the process should just be the <span class="emphasis"><em>reportData</em></span> variable that contains the data.
        </p><p>
            <span class="bold"><strong>Important note:</strong></span> The following example only works on JDK 7+.
            The reason for this is that the javascript engine (<span class="emphasis"><em>Rhino</em></span>) that is shipped
            with older JDK versions isn't advanced enough to cope with some constructs needed to write
            scripts like the one below. See below for a JDK 6+ compliant example.
        </p><p>
            </p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activiti="http://activiti.org/bpmn"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema"
    expressionLanguage="http://www.w3.org/1999/XPath" 
    targetNamespace="activiti-report"&gt;

    &lt;process id="process-instance-overview-report" name="Process Instance Overview" isExecutable="true"&gt;
    
        &lt;startEvent id="startevent1" name="Start" /&gt;
        &lt;sequenceFlow id="flow1" sourceRef="startevent1" targetRef="generateDataset" /&gt;
        
        &lt;scriptTask id="generateDataset" name="Execute script" scriptFormat="JavaScript" activiti:autoStoreVariables="false"&gt;
          &lt;script&gt;&lt;![CDATA[
          
               importPackage(java.sql);
               importPackage(java.lang);
               importPackage(org.activiti.explorer.reporting);
               
               var result = ReportingUtil.executeSelectSqlQuery("SELECT PD.NAME_, PD.VERSION_ , count(*) FROM ACT_HI_PROCINST PI inner join ACT_RE_PROCDEF PD on PI.PROC_DEF_ID_ = PD.ID_ group by PROC_DEF_ID_");
            
               var reportData = {};
               reportData.datasets = [];
               
               var dataset = {};
               dataset.type = "pieChart";
               dataset.description = "Process instance overview (" + new java.util.Date() + ")";
               dataset.data = {};
            
               while (result.next()) { // process results one row at a time
                 var name = result.getString(1);
                 var version = result.getLong(2)
                 var count = result.getLong(3);
                 dataset.data[name + " (v" + version + ")"] = count;
               }
               reportData.datasets.push(dataset);
               
               execution.setVariable("reportData", new java.lang.String(JSON.stringify(reportData)).getBytes("UTF-8"));
          ]]&gt;&lt;/script&gt;
        &lt;/scriptTask&gt;
        &lt;sequenceFlow id="flow3" sourceRef="generateDataset" targetRef="theEnd" /&gt;
        
        &lt;endEvent id="theEnd" /&gt;
        
    &lt;/process&gt;

&lt;/definitions&gt;            
            </pre><p>
       </p><p>    
            Besides the typical XML linea at the top of the process xml, the main difference is that the 
            <span class="emphasis"><em>targetNamespace</em></span> is set to <span class="bold"><strong>activiti-report</strong></span>,
            adding the category with the same name to the deployed process definition.
        </p><p>
            The first lines of the script are just some imports to avoid having to type the package names
            all the time. The first line of interest is where the <span class="emphasis"><em>ReportingUtil</em></span> is used
            to query the Activiti database. The result of that call is a regular <span class="emphasis"><em>JDBC Resultset</em></span>.
            In the lines following the query, the javascript capabilities to easily create json is used. 
            The json that is produced matches <a class="link" href="#explorer.reporting.json" title="Report data JSON">the requirements</a>.
        </p><p>
            The last line of the script may seem a bit odd. The first thing we need to do is to convert
            the json object to a string by using the javascript function <span class="emphasis"><em>JSON.stringify()</em></span>.
            This string then needs to be stored as a byte array variable. The reason for this is technical:
            a byte array is unlimited in size while the string is not. That is why the javascript string
            must be converted to a Java string which has the capability to get the byte representation.
        </p><p>
            The same process which is compatible with JDK 6 (and higher) looks a bit different. The native
            json capabilities cannot be used, hence some helper classes (<span class="emphasis"><em>ReportData</em></span> and <span class="emphasis"><em>Dataset</em></span>)
            are provided:
            </p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activiti="http://activiti.org/bpmn"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema"
    expressionLanguage="http://www.w3.org/1999/XPath" 
    targetNamespace="activiti-report"&gt;

    &lt;process id="process-instance-overview-report" name="Process Instance Overview" isExecutable="true"&gt;
    
        &lt;startEvent id="startevent1" name="Start" /&gt;
        &lt;sequenceFlow id="flow1" sourceRef="startevent1" targetRef="generateDataset" /&gt;
        
        &lt;scriptTask id="generateDataset" name="Execute script" scriptFormat="js" activiti:autoStoreVariables="false"&gt;
          &lt;script&gt;&lt;![CDATA[
          
               importPackage(java.sql);
               importPackage(java.lang);
               importPackage(org.activiti.explorer.reporting);
               
               var result = ReportingUtil.executeSelectSqlQuery("SELECT PD.NAME_, PD.VERSION_ , count(*) FROM ACT_HI_PROCINST PI inner join ACT_RE_PROCDEF PD on PI.PROC_DEF_ID_ = PD.ID_ group by PROC_DEF_ID_");

<span class="bold"><strong>            
               var reportData = new ReportData;
               var dataset = reportData.newDataset();
               dataset.type = "pieChart";
               dataset.description = "Process instance overview (" + new java.util.Date() + ")"
</strong></span>               
               
               while (result.next()) { // process results one row at a time
                 var name = result.getString(1);
                 var version = result.getLong(2);
                 var count = result.getLong(3);
                 <span class="bold"><strong>dataset.add(name + " (v" + version + ")", count);</strong></span>
               }
               
               execution.setVariable("reportData", reportData.toBytes());
               
          ]]&gt;&lt;/script&gt;
        &lt;/scriptTask&gt;
        &lt;sequenceFlow id="flow3" sourceRef="generateDataset" targetRef="theEnd" /&gt;
        
        &lt;endEvent id="theEnd" /&gt;
        
    &lt;/process&gt;

&lt;/definitions&gt;            
            </pre><p>
        </p></div><div class="section" title="Report start forms"><div class="titlepage"><div><div><h3 class="title"><a name="explorer.reporting.start.form"></a>Report start forms</h3></div></div></div><p>
            As reports are generated by regular processes, the regular form capabilities can be used.
            Simply add a start form to the start event and Explorer will display the form to the user
            before generating the process.
            </p><pre class="prettyprint">
&lt;startEvent id="startevent1" name="Start"&gt;
  &lt;extensionElements&gt;
    &lt;activiti:formProperty id="processDefinition" name="Select process definition" type="processDefinition" required="true" /&gt;
      &lt;activiti:formProperty id="chartType" name="Chart type" type="enum" required="true"&gt;
        &lt;activiti:value id="pieChart" name="Pie chart" /&gt;
        &lt;activiti:value id="barChart" name="Bar chart" /&gt;
      &lt;/activiti:formProperty&gt;
  &lt;/extensionElements&gt;
&lt;/startEvent&gt;            
            </pre><p>
            which is rendered to the user as a typical form:
            </p><div class="mediaobject" align="center"><img src="images/explorer.reporting.start.form.png" align="middle"></div><p>
            The form properties are submitted when starting the process and they are available
            as normal execution variables that can be used within the script that generates the data:
            </p><pre class="prettyprint"> var processDefinition = execution.getVariable("processDefinition");</pre><p>
        </p></div><div class="section" title="Example processes"><div class="titlepage"><div><div><h3 class="title"><a name="explorer.reporting.examples"></a>Example processes</h3></div></div></div><p>
            By default, Explorer contains four example reports:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        <span class="bold"><strong>Employee productivity</strong></span>: this report 
                        demonstrates the use of a line chart and using a a start form.
                        The script in this report is also complexer as in the other examples,
                        as the data that is fetched is interpreted by the script before stored
                        in the report data.
                    </p></li><li class="listitem"><p>
                        <span class="bold"><strong>Helpdesk - firstline vs escalated</strong></span>: shows the 
                        use of a pie chart and combines the result of two separate database queries.
                    </p></li><li class="listitem"><p>
                        <span class="bold"><strong>Process instance overview</strong></span>: this is an example
                        of a report where multiple datasets are used. The report contains a pie chart
                        and a list view of the same data, thus showing how multiple datasets can be 
                        used to generate a page with several charts.
                    </p></li><li class="listitem"><p>
                        <span class="bold"><strong>Task duration</strong></span>: another example of using a start form
                        and using the corresponding variables to build the SQL query dynamically.
                    </p></li></ul></div><p>
        </p></div></div><div class="section" title="Changing the database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="explorer.change.database"></a>Changing the database</h2></div></div></div><p>
      To change the database that Explorer uses in the demo setup, change the properties file <code class="literal">apps/apache-tomcat-6.x/webapps/activiti-explorer/WEB-INF/classes/db.properties</code>.
      Also, place a suitable database driver on the classpath (Tomcat shared libs or in <code class="literal">apps/apache-tomcat-6.x/webapps/activiti-explorer/WEB-INF/lib/</code>).
    </p></div></div><div class="chapter" title="Chapter&nbsp;14.&nbsp;Activiti Modeler"><div class="titlepage"><div><div><h2 class="title"><a name="activitiModeler"></a>Chapter&nbsp;14.&nbsp;Activiti Modeler</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N12B04">Model editing</a></span></dt><dt><span class="section"><a href="#N12B0F">Importing existing models</a></span></dt><dt><span class="section"><a href="#N12B1A">Convert deployed definitions to a editeable model</a></span></dt><dt><span class="section"><a href="#N12B25">Export model to BPMN XML</a></span></dt><dt><span class="section"><a href="#N12B30">Deploy model to the Activiti Engine</a></span></dt></dl></div><p>
    Activiti Modeler is a BPMN web modeler component that's available as part of the <a class="link" href="#activitiExplorer" title="Chapter&nbsp;13.&nbsp;Activiti Explorer">Activiti Explorer</a> web application. 
    The Modeler is a fork of the <a class="ulink" href="http://code.google.com/p/signavio-core-components/" target="_top">Signavio Core Components</a> project.
    The initial development of the new Activiti Modeler is donated to the Activiti project by <a class="ulink" href="http://kisbpm.com" target="_top">KIS BPM</a>.
    A main difference with the previous Activiti Modeler (Signavio Core Components) is that that the new modeler is maintained and developed as part of the Activiti project.
    The goal of the Activiti Modeler is to support all the BPMN elements and extension supported by the Activiti Engine.
  </p><p> 
    When you run the Activiti Explorer with the default configuration one demo process will be available in the model workspace.
    </p><div class="mediaobject" align="center"><img src="images/modeler.example.process.png" align="middle"></div><p>
  </p><div class="section" title="Model editing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12B04"></a>Model editing</h2></div></div></div><p>
      When you click on the edit button in the model workspace the model will be opened in the modeler.
      On the left side of the screen the available palette of BPMN elements and Activiti extensions is available.
      You can drag and drop new elements on the canvas when needed. On the right side of the screen the attributes of a selected element can be filled-in.
      In the example screenshot a user task is selected and you can fill-in user task attributes like assignment, form properties and due date.
      To return to the Activiti Explorer you can click the close button at the top right of the screen.
      </p><div class="mediaobject" align="center"><img src="images/modeler.editor.canvas.png" align="middle"></div><p>
    </p></div><div class="section" title="Importing existing models"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12B0F"></a>Importing existing models</h2></div></div></div><p>
      You can also import existing models into the model workspace to edit them in the Activiti Modeler.
      Click on the import button and select a .bpmn or .bpmn20.xml file. Note that the BPMN XML file should contain BPMN DI information.
      </p><div class="mediaobject" align="center"><img src="images/modeler.import.png" align="middle"></div><p>
    </p></div><div class="section" title="Convert deployed definitions to a editeable model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12B1A"></a>Convert deployed definitions to a editeable model</h2></div></div></div><p>
      Deployed process definition can be converted into models that can be edited by the Activiti Modeler.
      Note that the process definition should contain BPMN DI information.
      </p><div class="mediaobject" align="center"><img src="images/modeler.convert.png" align="middle"></div><p>
    </p></div><div class="section" title="Export model to BPMN XML"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12B25"></a>Export model to BPMN XML</h2></div></div></div><p>
      A model in the model workspace can be exported to a BPMN XML file. Select the export option in the model action select box.
      </p><div class="mediaobject" align="center"><img src="images/modeler.export.png" align="middle"></div><p>
    </p></div><div class="section" title="Deploy model to the Activiti Engine"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12B30"></a>Deploy model to the Activiti Engine</h2></div></div></div><p>
      When a model contains all the attributes necessary to be executed, it can be deployed to the Activiti Engine.
      Select the deploy option in the model action select box.
      </p><div class="mediaobject" align="center"><img src="images/modeler.deploy.png" align="middle"></div><p>
    </p></div></div><div class="chapter" title="Chapter&nbsp;15.&nbsp;REST API"><div class="titlepage"><div><div><h2 class="title"><a name="N12B3B"></a>Chapter&nbsp;15.&nbsp;REST API</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N12B3E">General Activiti REST principles</a></span></dt><dd><dl><dt><span class="section"><a href="#N12B41">Installation and Authentication</a></span></dt><dt><span class="section"><a href="#restUsageInTomcat">Usage in Tomcat</a></span></dt><dt><span class="section"><a href="#N12B8D">Methods and return-codes</a></span></dt><dt><span class="section"><a href="#N12C10">Error response body</a></span></dt><dt><span class="section"><a href="#N12C17">Request parameters</a></span></dt></dl></dd><dt><span class="section"><a href="#N12E3E">Deployment</a></span></dt><dd><dl><dt><span class="section"><a href="#N12E49">List of Deployments</a></span></dt><dt><span class="section"><a href="#N12EC0">Get a deployment</a></span></dt><dt><span class="section"><a href="#N12F06">Create a new deployment</a></span></dt><dt><span class="section"><a href="#N12F41">Delete a deployment</a></span></dt><dt><span class="section"><a href="#N12F7E">List resources in a deployment</a></span></dt><dt><span class="section"><a href="#N12FE8">Get a deployment resource</a></span></dt><dt><span class="section"><a href="#N13059">Get a deployment resource content</a></span></dt></dl></dd><dt><span class="section"><a href="#N130AA">Process Definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#N130AD">List of process definitions</a></span></dt><dt><span class="section"><a href="#N13192">Get a process definition</a></span></dt><dt><span class="section"><a href="#N131E9">Update category for a process definition</a></span></dt><dt><span class="section"><a href="#N13221">Get a process definition resource content</a></span></dt><dt><span class="section"><a href="#N13250">Get a process definition BPMN model</a></span></dt><dt><span class="section"><a href="#N1329B">Suspend a process definition</a></span></dt><dt><span class="section"><a href="#N132FE">Activate a process definition</a></span></dt><dt><span class="section"><a href="#N1333A">Get all candidate starters for a process-definition</a></span></dt><dt><span class="section"><a href="#N13380">Add a candidate starter to a process definition</a></span></dt><dt><span class="section"><a href="#N133D8">Delete a candidate starter from a process definition</a></span></dt><dt><span class="section"><a href="#N13436">Get a candidate starter from a process definition</a></span></dt></dl></dd><dt><span class="section"><a href="#N13494">Models</a></span></dt><dd><dl><dt><span class="section"><a href="#N13497">Get a list of models</a></span></dt><dt><span class="section"><a href="#N1355F">Get a model</a></span></dt><dt><span class="section"><a href="#N135A5">Update a model</a></span></dt><dt><span class="section"><a href="#N135DB">Create a model</a></span></dt><dt><span class="section"><a href="#N13609">Delete a model</a></span></dt><dt><span class="section"><a href="#N13646">Get the editor source for a model</a></span></dt><dt><span class="section"><a href="#N1368C">Set the editor source for a model</a></span></dt><dt><span class="section"><a href="#N136DB">Get the extra editor source for a model</a></span></dt><dt><span class="section"><a href="#N13721">Set the extra editor source for a model</a></span></dt></dl></dd><dt><span class="section"><a href="#N13770">Process Instances</a></span></dt><dd><dl><dt><span class="section"><a href="#N13773">Get a process instance</a></span></dt><dt><span class="section"><a href="#N137B9">Delete a process instance</a></span></dt><dt><span class="section"><a href="#N137F6">Activate or suspend a process instance</a></span></dt><dt><span class="section"><a href="#N1384F">Start a process instance</a></span></dt><dt><span class="section"><a href="#restProcessInstancesGet">List of process instances</a></span></dt><dt><span class="section"><a href="#N13966">Query process instances</a></span></dt><dt><span class="section"><a href="#N139A7">Get diagram for a process instance</a></span></dt><dt><span class="section"><a href="#N139F2">Get involved people for process instance</a></span></dt><dt><span class="section"><a href="#N13A3B">Add an involved user to a process instance</a></span></dt><dt><span class="section"><a href="#N13A98">Remove an involved user to from process instance</a></span></dt><dt><span class="section"><a href="#N13AF3">List of variables for a process instance</a></span></dt><dt><span class="section"><a href="#N13B42">Get a variable for a process instance</a></span></dt><dt><span class="section"><a href="#N13B9F">Create (or update) variables on a process instance</a></span></dt><dt><span class="section"><a href="#N13C08">Update a single variable on a process instance</a></span></dt><dt><span class="section"><a href="#N13C70">Create a new binary variable on a process-instance</a></span></dt><dt><span class="section"><a href="#N13CDB">Update an existing binary variable on a process-instance</a></span></dt></dl></dd><dt><span class="section"><a href="#N13D41">Executions</a></span></dt><dd><dl><dt><span class="section"><a href="#N13D44">Get an execution</a></span></dt><dt><span class="section"><a href="#N13D8A">Execute an action on an execution</a></span></dt><dt><span class="section"><a href="#N13E01">Get active activities in an execution</a></span></dt><dt><span class="section"><a href="#restExecutionsGet">List of executions</a></span></dt><dt><span class="section"><a href="#N13EE2">Query executions</a></span></dt><dt><span class="section"><a href="#N13F29">List of variables for an execution</a></span></dt><dt><span class="section"><a href="#N13F81">Get a variable for an execution</a></span></dt><dt><span class="section"><a href="#N13FE7">Create (or update) variables on an execution</a></span></dt><dt><span class="section"><a href="#N14054">Update a variable on an execution</a></span></dt><dt><span class="section"><a href="#N140B3">Create a new binary variable on an execution</a></span></dt><dt><span class="section"><a href="#N14126">Update an existing binary variable on a process-instance</a></span></dt></dl></dd><dt><span class="section"><a href="#N1419D">Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#N141A0">Get a task</a></span></dt><dt><span class="section"><a href="#restTasksGet">List of tasks</a></span></dt><dt><span class="section"><a href="#N14345">Query for tasks</a></span></dt><dt><span class="section"><a href="#N14388">Update a task</a></span></dt><dt><span class="section"><a href="#N143C3">Task actions</a></span></dt><dt><span class="section"><a href="#N14428">Delete a task</a></span></dt><dt><span class="section"><a href="#N1447F">Get all variables for a task</a></span></dt><dt><span class="section"><a href="#N144D8">Get a variable from a task</a></span></dt><dt><span class="section"><a href="#N1453A">Get the binary data for a variable</a></span></dt><dt><span class="section"><a href="#N145AA">Create new variables on a task</a></span></dt><dt><span class="section"><a href="#N14621">Create a new binary variable on a task</a></span></dt><dt><span class="section"><a href="#N14697">Update an existing variable on a task</a></span></dt><dt><span class="section"><a href="#N14712">Updating a binary variable on a task</a></span></dt><dt><span class="section"><a href="#N1478C">Delete a variable on a task</a></span></dt><dt><span class="section"><a href="#N147E4">Delete all local variables on a task</a></span></dt><dt><span class="section"><a href="#N14821">Get all identity links for a task</a></span></dt><dt><span class="section"><a href="#N14867">Get all identitylinks for a task for either groups or users</a></span></dt><dt><span class="section"><a href="#N14871">Get a single identity link on a task</a></span></dt><dt><span class="section"><a href="#N148D8">Create an identity link on a task</a></span></dt><dt><span class="section"><a href="#N14930">Delete an identity link on a task</a></span></dt><dt><span class="section"><a href="#N1498E">Create a new comment on a task</a></span></dt><dt><span class="section"><a href="#N149E0">Get all comments on a task</a></span></dt><dt><span class="section"><a href="#N14A24">Get a comment on a task</a></span></dt><dt><span class="section"><a href="#N14A71">Delete a comment on a task</a></span></dt><dt><span class="section"><a href="#N14AB4">Get all events for a task</a></span></dt><dt><span class="section"><a href="#N14AF8">Get an event on a task</a></span></dt><dt><span class="section"><a href="#N14B45">Create a new attachment on a task, containing a link to an external resource</a></span></dt><dt><span class="section"><a href="#N14B97">Create a new attachment on a task, with an attached file</a></span></dt><dt><span class="section"><a href="#N14BFA">Get all attachments on a task</a></span></dt><dt><span class="section"><a href="#N14C3E">Get an attachment on a task</a></span></dt><dt><span class="section"><a href="#N14CA1">Get the content for an attachment</a></span></dt><dt><span class="section"><a href="#N14CF3">Delete an attachment on a task</a></span></dt></dl></dd><dt><span class="section"><a href="#N14D36">History</a></span></dt><dd><dl><dt><span class="section"><a href="#N14D39">Get a historic process instance</a></span></dt><dt><span class="section"><a href="#restHistoricProcessInstancesGet">List of historic process instances</a></span></dt><dt><span class="section"><a href="#N14E29">Query for historic process instances</a></span></dt><dt><span class="section"><a href="#N14E69">Delete a historic process instance</a></span></dt><dt><span class="section"><a href="#N14E8A">Get the identity links of a historic process instance</a></span></dt><dt><span class="section"><a href="#N14EB4">Get the binary data for a historic process instance variable</a></span></dt><dt><span class="section"><a href="#N14EE7">Get a single historic task instance</a></span></dt><dt><span class="section"><a href="#restHistoricTaskInstancesGet">Get historic task instances</a></span></dt><dt><span class="section"><a href="#N1505E">Query for historic task instances</a></span></dt><dt><span class="section"><a href="#N150A1">Delete a historic task instance</a></span></dt><dt><span class="section"><a href="#N150C2">Get the identity links of a historic task instance</a></span></dt><dt><span class="section"><a href="#N150EC">Get the binary data for a historic task instance variable</a></span></dt><dt><span class="section"><a href="#restHistoricActivityInstancesGet">Get historic activity instances</a></span></dt><dt><span class="section"><a href="#N151B8">Query for historic activity instances</a></span></dt><dt><span class="section"><a href="#restHistoricVariableInstancesGet">List of historic variable instances</a></span></dt><dt><span class="section"><a href="#N15266">Query for historic variable instances</a></span></dt><dt><span class="section"><a href="#N152A6">Get the binary data for a historic task instance variable</a></span></dt><dt><span class="section"><a href="#restHistoricDetailGet">Get historic detail</a></span></dt><dt><span class="section"><a href="#N15360">Query for historic details</a></span></dt><dt><span class="section"><a href="#N15399">Get the binary data for a historic detail variable</a></span></dt></dl></dd><dt><span class="section"><a href="#N153CC">Forms</a></span></dt><dd><dl><dt><span class="section"><a href="#N153CF">Get form data</a></span></dt><dt><span class="section"><a href="#N1541E">Submit task form data</a></span></dt></dl></dd><dt><span class="section"><a href="#N1545A">Database tables</a></span></dt><dd><dl><dt><span class="section"><a href="#N1545D">List of tables</a></span></dt><dt><span class="section"><a href="#N15482">Get a single table</a></span></dt><dt><span class="section"><a href="#N154C6">Get column info for a single table</a></span></dt><dt><span class="section"><a href="#N1550A">Get row data for a single table</a></span></dt></dl></dd><dt><span class="section"><a href="#N15588">Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#N1558B">Get engine properties</a></span></dt><dt><span class="section"><a href="#N155B0">Get engine info</a></span></dt></dl></dd><dt><span class="section"><a href="#N155D5">Jobs</a></span></dt><dd><dl><dt><span class="section"><a href="#N155D8">Get a single job</a></span></dt><dt><span class="section"><a href="#N1561C">Delete a job</a></span></dt><dt><span class="section"><a href="#N15659">Execute a single job</a></span></dt><dt><span class="section"><a href="#N156A1">Get the exception stacktrace for a job</a></span></dt><dt><span class="section"><a href="#N156DD">Get a list of jobs</a></span></dt></dl></dd><dt><span class="section"><a href="#N157A4">Users</a></span></dt><dd><dl><dt><span class="section"><a href="#N157A7">Get a single user</a></span></dt><dt><span class="section"><a href="#N157EB">Get a list of users</a></span></dt><dt><span class="section"><a href="#N15884">Update a user</a></span></dt><dt><span class="section"><a href="#N158BF">Create a user</a></span></dt><dt><span class="section"><a href="#N158F2">Delete a user</a></span></dt><dt><span class="section"><a href="#N1592F">Get a user's picture</a></span></dt><dt><span class="section"><a href="#N15970">Updating a user's picture</a></span></dt><dt><span class="section"><a href="#N159C0">List a user's info</a></span></dt><dt><span class="section"><a href="#N15A04">Get a user's info</a></span></dt><dt><span class="section"><a href="#N15A51">Update a user's info</a></span></dt><dt><span class="section"><a href="#N15AAC">Create a new user's info entry</a></span></dt><dt><span class="section"><a href="#N15B06">Delete a user's info</a></span></dt></dl></dd><dt><span class="section"><a href="#N15B4C">Groups</a></span></dt><dd><dl><dt><span class="section"><a href="#N15B4F">Get a single group</a></span></dt><dt><span class="section"><a href="#N15B93">Get a list of groups</a></span></dt><dt><span class="section"><a href="#N15C0E">Update a group</a></span></dt><dt><span class="section"><a href="#N15C46">Create a group</a></span></dt><dt><span class="section"><a href="#N15C79">Delete a group</a></span></dt><dt><span class="section"><a href="#N15CB6">Get members in a group</a></span></dt><dt><span class="section"><a href="#N15CC1">Add a member to a group</a></span></dt><dt><span class="section"><a href="#N15D1A">Delete a member from a group</a></span></dt></dl></dd><dt><span class="section"><a href="#N15D6A">Legacy REST - General Usage</a></span></dt><dt><span class="section"><a href="#N15D82">Repository</a></span></dt><dd><dl><dt><span class="section"><a href="#N15D86">Upload Deployment</a></span></dt><dt><span class="section"><a href="#N15DAA">Get Deployments</a></span></dt><dt><span class="section"><a href="#N15DCE">Get Deployment Resources</a></span></dt><dt><span class="section"><a href="#N15DF2">Get Deployment Resource</a></span></dt><dt><span class="section"><a href="#N15E16">Delete Deployment</a></span></dt><dt><span class="section"><a href="#N15E3A">Delete Deployments</a></span></dt></dl></dd><dt><span class="section"><a href="#N15E62">Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#N15E65">Get Process Engine</a></span></dt></dl></dd><dt><span class="section"><a href="#N15E8A">Processes</a></span></dt><dd><dl><dt><span class="section"><a href="#N15E8D">List Process Definitions</a></span></dt><dt><span class="section"><a href="#N15EB1">Get Process Definition Form Properties</a></span></dt><dt><span class="section"><a href="#N15ED5">Get Process Definition Form Resource</a></span></dt><dt><span class="section"><a href="#N15EF9">Get Process Definition Diagram</a></span></dt><dt><span class="section"><a href="#N15F1D">Start Process Instance</a></span></dt><dt><span class="section"><a href="#N15F44">List Process Instances</a></span></dt><dt><span class="section"><a href="#N15F68">Get Process Instance Details</a></span></dt><dt><span class="section"><a href="#N15F8C">Get Process Instance Diagram</a></span></dt><dt><span class="section"><a href="#N15FB0">Get open tasks for a process instance</a></span></dt><dt><span class="section"><a href="#N15FD4">Signal an activity (receive task) for a specific process instance</a></span></dt><dt><span class="section"><a href="#N15FFB">Trigger a signal for a specific process instance</a></span></dt></dl></dd><dt><span class="section"><a href="#N16023">Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#N16026">Get Task Summary</a></span></dt><dt><span class="section"><a href="#N1604A">List Tasks</a></span></dt><dt><span class="section"><a href="#N16078">Get Task</a></span></dt><dt><span class="section"><a href="#N1609C">Get Task Form</a></span></dt><dt><span class="section"><a href="#N160C0">Perform Task Operation</a></span></dt><dt><span class="section"><a href="#N160E8">List Form Properties</a></span></dt><dt><span class="section"><a href="#N1610C">Add attachment to a task</a></span></dt><dt><span class="section"><a href="#N16131">Get task attachment</a></span></dt><dt><span class="section"><a href="#N16155">Add url to a task</a></span></dt></dl></dd><dt><span class="section"><a href="#N1617B">Identity</a></span></dt><dd><dl><dt><span class="section"><a href="#N1617E">Login</a></span></dt><dt><span class="section"><a href="#N161A5">Get User</a></span></dt><dt><span class="section"><a href="#N161C9">List User's Groups</a></span></dt><dt><span class="section"><a href="#N161EB">Search users</a></span></dt><dt><span class="section"><a href="#N16210">Create user</a></span></dt><dt><span class="section"><a href="#N1623A">Add user to groups</a></span></dt><dt><span class="section"><a href="#N16261">Remove user from group</a></span></dt><dt><span class="section"><a href="#N16285">Get user picture</a></span></dt><dt><span class="section"><a href="#N162A9">Get Group</a></span></dt><dt><span class="section"><a href="#N162CD">List Group Users</a></span></dt><dt><span class="section"><a href="#N162EF">Search groups</a></span></dt><dt><span class="section"><a href="#N16311">Create group</a></span></dt><dt><span class="section"><a href="#N1633B">Add users to a group</a></span></dt><dt><span class="section"><a href="#N16362">Remove user from group</a></span></dt></dl></dd><dt><span class="section"><a href="#N16387">Management</a></span></dt><dd><dl><dt><span class="section"><a href="#N1638A">List Jobs</a></span></dt><dt><span class="section"><a href="#N163AE">Get Job</a></span></dt><dt><span class="section"><a href="#N163D2">Execute Job</a></span></dt><dt><span class="section"><a href="#N163F6">Execute Jobs</a></span></dt><dt><span class="section"><a href="#N1641D">List Database Tables</a></span></dt><dt><span class="section"><a href="#N16441">Get Table Meta Data</a></span></dt><dt><span class="section"><a href="#N16463">Get Table Data</a></span></dt></dl></dd></dl></div><div class="section" title="General Activiti REST principles"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12B3E"></a>General Activiti REST principles</h2></div></div></div><div class="section" title="Installation and Authentication"><div class="titlepage"><div><div><h3 class="title"><a name="N12B41"></a>Installation and Authentication</h3></div></div></div><p>Activiti includes a REST API to the Activiti Engine that can be installed by deploying the activiti-rest.war file to a servlet container like Apache Tomcat. However, it can also be used in another web-application by including the servlet and it's mapping in your application and add all activiti-rest dependencies to the classpath.</p><p>By default the Activiti Engine will connect to an in-memory H2 database. You can change the database settings in the db.properties file in the WEB-INF/classes folder. The REST API uses JSON format (http://www.json.org) and is built upon the Restlet (http://www.restlet.org).</p><p>All REST-resources require a valid Activiti-user to be authenticated by default. Basic HTTP access authentication is used, so you should always include a <code class="literal">Authorization: Basic ...==</code> HTTP-header when performing requests or include the username and password in the request-url (eg. <code class="literal">http://username:password@localhost...</code>).
      </p><p><span class="bold"><strong>It's recommended to use Basic Authentication in combination with HTTPS.</strong></span></p><p>It's possible to remove authentication from certain resources or adding additional authorisation on top of being an authenticated user (eg. being part of group X allows a user to execute request with URL Y). 
      This can be achieved by using an implementation of <code class="literal">org.activiti.rest.filter.RestAuthenticator</code> which has 2 methods:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em><code class="literal">boolean requestRequiresAuthentication(Request request)</code></em></span>: Called before a request is checked for authentication (valid username and password is passed in header). If this method returns true, the method needs authentication. If false is returned, the request will be done regardless of the request being authenticated. If false is returned, <code class="literal">isRequestAuthorized</code> will not be called either for this request.</p></li><li class="listitem"><p><span class="emphasis"><em><code class="literal">boolean isRequestAuthorized(Request request)</code></em></span>: Called after a user is successfully authenticated against the Activiti identity-management but before the request is actually executed. Can be used to check if a certain request is valid for the authenticated user. If true is returned, the request is considered authorised and is executed. When false is returned, the request is not executed and the client gets an appropriate error.</p></li></ul></div><p>
      </p><p>The custom RestAuthenticator should be set on the <code class="literal">org.activiti.rest.application.ActivitiRestServicesApplication</code>that is used in the RestletServlet. 
      The easiest way for this to create a subclass of the <code class="literal">ActivitiRestServicesApplication</code> and use the custom implementation classname in the servlet-mapping:</p><pre class="prettyprint">
   &lt;!-- Restlet adapter --&gt;  
  &lt;servlet&gt;  
    &lt;servlet-name&gt;RestletServlet&lt;/servlet-name&gt;  
    &lt;servlet-class&gt;org.restlet.ext.servlet.ServerServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;!-- Application class name --&gt;
      &lt;param-name&gt;org.restlet.application&lt;/param-name&gt;
      &lt;param-value&gt;com.my.company.CustomActivitiRestServicesApplication&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/servlet&gt;</pre></div><div class="section" title="Usage in Tomcat"><div class="titlepage"><div><div><h3 class="title"><a name="restUsageInTomcat"></a>Usage in Tomcat</h3></div></div></div><p>Due to <a class="ulink" href="http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html" target="_top"> default security properties on Tomcat</a>, <span class="bold"><strong>escaped forward slashes (<code class="literal">%2F</code> and <code class="literal">%5C</code>) are not allowed by default (400-result is returned).</strong></span>
      This may have an impact on the deployment resources and their data-URL, as the URL can potentially contain escaped forward slashes.
      
      <span class="bold"><strong>When issues are experienced with unexpected 400-results, set the following system-property: <code class="literal">-Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true.</code></strong></span></p></div><div class="section" title="Methods and return-codes"><div class="titlepage"><div><div><h3 class="title"><a name="N12B8D"></a>Methods and return-codes</h3></div></div></div><div class="table"><a name="N12B90"></a><p class="title"><b>Table&nbsp;15.1.&nbsp;HTTP-methods and corresponding operations</b></p><div class="table-contents"><table summary="HTTP-methods and corresponding operations" border="1"><colgroup><col><col></colgroup><thead><tr><th>Method</th><th>Operations</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td>Get a single resource or get a collection of resources.</td></tr><tr><td><code class="literal">POST</code></td><td>Create a new resource. Also used for executing resource-queries which have a too complex request-structure to fit in the query-URL of a GET-request.</td></tr><tr><td><code class="literal">PUT</code></td><td>Update properties of an existing resource. Also used for invoking actions on an existing resource.</td></tr><tr><td><code class="literal">DELETE</code></td><td>Delete an existing resource.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="N12BB4"></a><p class="title"><b>Table&nbsp;15.2.&nbsp;HTTP-methods response codes</b></p><div class="table-contents"><table summary="HTTP-methods response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">200 - Ok</code></td><td>The operation was successful and a response has been returned (<code class="literal">GET</code> and <code class="literal">PUT</code> requests).</td></tr><tr><td><code class="literal">201 - Created</code></td><td>The operation was successful and the entity has been created and is returned in the response-body (<code class="literal">POST</code> request).</td></tr><tr><td><code class="literal">204 - No content</code></td><td>The operation was successful and entity has been deleted and therefore there is no response-body returned (<code class="literal">DELETE</code> request).</td></tr><tr><td><code class="literal">401 - Unauthorized</code></td><td>The operation failed. The operation requires an Authentication header to be set. If this was present in the request, the supplied credentials are not valid or the user is not authorized to perform this operation.</td></tr><tr><td><code class="literal">403 - Forbidden</code></td><td>The operation is forbidden and should not be re-attempted. This does not imply an issue with authentication not authorization, it's an operation that is not allowed. Example: deleting a task that is part of a running process is not allowed and will never be allowed, regardless of the user or process/task state.</td></tr><tr><td><code class="literal">404 - Not found</code></td><td>The operation failed.The requested resource was not found.</td></tr><tr><td><code class="literal">405 - Method not allowed</code></td><td>The operation failed. The used method is not allowed for this resource. Eg. trying to update (PUT) a deployment-resource will result in a <code class="literal">405</code> status.</td></tr><tr><td><code class="literal">409 - Conflict</code></td><td>The operation failed. The operation causes an update of a resource that has been updated by another operation, which makes the update no longer valid. Can also indicate a resource that is being created in a collection where a resource with that identifier already exists.</td></tr><tr><td><code class="literal">415 - Unsupported Media Type</code></td><td>The operation failed. The request body contains an unsupported media type. Also occurs when the request-body JSON contains an unknown attribute or value that doesn't have the right format/type to be accepted.</td></tr><tr><td><code class="literal">500 - Internal server error</code></td><td>The operation failed. An unexpected exception occured while executing the operation. The response-body contains details about the error.</td></tr></tbody></table></div></div><br class="table-break"><p>
        The media-type of the HTTP-responses is always <code class="literal">application/json</code> unless binary content is requested (eg. deployment resource data), the media-type of the content is used. 
        </p></div><div class="section" title="Error response body"><div class="titlepage"><div><div><h3 class="title"><a name="N12C10"></a>Error response body</h3></div></div></div><p>When an error occurs (both client and server, 4XX and 5XX status-codes) the response body contains an object describing the error that occurred. An example for a 404-status when a task is not found:</p><pre class="prettyprint">
{
  "statusCode" : 404,
  "errorMessage" : "Could not find a task with id '444'."
}</pre></div><div class="section" title="Request parameters"><div class="titlepage"><div><div><h3 class="title"><a name="N12C17"></a>Request parameters</h3></div></div></div><div class="section" title="URL fragments"><div class="titlepage"><div><div><h4 class="title"><a name="N12C1A"></a>URL fragments</h4></div></div></div><p>
            Parameters that are part of the url (eg. the deploymentId parameter in <code class="literal">http://host/actviti-rest/service/repository/deployments/{deploymentId}</code>)
            need to be properly escaped (see <a class="ulink" href="https://en.wikipedia.org/wiki/Percent-encoding" target="_top">URL-encoding or Percent-encoding</a>) in case the segment contains special characters. Most
            frameworks have this functionality built in, but it should be taken into account. Especially for segments that can contains forward-slashes (eg. deployment resource), this is required.
        </p></div><div class="section" title="Rest URL query parameters"><div class="titlepage"><div><div><h4 class="title"><a name="N12C26"></a>Rest URL query parameters</h4></div></div></div><p>
            Parameters added as query-string in the URL (eg. the name parameter used in <code class="literal">http://host/activiti-rest/service/deployments?name=Deployment</code>) can have the folowing types and are
            mentioned in the corresponding REST-API documentation:
            
            </p><div class="table"><a name="N12C2E"></a><p class="title"><b>Table&nbsp;15.3.&nbsp;URL query parameter types</b></p><div class="table-contents"><table summary="URL query parameter types" border="1"><colgroup><col><col></colgroup><thead><tr><th>Type</th><th>Format</th></tr></thead><tbody><tr><td>String</td><td>Plain text parameters. Can contain any valid characters that are allowed in URL's. In case of a <code class="literal">XXXLike</code> parameter, the string should contain the wildcard characted <code class="literal">%</code> (properly url-encoded). This allows to specify the intent of the like-search. Eg. '<code class="literal">Tas%</code>' matches all values, starting with 'Tas'.</td></tr><tr><td>Integer</td><td>Parameter representing an integer value. Can only contain numeric non-decmimal values, between -2.147.483.648 and 2.147.483.647.</td></tr><tr><td>Long</td><td>Parameter representing a long value. Can only contain numeric non-decmimal values, between -9.223.372.036.854.775.808 and 9.223.372.036.854.775.807.</td></tr><tr><td>Boolean</td><td>Parameter representing a boolean value. Can be eiter <code class="literal">true</code> or <code class="literal">false</code>. All other values other than these two, will cause a '<code class="literal">405 - Bad request</code>' response.</td></tr><tr><td>Date</td><td>Parameter representing a date value. Use the ISO-8601 date-format (see <a class="ulink" href="http://en.wikipedia.org/wiki/ISO_8601" target="_top">ISO-8601 on wikipedia</a>) using both time and date-components (eg. <code class="literal">2013-04-03T23:45Z</code>).</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="JSON body parameters"><div class="titlepage"><div><div><h4 class="title"><a name="restJsonBody"></a>JSON body parameters</h4></div></div></div><p>
            </p><div class="table"><a name="N12C73"></a><p class="title"><b>Table&nbsp;15.4.&nbsp;JSON parameter types</b></p><div class="table-contents"><table summary="JSON parameter types" border="1"><colgroup><col><col></colgroup><thead><tr><th>Type</th><th>Format</th></tr></thead><tbody><tr><td>String</td><td>Plain text parameters. In case of a <code class="literal">XXXLike</code> parameter, the string should contain the wildcard characted <code class="literal">%</code>. This allows to specify the intent of the like-search. Eg. '<code class="literal">Tas%</code>' matches all values, starting with 'Tas'.</td></tr><tr><td>Integer</td><td>Parameter representing an integer value, using a JSON number. Can only contain numeric non-decmimal values, between -2.147.483.648 and 2.147.483.647.</td></tr><tr><td>Long</td><td>Parameter representing a long value, using a JSON number. Can only contain numeric non-decmimal values, between -9.223.372.036.854.775.808 and 9.223.372.036.854.775.807.</td></tr><tr><td>Boolean</td><td>Parameter representing a boolean value, using a JSON boolean. Can be eiter <code class="literal">true</code> or <code class="literal">false</code>. All other values other than these two, will cause a '<code class="literal">405 - Bad request</code>' response.</td></tr><tr><td>Date</td><td>Parameter representing a date value, using a JSON text. Use the ISO-8601 date-format (see <a class="ulink" href="http://en.wikipedia.org/wiki/ISO_8601" target="_top">ISO-8601 on wikipedia</a>) using both time and date-components (eg. <code class="literal">2013-04-03T23:45Z</code>).</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Paging and sorting"><div class="titlepage"><div><div><h4 class="title"><a name="restPagingAndSort"></a>Paging and sorting</h4></div></div></div><p>
            Paging and order parameters can be added as query-string in the URL (eg. the name parameter used in <code class="literal">http://host/activiti-rest/service/deployments?sort=name</code>).
            </p><div class="table"><a name="N12CBB"></a><p class="title"><b>Table&nbsp;15.5.&nbsp;Variable query JSON parameters</b></p><div class="table-contents"><table summary="Variable query JSON parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Default value</th><th>Description</th></tr></thead><tbody><tr><td>sort</td><td>different per query implementation</td><td>Name of the sort key, for which the default value and the allowed values are different per query implementation.</td></tr><tr><td>order</td><td>asc</td><td>Sorting order which can be 'asc' or 'desc'.</td></tr><tr><td>start</td><td>0</td><td>Parameter to allow for paging of the result. By default the result will start at 0.</td></tr><tr><td>size</td><td>10</td><td>Parameter to allow for paging of the result. By default the size will be 10.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="JSON query variable format"><div class="titlepage"><div><div><h4 class="title"><a name="restQueryVariable"></a>JSON query variable format</h4></div></div></div><p>
            </p><pre class="prettyprint">
{ 
  "name" : "variableName",
  "value" : "variableValue",
  "operator" : "equals",
  "type" : "string"
}</pre><p>
            </p><div class="table"><a name="N12CEF"></a><p class="title"><b>Table&nbsp;15.6.&nbsp;Variable query JSON parameters</b></p><div class="table-contents"><table summary="Variable query JSON parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>No</td><td>Name of the variable to include in a query. Can be empty in case '<code class="literal">equals</code>' is used in some queries to query for resources that have <span class="bold"><strong>any variable name</strong></span> with the given value.</td></tr><tr><td>value</td><td>Yes</td><td>Value of the variable included in the query, should include a correct format for the given type.</td></tr><tr><td>operator</td><td>Yes</td><td>Operator to use in query, can have the folowing values: <code class="literal">equals, notEquals, equalsIgnoreCase, notEqualsIgnoreCase, lessThan, greaterThan, lessThanOrEquals, greaterThanOrEquals</code> and <code class="literal">like</code>.</td></tr><tr><td>type</td><td>No</td><td>Type of variable to use. When omitted, the type will be deducted from the <code class="literal">value</code> parameter. Any JSON text-values will be considered of type <code class="literal">string</code>, JSON booleans of type <code class="literal">boolean</code>, JSON numbers of type <code class="literal">long</code> or <code class="literal">integer</code> depending on the size of the number. It's recommended to include an explicit type when in doubt. Types supported out of the box are listed below.
                    </td></tr></tbody></table></div></div><p><br class="table-break">
             </p><div class="table"><a name="N12D36"></a><p class="title"><b>Table&nbsp;15.7.&nbsp;Default query JSON types</b></p><div class="table-contents"><table summary="Default query JSON types" border="1"><colgroup><col><col></colgroup><thead><tr><th>Type name</th><th>Description</th></tr></thead><tbody><tr><td>string</td><td>Value is threaded as and converted to a <code class="literal">java.lang.String</code>.</td></tr><tr><td>short</td><td>Value is threaded as and converted to a <code class="literal">java.lang.Integer</code>.</td></tr><tr><td>integer</td><td>Value is threaded as and converted to a <code class="literal">java.lang.Integer</code>.</td></tr><tr><td>long</td><td>Value is threaded as and converted to a <code class="literal">java.lang.Long</code>.</td></tr><tr><td>double</td><td>Value is threaded as and converted to a <code class="literal">java.lang.Double</code>.</td></tr><tr><td>boolean</td><td>Value is threaded as and converted to a <code class="literal">java.lang.Boolean</code>.</td></tr><tr><td>date</td><td>Value is treated as and converted to a <code class="literal">java.util.Date</code>. The JSON string will be converted using ISO-8601 date format.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Variable representation"><div class="titlepage"><div><div><h4 class="title"><a name="restVariables"></a>Variable representation</h4></div></div></div><p>
          When working with variables (execution/process and task), the REST-api uses some common principles and JSON-format for both reading and writing. The JSON representation of a variable looks like this:
           </p><pre class="prettyprint">
{ 
  "name" : "variableName",
  "value" : "variableValue",
  "valueUrl" : "http://...",
  "scope" : "local",
  "type" : "string"
}</pre><p>
          
           </p><div class="table"><a name="N12D84"></a><p class="title"><b>Table&nbsp;15.8.&nbsp;Variable JSON attributes</b></p><div class="table-contents"><table summary="Variable JSON attributes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>Yes</td><td>Name of the variable.</td></tr><tr><td>value</td><td>No</td><td>Value of the variable. When writing a variable and <code class="literal">value</code> is omitted, <code class="literal">null</code> will be used as value.</td></tr><tr><td>valueUrl</td><td>No</td><td>When reading a variable of type <code class="literal">binary</code> or <code class="literal">serializable</code>, this attribute will point to the URL where the raw binary data can be fetched from.</td></tr><tr><td>scope</td><td>No</td><td>Scope of the variable. If '<code class="literal">local</code>', the variable is explicitally defined on the resource it's requested from. When '<code class="literal">global</code>', the variable is defined on the parent (or any parent in the parent-tree) of the resource it's requested from. When writing a variable and the scope is omitted, <code class="literal">global</code> is assumed.</td></tr><tr><td>type</td><td>No</td><td>Type of the variable. See table below for additional information on types. When writing a variable and this value is omitted, the type will be deducted from the raw JSON-attribute request type and is limited to either <code class="literal">string</code>, <code class="literal">double</code>, <code class="literal">integer</code> and <code class="literal">boolean</code>. It's advised to always include a type to make sure no wrong assumption about the type can be done.</td></tr></tbody></table></div></div><p><br class="table-break">
            </p><div class="table"><a name="N12DD7"></a><p class="title"><b>Table&nbsp;15.9.&nbsp;Variable Types</b></p><div class="table-contents"><table summary="Variable Types" border="1"><colgroup><col><col></colgroup><thead><tr><th>Type name</th><th>Description</th></tr></thead><tbody><tr><td>string</td><td>Value is threaded as a <code class="literal">java.lang.String</code>. Raw JSON-text value is used when writing a variable.</td></tr><tr><td>integer</td><td>Value is threaded as a <code class="literal">java.lang.Integer</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</td></tr><tr><td>short</td><td>Value is threaded as a <code class="literal">java.lang.Short</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</td></tr><tr><td>long</td><td>Value is threaded as a <code class="literal">java.lang.Long</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</td></tr><tr><td>double</td><td>Value is threaded as a <code class="literal">java.lang.Double</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</td></tr><tr><td>boolean</td><td>Value is threaded as a <code class="literal">java.lang.Boolean</code>. When writing, JSON boolean value is used for conversion.</td></tr><tr><td>date</td><td>Value is treated as a <code class="literal">java.util.Date</code>. When writing, the JSON text will be converted using ISO-8601 date format.</td></tr><tr><td>binary</td><td>Binary variable, threated as an array of bytes. The <code class="literal">value</code> attribute is null, the <code class="literal">valueUrl</code> contains an URL pointing to the raw binary stream.</td></tr><tr><td>serializable</td><td>Serialized representation of a Serializable Java-object. As with the <code class="literal">binary</code> type, the <code class="literal">value</code> attribute is null, the <code class="literal">valueUrl</code> contains an URL pointing to the raw binary stream. All serializable variables (which are not of any of the above types) will be exposed as a variable of this type.</td></tr></tbody></table></div></div><p><br class="table-break">
            It's possible to support additional variable-types with a custom JSON representation (either simple value or complex/nested JSON object). By extending the <code class="literal">initializeVariableConverters()</code> method on <code class="literal">org.activiti.rest.api.RestResponseFactory</code>,
            you can add additional <code class="literal">org.activiti.rest.api.engine.variable.RestVariableConverter</code> classes to support converting your POJO's to a format suitable for transerring through REST and converting the REST-value back to your POJO. The actual transformation to JSON is done by Jackson.
        </p></div></div></div><div class="section" title="Deployment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N12E3E"></a>Deployment</h2></div></div></div><p><span class="bold"><strong>When using tomcat, please read <a class="link" href="#restUsageInTomcat" title="Usage in Tomcat">Usage in Tomcat</a>.</strong></span></p><div class="section" title="List of Deployments"><div class="titlepage"><div><div><h3 class="title"><a name="N12E49"></a>List of Deployments</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/deployments</pre><p>
        </p><p>
            </p><div class="table"><a name="N12E53"></a><p class="title"><b>Table&nbsp;15.10.&nbsp;URL query parameters</b></p><div class="table-contents"><table summary="URL query parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>No</td><td>String</td><td>Only return deployments with the given name.</td></tr><tr><td>nameLike</td><td>No</td><td>String</td><td>Only return deployments with a name like the given name.</td></tr><tr><td>category</td><td>No</td><td>String</td><td>Only return deployments with the given category.</td></tr><tr><td>categoryNotEquals</td><td>No</td><td>String</td><td>Only return deployments which don't have the given category.</td></tr><tr><td>sort</td><td>No</td><td>'id' (default), 'name' or 'deploytime'</td><td>Property to sort on, to be used toghether with the 'order'.</td></tr><tr><td colspan="4"><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N12EA5"></a><p class="title"><b>Table&nbsp;15.11.&nbsp;REST Response codes</b></p><div class="table-contents"><table summary="REST Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the request was successful.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "10",
      "name": "activiti-examples.bar",
      "deploymentTime": "2010-10-13T14:54:26.750+02:00",
      "category": "examples",
      "url": "http://localhost:8081/service/repository/deployments/10"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
    </p></div><div class="section" title="Get a deployment"><div class="titlepage"><div><div><h3 class="title"><a name="N12EC0"></a>Get a deployment</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/deployments/{deploymentId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N12ECA"></a><p class="title"><b>Table&nbsp;15.12.&nbsp;Get a deployment - URL parameters</b></p><div class="table-contents"><table summary="Get a deployment - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>deploymentId</td><td>Yes</td><td>String</td><td>The id of the deployment to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N12EE6"></a><p class="title"><b>Table&nbsp;15.13.&nbsp;Get a deployment - Response codes</b></p><div class="table-contents"><table summary="Get a deployment - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the deployment was found and returned.</td></tr><tr><td>404</td><td>Indicates the requested deployment was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples",
  "url": "http://localhost:8081/service/repository/deployments/10"
}</pre><p>
    </p></div><div class="section" title="Create a new deployment"><div class="titlepage"><div><div><h3 class="title"><a name="N12F06"></a>Create a new deployment</h3></div></div></div><p>
          </p><pre class="prettyprint">POST repository/deployments</pre><p>
        </p><p>
          <span class="bold"><strong>Request body:</strong></span>
        </p><p>The request should body should contain data of type <span class="emphasis"><em>multipart/form-data</em></span>. There should be only exactly file in the request, any additional files will be ignored. The deployment name is the name
        of the file-field passed in. If multiple resources need to be deployed in a single deployment, compress the resources in a zip and make sure the file-name ends with <code class="literal">.bar</code> or <code class="literal">.zip</code>.</p><p>
          </p><div class="table"><a name="N12F21"></a><p class="title"><b>Table&nbsp;15.14.&nbsp;Create a new deployment - Response codes</b></p><div class="table-contents"><table summary="Create a new deployment - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the deployment was created.</td></tr><tr><td>400</td><td>Indicates there was no content present in the request body or the content mime-type is not supported for deployment. The status-description contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": null,
  "url": "http://localhost:8081/service/repository/deployments/10"
}</pre><p>
    </p></div><div class="section" title="Delete a deployment"><div class="titlepage"><div><div><h3 class="title"><a name="N12F41"></a>Delete a deployment</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE repository/deployments/{deploymentId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N12F4B"></a><p class="title"><b>Table&nbsp;15.15.&nbsp;Delete a deployment - URL parameters</b></p><div class="table-contents"><table summary="Delete a deployment - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>deploymentId</td><td>Yes</td><td>String</td><td>The id of the deployment to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N12F67"></a><p class="title"><b>Table&nbsp;15.16.&nbsp;Delete a deployment - Response codes</b></p><div class="table-contents"><table summary="Delete a deployment - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the deployment was found and has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested deployment was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="List resources in a deployment"><div class="titlepage"><div><div><h3 class="title"><a name="N12F7E"></a>List resources in a deployment</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/deployments/{deploymentId}/resources</pre><p>
        </p><p>
            </p><div class="table"><a name="N12F88"></a><p class="title"><b>Table&nbsp;15.17.&nbsp;List resources in a deployment - URL parameters</b></p><div class="table-contents"><table summary="List resources in a deployment - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>deploymentId</td><td>Yes</td><td>String</td><td>The id of the deployment to get the resources for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N12FA4"></a><p class="title"><b>Table&nbsp;15.18.&nbsp;List resources in a deployment - Response codes</b></p><div class="table-contents"><table summary="List resources in a deployment - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the deployment was found and the resource list has been returned.</td></tr><tr><td>404</td><td>Indicates the requested deployment was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  {
    "id": "diagrams/my-process.bpmn20.xml",
    "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/diagrams%2Fmy-process.bpmn20.xml",
    "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/diagrams%2Fmy-process.bpmn20.xml",
    "mediaType": "text/xml",
    "type": "processDefinition"
  },
  {
    "id": "image.png",
    "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/image.png",
    "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/image.png",
    "mediaType": "image/png",
    "type": "resource"
  }
]</pre><p>

       </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">mediaType</code>: Contains the media-type the resource has. This is resolved using a (pluggable) <code class="literal">MediaTypeResolver</code> and contains, by default, a limited number of mime-type mappings.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of resource, possible values:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><code class="literal">resource</code>: Plain old resource.</p></li><li class="listitem"><p><code class="literal">processDefinition</code>: Resource that contains one or more process-definitions. This resource is picked up by the deployer.</p></li><li class="listitem"><p><code class="literal">processImage</code>: Resource that represents a deployed process definition's graphical layout.</p></li></ul></div></li></ul></div><p>
    </p><p>
      <span class="emphasis"><em>The dataUrl property in the resulting json for a single resource contains the actual URL to use for retreiving the binary resource.</em></span>
    </p></div><div class="section" title="Get a deployment resource"><div class="titlepage"><div><div><h3 class="title"><a name="N12FE8"></a>Get a deployment resource</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/deployments/{deploymentId}/resources/{resourceId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N12FF2"></a><p class="title"><b>Table&nbsp;15.19.&nbsp;Get a deployment resource - URL parameters</b></p><div class="table-contents"><table summary="Get a deployment resource - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>deploymentId</td><td>Yes</td><td>String</td><td>The id of the deployment the requested resource is part of.</td></tr><tr><td>resourceId</td><td>Yes</td><td>String</td><td>The id of the resource to get. <span class="bold"><strong>Make sure you URL-encode the resourceId in case it contains forward slashes. Eg: use 'diagrams%2Fmy-process.bpmn20.xml' instead of 'diagrams/Fmy-process.bpmn20.xml'.</strong></span></td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N1301A"></a><p class="title"><b>Table&nbsp;15.20.&nbsp;Get a deployment resource - Response codes</b></p><div class="table-contents"><table summary="Get a deployment resource - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates both deployment and resource have been found and the resource has been returned.</td></tr><tr><td>404</td><td>Indicates the requested deployment was not found or there is no resource with the given id present in the deployment. The status-description contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "id": "diagrams/my-process.bpmn20.xml",
  "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/diagrams%2Fmy-process.bpmn20.xml",
  "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/diagrams%2Fmy-process.bpmn20.xml",
  "mediaType": "text/xml",
  "type": "processDefinition"
}</pre><p>

      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">mediaType</code>: Contains the media-type the resource has. This is resolved using a (pluggable) <code class="literal">MediaTypeResolver</code> and contains, by default, a limited number of mime-type mappings.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of resource, possible values:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><code class="literal">resource</code>: Plain old resource.</p></li><li class="listitem"><p><code class="literal">processDefinition</code>: Resource that contains one or more process-definitions. This resource is picked up by the deployer.</p></li><li class="listitem"><p><code class="literal">processImage</code>: Resource that represents a deployed process definition's graphical layout.</p></li></ul></div></li></ul></div><p>
    </p></div><div class="section" title="Get a deployment resource content"><div class="titlepage"><div><div><h3 class="title"><a name="N13059"></a>Get a deployment resource content</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/deployments/{deploymentId}/resourcedata/{resourceId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13063"></a><p class="title"><b>Table&nbsp;15.21.&nbsp;Get a deployment resource content - URL parameters</b></p><div class="table-contents"><table summary="Get a deployment resource content - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>deploymentId</td><td>Yes</td><td>String</td><td>The id of the deployment the requested resource is part of.</td></tr><tr><td>resourceId</td><td>Yes</td><td>String</td><td>The id of the resource to get the data for. <span class="bold"><strong>Make sure you URL-encode the resourceId in case it contains forward slashes. Eg: use 'diagrams%2Fmy-process.bpmn20.xml' instead of 'diagrams/Fmy-process.bpmn20.xml'.</strong></span></td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N1308B"></a><p class="title"><b>Table&nbsp;15.22.&nbsp;Get a deployment resource content - Response codes</b></p><div class="table-contents"><table summary="Get a deployment resource content - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates both deployment and resource have been found and the resource data has been returned.</td></tr><tr><td>404</td><td>Indicates the requested deployment was not found or there is no resource with the given id present in the deployment. The status-description contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
    </p><p>
      The response body will contain the binary resource-content for the requested resource. The response content-type will be the same as the type returned in the resources 'mimeType' property. Also, a content-disposition header is set,
      allowing browsers to dowload the file instead of displaying it.
    </p></div></div><div class="section" title="Process Definitions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N130AA"></a>Process Definitions</h2></div></div></div><div class="section" title="List of process definitions"><div class="titlepage"><div><div><h3 class="title"><a name="N130AD"></a>List of process definitions</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/process-definitions</pre><p>
        </p><p>
            </p><div class="table"><a name="N130B7"></a><p class="title"><b>Table&nbsp;15.23.&nbsp;List of process definitions - URL parameters</b></p><div class="table-contents"><table summary="List of process definitions - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>version</td><td>No</td><td>integer</td><td>Only return process definitions with the given version.</td></tr><tr><td>name</td><td>No</td><td>String</td><td>Only return process definitions with the given name.</td></tr><tr><td>nameLike</td><td>No</td><td>String</td><td>Only return process definitions with a name like the given name.</td></tr><tr><td>key</td><td>No</td><td>String</td><td>Only return process definitions with the given key.</td></tr><tr><td>keyLike</td><td>No</td><td>String</td><td>Only return process definitions with a name like the given key.</td></tr><tr><td>resourceName</td><td>No</td><td>String</td><td>Only return process definitions with the given resource name.</td></tr><tr><td>resourceNameLike</td><td>No</td><td>String</td><td>Only return process definitions with a name like the given resource name.</td></tr><tr><td>category</td><td>No</td><td>String</td><td>Only return process definitions with the given category.</td></tr><tr><td>categoryLike</td><td>No</td><td>String</td><td>Only return process definitions with a category like the given name.</td></tr><tr><td>categoryNotEquals</td><td>No</td><td>String</td><td>Only return process definitions which don't have the given category.</td></tr><tr><td>deploymentId</td><td>No</td><td>String</td><td>Only return process definitions which are part of a deployment with the given id.</td></tr><tr><td>startableByUser</td><td>No</td><td>String</td><td>Only return process definitions which can be started by the given user.</td></tr><tr><td>latest</td><td>No</td><td>Boolean</td><td>Only return the latest process definition versions. Can only be used toghether with 'key' and 'keyLike' parameters, using any other parameter will result in a 400-response.</td></tr><tr><td>suspended</td><td>No</td><td>Boolean</td><td>If <code class="literal">true</code>, only returns process definitions which are suspended. If <code class="literal">false</code>, only active process definitions (which are not suspended) are returned.</td></tr><tr><td>sort</td><td>No</td><td>'name' (default), 'id', 'key', 'category', 'deploymentId' and 'version'</td><td>Property to sort on, to be used toghether with the 'order'.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13161"></a><p class="title"><b>Table&nbsp;15.24.&nbsp;List of process definitions - Response codes</b></p><div class="table-contents"><table summary="List of process definitions - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the process-definitions are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format or that 'latest' is used with other parameters other than 'key' and 'keyLike'. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "oneTaskProcess:1:4",
      "url" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "version" : 1,
      "key" : "oneTaskProcess",
      "category" : "Examples",
      "suspended" : false,
      "name" : "The One Task Process",
      "description" : "This is a process for testing purposes",
      "deploymentId" : "2",
      "deploymentUrl" : "http://localhost:8081/repository/deployments/2",
      "graphicalNotationDefined" : true,
      "resource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.xml",
      "diagramResource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.png",
      "startFormDefined" : false
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">graphicalNotationDefined</code>: Indicates the process definition contains graphical information (BPMN DI).</p></li><li class="listitem"><p><code class="literal">resource</code>: Contains the actual deployed BPMN 2.0 xml.</p></li><li class="listitem"><p><code class="literal">diagramResource</code>: Contains a graphical representation of the process, null when no diagram is available.</p></li></ul></div><p>
    </p></div><div class="section" title="Get a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N13192"></a>Get a process definition</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/process-definitions/{processDefinitionId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N1319C"></a><p class="title"><b>Table&nbsp;15.25.&nbsp;Get a process definition - URL parameters</b></p><div class="table-contents"><table summary="Get a process definition - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N131B8"></a><p class="title"><b>Table&nbsp;15.26.&nbsp;Get a process definition - Response codes</b></p><div class="table-contents"><table summary="Get a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process definition was found and returned.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "id" : "oneTaskProcess:1:4",
  "url" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "version" : 1,
  "key" : "oneTaskProcess",
  "category" : "Examples",
  "suspended" : false,
  "name" : "The One Task Process",
  "description" : "This is a process for testing purposes",
  "deploymentId" : "2",
  "deploymentUrl" : "http://localhost:8081/repository/deployments/2",
  "graphicalNotationDefined" : true,
  "resource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.xml",
  "diagramResource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.png",
  "startFormDefined" : false
}</pre><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">graphicalNotationDefined</code>: Indicates the process definition contains graphical information (BPMN DI).</p></li><li class="listitem"><p><code class="literal">resource</code>: Contains the actual deployed BPMN 2.0 xml.</p></li><li class="listitem"><p><code class="literal">diagramResource</code>: Contains a graphical representation of the process, null when no diagram is available.</p></li></ul></div><p>
    </p></div><div class="section" title="Update category for a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N131E9"></a>Update category for a process definition</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT repository/process-definitions/{processDefinitionId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "category" : "updatedcategory"
}</pre><p>
        </p><p>
          </p><div class="table"><a name="N131FC"></a><p class="title"><b>Table&nbsp;15.27.&nbsp;Update category for a process definition - Response codes</b></p><div class="table-contents"><table summary="Update category for a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process was category was altered.</td></tr><tr><td>400</td><td>Indicates no category was defined in the request body.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">repository/process-definitions/{processDefinitionId}</code>.
      </p></div><div class="section" title="Get a process definition resource content"><div class="titlepage"><div><div><h3 class="title"><a name="N13221"></a>Get a process definition resource content</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/process-definitions/{processDefinitionId}/resourcedata</pre><p>
        </p><p>
            </p><div class="table"><a name="N1322B"></a><p class="title"><b>Table&nbsp;15.28.&nbsp;Get a process definition resource content - URL parameters</b></p><div class="table-contents"><table summary="Get a process definition resource content - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition to get the resource data for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Response:</strong></span>
    </p><p>
      Exactly the same response codes/boy as <code class="literal">GET repository/deployment/{deploymentId}/resourcedata/{resourceId}</code>.
    </p></div><div class="section" title="Get a process definition BPMN model"><div class="titlepage"><div><div><h3 class="title"><a name="N13250"></a>Get a process definition BPMN model</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/process-definitions/{processDefinitionId}/model</pre><p>
        </p><p>
            </p><div class="table"><a name="N1325A"></a><p class="title"><b>Table&nbsp;15.29.&nbsp;Get a process definition BPMN model - URL parameters</b></p><div class="table-contents"><table summary="Get a process definition BPMN model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition to get the model for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13276"></a><p class="title"><b>Table&nbsp;15.30.&nbsp;Get a process definition BPMN model - Response codes</b></p><div class="table-contents"><table summary="Get a process definition BPMN model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process definition was found and the model is returned.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Response body:</strong></span>
       The response body is a JSON representation of the <code class="literal">org.activiti.bpmn.model.BpmnModel</code> and contains the full process definition model.
</p><pre class="prettyprint">
{
   "processes":[
      {
         "id":"oneTaskProcess",
         "xmlRowNumber":7,
         "xmlColumnNumber":60,
         "extensionElements":{

         },
         "name":"The One Task Process",
         "executable":true,
         "documentation":"One task process description",
         
         ...
    ], 
    
    ...
}
</pre><p>
    </p><p>
     
    </p></div><div class="section" title="Suspend a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N1329B"></a>Suspend a process definition</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT repository/process-definitions/{processDefinitionId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "suspend",
  "includeProcessInstances" : "false",
  "date" : "2013-04-15T00:42:12Z"
}</pre><p>
        </p><div class="table"><a name="processDefinitionActionBodyParameters"></a><p class="title"><b>Table&nbsp;15.31.&nbsp;Suspend a process definition - JSON Body parameters</b></p><div class="table-contents"><table summary="Suspend a process definition - JSON Body parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td>action</td><td>Action to perform. Either <code class="literal">activate</code> or <code class="literal">suspend</code>.</td><td>Yes</td></tr><tr><td>includeProcessInstances</td><td>Wether or not to suspend/activate running process-instances for this process-definition. If omitted, the process-instances are left in the state they are.</td><td>No</td></tr><tr><td>date</td><td>Date (ISO-8601) when the suspension/activation should be executed. If omitted, the suspend/activation is effective immediatly.</td><td>No</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N132D9"></a><p class="title"><b>Table&nbsp;15.32.&nbsp;Suspend a process definition - Response codes</b></p><div class="table-contents"><table summary="Suspend a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process was suspended.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr><tr><td>409</td><td>Indicates the requested process definition is already suspended.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">repository/process-definitions/{processDefinitionId}</code>.
      </p></div><div class="section" title="Activate a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N132FE"></a>Activate a process definition</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT repository/process-definitions/{processDefinitionId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "activate",
  "includeProcessInstances" : "true",
  "date" : "2013-04-15T00:42:12Z"
}</pre><p>

        See suspend process definition <a class="link" href="#processDefinitionActionBodyParameters" title="Table&nbsp;15.31.&nbsp;Suspend a process definition - JSON Body parameters">JSON Body parameters</a>.
        </p><p>
          </p><div class="table"><a name="N13315"></a><p class="title"><b>Table&nbsp;15.33.&nbsp;Activate a process definition - Response codes</b></p><div class="table-contents"><table summary="Activate a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process was activated.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr><tr><td>409</td><td>Indicates the requested process definition is already active.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">repository/process-definitions/{processDefinitionId}</code>.
      </p></div><div class="section" title="Get all candidate starters for a process-definition"><div class="titlepage"><div><div><h3 class="title"><a name="N1333A"></a>Get all candidate starters for a process-definition</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/process-definitions/{processDefinitionId}/identitylinks</pre><p>
        </p><p>
            </p><div class="table"><a name="N13344"></a><p class="title"><b>Table&nbsp;15.34.&nbsp;Get all candidate starters for a process-definition - URL parameters</b></p><div class="table-contents"><table summary="Get all candidate starters for a process-definition - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition to get the identity links for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13360"></a><p class="title"><b>Table&nbsp;15.35.&nbsp;Get all candidate starters for a process-definition - Response codes</b></p><div class="table-contents"><table summary="Get all candidate starters for a process-definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process definition was found and the requested identity links are returned.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/groups/admin",
      "user":null,
      "group":"admin",
      "type":"candidate"
   },
   {
      "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
      "user":"kermit",
      "group":null,
      "type":"candidate"
   }
]</pre><p>
    </p></div><div class="section" title="Add a candidate starter to a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N13380"></a>Add a candidate starter to a process definition</h3></div></div></div><p>
        </p><pre class="prettyprint">POST repository/process-definitions/{processDefinitionId}/identitylinks</pre><p>
      </p><p>
          </p><div class="table"><a name="N1338A"></a><p class="title"><b>Table&nbsp;15.36.&nbsp;Add a candidate starter to a process definition - URL parameters</b></p><div class="table-contents"><table summary="Add a candidate starter to a process definition - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Request body (user):</strong></span>
            </p><pre class="prettyprint">
{
  "userId" : "kermit"
}</pre><p>
    </p><p>
       <span class="bold"><strong>Request body (group):</strong></span>
            </p><pre class="prettyprint">
{
  "groupId" : "sales"
}</pre><p>
    </p><p>
        </p><div class="table"><a name="N133B8"></a><p class="title"><b>Table&nbsp;15.37.&nbsp;Add a candidate starter to a process definition - Response codes</b></p><div class="table-contents"><table summary="Add a candidate starter to a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the process definition was found and the identity link was created.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</pre><p>
    </p></div><div class="section" title="Delete a candidate starter from a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N133D8"></a>Delete a candidate starter from a process definition</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE repository/process-definitions/{processDefinitionId}/identitylinks/{family}/{identityId}</pre><p>
      </p><p>
          </p><div class="table"><a name="N133E2"></a><p class="title"><b>Table&nbsp;15.38.&nbsp;Delete a candidate starter from a process definition - URL parameters</b></p><div class="table-contents"><table summary="Delete a candidate starter from a process definition - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition.</td></tr><tr><td>family</td><td>Yes</td><td>String</td><td>Either <code class="literal">users</code> or <code class="literal">groups</code>, depending on the type of identity link.</td></tr><tr><td>identityId</td><td>Yes</td><td>String</td><td>Either the userId or groupId of the identity to remove as candidate starter.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N13416"></a><p class="title"><b>Table&nbsp;15.39.&nbsp;Delete a candidate starter from a process definition - Response codes</b></p><div class="table-contents"><table summary="Delete a candidate starter from a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the process definition was found and the identity link was removed. The response body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found or the process definition doesn't have an identity-link that matches the url.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</pre><p>
    </p></div><div class="section" title="Get a candidate starter from a process definition"><div class="titlepage"><div><div><h3 class="title"><a name="N13436"></a>Get a candidate starter from a process definition</h3></div></div></div><p>
        </p><pre class="prettyprint">GET repository/process-definitions/{processDefinitionId}/identitylinks/{family}/{identityId}</pre><p>
      </p><p>
          </p><div class="table"><a name="N13440"></a><p class="title"><b>Table&nbsp;15.40.&nbsp;Get a candidate starter from a process definition - URL parameters</b></p><div class="table-contents"><table summary="Get a candidate starter from a process definition - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processDefinitionId</td><td>Yes</td><td>String</td><td>The id of the process definition.</td></tr><tr><td>family</td><td>Yes</td><td>String</td><td>Either <code class="literal">users</code> or <code class="literal">groups</code>, depending on the type of identity link.</td></tr><tr><td>identityId</td><td>Yes</td><td>String</td><td>Either the userId or groupId of the identity to get as candidate starter.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N13474"></a><p class="title"><b>Table&nbsp;15.41.&nbsp;Get a candidate starter from a process definition - Response codes</b></p><div class="table-contents"><table summary="Get a candidate starter from a process definition - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process definition was found and the identity link was returned.</td></tr><tr><td>404</td><td>Indicates the requested process definition was not found or the process definition doesn't have an identity-link that matches the url.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</pre><p>
    </p></div></div><div class="section" title="Models"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N13494"></a>Models</h2></div></div></div><div class="section" title="Get a list of models"><div class="titlepage"><div><div><h3 class="title"><a name="N13497"></a>Get a list of models</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/models</pre><p>
        </p><p>
            </p><div class="table"><a name="N134A1"></a><p class="title"><b>Table&nbsp;15.42.&nbsp;Get a list of models - URL query parameters</b></p><div class="table-contents"><table summary="Get a list of models - URL query parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>No</td><td>String</td><td>Only return models with the given id.</td></tr><tr><td>category</td><td>No</td><td>String</td><td>Only return models with the given category.</td></tr><tr><td>categoryLike</td><td>No</td><td>String</td><td>Only return models with a category like the given value. Use the <code class="literal">%</code> character as wildcard.</td></tr><tr><td>categoryNotEquals</td><td>No</td><td>String</td><td>Only return models without the given category.</td></tr><tr><td>name</td><td>No</td><td>String</td><td>Only return models with the given name.</td></tr><tr><td>nameLike</td><td>No</td><td>String</td><td>Only return models with a name like the given value. Use the <code class="literal">%</code> character as wildcard.</td></tr><tr><td>key</td><td>No</td><td>String</td><td>Only return models with the given key.</td></tr><tr><td>deploymentId</td><td>No</td><td>String</td><td>Only return models which are deployed in the given deployment.</td></tr><tr><td>version</td><td>No</td><td>Integer</td><td>Only return models with the given version.</td></tr><tr><td>latestVersion</td><td>No</td><td>Boolean</td><td>If <code class="literal">true</code>, only return models which are the latest version. Best used in combination with <code class="literal">key</code>. If <code class="literal">false</code> is passed in as value, this is ignored and all versions are returned.</td></tr><tr><td>deployed</td><td>No</td><td>Boolean</td><td>If <code class="literal">true</code>, only deployed models are returned. If <code class="literal">false</code>, only undeployed models are returned (deploymentId is null).</td></tr><tr><td>sort</td><td>No</td><td>'id' (default), 'category', 'createTime', 'key', 'lastUpdateTime', 'name' and 'version'</td><td>Property to sort on, to be used toghether with the 'order'.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N1353F"></a><p class="title"><b>Table&nbsp;15.43.&nbsp;Get a list of models - Response codes</b></p><div class="table-contents"><table summary="Get a list of models - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the models are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "name":"Model name",
         "key":"Model key",
         "category":"Model category",
         "version":2,
         "metaInfo":"Model metainfo",
         "deploymentId":"7",
         "id":"10",
         "url":"http://localhost:8182/repository/models/10",
         "createTime":"2013-06-12T14:31:08.612+0000",
         "lastUpdateTime":"2013-06-12T14:31:08.612+0000",
         "deploymentUrl":"http://localhost:8182/repository/deployments/7"
      },
      
      ...
      
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</pre><p>
    </p></div><div class="section" title="Get a model"><div class="titlepage"><div><div><h3 class="title"><a name="N1355F"></a>Get a model</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/models/{modelId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13569"></a><p class="title"><b>Table&nbsp;15.44.&nbsp;Get a model - URL parameters</b></p><div class="table-contents"><table summary="Get a model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>modelId</td><td>Yes</td><td>String</td><td>The id of the model to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13585"></a><p class="title"><b>Table&nbsp;15.45.&nbsp;Get a model - Response codes</b></p><div class="table-contents"><table summary="Get a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the model was found and returned.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000"
}</pre><p>
    </p></div><div class="section" title="Update a model"><div class="titlepage"><div><div><h3 class="title"><a name="N135A5"></a>Update a model</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT repository/models/{modelId}</pre><p>
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
{
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2"
}</pre><p>
   All request values are optional. For example, you can only include the 'name' attribute in the request body JSON-object, only updating the name of the model, leaving all other fields unaffected. When an attribute is explicitly included and is set to null, the model-value will be updated to null. Example: <code class="literal">{"metaInfo" : null}</code> will clear the metaInfo of the model).
    </p><p>
          </p><div class="table"><a name="N135BB"></a><p class="title"><b>Table&nbsp;15.46.&nbsp;Update a model - Response codes</b></p><div class="table-contents"><table summary="Update a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the model was found and updated.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000"
}</pre><p>
    </p></div><div class="section" title="Create a model"><div class="titlepage"><div><div><h3 class="title"><a name="N135DB"></a>Create a model</h3></div></div></div><p>
          </p><pre class="prettyprint">POST repository/models</pre><p>
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
{
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":1,
   "metaInfo":"Model metainfo",
   "deploymentId":"2"
}</pre><p>
   All request values are optional. For example, you can only include the 'name' attribute in the request body JSON-object, only setting the name of the model, leaving all other fields null.
    </p><p>
          </p><div class="table"><a name="N135EE"></a><p class="title"><b>Table&nbsp;15.47.&nbsp;Create a model - Response codes</b></p><div class="table-contents"><table summary="Create a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the model was created.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":1,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000"
}</pre><p>
    </p></div><div class="section" title="Delete a model"><div class="titlepage"><div><div><h3 class="title"><a name="N13609"></a>Delete a model</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE repository/models/{modelId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13613"></a><p class="title"><b>Table&nbsp;15.48.&nbsp;Delete a model - URL parameters</b></p><div class="table-contents"><table summary="Delete a model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>modelId</td><td>Yes</td><td>String</td><td>The id of the model to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N1362F"></a><p class="title"><b>Table&nbsp;15.49.&nbsp;Delete a model - Response codes</b></p><div class="table-contents"><table summary="Delete a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the model was found and has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get the editor source for a model"><div class="titlepage"><div><div><h3 class="title"><a name="N13646"></a>Get the editor source for a model</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/models/{modelId}/source</pre><p>
        </p><p>
            </p><div class="table"><a name="N13650"></a><p class="title"><b>Table&nbsp;15.50.&nbsp;Get the editor source for a model - URL parameters</b></p><div class="table-contents"><table summary="Get the editor source for a model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>modelId</td><td>Yes</td><td>String</td><td>The id of the model.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N1366C"></a><p class="title"><b>Table&nbsp;15.51.&nbsp;Get the editor source for a model - Response codes</b></p><div class="table-contents"><table summary="Get the editor source for a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the model was found and source is returned.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
       Reponse body contains the model's raw editor source. The response's content-type is set to <code class="literal">application/octet-stream</code>, regardless of the content of the source.
    </p></div><div class="section" title="Set the editor source for a model"><div class="titlepage"><div><div><h3 class="title"><a name="N1368C"></a>Set the editor source for a model</h3></div></div></div><p>
        </p><pre class="prettyprint">PUT repository/models/{modelId}/source</pre><p>
      </p><p>
          </p><div class="table"><a name="N13696"></a><p class="title"><b>Table&nbsp;15.52.&nbsp;Set the editor source for a model - URL parameters</b></p><div class="table-contents"><table summary="Set the editor source for a model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>modelId</td><td>Yes</td><td>String</td><td>The id of the model.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the source.
        </p><p>
          </p><div class="table"><a name="N136BB"></a><p class="title"><b>Table&nbsp;15.53.&nbsp;Set the editor source for a model - Response codes</b></p><div class="table-contents"><table summary="Set the editor source for a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the model was found and the source has been updated.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
       Reponse body contains the model's raw editor source. The response's content-type is set to <code class="literal">application/octet-stream</code>, regardless of the content of the source.
    </p></div><div class="section" title="Get the extra editor source for a model"><div class="titlepage"><div><div><h3 class="title"><a name="N136DB"></a>Get the extra editor source for a model</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/models/{modelId}/source-extra</pre><p>
        </p><p>
            </p><div class="table"><a name="N136E5"></a><p class="title"><b>Table&nbsp;15.54.&nbsp;Get the extra editor source for a model - URL parameters</b></p><div class="table-contents"><table summary="Get the extra editor source for a model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>modelId</td><td>Yes</td><td>String</td><td>The id of the model.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13701"></a><p class="title"><b>Table&nbsp;15.55.&nbsp;Get the extra editor source for a model - Response codes</b></p><div class="table-contents"><table summary="Get the extra editor source for a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the model was found and source is returned.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
       Reponse body contains the model's raw extra editor source. The response's content-type is set to <code class="literal">application/octet-stream</code>, regardless of the content of the extra source.
    </p></div><div class="section" title="Set the extra editor source for a model"><div class="titlepage"><div><div><h3 class="title"><a name="N13721"></a>Set the extra editor source for a model</h3></div></div></div><p>
        </p><pre class="prettyprint">PUT repository/models/{modelId}/source-extra</pre><p>
      </p><p>
          </p><div class="table"><a name="N1372B"></a><p class="title"><b>Table&nbsp;15.56.&nbsp;Set the extra editor source for a model - URL parameters</b></p><div class="table-contents"><table summary="Set the extra editor source for a model - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>modelId</td><td>Yes</td><td>String</td><td>The id of the model.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the extra source.
        </p><p>
          </p><div class="table"><a name="N13750"></a><p class="title"><b>Table&nbsp;15.57.&nbsp;Set the extra editor source for a model - Response codes</b></p><div class="table-contents"><table summary="Set the extra editor source for a model - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the model was found and the extra source has been updated.</td></tr><tr><td>404</td><td>Indicates the requested model was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
       Reponse body contains the model's raw editor source. The response's content-type is set to <code class="literal">application/octet-stream</code>, regardless of the content of the source.
    </p></div></div><div class="section" title="Process Instances"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N13770"></a>Process Instances</h2></div></div></div><div class="section" title="Get a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13773"></a>Get a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/process-instances/{processInstanceId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N1377D"></a><p class="title"><b>Table&nbsp;15.58.&nbsp;Get a process instance - URL parameters</b></p><div class="table-contents"><table summary="Get a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13799"></a><p class="title"><b>Table&nbsp;15.59.&nbsp;Get a process instance - Response codes</b></p><div class="table-contents"><table summary="Get a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process instance was found and returned.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</pre><p>
    </p></div><div class="section" title="Delete a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N137B9"></a>Delete a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/process-instances/{processInstanceId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N137C3"></a><p class="title"><b>Table&nbsp;15.60.&nbsp;Delete a process instance - URL parameters</b></p><div class="table-contents"><table summary="Delete a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N137DF"></a><p class="title"><b>Table&nbsp;15.61.&nbsp;Delete a process instance - Response codes</b></p><div class="table-contents"><table summary="Delete a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the process instance was found and deleted. Response body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Activate or suspend a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N137F6"></a>Activate or suspend a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/process-instances/{processInstanceId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13800"></a><p class="title"><b>Table&nbsp;15.62.&nbsp;Activate or suspend a process instance - URL parameters</b></p><div class="table-contents"><table summary="Activate or suspend a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to activate/suspend.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request response body (suspend):</strong></span>
            </p><pre class="prettyprint">
{
   "action":"suspend"
}</pre><p>
    </p><p>
       <span class="bold"><strong>Request response body (activate):</strong></span>
            </p><pre class="prettyprint">
{
   "action":"activate"
}</pre><p>
    </p><p>
          </p><div class="table"><a name="N1382E"></a><p class="title"><b>Table&nbsp;15.63.&nbsp;Activate or suspend a process instance - Response codes</b></p><div class="table-contents"><table summary="Activate or suspend a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process instance was found and action was executed.</td></tr><tr><td>400</td><td>Indicates an invalid action was supplied.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr><tr><td>409</td><td>Indicates the requested process instance action cannot be executed since the process-instance is already activated/suspended.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Start a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N1384F"></a>Start a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/process-instances</pre><p>
        </p><p>
       <span class="bold"><strong>Request body (start by process definition id):</strong></span>
            </p><pre class="prettyprint">
{
   "processDefinitionId":"oneTaskProcess:1:158",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },
      
      ... 
   ]
}</pre><p>
    </p><p>
       <span class="bold"><strong>Request body (start by process definition key):</strong></span>
            </p><pre class="prettyprint">
{
   "processDefinitionKey":"oneTaskProcess",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },
      
      ... 
   ]
}</pre><p>
    </p><p>
       <span class="bold"><strong>Request body (start by message):</strong></span>
            </p><pre class="prettyprint">
{
   "processDefinitionKey":"newOrderMessage",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },
      
      ... 
   ]
}</pre><p>
    </p><p>
    Only one of <code class="literal">processDefinitionId</code>, <code class="literal">processDefinitionKey</code> or <code class="literal">message</code> can be used in the request body. Both <code class="literal">businessKey</code> and <code class="literal">variables</code> are optional.
    More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>. Note that the variable-scope that is supplied is ignored, process-variables are always <code class="literal">local</code>.
    </p><p>
          </p><div class="table"><a name="N1388C"></a><p class="title"><b>Table&nbsp;15.64.&nbsp;Start a process instance - Response codes</b></p><div class="table-contents"><table summary="Start a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the process instance was created.</td></tr><tr><td>400</td><td>Indicates either the process-definition was not found (based on id or key), no process is started by sending the given message or an invalid variable has been passed. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</pre><p>
    </p></div><div class="section" title="List of process instances"><div class="titlepage"><div><div><h3 class="title"><a name="restProcessInstancesGet"></a>List of process instances</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/process-instances</pre><p>
        </p><p>
            </p><div class="table"><a name="N138B7"></a><p class="title"><b>Table&nbsp;15.65.&nbsp;List of process instances - URL query parameters</b></p><div class="table-contents"><table summary="List of process instances - URL query parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>No</td><td>String</td><td>Only return process instance with the given id.</td></tr><tr><td>processDefinitionKey</td><td>No</td><td>String</td><td>Only return process instances with the given process definition key.</td></tr><tr><td>processDefinitionId</td><td>No</td><td>String</td><td>Only return process instances with the given process definition id.</td></tr><tr><td>businessKey</td><td>No</td><td>String</td><td>Only return process instances with the given businessKey.</td></tr><tr><td>involvedUser</td><td>No</td><td>String</td><td>Only return process instances in which the given user is involved.</td></tr><tr><td>suspended</td><td>No</td><td>Boolean</td><td>If <code class="literal">true</code>, only return process instance which are suspended. If <code class="literal">false</code>, only return process instances which are not suspended (active).</td></tr><tr><td>superProcessInstanceId</td><td>No</td><td>String</td><td>Only return process instances which have the given super process-instance id (for processes that have a call-activities).</td></tr><tr><td>subProcessInstanceId</td><td>No</td><td>String</td><td>Only return process instances which have the given sub process-instance id (for processes started as a call-activity).</td></tr><tr><td>excludeSubprocesses</td><td>No</td><td>Boolean</td><td>Return only process instances which aren't sub processes.</td></tr><tr><td>includeProcessVariables</td><td>No</td><td>Boolean</td><td>Indication to include process variables in the result.</td></tr><tr><td>sort</td><td>No</td><td>String</td><td>Sort field, should be either one of <code class="literal">id</code> (default), <code class="literal">processDefinitionId</code> or <code class="literal">processDefinitionKey</code>.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13946"></a><p class="title"><b>Table&nbsp;15.66.&nbsp;List of process instances - Response codes</b></p><div class="table-contents"><table summary="List of process instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the process-instances are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format . The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/process-instances/7",
         "businessKey":"myBusinessKey",
         "suspended":false,
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
         "activityId":"processTask"
      },
      
      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</pre><p>
    </p></div><div class="section" title="Query process instances"><div class="titlepage"><div><div><h3 class="title"><a name="N13966"></a>Query process instances</h3></div></div></div><p>
          </p><pre class="prettyprint">POST query/process-instances</pre><p>
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
{
  "processDefinitionKey":"oneTaskProcess",
  "variables": 
  [
    {
        "name" : "myVariable",
        "value" : 1234,
        "operator" : "equals",
        "type" : "long"
    },
    ...
  ],
  ...
}</pre><p>

The request body can contain all possible filters that can be used in the <a class="link" href="#restProcessInstancesGet" title="List of process instances">List process instances</a> URL query. On top of these, it's possible to provide an array of variables
to include in the query, with their format <a class="link" href="#restQueryVariable" title="JSON query variable format"> described here</a>.
    </p><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p><p>
          </p><div class="table"><a name="N13987"></a><p class="title"><b>Table&nbsp;15.67.&nbsp;Query process instances - Response codes</b></p><div class="table-contents"><table summary="Query process instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the process-instances are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format . The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/process-instances/7",
         "businessKey":"myBusinessKey",
         "suspended":false,
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
         "activityId":"processTask"
      },
      
      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</pre><p>
    </p></div><div class="section" title="Get diagram for a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N139A7"></a>Get diagram for a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/process-instances/{processInstanceId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N139B1"></a><p class="title"><b>Table&nbsp;15.68.&nbsp;Get diagram for a process instance - URL parameters</b></p><div class="table-contents"><table summary="Get diagram for a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to get the diagram for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N139CD"></a><p class="title"><b>Table&nbsp;15.69.&nbsp;Get diagram for a process instance - Response codes</b></p><div class="table-contents"><table summary="Get diagram for a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process instance was found and the diagram was returned.</td></tr><tr><td>400</td><td>Indicates the requested process instance was not found but the process doesn't contain any graphical information (BPMN:DI) and no diagram can be created.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</pre><p>
    </p></div><div class="section" title="Get involved people for process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N139F2"></a>Get involved people for process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/process-instances/{processInstanceId}/identitylinks</pre><p>
        </p><p>
            </p><div class="table"><a name="N139FC"></a><p class="title"><b>Table&nbsp;15.70.&nbsp;Get involved people for process instance - URL parameters</b></p><div class="table-contents"><table summary="Get involved people for process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to the links for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13A18"></a><p class="title"><b>Table&nbsp;15.71.&nbsp;Get involved people for process instance - Response codes</b></p><div class="table-contents"><table summary="Get involved people for process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process instance was found and links are returned.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
      "user":"john",
      "group":null,
      "type":"customType"
   },
   {
      "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/paul/candidate",
      "user":"paul",
      "group":null,
      "type":"candidate"
   }
]</pre><p>
Note that the <code class="literal">groupId</code> will always be null, as it's only possible to involve users with a process-instance.
    </p></div><div class="section" title="Add an involved user to a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13A3B"></a>Add an involved user to a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/process-instances/{processInstanceId}/identitylinks</pre><p>
        </p><p>
            </p><div class="table"><a name="N13A45"></a><p class="title"><b>Table&nbsp;15.72.&nbsp;Add an involved user to a process instance - URL parameters</b></p><div class="table-contents"><table summary="Add an involved user to a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to the links for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
{
  "userId":"kermit",
  "type":"participant"
}</pre><p>
Both <code class="literal">userId</code> and <code class="literal">type</code> are required.
    </p><p>
          </p><div class="table"><a name="N13A70"></a><p class="title"><b>Table&nbsp;15.73.&nbsp;Add an involved user to a process instance - Response codes</b></p><div class="table-contents"><table summary="Add an involved user to a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the process instance was found and the link is created.</td></tr><tr><td>400</td><td>Indicates the requested body did not contain a userId or a type.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
   "user":"john",
   "group":null,
   "type":"customType"
}</pre><p>
Note that the <code class="literal">groupId</code> will always be null, as it's only possible to involve users with a process-instance.
    </p></div><div class="section" title="Remove an involved user to from process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13A98"></a>Remove an involved user to from process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/process-instances/{processInstanceId}/identitylinks/users/{userId}/{type}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13AA2"></a><p class="title"><b>Table&nbsp;15.74.&nbsp;Remove an involved user to from process instance - URL parameters</b></p><div class="table-contents"><table summary="Remove an involved user to from process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance.</td></tr><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to delete link for.</td></tr><tr><td>type</td><td>Yes</td><td>String</td><td>Type of link to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13AD0"></a><p class="title"><b>Table&nbsp;15.75.&nbsp;Remove an involved user to from process instance - Response codes</b></p><div class="table-contents"><table summary="Remove an involved user to from process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the process instance was found and the link has been deleted. Response body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found or the link to delete doesn't exist. The response status contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
   "user":"john",
   "group":null,
   "type":"customType"
}</pre><p>
Note that the <code class="literal">groupId</code> will always be null, as it's only possible to involve users with a process-instance.
    </p></div><div class="section" title="List of variables for a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13AF3"></a>List of variables for a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/process-instances/{processInstanceId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N13AFD"></a><p class="title"><b>Table&nbsp;15.76.&nbsp;List of variables for a process instance - URL parameters</b></p><div class="table-contents"><table summary="List of variables for a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to the variables for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13B19"></a><p class="title"><b>Table&nbsp;15.77.&nbsp;List of variables for a process instance - Response codes</b></p><div class="table-contents"><table summary="List of variables for a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process instance was found and variables are returned.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },
   {
      "name":"byteArrayProcVar",
      "type":"binary",
      "value":null,
      "valueUrl":"http://localhost:8182/runtime/process-instances/5/variables/byteArrayProcVar/data",
      "scope":"local"
   },
   
   ...
]</pre><p>
In case the variable is a binary variable or serializable, the <code class="literal">valueUrl</code> points to an URL to fetch the raw value. If it's a plain variable, the value is present in the response. 
Note that only <code class="literal">local</code> scoped variables are returned, as there is no <code class="literal">global</code> scope for process-instance variables.</p></div><div class="section" title="Get a variable for a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13B42"></a>Get a variable for a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/process-instances/{processInstanceId}/variables/{variableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13B4C"></a><p class="title"><b>Table&nbsp;15.78.&nbsp;Get a variable for a process instance - URL parameters</b></p><div class="table-contents"><table summary="Get a variable for a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to the variables for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>Name of the variable to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13B71"></a><p class="title"><b>Table&nbsp;15.79.&nbsp;Get a variable for a process instance - Response codes</b></p><div class="table-contents"><table summary="Get a variable for a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates both the process instance and variable were found and variable is returned.</td></tr><tr><td>400</td><td>Indicates the request body is incomplete or contains illegal values. The status description contains additional information about the error.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found or the process instance does not have a variable with the given name. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</pre><p>
    In case the variable is a binary variable or serializable, the <code class="literal">valueUrl</code> points to an URL to fetch the raw value. If it's a plain variable, the value is present in the response. 
    Note that only <code class="literal">local</code> scoped variables are returned, as there is no <code class="literal">global</code> scope for process-instance variables.</p></div><div class="section" title="Create (or update) variables on a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13B9F"></a>Create (or update) variables on a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/process-instances/{processInstanceId}/variables</pre><p>
          </p><pre class="prettyprint">PUT runtime/process-instances/{processInstanceId}/variables</pre><p>
        </p><p>
          When using <code class="literal">POST</code>, all variables that are passed are created. In case one of the variables already exists on the process instance, the request results in an error (409 - CONFLICT). When <code class="literal">PUT</code> is used,
          unexisting variables are created on the process-instance and existing ones are overridden without any error. 
            </p><div class="table"><a name="N13BB2"></a><p class="title"><b>Table&nbsp;15.80.&nbsp;Create (or update) variables on a process instance - URL parameters</b></p><div class="table-contents"><table summary="Create (or update) variables on a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to the variables for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"intProcVar"
      "type":"integer"
      "value":123
   },
   
   ...
]</pre><p>
        Any number of variables can be passed into the request body array. More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>. Note that scope is ignored, only <code class="literal">local</code> variables can be set in a process instance.
        </p><p>
          </p><div class="table"><a name="N13BDE"></a><p class="title"><b>Table&nbsp;15.81.&nbsp;Create (or update) variables on a process instance - Response codes</b></p><div class="table-contents"><table summary="Create (or update) variables on a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the process instance was found and variable is created.</td></tr><tr><td>400</td><td>Indicates the request body is incomplete or contains illegal values. The status description contains additional information about the error.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr><tr><td>409</td><td>Indicates the process instance was found but already contains a variable with the given name (only thrown when POST method is used). Use the update-method instead.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },
   
   ...
   
]</pre><p>
  </p></div><div class="section" title="Update a single variable on a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13C08"></a>Update a single variable on a process instance</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/process-instances/{processInstanceId}/variables/{variableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13C12"></a><p class="title"><b>Table&nbsp;15.82.&nbsp;Update a single variable on a process instance - URL parameters</b></p><div class="table-contents"><table summary="Update a single variable on a process instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to the variables for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>Name of the variable to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
 {
    "name":"intProcVar"
    "type":"integer"
    "value":123
 }</pre><p>
        More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>. Note that scope is ignored, only <code class="literal">local</code> variables can be set in a process instance.
        </p><p>
          </p><div class="table"><a name="N13C47"></a><p class="title"><b>Table&nbsp;15.83.&nbsp;Update a single variable on a process instance - Response codes</b></p><div class="table-contents"><table summary="Update a single variable on a process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates both the process instance and variable were found and variable is updated.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found or the process instance does not have a variable with the given name. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</pre><p>
  In case the variable is a binary variable or serializable, the <code class="literal">valueUrl</code> points to an URL to fetch the raw value. If it's a plain variable, the value is present in the response. 
  Note that only <code class="literal">local</code> scoped variables are returned, as there is no <code class="literal">global</code> scope for process-instance variables.
  </p></div><div class="section" title="Create a new binary variable on a process-instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13C70"></a>Create a new binary variable on a process-instance</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/process-instances/{processInstanceId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N13C7A"></a><p class="title"><b>Table&nbsp;15.84.&nbsp;Create a new binary variable on a process-instance - URL parameters</b></p><div class="table-contents"><table summary="Create a new binary variable on a process-instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to create the new variable for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additional form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is created. If omitted, <code class="literal">binary</code> is assumed and the binary data in the request will be stored as an array of bytes.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/process-instances/123/variables/binaryVariable/data"
}</pre><p>
          </p><div class="table"><a name="N13CB5"></a><p class="title"><b>Table&nbsp;15.85.&nbsp;Create a new binary variable on a process-instance - Response codes</b></p><div class="table-contents"><table summary="Create a new binary variable on a process-instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the variable was created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of the variable to create was missing. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found.</td></tr><tr><td>409</td><td>Indicates the process instance already has a variable with the given name. Use the PUT method to update the task variable instead.</td></tr><tr><td>415</td><td>Indicates the serializable data contains an object for which no class is present in the JVM running the Activiti engine and therefore cannot be deserialized.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Update an existing binary variable on a process-instance"><div class="titlepage"><div><div><h3 class="title"><a name="N13CDB"></a>Update an existing binary variable on a process-instance</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/process-instances/{processInstanceId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N13CE5"></a><p class="title"><b>Table&nbsp;15.86.&nbsp;Update an existing binary variable on a process-instance - URL parameters</b></p><div class="table-contents"><table summary="Update an existing binary variable on a process-instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>Yes</td><td>String</td><td>The id of the process instance to create the new variable for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additional form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is created. If omitted, <code class="literal">binary</code> is assumed and the binary data in the request will be stored as an array of bytes.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/process-instances/123/variables/binaryVariable/data"
}</pre><p>
          </p><div class="table"><a name="N13D20"></a><p class="title"><b>Table&nbsp;15.87.&nbsp;Update an existing binary variable on a process-instance - Response codes</b></p><div class="table-contents"><table summary="Update an existing binary variable on a process-instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the variable was udpated and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of the variable to update was missing. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found or the process instance does not have a variable with the given name.</td></tr><tr><td>415</td><td>Indicates the serializable data contains an object for which no class is present in the JVM running the Activiti engine and therefore cannot be deserialized.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div></div><div class="section" title="Executions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N13D41"></a>Executions</h2></div></div></div><div class="section" title="Get an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N13D44"></a>Get an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/executions/{executionId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13D4E"></a><p class="title"><b>Table&nbsp;15.88.&nbsp;Get an execution - URL parameters</b></p><div class="table-contents"><table summary="Get an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13D6A"></a><p class="title"><b>Table&nbsp;15.89.&nbsp;Get an execution - Response codes</b></p><div class="table-contents"><table summary="Get an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the execution was found and returned.</td></tr><tr><td>404</td><td>Indicates the execution was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"5",
   "url":"http://localhost:8182/runtime/executions/5",
   "parentId":null,
   "parentUrl":null,
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "suspended":false,
   "activityId":null
}</pre><p>
    </p></div><div class="section" title="Execute an action on an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N13D8A"></a>Execute an action on an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/executions/{executionId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13D94"></a><p class="title"><b>Table&nbsp;15.90.&nbsp;Execute an action on an execution - URL parameters</b></p><div class="table-contents"><table summary="Execute an action on an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to execute action on.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body (signal an execution):</strong></span>
            </p><pre class="prettyprint">
{
  "action":"signal"
}</pre><p>
    </p><p>
       <span class="bold"><strong>Request body (signal event received for execution):</strong></span>
            </p><pre class="prettyprint">
{
  "action":"signalEventReceived",
  "signalName":"mySignal"
  "variables": [ ... ]
}</pre><p>
 Notifies the execution that a signal event has been received, requires a <code class="literal">signalName</code> parameter. Optional <code class="literal">variables</code> can be passed that are set on the execution before the action is executed.
    </p><p>
       <span class="bold"><strong>Request body (signal event received for execution):</strong></span>
            </p><pre class="prettyprint">
{
  "action":"messageEventReceived",
  "messageName":"myMessage"
  "variables": [ ... ]
}</pre><p>
 Notifies the execution that a message event has been received, requires a <code class="literal">messageName</code> parameter. Optional <code class="literal">variables</code> can be passed that are set on the execution before the action is executed.
    </p><p>
          </p><div class="table"><a name="N13DD7"></a><p class="title"><b>Table&nbsp;15.91.&nbsp;Execute an action on an execution - Response codes</b></p><div class="table-contents"><table summary="Execute an action on an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the execution was found and the action is performed.</td></tr><tr><td>204</td><td>Indicates the execution was found, the action was performed and the action caused the execution to end.</td></tr><tr><td>400</td><td>Indicates an illegal action was requested, required parameters are missing in the resuest body or illegal variables are passed in. Status description contains additional information about the error.</td></tr><tr><td>404</td><td>Indicates the execution was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body (in case execution is not ended due to action):</strong></span>
            </p><pre class="prettyprint">
{
   "id":"5",
   "url":"http://localhost:8182/runtime/executions/5",
   "parentId":null,
   "parentUrl":null,
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "suspended":false,
   "activityId":null
}</pre><p>
    </p></div><div class="section" title="Get active activities in an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N13E01"></a>Get active activities in an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/executions/{executionId}/activities</pre><p>
        </p><p>
          Returns all activities which are active in the execution and in all child-executions (and their children, recursively), if any.
        </p><p>
            </p><div class="table"><a name="N13E0D"></a><p class="title"><b>Table&nbsp;15.92.&nbsp;Get active activities in an execution - URL parameters</b></p><div class="table-contents"><table summary="Get active activities in an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to get activities for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13E29"></a><p class="title"><b>Table&nbsp;15.93.&nbsp;Get active activities in an execution - Response codes</b></p><div class="table-contents"><table summary="Get active activities in an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the execution was found and activities are returned.</td></tr><tr><td>404</td><td>Indicates the execution was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  "userTaskForManager",
  "receiveTask"
]</pre><p>
    </p></div><div class="section" title="List of executions"><div class="titlepage"><div><div><h3 class="title"><a name="restExecutionsGet"></a>List of executions</h3></div></div></div><p>
          </p><pre class="prettyprint">GET repository/executions</pre><p>
        </p><p>
            </p><div class="table"><a name="N13E54"></a><p class="title"><b>Table&nbsp;15.94.&nbsp;List of executions - URL query parameters</b></p><div class="table-contents"><table summary="List of executions - URL query parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>No</td><td>String</td><td>Only return executions with the given id.</td></tr><tr><td>processDefinitionKey</td><td>No</td><td>String</td><td>Only return executions with the given process definition key.</td></tr><tr><td>processDefinitionId</td><td>No</td><td>String</td><td>Only return executions with the given process definition id.</td></tr><tr><td>processInstanceId</td><td>No</td><td>String</td><td>Only return executions which are part of the process instance with the given id.</td></tr><tr><td>messageEventSubscriptionName</td><td>No</td><td>String</td><td>Only return executions which are subscribed to a message with the given name.</td></tr><tr><td>signalEventSubscriptionName</td><td>No</td><td>String</td><td>Only return executions which are subscribed to a signal with the given name.</td></tr><tr><td>parentId</td><td>No</td><td>String</td><td>Only return executions wich are a direct child of the given execution.</td></tr><tr><td>sort</td><td>No</td><td>String</td><td>Sort field, should be either one of <code class="literal">processInstanceId</code> (default), <code class="literal">processDefinitionId</code> or <code class="literal">processDefinitionKey</code>.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13EC2"></a><p class="title"><b>Table&nbsp;15.95.&nbsp;List of executions - Response codes</b></p><div class="table-contents"><table summary="List of executions - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the executions are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format . The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "id":"5",
         "url":"http://localhost:8182/runtime/executions/5",
         "parentId":null,
         "parentUrl":null,
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":null
      },
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/executions/7",
         "parentId":"5",
         "parentUrl":"http://localhost:8182/runtime/executions/5",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":"processTask"
      }
   ],
   "total":2,
   "start":0,
   "sort":"processInstanceId",
   "order":"asc",
   "size":2
}</pre><p>
    </p></div><div class="section" title="Query executions"><div class="titlepage"><div><div><h3 class="title"><a name="N13EE2"></a>Query executions</h3></div></div></div><p>
          </p><pre class="prettyprint">POST query/executions</pre><p>
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
{
  "processDefinitionKey":"oneTaskProcess",
  "variables": 
  [
    {
        "name" : "myVariable",
        "value" : 1234,
        "operator" : "equals",
        "type" : "long"
    },
    ...
  ],
  "processInstanceVariables": 
  [
    {
        "name" : "processVariable",
        "value" : "some string",
        "operator" : "equals",
        "type" : "string"
    },
    ...
  ],
  ...
}</pre><p>

The request body can contain all possible filters that can be used in the <a class="link" href="#restExecutionsGet" title="List of executions">List executions</a> URL query. On top of these, it's possible to provide an array of <code class="literal">variables</code> and <code class="literal">processInstanceVariables</code>
to include in the query, with their format <a class="link" href="#restQueryVariable" title="JSON query variable format"> described here</a>.
    </p><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p><p>
          </p><div class="table"><a name="N13F09"></a><p class="title"><b>Table&nbsp;15.96.&nbsp;Query executions - Response codes</b></p><div class="table-contents"><table summary="Query executions - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the executions are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format . The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "id":"5",
         "url":"http://localhost:8182/runtime/executions/5",
         "parentId":null,
         "parentUrl":null,
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":null
      },
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/executions/7",
         "parentId":"5",
         "parentUrl":"http://localhost:8182/runtime/executions/5",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":"processTask"
      }
   ],
   "total":2,
   "start":0,
   "sort":"processInstanceId",
   "order":"asc",
   "size":2
}</pre><p>
    </p></div><div class="section" title="List of variables for an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N13F29"></a>List of variables for an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/executions/{executionId}/variables?scope={scope}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13F33"></a><p class="title"><b>Table&nbsp;15.97.&nbsp;List of variables for an execution - URL parameters</b></p><div class="table-contents"><table summary="List of variables for an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to the variables for.</td></tr><tr><td>scope</td><td>No</td><td>String</td><td>Either <code class="literal">local</code> or <code class="literal">global</code>. If ommitted, both local and global scoped variables are returned.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13F5E"></a><p class="title"><b>Table&nbsp;15.98.&nbsp;List of variables for an execution - Response codes</b></p><div class="table-contents"><table summary="List of variables for an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the execution was found and variables are returned.</td></tr><tr><td>404</td><td>Indicates the requested execution was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"global"
   },
   {
      "name":"byteArrayProcVar",
      "type":"binary",
      "value":null,
      "valueUrl":"http://localhost:8182/runtime/process-instances/5/variables/byteArrayProcVar/data",
      "scope":"local"
   },
   
   ...
]</pre><p>
In case the variable is a binary variable or serializable, the <code class="literal">valueUrl</code> points to an URL to fetch the raw value. If it's a plain variable, the value is present in the response.
</p></div><div class="section" title="Get a variable for an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N13F81"></a>Get a variable for an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/executions/{executionId}/variables/{variableName}?scope={scope}</pre><p>
        </p><p>
            </p><div class="table"><a name="N13F8B"></a><p class="title"><b>Table&nbsp;15.99.&nbsp;Get a variable for an execution - URL parameters</b></p><div class="table-contents"><table summary="Get a variable for an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to the variables for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>Name of the variable to get.</td></tr><tr><td>scope</td><td>No</td><td>String</td><td>Either <code class="literal">local</code> or <code class="literal">global</code>. If ommitted, local variable is returned (if exists). If not, a global variable is returned (if exists).</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N13FBF"></a><p class="title"><b>Table&nbsp;15.100.&nbsp;Get a variable for an execution - Response codes</b></p><div class="table-contents"><table summary="Get a variable for an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates both the execution and variable were found and variable is returned.</td></tr><tr><td>400</td><td>Indicates the request body is incomplete or contains illegal values. The status description contains additional information about the error.</td></tr><tr><td>404</td><td>Indicates the requested execution was not found or the execution does not have a variable with the given name in the requested scope (in case scope-query parameter was omitted, variable doesn't exist in local and global scope). Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</pre><p>
    In case the variable is a binary variable or serializable, the <code class="literal">valueUrl</code> points to an URL to fetch the raw value. If it's a plain variable, the value is present in the response.
    </p></div><div class="section" title="Create (or update) variables on an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N13FE7"></a>Create (or update) variables on an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/executions/{executionId}/variables</pre><p>
          </p><pre class="prettyprint">PUT runtime/executions/{executionId}/variables</pre><p>
        </p><p>
          When using <code class="literal">POST</code>, all variables that are passed are created. In case one of the variables already exists on the execution in the requested scope, the request results in an error (409 - CONFLICT). When <code class="literal">PUT</code> is used,
          unexisting variables are created on the execution and existing ones are overridden without any error. 
            </p><div class="table"><a name="N13FFA"></a><p class="title"><b>Table&nbsp;15.101.&nbsp;Create (or update) variables on an execution - URL parameters</b></p><div class="table-contents"><table summary="Create (or update) variables on an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to the variables for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"intProcVar"
      "type":"integer"
      "value":123,
      "scope":"local"
   },
   
   ...
]</pre><p>
        <span class="bold"><strong>Note that you can only provide variables that have the same scope. If the request-body array contains variables from mixed scopes, the request results in an error (400 - BAD REQUEST).</strong></span>Any number of variables can be passed into the request body array. More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>. Note that scope is ignored, only <code class="literal">local</code> variables can be set in a process instance.
        </p><p>
          </p><div class="table"><a name="N1402A"></a><p class="title"><b>Table&nbsp;15.102.&nbsp;Create (or update) variables on an execution - Response codes</b></p><div class="table-contents"><table summary="Create (or update) variables on an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the execution was found and variable is created.</td></tr><tr><td>400</td><td>Indicates the request body is incomplete or contains illegal values. The status description contains additional information about the error.</td></tr><tr><td>404</td><td>Indicates the requested execution was not found.</td></tr><tr><td>409</td><td>Indicates the execution was found but already contains a variable with the given name (only thrown when POST method is used). Use the update-method instead.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },
   
   ...
   
]</pre><p>
  </p></div><div class="section" title="Update a variable on an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N14054"></a>Update a variable on an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/executions/{executionId}/variables/{variableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N1405E"></a><p class="title"><b>Table&nbsp;15.103.&nbsp;Update a variable on an execution - URL parameters</b></p><div class="table-contents"><table summary="Update a variable on an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to update the variables for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>Name of the variable to update.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
            </p><pre class="prettyprint">
 {
    "name":"intProcVar"
    "type":"integer"
    "value":123,
    "scope":"global"
 }</pre><p>
        More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>.
        </p><p>
          </p><div class="table"><a name="N14090"></a><p class="title"><b>Table&nbsp;15.104.&nbsp;Update a variable on an execution - Response codes</b></p><div class="table-contents"><table summary="Update a variable on an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates both the process instance and variable were found and variable is updated.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found or the process instance does not have a variable with the given name. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"global"
   }</pre><p>
  In case the variable is a binary variable or serializable, the <code class="literal">valueUrl</code> points to an URL to fetch the raw value. If it's a plain variable, the value is present in the response. 
  </p></div><div class="section" title="Create a new binary variable on an execution"><div class="titlepage"><div><div><h3 class="title"><a name="N140B3"></a>Create a new binary variable on an execution</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/executions/{executionId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N140BD"></a><p class="title"><b>Table&nbsp;15.105.&nbsp;Create a new binary variable on an execution - URL parameters</b></p><div class="table-contents"><table summary="Create a new binary variable on an execution - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to create the new variable for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additional form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is created. If omitted, <code class="literal">binary</code> is assumed and the binary data in the request will be stored as an array of bytes.</p></li><li class="listitem"><p><code class="literal">scope</code>: Scope of variable that is created. If omitted, <code class="literal">local</code> is assumed.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/executions/123/variables/binaryVariable/data"
}</pre><p>
          </p><div class="table"><a name="N14100"></a><p class="title"><b>Table&nbsp;15.106.&nbsp;Create a new binary variable on an execution - Response codes</b></p><div class="table-contents"><table summary="Create a new binary variable on an execution - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the variable was created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of the variable to create was missing. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested execution was not found.</td></tr><tr><td>409</td><td>Indicates the execution already has a variable with the given name. Use the PUT method to update the task variable instead.</td></tr><tr><td>415</td><td>Indicates the serializable data contains an object for which no class is present in the JVM running the Activiti engine and therefore cannot be deserialized.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Update an existing binary variable on a process-instance"><div class="titlepage"><div><div><h3 class="title"><a name="N14126"></a>Update an existing binary variable on a process-instance</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/executions/{executionId}/variables/{variableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14130"></a><p class="title"><b>Table&nbsp;15.107.&nbsp;Update an existing binary variable on a process-instance - URL parameters</b></p><div class="table-contents"><table summary="Update an existing binary variable on a process-instance - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>executionId</td><td>Yes</td><td>String</td><td>The id of the execution to create the new variable for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>The name of the variable to update.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additional form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is created. If omitted, <code class="literal">binary</code> is assumed and the binary data in the request will be stored as an array of bytes.</p></li><li class="listitem"><p><code class="literal">scope</code>: Scope of variable that is created. If omitted, <code class="literal">local</code> is assumed.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/executions/123/variables/binaryVariable/data"
}</pre><p>
          </p><div class="table"><a name="N1417C"></a><p class="title"><b>Table&nbsp;15.108.&nbsp;Update an existing binary variable on a process-instance - Response codes</b></p><div class="table-contents"><table summary="Update an existing binary variable on a process-instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the variable was udpated and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of the variable to update was missing. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested execution was not found or the execution does not have a variable with the given name.</td></tr><tr><td>415</td><td>Indicates the serializable data contains an object for which no class is present in the JVM running the Activiti engine and therefore cannot be deserialized.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div></div><div class="section" title="Tasks"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1419D"></a>Tasks</h2></div></div></div><div class="section" title="Get a task"><div class="titlepage"><div><div><h3 class="title"><a name="N141A0"></a>Get a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N141AA"></a><p class="title"><b>Table&nbsp;15.109.&nbsp;Get a task - URL parameters</b></p><div class="table-contents"><table summary="Get a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N141C6"></a><p class="title"><b>Table&nbsp;15.110.&nbsp;Get a task - Response codes</b></p><div class="table-contents"><table summary="Get a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "assignee" : "kermit",
  "createTime" : "2013-04-17T10:17:43.902+0000",
  "delegationState" : "pending",
  "description" : "Task description",
  "dueDate" : "2013-04-17T10:17:43.902+0000",
  "execution" : "http://localhost:8182/runtime/executions/5",
  "id" : "8",
  "name" : "My task",
  "owner" : "owner",
  "parentTask" : "http://localhost:8182/runtime/tasks/9",
  "priority" : 50,
  "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "processInstance" : "http://localhost:8182/runtime/process-instances/5",
  "suspended" : false,
  "taskDefinitionKey" : "theTask",
  "url" : "http://localhost:8182/runtime/tasks/8"
}</pre><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">delegationState</code>: Delegation-state of the task, can be <code class="literal">null</code>, <code class="literal">"pending"</code> or <code class="literal">"resolved".</code></p></li></ul></div><p>
    </p></div><div class="section" title="List of tasks"><div class="titlepage"><div><div><h3 class="title"><a name="restTasksGet"></a>List of tasks</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks</pre><p>
        </p><p>
            </p><div class="table"><a name="N14200"></a><p class="title"><b>Table&nbsp;15.111.&nbsp;List of tasks - URL query parameters</b></p><div class="table-contents"><table summary="List of tasks - URL query parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>No</td><td>String</td><td>Only return tasks with the given name.</td></tr><tr><td>nameLike</td><td>No</td><td>String</td><td>Only return tasks with a name like the given name.</td></tr><tr><td>description</td><td>No</td><td>String</td><td>Only return tasks with the given description.</td></tr><tr><td>priority</td><td>No</td><td>Integer</td><td>Only return tasks with the given priotiry.</td></tr><tr><td>minimumPriority</td><td>No</td><td>Integer</td><td>Only return tasks with a priority greater than the given value.</td></tr><tr><td>maximumPriority</td><td>No</td><td>Integer</td><td>Only return tasks with a priority lower than the given value.</td></tr><tr><td>assignee</td><td>No</td><td>String</td><td>Only return tasks assigned to the given user.</td></tr><tr><td>owner</td><td>No</td><td>String</td><td>Only return tasks owned by the given user.</td></tr><tr><td>unassigned</td><td>No</td><td>Boolean</td><td>Only return tasks that are not assigned to anyone. If <code class="literal">false</code> is passed, the value is ignored.</td></tr><tr><td>delegationState</td><td>No</td><td>String</td><td>Only return tasks that have the given delegation state. Possible values are <code class="literal">pending</code> and <code class="literal">resolved</code>.</td></tr><tr><td>candidateUser</td><td>No</td><td>String</td><td>Only return tasks that can be claimed by the given user. This includes both tasks where the user is an explicit candidate for and task that are claimable by a group that the user is a member of.</td></tr><tr><td>candidateGroup</td><td>No</td><td>String</td><td>Only return tasks that can be claimed by a user in the given group.</td></tr><tr><td>involvedUser</td><td>No</td><td>String</td><td>Only return tasks in which the given user is involved.</td></tr><tr><td>taskDefinitionKey</td><td>No</td><td>String</td><td>Only return tasks with the given task definition id.</td></tr><tr><td>taskDefinitionKeyLike</td><td>No</td><td>String</td><td>Only return tasks with a given task definition id like the given value.</td></tr><tr><td>processInstanceId</td><td>No</td><td>String</td><td>Only return tasks which are part of the process instance with the given id.</td></tr><tr><td>processInstanceBusinessKey</td><td>No</td><td>String</td><td>Only return tasks which are part of the process instance with the given business key.</td></tr><tr><td>executionId</td><td>No</td><td>String</td><td>Only return tasks which are part of the execution with the given id.</td></tr><tr><td>createdOn</td><td>No</td><td>ISO Date</td><td>Only return tasks which are created on the given date.</td></tr><tr><td>createdBefore</td><td>No</td><td>ISO Date</td><td>Only return tasks which are created before the given date.</td></tr><tr><td>createdAfter</td><td>No</td><td>ISO Date</td><td>Only return tasks which are created after the given date.</td></tr><tr><td>dueOn</td><td>No</td><td>ISO Date</td><td>Only return tasks which are due on the given date.</td></tr><tr><td>dueBefore</td><td>No</td><td>ISO Date</td><td>Only return tasks which are due before the given date.</td></tr><tr><td>dueAfter</td><td>No</td><td>ISO Date</td><td>Only return tasks which are due after the given date.</td></tr><tr><td>excludeSubTasks</td><td>No</td><td>Boolean</td><td>Only return tasks that are not a subtask of another task.</td></tr><tr><td>active</td><td>No</td><td>Boolean</td><td>If <code class="literal">true</code>, only return tasks that are not suspended (either part of a process that is not suspended or not part of a process at all). If false, only tasks that are part of suspended process instances are returned.</td></tr><tr><td>includeTaskLocalVariables</td><td>No</td><td>Boolean</td><td>Indication to include task local variables in the result.</td></tr><tr><td>includeProcessVariables</td><td>No</td><td>Boolean</td><td>Indication to include process variables in the result.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N14325"></a><p class="title"><b>Table&nbsp;15.112.&nbsp;List of tasks - Response codes</b></p><div class="table-contents"><table summary="List of tasks - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the tasks are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format or that 'delegationState' has an invalid value (other than 'pending' and 'resolved'). The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "data": [
    { 
      "assignee" : "kermit",
      "createTime" : "2013-04-17T10:17:43.902+0000",
      "delegationState" : "pending",
      "description" : "Task description",
      "dueDate" : "2013-04-17T10:17:43.902+0000",
      "execution" : "http://localhost:8182/runtime/executions/5",
      "id" : "8",
      "name" : "My task",
      "owner" : "owner",
      "parentTask" : "http://localhost:8182/runtime/tasks/9",
      "priority" : 50,
      "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstance" : "http://localhost:8182/runtime/process-instances/5",
      "suspended" : false,
      "taskDefinitionKey" : "theTask",
      "url" : "http://localhost:8182/runtime/tasks/8"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
    </p></div><div class="section" title="Query for tasks"><div class="titlepage"><div><div><h3 class="title"><a name="N14345"></a>Query for tasks</h3></div></div></div><p>
          </p><pre class="prettyprint">POST repository/tasks</pre><p>
        </p><p>
          <span class="bold"><strong>Request body:</strong></span>
          </p><pre class="prettyprint">
{
  "name" : "My task",
  "description" : "The task description",
  
  ...
  
  "taskVariables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ],
    
    "processInstanceVariables" : [
      {
         ... 
      }
    ]
  ]
}</pre><p> 
        </p><p>
          All supported JSON parameter fields allowed are exactly the same as the parameters found for <a class="link" href="#restTasksGet" title="List of tasks">getting a collection of tasks</a>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
          for filtering based on task and process variables. The <code class="literal">taskVariables</code> and <code class="literal">processInstanceVariables</code> are both json-arrays containing objects with the format <a class="link" href="#restQueryVariable" title="JSON query variable format"> as described here.</a>
        </p><p>
          </p><div class="table"><a name="N14368"></a><p class="title"><b>Table&nbsp;15.113.&nbsp;Query for tasks - Response codes</b></p><div class="table-contents"><table summary="Query for tasks - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the tasks are returned</td></tr><tr><td>400</td><td>Indicates a parameter was passed in the wrong format or that 'delegationState' has an invalid value (other than 'pending' and 'resolved'). The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "data": [
    { 
      "assignee" : "kermit",
      "createTime" : "2013-04-17T10:17:43.902+0000",
      "delegationState" : "pending",
      "description" : "Task description",
      "dueDate" : "2013-04-17T10:17:43.902+0000",
      "execution" : "http://localhost:8182/runtime/executions/5",
      "id" : "8",
      "name" : "My task",
      "owner" : "owner",
      "parentTask" : "http://localhost:8182/runtime/tasks/9",
      "priority" : 50,
      "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstance" : "http://localhost:8182/runtime/process-instances/5",
      "suspended" : false,
      "taskDefinitionKey" : "theTask",
      "url" : "http://localhost:8182/runtime/tasks/8"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
    </p></div><div class="section" title="Update a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14388"></a>Update a task</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/tasks/{taskId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "assignee" : "assignee",
  "delegationState" : "resolved",
  "description" : "New task description",
  "dueDate" : "2013-04-17T13:06:02.438+02:00",
  "name" : "New task name",
  "owner" : "owner",
  "parentTaskId" : "3",
  "priority" : 20
}</pre><p>
      All request values are optional. For example, you can only include the 'assignee' attribute in the request body JSON-object, only updating the assignee of the task, leaving all other fields unaffected. When an attribute is explicitly included and is set to null, the task-value will be updated to null. Example: <code class="literal">{"dueDate" : null}</code> will clear the duedate of the task).
       </p><p>
          </p><div class="table"><a name="N1439E"></a><p class="title"><b>Table&nbsp;15.114.&nbsp;Update a task - Response codes</b></p><div class="table-contents"><table summary="Update a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was updated.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr><tr><td>409</td><td>Indicates the requested task was updated simultaneously.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">runtime/tasks/{taskId}</code>.
      </p></div><div class="section" title="Task actions"><div class="titlepage"><div><div><h3 class="title"><a name="N143C3"></a>Task actions</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/tasks/{taskId}</pre><p>
        </p><p>
         <span class="bold"><strong>Complete a task - Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "complete",
  "variables" : ...
}</pre><p>
       Completes the task. Optional variable array can be passed in using the <code class="literal">variables</code> property. More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>. Note that the variable-scope that is supplied is ignored and the variables are set on the parent-scope unless a variable exists in a local scope, which is overridden in this case. This is the same behavior as the <code class="literal">TaskService.completeTask(taskId, variables)</code> invocation.
       </p><p>
         <span class="bold"><strong>Claim a task - Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "claim",
  "assignee" : "userWhoClaims"
}</pre><p>
      Claims the task by the given assignee. The assignee is required.
       </p><p>
         <span class="bold"><strong>Delegate a task - Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "delegate",
  "assignee" : "userToDelegateTo"
}</pre><p>
      Delegates the task to the given assignee. The assignee is required.
       </p><p>
         <span class="bold"><strong>Resolve a task - Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "resolve"
}</pre><p>
Resolves the task delegation. The task is assigned back to the task owner (if any).
       </p><p>
          </p><div class="table"><a name="N143FB"></a><p class="title"><b>Table&nbsp;15.115.&nbsp;Task actions - Response codes</b></p><div class="table-contents"><table summary="Task actions - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the action was executed.</td></tr><tr><td>400</td><td>When the body contains an invalid value or when the assignee is missing when the action requires it.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr><tr><td>409</td><td>Indicates the action cannot be performed due to a conflict. Either the task was updates simultaneously or the task was claimend by another user, in case of the '<code class="literal">claim</code>' action.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">runtime/tasks/{taskId}</code>.
      </p></div><div class="section" title="Delete a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14428"></a>Delete a task</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/tasks/{taskId}?cascadeHistory={cascadeHistory}&amp;deleteReason={deleteReason}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14432"></a><p class="title"><b>Table&nbsp;15.116.&nbsp;&gt;Delete a task - URL parameters</b></p><div class="table-contents"><table summary=">Delete a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to delete.</td></tr><tr><td>cascadeHistory</td><td>False</td><td>Boolean</td><td>Whether or not to delete the HistoricTask instance when deleting the task (if applicable). If not provided, this value defaults to false.</td></tr><tr><td>deleteReason</td><td>False</td><td>String</td><td>Reason why the task is deleted. This value is ignored when <code class="literal">cascadeHistory</code> is true.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N14463"></a><p class="title"><b>Table&nbsp;15.117.&nbsp;&gt;Delete a task - Response codes</b></p><div class="table-contents"><table summary=">Delete a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the task was found and has been deleted. Response-body is intentionally empty.</td></tr><tr><td>403</td><td>Indicates the requested task cannot be deleted because it's part of a workflow.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get all variables for a task"><div class="titlepage"><div><div><h3 class="title"><a name="N1447F"></a>Get all variables for a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/variables?scope={scope}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14489"></a><p class="title"><b>Table&nbsp;15.118.&nbsp;Get all variables for a task - URL parameters</b></p><div class="table-contents"><table summary="Get all variables for a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get variables for.</td></tr><tr><td>scope</td><td>False</td><td>String</td><td>Scope of variables to be returned. When '<code class="literal">local</code>', only task-local variables are returned. When '<code class="literal">global</code>', only variables from the task's parent execution-hierarchy are returned. When the parameter is omitted, both local and global variables are returned.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N144B4"></a><p class="title"><b>Table&nbsp;15.119.&nbsp;Get all variables for a task - Response codes</b></p><div class="table-contents"><table summary="Get all variables for a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the requested variables are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  { 
    "name" : "doubleTaskVar",
    "scope" : "local",
    "type" : "double",
    "value" : 99.99
  },
  {
    "name" : "stringProcVar",
    "scope" : "global",
    "type" : "string",
    "value" : "This is a ProcVariable"
  },
  
  ...
  
]</pre><p>

      The variables are returned as a JSON array. Full response description can be found in the general <a class="link" href="#restVariables" title="Variable representation">REST-variables section</a>. 
    </p></div><div class="section" title="Get a variable from a task"><div class="titlepage"><div><div><h3 class="title"><a name="N144D8"></a>Get a variable from a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/variables/{variableName}?scope={scope}</pre><p>
        </p><p>
            </p><div class="table"><a name="N144E2"></a><p class="title"><b>Table&nbsp;15.120.&nbsp;Get a variable from a task - URL parameters</b></p><div class="table-contents"><table summary="Get a variable from a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get a variable for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>The name of the variable to get.</td></tr><tr><td>scope</td><td>False</td><td>String</td><td>Scope of variable to be returned. When '<code class="literal">local</code>', only task-local variable value is returned. When '<code class="literal">global</code>', only variable value from the task's parent execution-hierarchy are returned. When the parameter is omitted, a local variable will be returned if it exists, otherwise a global variable.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N14516"></a><p class="title"><b>Table&nbsp;15.121.&nbsp;Get a variable from a task - Response codes</b></p><div class="table-contents"><table summary="Get a variable from a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the requested variables are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have a variable with the given name (in the given scope). Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</pre><p>
      Full response body description can be found in the general <a class="link" href="#restVariables" title="Variable representation">REST-variables section</a>. 
    </p></div><div class="section" title="Get the binary data for a variable"><div class="titlepage"><div><div><h3 class="title"><a name="N1453A"></a>Get the binary data for a variable</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/variables/{variableName}/data?scope={scope}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14544"></a><p class="title"><b>Table&nbsp;15.122.&nbsp;Get the binary data for a variable - URL parameters</b></p><div class="table-contents"><table summary="Get the binary data for a variable - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get a variable data for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>The name of the variable to get data for. Only variables of type <code class="literal">binary</code> and <code class="literal">serializable</code> can be used. If any other type of variable is used, a <code class="literal">404</code> is returned.</td></tr><tr><td>scope</td><td>False</td><td>String</td><td>Scope of variable to be returned. When '<code class="literal">local</code>', only task-local variable value is returned. When '<code class="literal">global</code>', only variable value from the task's parent execution-hierarchy are returned. When the parameter is omitted, a local variable will be returned if it exists, otherwise a global variable.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N14581"></a><p class="title"><b>Table&nbsp;15.123.&nbsp;Get the binary data for a variable - Response codes</b></p><div class="table-contents"><table summary="Get the binary data for a variable - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the requested variables are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have a variable with the given name (in the given scope) or the variable doesn't have a binary stream available. Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
      The response body contains the binary value of the variable. When the variable is of type <code class="literal">binary</code>, the content-type of the response is set to <code class="literal">application/octet-stream</code>, regardless of the content of the variable or the request accept-type header. In case of <code class="literal">serializable</code>, <code class="literal">application/x-java-serialized-object</code> is used as content-type. 
    </p></div><div class="section" title="Create new variables on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N145AA"></a>Create new variables on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/tasks/{taskId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N145B4"></a><p class="title"><b>Table&nbsp;15.124.&nbsp;Create new variables on a task - URL parameters</b></p><div class="table-contents"><table summary="Create new variables on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to create the new variable for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body for creating simple (non-binary) variables:</strong></span>
            </p><pre class="prettyprint">
[
  { 
    "name" : "myTaskVariable",
    "scope" : "local",
    "type" : "string",
    "value" : "Hello my friend"
  },
  {
    ...
  }
]</pre><p>
The request body should be an array containing one or more JSON-objects representing the variables that should be created.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable</p></li><li class="listitem"><p><code class="literal">scope</code>: Scope of variable that is created. If omitted, <code class="literal">local</code> is assumed.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is created. If omitted, reverts to raw JSON-value type (string, boolean, integer or double).</p></li><li class="listitem"><p><code class="literal">value</code>: Variable value.</p></li></ul></div><p>
      More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>.
        </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  { 
    "name" : "myTaskVariable",
    "scope" : "local",
    "type" : "string",
    "value" : "Hello my friend"
  },
  {
    ...
  }
]</pre><p>
          </p><div class="table"><a name="N145FD"></a><p class="title"><b>Table&nbsp;15.125.&nbsp;Create new variables on a task - Response codes</b></p><div class="table-contents"><table summary="Create new variables on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the variables were created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of a variable to create was missing or that an attempt is done to create a variable on a standalone task (without a process associated) with scope <code class="literal">global</code> or an empty array of variables was included in the request or request did not contain an array of variables. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr><tr><td>409</td><td>Indicates the task already has a variable with the given name. Use the PUT method to update the task variable instead.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Create a new binary variable on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14621"></a>Create a new binary variable on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/tasks/{taskId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N1462B"></a><p class="title"><b>Table&nbsp;15.126.&nbsp;Create a new binary variable on a task - URL parameters</b></p><div class="table-contents"><table summary="Create a new binary variable on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to create the new variable for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additionl form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">scope</code>: Scope of variable that is created. If omitted, <code class="literal">local</code> is assumed.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is created. If omitted, <code class="literal">binary</code> is assumed and the binary data in the request will be stored as an array of bytes.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/tasks/123/variables/binaryVariable/data"
}</pre><p>
          </p><div class="table"><a name="N1466E"></a><p class="title"><b>Table&nbsp;15.127.&nbsp;Create a new binary variable on a task - Response codes</b></p><div class="table-contents"><table summary="Create a new binary variable on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the variable was created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of the variable to create was missing or that an attempt is done to create a variable on a standalone task (without a process associated) with scope <code class="literal">global</code>. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr><tr><td>409</td><td>Indicates the task already has a variable with the given name. Use the PUT method to update the task variable instead.</td></tr><tr><td>415</td><td>Indicates the serializable data contains an object for which no class is present in the JVM running the Activiti engine and therefore cannot be deserialized.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Update an existing variable on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14697"></a>Update an existing variable on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/tasks/{taskId}/variables/{variableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N146A1"></a><p class="title"><b>Table&nbsp;15.128.&nbsp;Update an existing variable on a task - URL parameters</b></p><div class="table-contents"><table summary="Update an existing variable on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to update the variable for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>The name of the variable to update.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body for updating simple (non-binary) variables:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</pre><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable</p></li><li class="listitem"><p><code class="literal">scope</code>: Scope of variable that is updated. If omitted, <code class="literal">local</code> is assumed.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is updated. If omitted, reverts to raw JSON-value type (string, boolean, integer or double).</p></li><li class="listitem"><p><code class="literal">value</code>: Variable value.</p></li></ul></div><p>
      More information about the variable format can be found in <a class="link" href="#restVariables" title="Variable representation">the REST variables section</a>.
        </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</pre><p>
          </p><div class="table"><a name="N146F3"></a><p class="title"><b>Table&nbsp;15.129.&nbsp;Update an existing variable on a task - Response codes</b></p><div class="table-contents"><table summary="Update an existing variable on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the variables was updated and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of a variable to update was missing or that an attempt is done to update a variable on a standalone task (without a process associated) with scope <code class="literal">global</code>. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have a variable with the given name in the given scope. Status message contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Updating a binary variable on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14712"></a>Updating a binary variable on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT runtime/tasks/{taskId}/variables/{variableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N1471C"></a><p class="title"><b>Table&nbsp;15.130.&nbsp;Updating a binary variable on a task - URL parameters</b></p><div class="table-contents"><table summary="Updating a binary variable on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to update the variable for.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>The name of the variable to update.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additionl form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">scope</code>: Scope of variable that is updated. If omitted, <code class="literal">local</code> is assumed.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of variable that is updated. If omitted, <code class="literal">binary</code> is assumed and the binary data in the request will be stored as an array of bytes.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/tasks/123/variables/binaryVariable/data"
}</pre><p>
          </p><div class="table"><a name="N14768"></a><p class="title"><b>Table&nbsp;15.131.&nbsp;Updating a binary variable on a task - Response codes</b></p><div class="table-contents"><table summary="Updating a binary variable on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the variable was updated and the result is returned.</td></tr><tr><td>400</td><td>Indicates the name of the variable to update was missing or that an attempt is done to update a variable on a standalone task (without a process associated) with scope <code class="literal">global</code>. Status message provides additional information.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the variable to update doesn't exist for the given task in the given scope.</td></tr><tr><td>415</td><td>Indicates the serializable data contains an object for which no class is present in the JVM running the Activiti engine and therefore cannot be deserialized.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Delete a variable on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N1478C"></a>Delete a variable on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/tasks/{taskId}/variables/{variableName}?scope={scope}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14796"></a><p class="title"><b>Table&nbsp;15.132.&nbsp;Delete a variable on a task - URL parameters</b></p><div class="table-contents"><table summary="Delete a variable on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task the variable to delete belongs to.</td></tr><tr><td>variableName</td><td>Yes</td><td>String</td><td>The name of the variable to delete.</td></tr><tr><td>scope</td><td>No</td><td>String</td><td>Scope of variable to delete in. Can be either <code class="literal">local</code> or <code class="literal">global</code>. If omitted, <code class="literal">local</code> is assumed.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N147CD"></a><p class="title"><b>Table&nbsp;15.133.&nbsp;Delete a variable on a task - Response codes</b></p><div class="table-contents"><table summary="Delete a variable on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the task variable was found and has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have a variable with the given name. Status message contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Delete all local variables on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N147E4"></a>Delete all local variables on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/tasks/{taskId}/variables</pre><p>
        </p><p>
            </p><div class="table"><a name="N147EE"></a><p class="title"><b>Table&nbsp;15.134.&nbsp;Delete all local variables on a task - URL parameters</b></p><div class="table-contents"><table summary="Delete all local variables on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task the variable to delete belongs to.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N1480A"></a><p class="title"><b>Table&nbsp;15.135.&nbsp;Delete all local variables on a task - Response codes</b></p><div class="table-contents"><table summary="Delete all local variables on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates all local task variables have been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get all identity links for a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14821"></a>Get all identity links for a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/identitylinks</pre><p>
        </p><p>
            </p><div class="table"><a name="N1482B"></a><p class="title"><b>Table&nbsp;15.136.&nbsp;Get all identity links for a task - URL parameters</b></p><div class="table-contents"><table summary="Get all identity links for a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the identity links for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N14847"></a><p class="title"><b>Table&nbsp;15.137.&nbsp;Get all identity links for a task - Response codes</b></p><div class="table-contents"><table summary="Get all identity links for a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the requested idenity links are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  { 
    "userId" : "kermit",
    "groupId" : null,
    "type" : "candidate",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/users/kermit/candidate"
  },
  {
    "userId" : null,
    "groupId" : "sales",
    "type" : "candidate",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
  },
  
  ...
]</pre><p>
    </p></div><div class="section" title="Get all identitylinks for a task for either groups or users"><div class="titlepage"><div><div><h3 class="title"><a name="N14867"></a>Get all identitylinks for a task for either groups or users</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/identitylinks/users
GET runtime/tasks/{taskId}/identitylinks/groups</pre><p>
        </p><p>
        Returns only identity links targetting either users or groups. Response body and status-codes are exactly the same as when getting the full list of identity links for a task.
        </p></div><div class="section" title="Get a single identity link on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14871"></a>Get a single identity link on a task</h3></div></div></div><p>
        </p><pre class="prettyprint">GET runtime/tasks/{taskId}/identitylinks/{family}/{identityId}/{type}</pre><p>
      </p><p>
          </p><div class="table"><a name="N1487B"></a><p class="title"><b>Table&nbsp;15.138.&nbsp;Get all identitylinks for a task for either groups or users - URL parameters</b></p><div class="table-contents"><table summary="Get all identitylinks for a task for either groups or users - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task .</td></tr><tr><td>family</td><td>Yes</td><td>String</td><td>Either <code class="literal">groups</code> or <code class="literal">users</code>, depending on what kind of identity is targetted.</td></tr><tr><td>identityId</td><td>Yes</td><td>String</td><td>The id of the identity.</td></tr><tr><td>type</td><td>Yes</td><td>String</td><td>The type of identity link.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N148B8"></a><p class="title"><b>Table&nbsp;15.139.&nbsp;Get all identitylinks for a task for either groups or users - Response codes</b></p><div class="table-contents"><table summary="Get all identitylinks for a task for either groups or users - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task and identity link was found and returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have the requested identityLink. The status contains additional information about this error.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "userId" : null,
  "groupId" : "sales",
  "type" : "candidate",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
}</pre><p>
  </p></div><div class="section" title="Create an identity link on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N148D8"></a>Create an identity link on a task</h3></div></div></div><p>
        </p><pre class="prettyprint">POST runtime/tasks/{taskId}/identitylinks</pre><p>
      </p><p>
          </p><div class="table"><a name="N148E2"></a><p class="title"><b>Table&nbsp;15.140.&nbsp;Create an identity link on a task - URL parameters</b></p><div class="table-contents"><table summary="Create an identity link on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task .</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Request body (user):</strong></span>
            </p><pre class="prettyprint">
{
  "userId" : "kermit",
  "type" : "candidate",
}</pre><p>
    </p><p>
       <span class="bold"><strong>Request body (group):</strong></span>
            </p><pre class="prettyprint">
{
  "groupId" : "sales",
  "type" : "candidate",
}</pre><p>
    </p><p>
        </p><div class="table"><a name="N14910"></a><p class="title"><b>Table&nbsp;15.141.&nbsp;Create an identity link on a task - Response codes</b></p><div class="table-contents"><table summary="Create an identity link on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the task was found and the identity link was created.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have the requested identityLink. The status contains additional information about this error.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "userId" : null,
  "groupId" : "sales",
  "type" : "candidate",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
}</pre><p>
    </p></div><div class="section" title="Delete an identity link on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14930"></a>Delete an identity link on a task</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE runtime/tasks/{taskId}/identitylinks/{family}/{identityId}/{type}</pre><p>
      </p><p>
          </p><div class="table"><a name="N1493A"></a><p class="title"><b>Table&nbsp;15.142.&nbsp;Delete an identity link on a task - URL parameters</b></p><div class="table-contents"><table summary="Delete an identity link on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task.</td></tr><tr><td>family</td><td>Yes</td><td>String</td><td>Either <code class="literal">groups</code> or <code class="literal">users</code>, depending on what kind of identity is targetted.</td></tr><tr><td>identityId</td><td>Yes</td><td>String</td><td>The id of the identity.</td></tr><tr><td>type</td><td>Yes</td><td>String</td><td>The type of identity link.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          </p><div class="table"><a name="N14977"></a><p class="title"><b>Table&nbsp;15.143.&nbsp;Delete an identity link on a task - Response codes</b></p><div class="table-contents"><table summary="Delete an identity link on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the task and identity link were found and the link has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have the requested identityLink. The status contains additional information about this error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Create a new comment on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N1498E"></a>Create a new comment on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/tasks/{taskId}/comments</pre><p>
        </p><p>
            </p><div class="table"><a name="N14998"></a><p class="title"><b>Table&nbsp;15.144.&nbsp;Create a new comment on a task - URL parameters</b></p><div class="table-contents"><table summary="Create a new comment on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to create the comment for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
        </p><pre class="prettyprint">
{ 
  "message" : "This is a comment on the task."
}</pre><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
  "message" : "This is a comment on the task.",
  "author" : "kermit"
}</pre><p>
          </p><div class="table"><a name="N149C4"></a><p class="title"><b>Table&nbsp;15.145.&nbsp;Create a new comment on a task - Response codes</b></p><div class="table-contents"><table summary="Create a new comment on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the comment was created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the comment is missing from the request.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get all comments on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N149E0"></a>Get all comments on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/comments</pre><p>
        </p><p>
            </p><div class="table"><a name="N149EA"></a><p class="title"><b>Table&nbsp;15.146.&nbsp;Get all comments on a task - URL parameters</b></p><div class="table-contents"><table summary="Get all comments on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the comments for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  { 
    "id" : "123",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
    "message" : "This is a comment on the task.",
    "author" : "kermit"
  },
  { 
    "id" : "456",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/456",
    "message" : "This is another comment on the task.",
    "author" : "gonzo"
  }
]</pre><p>
          </p><div class="table"><a name="N14A0D"></a><p class="title"><b>Table&nbsp;15.147.&nbsp;Get all comments on a task - Response codes</b></p><div class="table-contents"><table summary="Get all comments on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the comments are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get a comment on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14A24"></a>Get a comment on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/comments/{commentId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14A2E"></a><p class="title"><b>Table&nbsp;15.148.&nbsp;Get a comment on a task - URL parameters</b></p><div class="table-contents"><table summary="Get a comment on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the comment for.</td></tr><tr><td>commentId</td><td>Yes</td><td>String</td><td>The id of the comment.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
  "message" : "This is a comment on the task.",
  "author" : "kermit"
}</pre><p>
          </p><div class="table"><a name="N14A5A"></a><p class="title"><b>Table&nbsp;15.149.&nbsp;Get a comment on a task - Response codes</b></p><div class="table-contents"><table summary="Get a comment on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task and comment were found and the comment is returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the tasks doesn't have a comment with the given ID.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Delete a comment on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14A71"></a>Delete a comment on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/tasks/{taskId}/comments/{commentId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14A7B"></a><p class="title"><b>Table&nbsp;15.150.&nbsp;Delete a comment on a task - URL parameters</b></p><div class="table-contents"><table summary="Delete a comment on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to delete the comment for.</td></tr><tr><td>commentId</td><td>Yes</td><td>String</td><td>The id of the comment.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><div class="table"><a name="N14A9E"></a><p class="title"><b>Table&nbsp;15.151.&nbsp;Delete a comment on a task - Response codes</b></p><div class="table-contents"><table summary="Delete a comment on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the task and comment were found and the comment is deleted. Response body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the tasks doesn't have a comment with the given ID.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="Get all events for a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14AB4"></a>Get all events for a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/events</pre><p>
        </p><p>
            </p><div class="table"><a name="N14ABE"></a><p class="title"><b>Table&nbsp;15.152.&nbsp;Get all events for a task - URL parameters</b></p><div class="table-contents"><table summary="Get all events for a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the events for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  { 
    "action" : "AddUserLink",
    "id" : "4",
    "message" : [ "gonzo", "contributor" ],
    "taskUrl" : "http://localhost:8182/runtime/tasks/2",
    "time" : "2013-05-17T11:50:50.000+0000",
    "url" : "http://localhost:8182/runtime/tasks/2/events/4",
    "userId" : null
  },
  
  ...

]</pre><p>
          </p><div class="table"><a name="N14AE1"></a><p class="title"><b>Table&nbsp;15.153.&nbsp;Get all events for a task - Response codes</b></p><div class="table-contents"><table summary="Get all events for a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the events are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get an event on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14AF8"></a>Get an event on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/events/{eventId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14B02"></a><p class="title"><b>Table&nbsp;15.154.&nbsp;Get an event on a task - URL parameters</b></p><div class="table-contents"><table summary="Get an event on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the event for.</td></tr><tr><td>eventId</td><td>Yes</td><td>String</td><td>The id of the event.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{ 
  "action" : "AddUserLink",
  "id" : "4",
  "message" : [ "gonzo", "contributor" ],
  "taskUrl" : "http://localhost:8182/runtime/tasks/2",
  "time" : "2013-05-17T11:50:50.000+0000",
  "url" : "http://localhost:8182/runtime/tasks/2/events/4",
  "userId" : null
}</pre><p>
          </p><div class="table"><a name="N14B2E"></a><p class="title"><b>Table&nbsp;15.155.&nbsp;Get an event on a task - Response codes</b></p><div class="table-contents"><table summary="Get an event on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task and event were found and the event is returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the tasks doesn't have an event with the given ID.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Create a new attachment on a task, containing a link to an external resource"><div class="titlepage"><div><div><h3 class="title"><a name="N14B45"></a>Create a new attachment on a task, containing a link to an external resource</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/tasks/{taskId}/attachments</pre><p>
        </p><p>
            </p><div class="table"><a name="N14B4F"></a><p class="title"><b>Table&nbsp;15.156.&nbsp;Create a new attachment on a task, containing a link to an external resource - URL parameters</b></p><div class="table-contents"><table summary="Create a new attachment on a task, containing a link to an external resource - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to create the attachment for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
        </p><pre class="prettyprint">
{ 
  "name":"Simple attachment",
  "description":"Simple attachment description",
  "type":"simpleType",
  "externalUrl":"http://activiti.org"
}</pre><p>
Only the attachment name is required to create a new attachment.
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "id":"3",
  "url":"http://localhost:8182/runtime/tasks/2/attachments/3",
  "name":"Simple attachment",
  "description":"Simple attachment description",
  "type":"simpleType",
  "taskUrl":"http://localhost:8182/runtime/tasks/2",
  "processInstanceUrl":null,
  "externalUrl":"http://activiti.org",
  "contentUrl":null
}</pre><p>
          </p><div class="table"><a name="N14B7B"></a><p class="title"><b>Table&nbsp;15.157.&nbsp;Create a new attachment on a task, containing a link to an external resource - Response codes</b></p><div class="table-contents"><table summary="Create a new attachment on a task, containing a link to an external resource - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the attachment was created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the attachment name is missing from the request.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Create a new attachment on a task, with an attached file"><div class="titlepage"><div><div><h3 class="title"><a name="N14B97"></a>Create a new attachment on a task, with an attached file</h3></div></div></div><p>
          </p><pre class="prettyprint">POST runtime/tasks/{taskId}/attachments</pre><p>
        </p><p>
            </p><div class="table"><a name="N14BA1"></a><p class="title"><b>Table&nbsp;15.158.&nbsp;Create a new attachment on a task, with an attached file - URL parameters</b></p><div class="table-contents"><table summary="Create a new attachment on a task, with an attached file - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to create the attachment for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the variable. On top of that, the folowing additionl form-fields can be present:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">name</code>: Required name of the variable.</p></li><li class="listitem"><p><code class="literal">description</code>: Description of the attachment, optional.</p></li><li class="listitem"><p><code class="literal">type</code>: Type of attachment, optional. Supports any arbitrary string or a valid HTTP content-type.</p></li></ul></div><p>
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
      "id":"5",
      "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
      "name":"Binary attachment",
      "description":"Binary attachment description",
      "type":"binaryType",
      "taskUrl":"http://localhost:8182/runtime/tasks/2",
      "processInstanceUrl":null,
      "externalUrl":null,
      "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
   }</pre><p>
          </p><div class="table"><a name="N14BDE"></a><p class="title"><b>Table&nbsp;15.159.&nbsp;Create a new attachment on a task, with an attached file - Response codes</b></p><div class="table-contents"><table summary="Create a new attachment on a task, with an attached file - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the attachment was created and the result is returned.</td></tr><tr><td>400</td><td>Indicates the attachment name is missing from the request or no file was present in the request. The error-message contains additional information.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get all attachments on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14BFA"></a>Get all attachments on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/attachments</pre><p>
        </p><p>
            </p><div class="table"><a name="N14C04"></a><p class="title"><b>Table&nbsp;15.160.&nbsp;Get all attachments on a task - URL parameters</b></p><div class="table-contents"><table summary="Get all attachments on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the attachments for.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
  {
    "id":"3",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/3",
    "name":"Simple attachment",
    "description":"Simple attachment description",
    "type":"simpleType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":"http://activiti.org",
    "contentUrl":null
  },
  {
    "id":"5",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
    "name":"Binary attachment",
    "description":"Binary attachment description",
    "type":"binaryType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":null,
    "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
  }
]</pre><p>
          </p><div class="table"><a name="N14C27"></a><p class="title"><b>Table&nbsp;15.161.&nbsp;Get all attachments on a task - Response codes</b></p><div class="table-contents"><table summary="Get all attachments on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task was found and the attachments are returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get an attachment on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14C3E"></a>Get an attachment on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/attachments/{attachmentId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14C48"></a><p class="title"><b>Table&nbsp;15.162.&nbsp;Get an attachment on a task - URL parameters</b></p><div class="table-contents"><table summary="Get an attachment on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get the attachment for.</td></tr><tr><td>attachmentId</td><td>Yes</td><td>String</td><td>The id of the attachment.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
  {
    "id":"5",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
    "name":"Binary attachment",
    "description":"Binary attachment description",
    "type":"binaryType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":null,
    "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
  }</pre><p>
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        <code class="literal">externalUrl - contentUrl:</code>In case the attachment is a link to an external resource, the <code class="literal">externalUrl</code> contains the URL to the external content. If the attachment content is present in the
        Activiti engine, the <code class="literal">contentUrl</code> will contain an URL where the binary content can be streamed from.
      </p></li><li class="listitem"><p>
        <code class="literal">type:</code>Can be any arbitrary value. When a valid formatted media-type (eg. application/xml, text/plain) is included, the binary content HTTP response content-type will be set the the given value.
      </p></li></ul></div><p>
   
        </p><p>
          </p><div class="table"><a name="N14C8A"></a><p class="title"><b>Table&nbsp;15.163.&nbsp;Get an attachment on a task - Response codes</b></p><div class="table-contents"><table summary="Get an attachment on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task and attachment were found and the attachment is returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the tasks doesn't have a attachment with the given ID.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get the content for an attachment"><div class="titlepage"><div><div><h3 class="title"><a name="N14CA1"></a>Get the content for an attachment</h3></div></div></div><p>
          </p><pre class="prettyprint">GET runtime/tasks/{taskId}/attachment/{attachmentId}/content</pre><p>
        </p><p>
            </p><div class="table"><a name="N14CAB"></a><p class="title"><b>Table&nbsp;15.164.&nbsp;Get the content for an attachment - URL parameters</b></p><div class="table-contents"><table summary="Get the content for an attachment - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to get a variable data for.</td></tr><tr><td>attachmentId</td><td>Yes</td><td>String</td><td>The id of the attachment, a <code class="literal">404</code> is returned when the attachment points to an external URL rather than content attached in Activiti.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N14CD3"></a><p class="title"><b>Table&nbsp;15.165.&nbsp;Get the content for an attachment - Response codes</b></p><div class="table-contents"><table summary="Get the content for an attachment - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task and attachment was found and the requested content is returned.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the task doesn't have an attachment with the given id or the attachment doesn't have a binary stream available. Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
      The response body contains the binary content. By default, the content-type of the response is set to <code class="literal">application/octet-stream</code> unless the attachment type contains a valid Content-type. 
    </p></div><div class="section" title="Delete an attachment on a task"><div class="titlepage"><div><div><h3 class="title"><a name="N14CF3"></a>Delete an attachment on a task</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE runtime/tasks/{taskId}/attachments/{attachmentId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N14CFD"></a><p class="title"><b>Table&nbsp;15.166.&nbsp;Delete an attachment on a task - URL parameters</b></p><div class="table-contents"><table summary="Delete an attachment on a task - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes</td><td>String</td><td>The id of the task to delete the attachment for.</td></tr><tr><td>attachmentId</td><td>Yes</td><td>String</td><td>The id of the attachment.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><div class="table"><a name="N14D20"></a><p class="title"><b>Table&nbsp;15.167.&nbsp;Delete an attachment on a task - Response codes</b></p><div class="table-contents"><table summary="Delete an attachment on a task - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the task and attachment were found and the attachment is deleted. Response body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested task was not found or the tasks doesn't have a attachment with the given ID.</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="History"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N14D36"></a>History</h2></div></div></div><div class="section" title="Get a historic process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N14D39"></a>Get a historic process instance</h3></div></div></div><p>
      </p><pre class="prettyprint">GET history/historic-process-instances/{processInstanceId}</pre><p>
    </p><p>
      </p><div class="table"><a name="N14D43"></a><p class="title"><b>Table&nbsp;15.168.&nbsp;Get a historic process instance - Response codes</b></p><div class="table-contents"><table summary="Get a historic process instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that the historic process instances could be found.</td></tr><tr><td>404</td><td>Indicates that the historic process instances could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
    </p><p>
      <span class="bold"><strong>Success response body:</strong></span>
        </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="List of historic process instances"><div class="titlepage"><div><div><h3 class="title"><a name="restHistoricProcessInstancesGet"></a>List of historic process instances</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-process-instances</pre><p>
      </p><p>
          </p><div class="table"><a name="N14D6E"></a><p class="title"><b>Table&nbsp;15.169.&nbsp;List of historic process instances - URL parameters</b></p><div class="table-contents"><table summary="List of historic process instances - URL parameters" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>No</td><td>String</td><td>An id of the historic process instance.</td></tr><tr><td>processDefinitionKey</td><td>No</td><td>String</td><td>The process definition key of the historic process instance.</td></tr><tr><td>processDefinitionId</td><td>No</td><td>String</td><td>The process definition id of the historic process instance.</td></tr><tr><td>businessKey</td><td>No</td><td>String</td><td>The business key of the historic process instance.</td></tr><tr><td>involvedUser</td><td>No</td><td>String</td><td>An involved user of the historic process instance.</td></tr><tr><td>finished</td><td>No</td><td>Boolean</td><td>Indication if the historic process instance is finished.</td></tr><tr><td>superProcessInstanceId</td><td>No</td><td>String</td><td>An optional parent process id of the historic process instance.</td></tr><tr><td>excludeSubprocesses</td><td>No</td><td>Boolean</td><td>Return only historic process instances which aren't sub processes.</td></tr><tr><td>finishedAfter</td><td>No</td><td>Date</td><td>Return only historic process instances that were finished after this date.</td></tr><tr><td>finishedBefore</td><td>No</td><td>Date</td><td>Return only historic process instances that were finished before this date.</td></tr><tr><td>startedAfter</td><td>No</td><td>Date</td><td>Return only historic process instances that were started after this date.</td></tr><tr><td>startedBefore</td><td>No</td><td>Date</td><td>Return only historic process instances that were started before this date.</td></tr><tr><td>startedBy</td><td>No</td><td>String</td><td>Return only historic process instances that were started by this user.</td></tr><tr><td>includeProcessVariables</td><td>No</td><td>Boolean</td><td>An indication if the historic process instance variables should be returned as well.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N14E09"></a><p class="title"><b>Table&nbsp;15.170.&nbsp;List of historic process instances - Response codes</b></p><div class="table-contents"><table summary="List of historic process instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that historic process instances could be queried.</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Query for historic process instances"><div class="titlepage"><div><div><h3 class="title"><a name="N14E29"></a>Query for historic process instances</h3></div></div></div><p>
        </p><pre class="prettyprint">POST query/historic-process-instances</pre><p>
      </p><p>
        <span class="bold"><strong>Request body:</strong></span>
        </p><pre class="prettyprint">
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...
  
  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ]
}</pre><p> 
      </p><p>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <a class="link" href="#restHistoricProcessInstancesGet" title="List of historic process instances">getting a collection of historic process instances</a>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
        for filtering based on process variables. The <code class="literal">variables</code> property is a json-array containing objects with the format <a class="link" href="#restQueryVariable" title="JSON query variable format"> as described here.</a>
      </p><p>
        </p><div class="table"><a name="N14E49"></a><p class="title"><b>Table&nbsp;15.171.&nbsp;Query for historic process instances - Response codes</b></p><div class="table-contents"><table summary="Query for historic process instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the tasks are returned</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Delete a historic process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N14E69"></a>Delete a historic process instance</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE history/historic-process-instances/{processInstanceId}</pre><p>
      </p><p>
        </p><div class="table"><a name="N14E73"></a><p class="title"><b>Table&nbsp;15.172.&nbsp;Response codes</b></p><div class="table-contents"><table summary="Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that the historic process instance was deleted.</td></tr><tr><td>404</td><td>Indicates that the historic process instance could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p></div><div class="section" title="Get the identity links of a historic process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N14E8A"></a>Get the identity links of a historic process instance</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-process-instance/{processInstanceId}/identitylinks</pre><p>
      </p><p>
        </p><div class="table"><a name="N14E94"></a><p class="title"><b>Table&nbsp;15.173.&nbsp;Response codes</b></p><div class="table-contents"><table summary="Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the identity links are returned</td></tr><tr><td>404</td><td>Indicates the process instance could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
[
 {
  "type" : "participant",
  "userId" : "kermit",
  "groupId" : null,
  "taskId" : null,
  "taskUrl" : null,
  "processInstanceId" : "5",
  "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5"
 }
]</pre><p>
      </p></div><div class="section" title="Get the binary data for a historic process instance variable"><div class="titlepage"><div><div><h3 class="title"><a name="N14EB4"></a>Get the binary data for a historic process instance variable</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-process-instances/{processInstanceId}/variables/{variableName}/data</pre><p>
      </p><p>
        </p><div class="table"><a name="N14EBE"></a><p class="title"><b>Table&nbsp;15.174.&nbsp;Get the binary data for a historic process instance variable - Response codes</b></p><div class="table-contents"><table summary="Get the binary data for a historic process instance variable - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the process instance was found and the requested variable data is returned.</td></tr><tr><td>404</td><td>Indicates the requested process instance was not found or the process instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
      <span class="bold"><strong>Success response body:</strong></span>
      The response body contains the binary value of the variable. When the variable is of type <code class="literal">binary</code>, the content-type of the response is set to <code class="literal">application/octet-stream</code>, regardless of the content of the variable or the request accept-type header. In case of <code class="literal">serializable</code>, <code class="literal">application/x-java-serialized-object</code> is used as content-type. 
    </p></div><div class="section" title="Get a single historic task instance"><div class="titlepage"><div><div><h3 class="title"><a name="N14EE7"></a>Get a single historic task instance</h3></div></div></div><p>
      </p><pre class="prettyprint">GET history/historic-task-instances/{taskId}</pre><p>
    </p><p>
      </p><div class="table"><a name="N14EF1"></a><p class="title"><b>Table&nbsp;15.175.&nbsp;Get a single historic task instance - Response codes</b></p><div class="table-contents"><table summary="Get a single historic task instance - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that the historic task instances could be found.</td></tr><tr><td>404</td><td>Indicates that the historic task instances could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
    </p><p>
      <span class="bold"><strong>Success response body:</strong></span>
        </p><pre class="prettyprint">
{
  "id" : "5",
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "processInstanceId" : "3",
  "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
  "executionId" : "4",
  "name" : "My task name",
  "description" : "My task description",
  "deleteReason" : null,
  "owner" : "kermit",
  "assignee" : "fozzie",
  "startTime" : "2013-04-17T10:17:43.902+0000",
  "endTime" : "2013-04-18T14:06:32.715+0000",
  "durationInMillis" : 86400056,
  "workTimeInMillis" : 234890,
  "claimTime" : "2013-04-18T11:01:54.715+0000",
  "taskDefinitionKey" : "taskKey",
  "formKey" : null,
  "priority" : 50,
  "dueDate" : "2013-04-20T12:11:13.134+0000",
  "parentTaskId" : null,
  "url" : "http://localhost:8182/history/historic-task-instances/5",
  "variables": null
}</pre><p>
      </p></div><div class="section" title="Get historic task instances"><div class="titlepage"><div><div><h3 class="title"><a name="restHistoricTaskInstancesGet"></a>Get historic task instances</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-task-instances</pre><p>
      </p><p>
          </p><div class="table"><a name="N14F1C"></a><p class="title"><b>Table&nbsp;15.176.&nbsp;Get historic task instances - URL parameters</b></p><div class="table-contents"><table summary="Get historic task instances - URL parameters" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>No</td><td>String</td><td>An id of the historic task instance.</td></tr><tr><td>processInstanceId</td><td>No</td><td>String</td><td>The process instance id of the historic task instance.</td></tr><tr><td>processDefinitionKey</td><td>No</td><td>String</td><td>The process definition key of the historic task instance.</td></tr><tr><td>processDefinitionId</td><td>No</td><td>String</td><td>The process definition id of the historic task instance.</td></tr><tr><td>processDefinitionName</td><td>No</td><td>String</td><td>The process definition name of the historic task instance.</td></tr><tr><td>processBusinessKey</td><td>No</td><td>String</td><td>The process instance business key of the historic task instance.</td></tr><tr><td>executionId</td><td>No</td><td>String</td><td>The execution id of the historic task instance.</td></tr><tr><td>taskName</td><td>No</td><td>String</td><td>The task name of the historic task instance.</td></tr><tr><td>taskNameLike</td><td>No</td><td>String</td><td>The task name with 'like' operator for the historic task instance.</td></tr><tr><td>taskDescription</td><td>No</td><td>String</td><td>The task description of the historic task instance.</td></tr><tr><td>taskDescriptionLike</td><td>No</td><td>String</td><td>The task description with 'like' operator for the historic task instance.</td></tr><tr><td>taskDefinitionKey</td><td>No</td><td>String</td><td>The task identifier from the process definition for the historic task instance.</td></tr><tr><td>taskDeleteReason</td><td>No</td><td>String</td><td>The task delete reason of the historic task instance.</td></tr><tr><td>taskDeleteReasonLike</td><td>No</td><td>String</td><td>The task delete reason with 'like' operator for the historic task instance.</td></tr><tr><td>taskAssignee</td><td>No</td><td>String</td><td>The assignee of the historic task instance.</td></tr><tr><td>taskAssigneeLike</td><td>No</td><td>String</td><td>The assignee with 'like' operator for the historic task instance.</td></tr><tr><td>taskOwner</td><td>No</td><td>String</td><td>The owner of the historic task instance.</td></tr><tr><td>taskOwnerLike</td><td>No</td><td>String</td><td>The owner with 'like' operator for the historic task instance.</td></tr><tr><td>taskInvolvedUser</td><td>No</td><td>String</td><td>An involved user of the historic task instance.</td></tr><tr><td>taskPriority</td><td>No</td><td>String</td><td>The priority of the historic task instance.</td></tr><tr><td>finished</td><td>No</td><td>Boolean</td><td>Indication if the historic task instance is finished.</td></tr><tr><td>processFinished</td><td>No</td><td>Boolean</td><td>Indication if the process instance of the historic task instance is finished.</td></tr><tr><td>parentTaskId</td><td>No</td><td>String</td><td>An optional parent task id of the historic task instance.</td></tr><tr><td>dueDate</td><td>No</td><td>Date</td><td>Return only historic task instances that have a due date equal this date.</td></tr><tr><td>dueDateAfter</td><td>No</td><td>Date</td><td>Return only historic task instances that have a due date after this date.</td></tr><tr><td>dueDateBefore</td><td>No</td><td>Date</td><td>Return only historic task instances that have a due date before this date.</td></tr><tr><td>taskCreatedOn</td><td>No</td><td>Date</td><td>Return only historic task instances that were created on this date.</td></tr><tr><td>includeTaskLocalVariables</td><td>No</td><td>Boolean</td><td>An indication if the historic task instance local variables should be returned as well.</td></tr><tr><td>includeProcessVariables</td><td>No</td><td>Boolean</td><td>An indication if the historic task instance global variables should be returned as well.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N1503E"></a><p class="title"><b>Table&nbsp;15.177.&nbsp;Get historic task instances - Response codes</b></p><div class="table-contents"><table summary="Get historic task instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that historic process instances could be queried.</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "name" : "My task name",
      "description" : "My task description",
      "deleteReason" : null,
      "owner" : "kermit",
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "workTimeInMillis" : 234890,
      "claimTime" : "2013-04-18T11:01:54.715+0000",
      "taskDefinitionKey" : "taskKey",
      "formKey" : null,
      "priority" : 50,
      "dueDate" : "2013-04-20T12:11:13.134+0000",
      "parentTaskId" : null,
      "url" : "http://localhost:8182/history/historic-task-instances/5",
      "taskVariables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
      "processVariables": [
        {
          "name": "processTest",
          "variableScope": "global",
          "value": "myProcessTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Query for historic task instances"><div class="titlepage"><div><div><h3 class="title"><a name="N1505E"></a>Query for historic task instances</h3></div></div></div><p>
        </p><pre class="prettyprint">POST query/historic-task-instances</pre><p>
      </p><p>
        <span class="bold"><strong>Query for historic task instances - Request body:</strong></span>
        </p><pre class="prettyprint">
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...
  
  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ]
}</pre><p> 
      </p><p>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <a class="link" href="#restHistoricTaskInstancesGet" title="Get historic task instances">getting a collection of historic task instances</a>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
        for filtering based on process variables. The <code class="literal">taskVariables</code> and <code class="literal">processVariables</code> properties are json-arrays containing objects with the format <a class="link" href="#restQueryVariable" title="JSON query variable format"> as described here.</a>
      </p><p>
        </p><div class="table"><a name="N15081"></a><p class="title"><b>Table&nbsp;15.178.&nbsp;Query for historic task instances - Response codes</b></p><div class="table-contents"><table summary="Query for historic task instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the tasks are returned</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "name" : "My task name",
      "description" : "My task description",
      "deleteReason" : null,
      "owner" : "kermit",
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "workTimeInMillis" : 234890,
      "claimTime" : "2013-04-18T11:01:54.715+0000",
      "taskDefinitionKey" : "taskKey",
      "formKey" : null,
      "priority" : 50,
      "dueDate" : "2013-04-20T12:11:13.134+0000",
      "parentTaskId" : null,
      "url" : "http://localhost:8182/history/historic-task-instances/5",
      "taskVariables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
      "processVariables": [
        {
          "name": "processTest",
          "variableScope": "global",
          "value": "myProcessTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Delete a historic task instance"><div class="titlepage"><div><div><h3 class="title"><a name="N150A1"></a>Delete a historic task instance</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE history/historic-task-instances/{taskId}</pre><p>
      </p><p>
        </p><div class="table"><a name="N150AB"></a><p class="title"><b>Table&nbsp;15.179.&nbsp;Response codes</b></p><div class="table-contents"><table summary="Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that the historic task instance was deleted.</td></tr><tr><td>404</td><td>Indicates that the historic task instance could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p></div><div class="section" title="Get the identity links of a historic task instance"><div class="titlepage"><div><div><h3 class="title"><a name="N150C2"></a>Get the identity links of a historic task instance</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-task-instance/{taskId}/identitylinks</pre><p>
      </p><p>
        </p><div class="table"><a name="N150CC"></a><p class="title"><b>Table&nbsp;15.180.&nbsp;Response codes</b></p><div class="table-contents"><table summary="Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the identity links are returned</td></tr><tr><td>404</td><td>Indicates the task instance could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
[
 {
  "type" : "assignee",
  "userId" : "kermit",
  "groupId" : null,
  "taskId" : "6",
  "taskUrl" : "http://localhost:8182/history/historic-task-instances/5",
  "processInstanceId" : null,
  "processInstanceUrl" : null
 }
]</pre><p>
      </p></div><div class="section" title="Get the binary data for a historic task instance variable"><div class="titlepage"><div><div><h3 class="title"><a name="N150EC"></a>Get the binary data for a historic task instance variable</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-task-instances/{taskId}/variables/{variableName}/data</pre><p>
      </p><p>
        </p><div class="table"><a name="N150F6"></a><p class="title"><b>Table&nbsp;15.181.&nbsp;Get the binary data for a historic task instance variable - Response codes</b></p><div class="table-contents"><table summary="Get the binary data for a historic task instance variable - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the task instance was found and the requested variable data is returned.</td></tr><tr><td>404</td><td>Indicates the requested task instance was not found or the process instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
        The response body contains the binary value of the variable. When the variable is of type <code class="literal">binary</code>, the content-type of the response is set to <code class="literal">application/octet-stream</code>, regardless of the content of the variable or the request accept-type header. In case of <code class="literal">serializable</code>, <code class="literal">application/x-java-serialized-object</code> is used as content-type. 
      </p></div><div class="section" title="Get historic activity instances"><div class="titlepage"><div><div><h3 class="title"><a name="restHistoricActivityInstancesGet"></a>Get historic activity instances</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-activity-instances</pre><p>
      </p><p>
          </p><div class="table"><a name="N1512A"></a><p class="title"><b>Table&nbsp;15.182.&nbsp;Get historic activity instances - URL parameters</b></p><div class="table-contents"><table summary="Get historic activity instances - URL parameters" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>activityId</td><td>No</td><td>String</td><td>An id of the activity instance.</td></tr><tr><td>activityInstanceId</td><td>No</td><td>String</td><td>An id of the historic activity instance.</td></tr><tr><td>activityName</td><td>No</td><td>String</td><td>The name of the historic activity instance.</td></tr><tr><td>activityType</td><td>No</td><td>String</td><td>The element type of the historic activity instance.</td></tr><tr><td>executionId</td><td>No</td><td>String</td><td>The execution id of the historic activity instance.</td></tr><tr><td>finished</td><td>No</td><td>Boolean</td><td>Indication if the historic activity instance is finished.</td></tr><tr><td>taskAssignee</td><td>No</td><td>String</td><td>The assignee of the historic activity instance.</td></tr><tr><td>processInstanceId</td><td>No</td><td>String</td><td>The process instance id of the historic activity instance.</td></tr><tr><td>processDefinitionId</td><td>No</td><td>String</td><td>The process definition id of the historic activity instance.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N15198"></a><p class="title"><b>Table&nbsp;15.183.&nbsp;Get historic activity instances - Response codes</b></p><div class="table-contents"><table summary="Get historic activity instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that historic activity instances could be queried.</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "activityId" : "4",
      "activityName" : "My user task",
      "activityType" : "userTask",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "taskId" : "4",
      "calledProcessInstanceId" : null,
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Query for historic activity instances"><div class="titlepage"><div><div><h3 class="title"><a name="N151B8"></a>Query for historic activity instances</h3></div></div></div><p>
        </p><pre class="prettyprint">POST query/historic-activity-instances</pre><p>
      </p><p>
        <span class="bold"><strong>Request body:</strong></span>
        </p><pre class="prettyprint">
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4"
}</pre><p> 
      </p><p>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <a class="link" href="#restHistoricTaskInstancesGet" title="Get historic task instances">getting a collection of historic task instances</a>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long.
      </p><p>
        </p><div class="table"><a name="N151D1"></a><p class="title"><b>Table&nbsp;15.184.&nbsp;Query for historic activity instances - Response codes</b></p><div class="table-contents"><table summary="Query for historic activity instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the activities are returned</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "5",
      "activityId" : "4",
      "activityName" : "My user task",
      "activityType" : "userTask",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "taskId" : "4",
      "calledProcessInstanceId" : null,
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="List of historic variable instances"><div class="titlepage"><div><div><h3 class="title"><a name="restHistoricVariableInstancesGet"></a>List of historic variable instances</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-variable-instances</pre><p>
      </p><p>
          </p><div class="table"><a name="N151FC"></a><p class="title"><b>Table&nbsp;15.185.&nbsp;List of historic variable instances - URL parameters</b></p><div class="table-contents"><table summary="List of historic variable instances - URL parameters" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>processInstanceId</td><td>No</td><td>String</td><td>The process instance id of the historic variable instance.</td></tr><tr><td>taskId</td><td>No</td><td>String</td><td>The task id of the historic variable instance.</td></tr><tr><td>excludeTaskVariables</td><td>No</td><td>Boolean</td><td>Indication to exclude the task variables from the result.</td></tr><tr><td>variableName</td><td>No</td><td>String</td><td>The variable name of the historic variable instance.</td></tr><tr><td>variableNameLike</td><td>No</td><td>String</td><td>The variable name using the 'like' operator for the historic variable instance.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N15246"></a><p class="title"><b>Table&nbsp;15.186.&nbsp;List of historic variable instances - Response codes</b></p><div class="table-contents"><table summary="List of historic variable instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that historic variable instances could be queried.</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "14",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "taskId" : "6",
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      }
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Query for historic variable instances"><div class="titlepage"><div><div><h3 class="title"><a name="N15266"></a>Query for historic variable instances</h3></div></div></div><p>
        </p><pre class="prettyprint">POST query/historic-variable-instances</pre><p>
      </p><p>
        <span class="bold"><strong>Request body:</strong></span>
        </p><pre class="prettyprint">
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...
  
  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ]
}</pre><p> 
      </p><p>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <a class="link" href="#restHistoricVariableInstancesGet" title="List of historic variable instances">getting a collection of historic process instances</a>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
        for filtering based on process variables. The <code class="literal">variables</code> property is a json-array containing objects with the format <a class="link" href="#restQueryVariable" title="JSON query variable format"> as described here.</a>
      </p><p>
        </p><div class="table"><a name="N15286"></a><p class="title"><b>Table&nbsp;15.187.&nbsp;Query for historic variable instances - Response codes</b></p><div class="table-contents"><table summary="Query for historic variable instances - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the tasks are returned</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "14",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "taskId" : "6",
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      }
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Get the binary data for a historic task instance variable"><div class="titlepage"><div><div><h3 class="title"><a name="N152A6"></a>Get the binary data for a historic task instance variable</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-variable-instances/{varInstanceId}/data</pre><p>
      </p><p>
        </p><div class="table"><a name="N152B0"></a><p class="title"><b>Table&nbsp;15.188.&nbsp;Get the binary data for a historic task instance variable - Response codes</b></p><div class="table-contents"><table summary="Get the binary data for a historic task instance variable - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the variable instance was found and the requested variable data is returned.</td></tr><tr><td>404</td><td>Indicates the requested variable instance was not found or the variable instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
      <span class="bold"><strong>Success response body:</strong></span>
      The response body contains the binary value of the variable. When the variable is of type <code class="literal">binary</code>, the content-type of the response is set to <code class="literal">application/octet-stream</code>, regardless of the content of the variable or the request accept-type header. In case of <code class="literal">serializable</code>, <code class="literal">application/x-java-serialized-object</code> is used as content-type. 
    </p></div><div class="section" title="Get historic detail"><div class="titlepage"><div><div><h3 class="title"><a name="restHistoricDetailGet"></a>Get historic detail</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-detail</pre><p>
      </p><p>
          </p><div class="table"><a name="N152E4"></a><p class="title"><b>Table&nbsp;15.189.&nbsp;Get historic detail - URL parameters</b></p><div class="table-contents"><table summary="Get historic detail - URL parameters" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>No</td><td>String</td><td>The id of the historic detail.</td></tr><tr><td>processInstanceId</td><td>No</td><td>String</td><td>The process instance id of the historic detail.</td></tr><tr><td>executionId</td><td>No</td><td>String</td><td>The execution id of the historic detail.</td></tr><tr><td>activityInstanceId</td><td>No</td><td>String</td><td>The activity instance id of the historic detail.</td></tr><tr><td>taskId</td><td>No</td><td>String</td><td>The task id of the historic detail.</td></tr><tr><td>selectOnlyFormProperties</td><td>No</td><td>Boolean</td><td>Indication to only return form properties in the result.</td></tr><tr><td>selectOnlyVariableUpdates</td><td>No</td><td>Boolean</td><td>Indication to only return variable updates in the result.</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N15340"></a><p class="title"><b>Table&nbsp;15.190.&nbsp;Get historic detail - Response codes</b></p><div class="table-contents"><table summary="Get historic detail - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that historic detail could be queried.</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "26",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "executionId" : "6",
      "activityInstanceId", "10",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/history/historic-task-instances/6",
      "time" : "2013-04-17T10:17:43.902+0000",
      "detailType" : "variableUpdate",
      "revision" : 2,
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      },
      "propertyId", null,
      "propertyValue", null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Query for historic details"><div class="titlepage"><div><div><h3 class="title"><a name="N15360"></a>Query for historic details</h3></div></div></div><p>
        </p><pre class="prettyprint">POST query/historic-detail</pre><p>
      </p><p>
        <span class="bold"><strong>Request body:</strong></span>
        </p><pre class="prettyprint">
{
  "processInstanceId" : "5",
}</pre><p> 
      </p><p>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <a class="link" href="#restHistoricDetailGet" title="Get historic detail">getting a collection of historic process instances</a>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long.
      </p><p>
        </p><div class="table"><a name="N15379"></a><p class="title"><b>Table&nbsp;15.191.&nbsp;Query for historic details - Response codes</b></p><div class="table-contents"><table summary="Query for historic details - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the historic details are returned</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "id" : "26",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "executionId" : "6",
      "activityInstanceId", "10",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/history/historic-task-instances/6",
      "time" : "2013-04-17T10:17:43.902+0000",
      "detailType" : "variableUpdate",
      "revision" : 2,
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      },
      "propertyId", null,
      "propertyValue", null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Get the binary data for a historic detail variable"><div class="titlepage"><div><div><h3 class="title"><a name="N15399"></a>Get the binary data for a historic detail variable</h3></div></div></div><p>
        </p><pre class="prettyprint">GET history/historic-detail/{detailId}/data</pre><p>
      </p><p>
        </p><div class="table"><a name="N153A3"></a><p class="title"><b>Table&nbsp;15.192.&nbsp;Get the binary data for a historic detail variable - Response codes</b></p><div class="table-contents"><table summary="Get the binary data for a historic detail variable - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the historic detail instance was found and the requested variable data is returned.</td></tr><tr><td>404</td><td>Indicates the requested historic detail instance was not found or the historic detail instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. Status message provides additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
        The response body contains the binary value of the variable. When the variable is of type <code class="literal">binary</code>, the content-type of the response is set to <code class="literal">application/octet-stream</code>, regardless of the content of the variable or the request accept-type header. In case of <code class="literal">serializable</code>, <code class="literal">application/x-java-serialized-object</code> is used as content-type. 
      </p></div></div><div class="section" title="Forms"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N153CC"></a>Forms</h2></div></div></div><div class="section" title="Get form data"><div class="titlepage"><div><div><h3 class="title"><a name="N153CF"></a>Get form data</h3></div></div></div><p>
        </p><pre class="prettyprint">GET form/form-data</pre><p>
      </p><p>
          </p><div class="table"><a name="N153D9"></a><p class="title"><b>Table&nbsp;15.193.&nbsp;Get form data - URL parameters</b></p><div class="table-contents"><table summary="Get form data - URL parameters" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>taskId</td><td>Yes (if no processDefinitionId)</td><td>String</td><td>The task id corresponding to the form data that needs to be retrieved.</td></tr><tr><td>processDefinitionId</td><td>Yes (if no taskId)</td><td>String</td><td>The process definition id corresponding to the start event form data that needs to be retrieved.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        </p><div class="table"><a name="N153FE"></a><p class="title"><b>Table&nbsp;15.194.&nbsp;Get form data - Response codes</b></p><div class="table-contents"><table summary="Get form data - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates that form data could be queried.</td></tr><tr><td>404</td><td>Indicates that form data could not be found.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body:</strong></span>
          </p><pre class="prettyprint">
{
  "data": [
    { 
      "formKey" : null,
      "deploymentId" : "2",
      "processDefinitionId" : "3",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definition/3",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/runtime/task/6",
      "formProperties" : [
        {
          "id" : "room",
          "name" : "Room",
          "type" : "string",
          "value" : null,
          "readable" : true,
          "writable" : true,
          "required" : true,
          "datePattern" : null,
          "enumValues" : [
            {
              "id" : "normal",
              "name" : "Normal bed"
            },
            {
              "id" : "kingsize",
              "name" : "Kingsize bed"
            },
          ]
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</pre><p>
      </p></div><div class="section" title="Submit task form data"><div class="titlepage"><div><div><h3 class="title"><a name="N1541E"></a>Submit task form data</h3></div></div></div><p>
        </p><pre class="prettyprint">POST form/form-data</pre><p>
      </p><p>
        <span class="bold"><strong>Request body for task form:</strong></span>
        </p><pre class="prettyprint">
{
  "taskId" : "5",
  "properties" : [
    {
      "id" : "room",
      "value" : "normal"
    }
  ]
}</pre><p> 
      </p><p>
        <span class="bold"><strong>Request body for start event form:</strong></span>
        </p><pre class="prettyprint">
{
  "processDefinitionId" : "5",
  "businessKey" : "myKey", (optional)
  "properties" : [
    {
      "id" : "room",
      "value" : "normal"
    }
  ]
}</pre><p> 
      </p><p>
        </p><div class="table"><a name="N1543A"></a><p class="title"><b>Table&nbsp;15.195.&nbsp;Submit task form data - Response codes</b></p><div class="table-contents"><table summary="Submit task form data - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates request was successful and the form data was submitted</td></tr><tr><td>400</td><td>Indicates an parameter was passed in the wrong format. The status-message contains additional information.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        <span class="bold"><strong>Success response body for start event form data (no response for task form data):</strong></span>
          </p><pre class="prettyprint">
{
  "id" : "5",
  "url" : "http://localhost:8182/history/historic-process-instances/5",
  "businessKey" : "myKey",
  "suspended", false,
  "processDefinitionId" : "3",
  "processDefinitionUrl" : "http://localhost:8182/repository/process-definition/3",
  "activityId" : "myTask"
}</pre><p>
      </p></div></div><div class="section" title="Database tables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1545A"></a>Database tables</h2></div></div></div><div class="section" title="List of tables"><div class="titlepage"><div><div><h3 class="title"><a name="N1545D"></a>List of tables</h3></div></div></div><p>
        </p><pre class="prettyprint">GET management/tables</pre><p>
      </p><p>
        </p><div class="table"><a name="N15467"></a><p class="title"><b>Table&nbsp;15.196.&nbsp;List of tables - Response codes</b></p><div class="table-contents"><table summary="List of tables - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the request was successful.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
[
   {
      "name":"ACT_RU_VARIABLE",
      "url":"http://localhost:8182/management/tables/ACT_RU_VARIABLE",
      "count":4528
   },
   {
      "name":"ACT_RU_EVENT_SUBSCR",
      "url":"http://localhost:8182/management/tables/ACT_RU_EVENT_SUBSCR",
      "count":3
   },
   
   ...
   
]</pre><p>
    </p></div><div class="section" title="Get a single table"><div class="titlepage"><div><div><h3 class="title"><a name="N15482"></a>Get a single table</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/tables/{tableName}</pre><p>
        </p><p>
            </p><div class="table"><a name="N1548C"></a><p class="title"><b>Table&nbsp;15.197.&nbsp;Get a single table - URL parameters</b></p><div class="table-contents"><table summary="Get a single table - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>tableName</td><td>Yes</td><td>String</td><td>The name of the table to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
      "name":"ACT_RE_PROCDEF",
      "url":"http://localhost:8182/management/tables/ACT_RE_PROCDEF",
      "count":60
}</pre><p>
          </p><div class="table"><a name="N154AF"></a><p class="title"><b>Table&nbsp;15.198.&nbsp;Get a single table - Response codes</b></p><div class="table-contents"><table summary="Get a single table - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the table exists and the table count is returned.</td></tr><tr><td>404</td><td>Indicates the requested table does not exist.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get column info for a single table"><div class="titlepage"><div><div><h3 class="title"><a name="N154C6"></a>Get column info for a single table</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/tables/{tableName}/columns</pre><p>
        </p><p>
            </p><div class="table"><a name="N154D0"></a><p class="title"><b>Table&nbsp;15.199.&nbsp;Get column info for a single table - URL parameters</b></p><div class="table-contents"><table summary="Get column info for a single table - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>tableName</td><td>Yes</td><td>String</td><td>The name of the table to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "tableName":"ACT_RU_VARIABLE",
   "columnNames":[
      "ID_",
      "REV_",
      "TYPE_",
      "NAME_",
      ...
   ],
   "columnTypes":[
      "VARCHAR",
      "INTEGER",
      "VARCHAR",
      "VARCHAR",
      ...
   ]
}</pre><p>
          </p><div class="table"><a name="N154F3"></a><p class="title"><b>Table&nbsp;15.200.&nbsp;Get column info for a single table - Response codes</b></p><div class="table-contents"><table summary="Get column info for a single table - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the table exists and the table column info is returned.</td></tr><tr><td>404</td><td>Indicates the requested table does not exist.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get row data for a single table"><div class="titlepage"><div><div><h3 class="title"><a name="N1550A"></a>Get row data for a single table</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/tables/{tableName}/data</pre><p>
        </p><p>
            </p><div class="table"><a name="N15514"></a><p class="title"><b>Table&nbsp;15.201.&nbsp;Get row data for a single table - URL parameters</b></p><div class="table-contents"><table summary="Get row data for a single table - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>tableName</td><td>Yes</td><td>String</td><td>The name of the table to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
            </p><div class="table"><a name="N15530"></a><p class="title"><b>Table&nbsp;15.202.&nbsp;Get row data for a single table - URL query parameters</b></p><div class="table-contents"><table summary="Get row data for a single table - URL query parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>start</td><td>No</td><td>Integer</td><td>Index of the first row to fetch. Defaults to 0.</td></tr><tr><td>size</td><td>No</td><td>Integer</td><td>Number of rows to fetch, starting from <code class="literal">start</code>. Defaults to 10.</td></tr><tr><td>orderAscendingColumn</td><td>No</td><td>String</td><td>Name of the column to sort the resulting rows on, ascending.</td></tr><tr><td>orderDescendingColumn</td><td>No</td><td>String</td><td>Name of the column to sort the resulting rows on, descending.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
  "total":3,
   "start":0,
   "sort":null,
   "order":null,
   "size":3,
   
   "data":[
      {
         "TASK_ID_":"2",
         "NAME_":"var1",
         "REV_":1,
         "TEXT_":"123",
         "LONG_":123,
         "ID_":"3",
         "TYPE_":"integer"
      },
      ...
   ]
 
}</pre><p>
          </p><div class="table"><a name="N15571"></a><p class="title"><b>Table&nbsp;15.203.&nbsp;Get row data for a single table - Response codes</b></p><div class="table-contents"><table summary="Get row data for a single table - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the table exists and the table row data is returned.</td></tr><tr><td>404</td><td>Indicates the requested table does not exist.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div></div><div class="section" title="Engine"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N15588"></a>Engine</h2></div></div></div><div class="section" title="Get engine properties"><div class="titlepage"><div><div><h3 class="title"><a name="N1558B"></a>Get engine properties</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/properties</pre><p>
        </p><p>
        Returns a read-only view of the properties used internally in the engine.
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "next.dbid":"101",
   "schema.history":"create(5.13)",
   "schema.version":"5.13"
}</pre><p>
          </p><div class="table"><a name="N1559E"></a><p class="title"><b>Table&nbsp;15.204.&nbsp;Get engine properties - Response codes</b></p><div class="table-contents"><table summary="Get engine properties - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the properties are returned.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get engine info"><div class="titlepage"><div><div><h3 class="title"><a name="N155B0"></a>Get engine info</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/engine</pre><p>
        </p><p>
        Returns a read-only view of the engine that is used in this REST-service.
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "name":"default",
   "version":"5.13",
   "resourceUrl":"file://activiti/activiti.cfg.xml",
   "exception":null
}</pre><p>
          </p><div class="table"><a name="N155C3"></a><p class="title"><b>Table&nbsp;15.205.&nbsp;Get engine info - Response codes</b></p><div class="table-contents"><table summary="Get engine info - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the engine info is returned.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div></div><div class="section" title="Jobs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N155D5"></a>Jobs</h2></div></div></div><div class="section" title="Get a single job"><div class="titlepage"><div><div><h3 class="title"><a name="N155D8"></a>Get a single job</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/jobs/{jobId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N155E2"></a><p class="title"><b>Table&nbsp;15.206.&nbsp;Get a single job - URL parameters</b></p><div class="table-contents"><table summary="Get a single job - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>jobId</td><td>Yes</td><td>String</td><td>The id of the job to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"8",
   "url":"http://localhost:8182/management/jobs/8",
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "processDefinitionId":"timerProcess:1:4",
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/timerProcess%3A1%3A4",
   "executionId":"7",
   "executionUrl":"http://localhost:8182/runtime/executions/7",
   "retries":3,
   "exceptionMessage":null,
   "dueDate":"2013-06-04T22:05:05.474+0000"
}</pre><p>
          </p><div class="table"><a name="N15605"></a><p class="title"><b>Table&nbsp;15.207.&nbsp;Get a single job - Response codes</b></p><div class="table-contents"><table summary="Get a single job - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the job exists and is returned.</td></tr><tr><td>404</td><td>Indicates the requested job does not exist.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Delete a job"><div class="titlepage"><div><div><h3 class="title"><a name="N1561C"></a>Delete a job</h3></div></div></div><p>
          </p><pre class="prettyprint">DELETE management/jobs/{jobId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N15626"></a><p class="title"><b>Table&nbsp;15.208.&nbsp;Delete a job - URL parameters</b></p><div class="table-contents"><table summary="Delete a job - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>jobId</td><td>Yes</td><td>String</td><td>The id of the job to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N15642"></a><p class="title"><b>Table&nbsp;15.209.&nbsp;Delete a job - Response codes</b></p><div class="table-contents"><table summary="Delete a job - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the job was found and has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested job was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Execute a single job"><div class="titlepage"><div><div><h3 class="title"><a name="N15659"></a>Execute a single job</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT management/jobs/{jobId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{ 
  "action" : "execute"
}</pre><p>
        </p><div class="table"><a name="N1566A"></a><p class="title"><b>Table&nbsp;15.210.&nbsp;Execute a single job - JSON Body parameters</b></p><div class="table-contents"><table summary="Execute a single job - JSON Body parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td>action</td><td>Action to perform. Only <code class="literal">execute</code> is supported.</td><td>Yes</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N15685"></a><p class="title"><b>Table&nbsp;15.211.&nbsp;Execute a single job - Response codes</b></p><div class="table-contents"><table summary="Execute a single job - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the job was executed. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested job was not found.</td></tr><tr><td>500</td><td>Indicates the an exception occured while executing the job. The status-description contains additional detail about the error. The full error-stacktrace can be fetched later on if needed.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get the exception stacktrace for a job"><div class="titlepage"><div><div><h3 class="title"><a name="N156A1"></a>Get the exception stacktrace for a job</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/jobs/{jobId}/exception-stracktrace</pre><p>
        </p><p>
        </p><div class="table"><a name="N156AB"></a><p class="title"><b>Table&nbsp;15.212.&nbsp;Get the exception stacktrace for a job - URL parameters</b></p><div class="table-contents"><table summary="Get the exception stacktrace for a job - URL parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td>jobId</td><td>Id of the job to get the stacktrace for.</td><td>Yes</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          </p><div class="table"><a name="N156C3"></a><p class="title"><b>Table&nbsp;15.213.&nbsp;Get the exception stacktrace for a job - Response codes</b></p><div class="table-contents"><table summary="Get the exception stacktrace for a job - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the requested job was not found and the stacktrace has been returned. The response contains the raw stacktrace and always has a Content-type of <code class="literal">text/plain</code>.</td></tr><tr><td>404</td><td>Indicates the requested job was not found or the job doesn't have an exception stacktrace. Status-description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get a list of jobs"><div class="titlepage"><div><div><h3 class="title"><a name="N156DD"></a>Get a list of jobs</h3></div></div></div><p>
          </p><pre class="prettyprint">GET management/jobs</pre><p>
        </p><p>
        </p><div class="table"><a name="N156E7"></a><p class="title"><b>Table&nbsp;15.214.&nbsp;Get a list of jobs - URL query parameters</b></p><div class="table-contents"><table summary="Get a list of jobs - URL query parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Description</th><th>Type</th></tr></thead><tbody><tr><td>id</td><td>Only return job with the given id</td><td>String</td></tr><tr><td>processInstanceId</td><td>Only return jobs part of a process with the given id</td><td>String</td></tr><tr><td>executionId</td><td>Only return jobs part of an execution with the given id</td><td>String</td></tr><tr><td>processDefinitionId</td><td>Only return jobs with the given process definition id</td><td>String</td></tr><tr><td>withRetriesLeft</td><td>If <code class="literal">true</code>, only return jobs with retries left. If false, this parameter is ignored.</td><td>Boolean</td></tr><tr><td>executable</td><td>If <code class="literal">true</code>, only return jobs which are executable. If false, this parameter is ignored.</td><td>Boolean</td></tr><tr><td>timersOnly</td><td>If <code class="literal">true</code>, only return jobs which are timers. If false, this parameter is ignored. Cannot be used toghether with <code class="literal">'messagesOnly'</code>.</td><td>Boolean</td></tr><tr><td>messagesOnly</td><td>If <code class="literal">true</code>, only return jobs which are messages. If false, this parameter is ignored. Cannot be used toghether with <code class="literal">'timersOnly'</code></td><td>Boolean</td></tr><tr><td>withException</td><td>If <code class="literal">true</code>, only return jobs for which an exception occured while executing it. If false, this parameter is ignored.</td><td>Boolean</td></tr><tr><td>dueBefore</td><td>Only return jobs which are due to be executed before the given date. Jobs without duedate are never returned using this parameter.</td><td>Date</td></tr><tr><td>dueAfter</td><td>Only return jobs which are due to be executed after the given date. Jobs without duedate are never returned using this parameter.</td><td>Date</td></tr><tr><td>exceptionMessage</td><td>Only return jobs with the given exception message</td><td>String</td></tr><tr><td>sort</td><td>Field to sort results on, should be one of <code class="literal">id</code>, <code class="literal">dueDate</code>, <code class="literal">executionId</code>, <code class="literal">processInstanceId</code> or <code class="literal">retries</code>.</td><td>String</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "id":"13",
         "url":"http://localhost:8182/management/jobs/13",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "processDefinitionId":"timerProcess:1:4",
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/timerProcess%3A1%3A4",
         "executionId":"12",
         "executionUrl":"http://localhost:8182/runtime/executions/12",
         "retries":0,
         "exceptionMessage":"Can't find scripting engine for 'unexistinglanguage'",
         "dueDate":"2013-06-07T10:00:24.653+0000"
      },
      
      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</pre><p>
          </p><div class="table"><a name="N15787"></a><p class="title"><b>Table&nbsp;15.215.&nbsp;Get a list of jobs - Response codes</b></p><div class="table-contents"><table summary="Get a list of jobs - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the requested jobs were returned.</td></tr><tr><td>400</td><td>Indicates an illegal value has been used in a url query parameter or the both <code class="literal">'messagesOnly'</code> and <code class="literal">'timersOnly'</code> are used as parameters. Status description contains additional details about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div></div><div class="section" title="Users"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N157A4"></a>Users</h2></div></div></div><div class="section" title="Get a single user"><div class="titlepage"><div><div><h3 class="title"><a name="N157A7"></a>Get a single user</h3></div></div></div><p>
          </p><pre class="prettyprint">GET identity/users/{userId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N157B1"></a><p class="title"><b>Table&nbsp;15.216.&nbsp;Get a single user - URL parameters</b></p><div class="table-contents"><table summary="Get a single user - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"testuser",
   "firstName":"Fred",
   "lastName":"McDonald",
   "url":"http://localhost:8182/identity/users/testuser",
   "email":"no-reply@activiti.org"
}</pre><p>
          </p><div class="table"><a name="N157D4"></a><p class="title"><b>Table&nbsp;15.217.&nbsp;Get a single user - Response codes</b></p><div class="table-contents"><table summary="Get a single user - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user exists and is returned.</td></tr><tr><td>404</td><td>Indicates the requested user does not exist.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get a list of users"><div class="titlepage"><div><div><h3 class="title"><a name="N157EB"></a>Get a list of users</h3></div></div></div><p>
          </p><pre class="prettyprint">GET identity/users</pre><p>
        </p><p>
        </p><div class="table"><a name="N157F5"></a><p class="title"><b>Table&nbsp;15.218.&nbsp;Get a list of users - URL query parameters</b></p><div class="table-contents"><table summary="Get a list of users - URL query parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Description</th><th>Type</th></tr></thead><tbody><tr><td>id</td><td>Only return user with the given id</td><td>String</td></tr><tr><td>firstName</td><td>Only return users with the given firstname</td><td>String</td></tr><tr><td>lastName</td><td>Only return users with the given lastname</td><td>String</td></tr><tr><td>email</td><td>Only return users with the given email</td><td>String</td></tr><tr><td>firstNameLike</td><td>Only return userswith a firstname like the given value. Use <code class="literal">%</code> as wildcard-character.</td><td>String</td></tr><tr><td>lastNameLike</td><td>Only return users with a lastname like the given value. Use <code class="literal">%</code> as wildcard-character.</td><td>String</td></tr><tr><td>emailLike</td><td>Only return users with an email like the given value. Use <code class="literal">%</code> as wildcard-character.</td><td>String</td></tr><tr><td>memberOfGroup</td><td>Only return users which are a member of the given group.</td><td>String</td></tr><tr><td>potentialStarter</td><td>Only return users which are potential starters for a process-definition with the given id.</td><td>String</td></tr><tr><td>sort</td><td>Field to sort results on, should be one of <code class="literal">id</code>, <code class="literal">firstName</code>, <code class="literal">lastname</code> or <code class="literal">email</code>.</td><td>String</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
      {
         "id":"anotherUser",
         "firstName":"Tijs",
         "lastName":"Barrez",
         "url":"http://localhost:8182/identity/users/anotherUser",
         "email":"no-reply@alfresco.org"
      },
      {
         "id":"kermit",
         "firstName":"Kermit",
         "lastName":"the Frog",
         "url":"http://localhost:8182/identity/users/kermit",
         "email":null
      },
      {
         "id":"testuser",
         "firstName":"Fred",
         "lastName":"McDonald",
         "url":"http://localhost:8182/identity/users/testuser",
         "email":"no-reply@activiti.org"
      }
   ],
   "total":3,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":3
}</pre><p>
          </p><div class="table"><a name="N15872"></a><p class="title"><b>Table&nbsp;15.219.&nbsp;Get a list of users - Response codes</b></p><div class="table-contents"><table summary="Get a list of users - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the requested users were returned.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Update a user"><div class="titlepage"><div><div><h3 class="title"><a name="N15884"></a>Update a user</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT identity/users/{userId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{
  "firstName":"Tijs",
  "lastName":"Barrez",
  "email":"no-reply@alfresco.org"
}</pre><p>
      All request values are optional. For example, you can only include the 'firstName' attribute in the request body JSON-object, only updating the firstName of the user, leaving all other fields unaffected. When an attribute is explicitly included and is set to null, the user-value will be updated to null. Example: <code class="literal">{"firstName" : null}</code> will clear the firstName of the user).
       </p><p>
          </p><div class="table"><a name="N1589A"></a><p class="title"><b>Table&nbsp;15.220.&nbsp;Update a user - Response codes</b></p><div class="table-contents"><table summary="Update a user - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user was updated.</td></tr><tr><td>404</td><td>Indicates the requested user was not found.</td></tr><tr><td>409</td><td>Indicates the requested user was updated simultaneously.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">identity/users/{userId}</code>.
      </p></div><div class="section" title="Create a user"><div class="titlepage"><div><div><h3 class="title"><a name="N158BF"></a>Create a user</h3></div></div></div><p>
          </p><pre class="prettyprint">POST identity/users</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{
  "id":"tijs",
  "firstName":"Tijs",
  "lastName":"Barrez",
  "email":"no-reply@alfresco.org"
}</pre><p>
       </p><p>
          </p><div class="table"><a name="N158D2"></a><p class="title"><b>Table&nbsp;15.221.&nbsp;Create a user - Response codes</b></p><div class="table-contents"><table summary="Create a user - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the user was created.</td></tr><tr><td>400</td><td>Indicates the id of the user was missing.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">identity/users/{userId}</code>.
      </p></div><div class="section" title="Delete a user"><div class="titlepage"><div><div><h3 class="title"><a name="N158F2"></a>Delete a user</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE identity/users/{userId}</pre><p>
      </p><p>
          </p><div class="table"><a name="N158FC"></a><p class="title"><b>Table&nbsp;15.222.&nbsp;Delete a user - URL parameters</b></p><div class="table-contents"><table summary="Delete a user - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          </p><div class="table"><a name="N15918"></a><p class="title"><b>Table&nbsp;15.223.&nbsp;Delete a user - Response codes</b></p><div class="table-contents"><table summary="Delete a user - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the user was found and  has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested user was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get a user's picture"><div class="titlepage"><div><div><h3 class="title"><a name="N1592F"></a>Get a user's picture</h3></div></div></div><p>
        </p><pre class="prettyprint">GET identity/users/{userId}/picture</pre><p>
      </p><p>
          </p><div class="table"><a name="N15939"></a><p class="title"><b>Table&nbsp;15.224.&nbsp;Get a user's picture - URL parameters</b></p><div class="table-contents"><table summary="Get a user's picture - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to get the p&icirc;cture for.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          <span class="bold"><strong>Response Body:</strong></span>
          The response body contains the raw picture data, representing the user's picture. The Content-type of the response corresponds to the mimeType that was set when creating the picture.
          </p><div class="table"><a name="N15959"></a><p class="title"><b>Table&nbsp;15.225.&nbsp;Get a user's picture - Response codes</b></p><div class="table-contents"><table summary="Get a user's picture - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user was found and has a picture, which is returned in the body.</td></tr><tr><td>404</td><td>Indicates the requested user was not found or the user does not have a profile picture. Status-description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Updating a user's picture"><div class="titlepage"><div><div><h3 class="title"><a name="N15970"></a>Updating a user's picture</h3></div></div></div><p>
        </p><pre class="prettyprint">GET identity/users/{userId}/picture</pre><p>
      </p><p>
          </p><div class="table"><a name="N1597A"></a><p class="title"><b>Table&nbsp;15.226.&nbsp;Updating a user's picture - URL parameters</b></p><div class="table-contents"><table summary="Updating a user's picture - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to get the p&icirc;cture for.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
       <span class="bold"><strong>Request body:</strong></span>
           The request should be of type <code class="literal">multipart/form-data</code>. There should be a single file-part included with the binary value of the picture. On top of that, the folowing additionl form-fields can be present:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">mimeType</code>: Optional mime-type for the uploaded picture. If omitted, the default of <code class="literal">image/jpeg</code> is used as a mime-type for the picture.</p></li></ul></div><p>
        </p><p>
          </p><div class="table"><a name="N159A9"></a><p class="title"><b>Table&nbsp;15.227.&nbsp;Updating a user's picture - Response codes</b></p><div class="table-contents"><table summary="Updating a user's picture - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user was found and the picture has been updated. The response-body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested user was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="List a user's info"><div class="titlepage"><div><div><h3 class="title"><a name="N159C0"></a>List a user's info</h3></div></div></div><p>
        </p><pre class="prettyprint">PUT identity/users/{userId}/info</pre><p>
      </p><p>
          </p><div class="table"><a name="N159CA"></a><p class="title"><b>Table&nbsp;15.228.&nbsp;List a user's info - URL parameters</b></p><div class="table-contents"><table summary="List a user's info - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to get the info for.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          <span class="bold"><strong>Response Body:</strong></span>
</p><pre class="prettyprint">
[
   {
      "key":"key1",
      "url":"http://localhost:8182/identity/users/testuser/info/key1"
   },
   {
      "key":"key2",
      "url":"http://localhost:8182/identity/users/testuser/info/key2"
   }
]</pre><p>
          </p><div class="table"><a name="N159ED"></a><p class="title"><b>Table&nbsp;15.229.&nbsp;List a user's info - Response codes</b></p><div class="table-contents"><table summary="List a user's info - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user was found and list of info (key and url) is returned.</td></tr><tr><td>404</td><td>Indicates the requested user was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get a user's info"><div class="titlepage"><div><div><h3 class="title"><a name="N15A04"></a>Get a user's info</h3></div></div></div><p>
        </p><pre class="prettyprint">GET identity/users/{userId}/info/{key}</pre><p>
      </p><p>
          </p><div class="table"><a name="N15A0E"></a><p class="title"><b>Table&nbsp;15.230.&nbsp;Get a user's info - URL parameters</b></p><div class="table-contents"><table summary="Get a user's info - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to get the info for.</td></tr><tr><td>key</td><td>Yes</td><td>String</td><td>The key of the user info to get.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          <span class="bold"><strong>Response Body:</strong></span>
</p><pre class="prettyprint">
{
   "key":"key1",
   "value":"Value 1",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</pre><p>
          </p><div class="table"><a name="N15A3A"></a><p class="title"><b>Table&nbsp;15.231.&nbsp;Get a user's info - Response codes</b></p><div class="table-contents"><table summary="Get a user's info - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user was found and the user has info for the given key..</td></tr><tr><td>404</td><td>Indicates the requested user was not found or the user doesn't have info for the given key. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Update a user's info"><div class="titlepage"><div><div><h3 class="title"><a name="N15A51"></a>Update a user's info</h3></div></div></div><p>
        </p><pre class="prettyprint">PUT identity/users/{userId}/info/{key}</pre><p>
      </p><p>
          </p><div class="table"><a name="N15A5B"></a><p class="title"><b>Table&nbsp;15.232.&nbsp;Update a user's info - URL parameters</b></p><div class="table-contents"><table summary="Update a user's info - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to update the info for.</td></tr><tr><td>key</td><td>Yes</td><td>String</td><td>The key of the user info to update.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          <span class="bold"><strong>Request Body:</strong></span>
</p><pre class="prettyprint">
{
   "value":"The updated value"
}</pre><p>
      </p><p>
          <span class="bold"><strong>Response Body:</strong></span>
</p><pre class="prettyprint">
{
   "key":"key1",
   "value":"The updated value",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</pre><p>
          </p><div class="table"><a name="N15A90"></a><p class="title"><b>Table&nbsp;15.233.&nbsp;Update a user's info - Response codes</b></p><div class="table-contents"><table summary="Update a user's info - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the user was found and the info has been updated.</td></tr><tr><td>400</td><td>Indicates the value was missing from the request body.</td></tr><tr><td>404</td><td>Indicates the requested user was not found or the user doesn't have info for the given key. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Create a new user's info entry"><div class="titlepage"><div><div><h3 class="title"><a name="N15AAC"></a>Create a new user's info entry</h3></div></div></div><p>
        </p><pre class="prettyprint">POST identity/users/{userId}/info</pre><p>
      </p><p>
          </p><div class="table"><a name="N15AB6"></a><p class="title"><b>Table&nbsp;15.234.&nbsp;Create a new user's info entry - URL parameters</b></p><div class="table-contents"><table summary="Create a new user's info entry - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to create the info for.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          <span class="bold"><strong>Request Body:</strong></span>
</p><pre class="prettyprint">
{
   "key":"key1",
   "value":"The value"
}</pre><p>
      </p><p>
          <span class="bold"><strong>Response Body:</strong></span>
</p><pre class="prettyprint">
{
   "key":"key1",
   "value":"The value",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</pre><p>
          </p><div class="table"><a name="N15AE2"></a><p class="title"><b>Table&nbsp;15.235.&nbsp;Create a new user's info entry - Response codes</b></p><div class="table-contents"><table summary="Create a new user's info entry - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the user was found and the info has been created.</td></tr><tr><td>400</td><td>Indicates the key or value was missing from the request body. Status description contains additional information about the error.</td></tr><tr><td>404</td><td>Indicates the requested user was not found.</td></tr><tr><td>409</td><td>Indicates there is already an info-entry with the given key for the user, update the resource instance (<code class="literal">PUT</code>).</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Delete a user's info"><div class="titlepage"><div><div><h3 class="title"><a name="N15B06"></a>Delete a user's info</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE identity/users/{userId}/info/{key}</pre><p>
      </p><p>
          </p><div class="table"><a name="N15B10"></a><p class="title"><b>Table&nbsp;15.236.&nbsp;Delete a user's info - URL parameters</b></p><div class="table-contents"><table summary="Delete a user's info - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to delete the info for.</td></tr><tr><td>key</td><td>Yes</td><td>String</td><td>The key of the user info to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          </p><div class="table"><a name="N15B35"></a><p class="title"><b>Table&nbsp;15.237.&nbsp;Delete a user's info - Response codes</b></p><div class="table-contents"><table summary="Delete a user's info - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the user was found and the info for the given key has been deleted. Response body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested user was not found or the user doesn't have info for the given key. Status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div></div><div class="section" title="Groups"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N15B4C"></a>Groups</h2></div></div></div><div class="section" title="Get a single group"><div class="titlepage"><div><div><h3 class="title"><a name="N15B4F"></a>Get a single group</h3></div></div></div><p>
          </p><pre class="prettyprint">GET identity/groups/{groupId}</pre><p>
        </p><p>
            </p><div class="table"><a name="N15B59"></a><p class="title"><b>Table&nbsp;15.238.&nbsp;Get a single group - URL parameters</b></p><div class="table-contents"><table summary="Get a single group - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>groupId</td><td>Yes</td><td>String</td><td>The id of the group to get.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "id":"testgroup",
   "url":"http://localhost:8182/identity/groups/testgroup",
   "name":"Test group",
   "type":"Test type"
}</pre><p>
          </p><div class="table"><a name="N15B7C"></a><p class="title"><b>Table&nbsp;15.239.&nbsp;Get a single group - Response codes</b></p><div class="table-contents"><table summary="Get a single group - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the group exists and is returned.</td></tr><tr><td>404</td><td>Indicates the requested group does not exist.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get a list of groups"><div class="titlepage"><div><div><h3 class="title"><a name="N15B93"></a>Get a list of groups</h3></div></div></div><p>
          </p><pre class="prettyprint">GET identity/groups</pre><p>
        </p><p>
        </p><div class="table"><a name="N15B9D"></a><p class="title"><b>Table&nbsp;15.240.&nbsp;Get a list of groups - URL query parameters</b></p><div class="table-contents"><table summary="Get a list of groups - URL query parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th>Parameter</th><th>Description</th><th>Type</th></tr></thead><tbody><tr><td>id</td><td>Only return group with the given id</td><td>String</td></tr><tr><td>name</td><td>Only return groups with the given name</td><td>String</td></tr><tr><td>type</td><td>Only return groups with the given type</td><td>String</td></tr><tr><td>nameLike</td><td>Only return groups with a name like the given value. Use <code class="literal">%</code> as wildcard-character.</td><td>String</td></tr><tr><td>member</td><td>Only return groups which have a member with the given username.</td><td>String</td></tr><tr><td>potentialStarter</td><td>Only return groups which members are potential starters for a process-definition with the given id.</td><td>String</td></tr><tr><td>sort</td><td>Field to sort results on, should be one of <code class="literal">id</code>, <code class="literal">name</code> or <code class="literal">type</code>.</td><td>String</td></tr><tr><td><p>The general <a class="link" href="#restPagingAndSort" title="Paging and sorting">paging and sorting query-parameters</a> can be used for this URL.</p></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
          <span class="bold"><strong>Success response body:</strong></span>
            </p><pre class="prettyprint">
{
   "data":[
     {
        "id":"testgroup",
        "url":"http://localhost:8182/identity/groups/testgroup",
        "name":"Test group",
        "type":"Test type"
     },

      ...
   ],
   "total":3,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":3
}</pre><p>
          </p><div class="table"><a name="N15BFC"></a><p class="title"><b>Table&nbsp;15.241.&nbsp;Get a list of groups - Response codes</b></p><div class="table-contents"><table summary="Get a list of groups - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the requested groups were returned.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Update a group"><div class="titlepage"><div><div><h3 class="title"><a name="N15C0E"></a>Update a group</h3></div></div></div><p>
          </p><pre class="prettyprint">PUT identity/groups/{groupId}</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{
   "name":"Test group",
   "type":"Test type"
}</pre><p>
      All request values are optional. For example, you can only include the 'name' attribute in the request body JSON-object, only updating the name of the group, leaving all other fields unaffected. When an attribute is explicitly included and is set to null, the group-value will be updated to null.
       </p><p>
          </p><div class="table"><a name="N15C21"></a><p class="title"><b>Table&nbsp;15.242.&nbsp;Update a group - Response codes</b></p><div class="table-contents"><table summary="Update a group - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>Indicates the group was updated.</td></tr><tr><td>404</td><td>Indicates the requested group was not found.</td></tr><tr><td>409</td><td>Indicates the requested group was updated simultaneously.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">identity/groups/{groupId}</code>.
      </p></div><div class="section" title="Create a group"><div class="titlepage"><div><div><h3 class="title"><a name="N15C46"></a>Create a group</h3></div></div></div><p>
          </p><pre class="prettyprint">POST identity/groups</pre><p>
        </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{
   "id":"testgroup",
   "name":"Test group",
   "type":"Test type"
}</pre><p>
       </p><p>
          </p><div class="table"><a name="N15C59"></a><p class="title"><b>Table&nbsp;15.243.&nbsp;Create a group - Response codes</b></p><div class="table-contents"><table summary="Create a group - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the group was created.</td></tr><tr><td>400</td><td>Indicates the id of the group was missing.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
       <span class="bold"><strong>Success response body:</strong></span> see response for <code class="literal">identity/groups/{groupId}</code>.
      </p></div><div class="section" title="Delete a group"><div class="titlepage"><div><div><h3 class="title"><a name="N15C79"></a>Delete a group</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE identity/groups/{groupId}</pre><p>
      </p><p>
          </p><div class="table"><a name="N15C83"></a><p class="title"><b>Table&nbsp;15.244.&nbsp;Delete a group - URL parameters</b></p><div class="table-contents"><table summary="Delete a group - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>groupId</td><td>Yes</td><td>String</td><td>The id of the group to delete.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          </p><div class="table"><a name="N15C9F"></a><p class="title"><b>Table&nbsp;15.245.&nbsp;Delete a group - Response codes</b></p><div class="table-contents"><table summary="Delete a group - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the group was found and  has been deleted. Response-body is intentionally empty.</td></tr><tr><td>404</td><td>Indicates the requested group was not found.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Get members in a group"><div class="titlepage"><div><div><h3 class="title"><a name="N15CB6"></a>Get members in a group</h3></div></div></div><p>There is no GET allowed on <code class="literal">identity/groups/members</code>. Use the <code class="literal">identity/users?memberOfGroup=sales</code> URL to get all users that are part of a particular group.</p></div><div class="section" title="Add a member to a group"><div class="titlepage"><div><div><h3 class="title"><a name="N15CC1"></a>Add a member to a group</h3></div></div></div><p>
        </p><pre class="prettyprint">POST identity/groups/{groupId}/members</pre><p>
      </p><p>
          </p><div class="table"><a name="N15CCB"></a><p class="title"><b>Table&nbsp;15.246.&nbsp;Add a member to a group - URL parameters</b></p><div class="table-contents"><table summary="Add a member to a group - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>groupId</td><td>Yes</td><td>String</td><td>The id of the group to add a member to.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
         <span class="bold"><strong>Body JSON:</strong></span>
           </p><pre class="prettyprint">
{
   "userId":"kermit"
}</pre><p>
       </p><p>
          </p><div class="table"><a name="N15CF0"></a><p class="title"><b>Table&nbsp;15.247.&nbsp;Add a member to a group - Response codes</b></p><div class="table-contents"><table summary="Add a member to a group - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>201</td><td>Indicates the group was found and the member has been added.</td></tr><tr><td>404</td><td>Indicates the userId was not included in the request body.</td></tr><tr><td>404</td><td>Indicates the requested group was not found.</td></tr><tr><td>409</td><td>Indicates the requested user is already a member of the group.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
         <span class="bold"><strong>Response Body:</strong></span>
           </p><pre class="prettyprint">
{
   "userId":"kermit",
   "groupId":"sales",
    "url":"http://localhost:8182/identity/groups/sales/members/kermit"
}</pre><p>
       </p></div><div class="section" title="Delete a member from a group"><div class="titlepage"><div><div><h3 class="title"><a name="N15D1A"></a>Delete a member from a group</h3></div></div></div><p>
        </p><pre class="prettyprint">DELETE identity/groups/{groupId}/members/{userId}</pre><p>
      </p><p>
          </p><div class="table"><a name="N15D24"></a><p class="title"><b>Table&nbsp;15.248.&nbsp;Delete a member from a group - URL parameters</b></p><div class="table-contents"><table summary="Delete a member from a group - URL parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Required</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>groupId</td><td>Yes</td><td>String</td><td>The id of the group to remove a member from.</td></tr><tr><td>userId</td><td>Yes</td><td>String</td><td>The id of the user to remove.</td></tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
          </p><div class="table"><a name="N15D49"></a><p class="title"><b>Table&nbsp;15.249.&nbsp;Delete a member from a group - Response codes</b></p><div class="table-contents"><table summary="Delete a member from a group - Response codes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Response code</th><th>Description</th></tr></thead><tbody><tr><td>204</td><td>Indicates the group was found and the member has been deleted. The response body is left empty intentionally.</td></tr><tr><td>404</td><td>Indicates the requested group was not found or that the user is not a member of the group. The status description contains additional information about the error.</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
         <span class="bold"><strong>Response Body:</strong></span>
           </p><pre class="prettyprint">
{
   "userId":"kermit",
   "groupId":"sales",
    "url":"http://localhost:8182/identity/groups/sales/members/kermit"
}</pre><p>
       </p></div></div><div class="section" title="Legacy REST - General Usage"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N15D6A"></a>Legacy REST - General Usage</h2></div></div></div><p><span class="bold"><strong>The folowing section contains documentation of the Legacy REST-api, which has been deprecated since the 5.13 release. The REST-urls will not be removed in the future but will not be maintained. Any future additions and improvements will be done to the new REST API.</strong></span></p><p>
      Activiti includes a REST API to the Activiti Engine that can be installed by deploying the activiti-rest.war file to a servlet container like Apache Tomcat.
      By default the Activiti Engine will connect to a standalone H2 database. You can change the database settings in the db.properties file in the WEB-INF/classes folder.
      The REST API uses JSON format (http://www.json.org) and is built upon the Restlet (http://www.restlet.org).
    </p><p>
      Each REST API call has its individual authorization level and you must be logged in as a user to invoke a REST API
      call (except for the /login service). Authentication is done using Basic HTTP Authentication, so if you logged in as
      an admin (i.e. kermit) you should be able to perform all calls as described below.
    </p><p>
      The API follows normal REST API conventions using GET for read operations, POST for creating objects, PUT for updating and
      performing operations on already created objects and finally DELETE for deleting objects. When performing a call
      that affects multiple objects POST is used on all such operations for consistency and making sure that an unlimited
      number of objects may be used. The reason for using POST is that the HTTP DELETE method doesn't implicitly allow
      request bodies and therefore, a call using DELETE, in theory, could get it's request body stripped out by a proxy.
      So to be certain this doesn't happen we use POST, even when PUT could have been used to update multiple objects,
      for consistency.
    </p><p>
      All rest calls use a content type of "application/json" (except for upload requests which uses "multipart/form-data").
    </p><p>
      The base URL for invoking a REST call is http://localhost:8080/activiti-rest/service/.
      So for example to list the process definitions in the engine point your browser to:
      http://localhost:8080/activiti-rest/service/process-definitions
    </p><p>
      You may also use curl to run queries against the REST API, e.g.:
      </p><pre class="prettyprint">curl --basic --user kermit:kermit http://localhost:8080/activiti-rest/service/tasks?assignee=kermit</pre><p>
    </p><p>
      Please look below to see what REST API calls that currently are available.
      Please consider the "API" sections as a "one line hint" to what functionality of the core API that is used to implement the REST API call.
    </p></div><div class="section" title="Repository"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N15D82"></a>Repository</h2></div></div></div><div class="section" title="Upload Deployment"><div class="titlepage"><div><div><h3 class="title"><a name="N15D86"></a>Upload Deployment</h3></div></div></div><p>
        Uploads and installs a deployment of format .bpmn20.xml, .bpmn, .bar or .zip using normal "html form upload"
        (enctype=multipart/form-data) in other words not a json-request. The deployment information is returned as a response if the deploy action succeeds.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Request: </strong></span>
            <code class="literal">POST /deployment</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>API: </strong></span>
            <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createDeployment().name(fileName).deploymentBuilder.deploy()</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Response:</strong></span>
            </p><pre class="prettyprint">
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples"
}</pre><p>
          </p></li></ul></div></div><div class="section" title="Get Deployments"><div class="titlepage"><div><div><h3 class="title"><a name="N15DAA"></a>Get Deployments</h3></div></div></div><p>
        Returns a paginated list deployments that can be sorted by "id", "name" or "deploymentTime".
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Request: </strong></span>
            <code class="literal">GET /deployments?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>API: </strong></span>
            <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createDeploymentQuery().listPage()</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Response:</strong></span>
            </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "10",
      "name": "activiti-examples.bar",
      "deploymentTime": "2010-10-13T14:54:26.750+02:00",
      "category": "examples"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
          </p></li></ul></div></div><div class="section" title="Get Deployment Resources"><div class="titlepage"><div><div><h3 class="title"><a name="N15DCE"></a>Get Deployment Resources</h3></div></div></div><p>
        Returns all resources from the deployment.
        Example: /deployment/10/resources
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Request: </strong></span>
            <code class="literal">GET /deployment/{deploymentId}/resources</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>API: </strong></span>
            <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().getDeploymentResourceNames(deploymentId)</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Response:</strong></span>
            </p><pre class="prettyprint">
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples",
  "resources": ["resource1", "resource2"]
}</pre><p>
          </p></li></ul></div></div><div class="section" title="Get Deployment Resource"><div class="titlepage"><div><div><h3 class="title"><a name="N15DF2"></a>Get Deployment Resource</h3></div></div></div><p>
        Returns a resource from the deployment.
        Example: /deployment/10/resource/org/activiti/examples/bpmn/usertask/FinancialReportProcess.bpmn20.xml
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Request: </strong></span>
            <code class="literal">GET /deployment/{deploymentId}/resource/{resourceName}</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>API: </strong></span>
            <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().getResourceAsStream(deploymentId, resourceName)</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Response:</strong></span>
            </p><pre class="prettyprint">I.e a .bpmn20.xml file, an image or whatever type of file the deployment resource contained.</pre><p>
          </p></li></ul></div></div><div class="section" title="Delete Deployment"><div class="titlepage"><div><div><h3 class="title"><a name="N15E16"></a>Delete Deployment</h3></div></div></div><p>
        Deletes a deployment.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Request: </strong></span>
            <code class="literal">DELETE /deployment/{deploymentId}?cascade={cascade?}</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>API: </strong></span>
            <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().deleteDeployment(deploymentId)</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Response:</strong></span>
            </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
          </p></li></ul></div></div><div class="section" title="Delete Deployments"><div class="titlepage"><div><div><h3 class="title"><a name="N15E3A"></a>Delete Deployments</h3></div></div></div><p>
        Deletes multiple deployment.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Request: </strong></span>
            <code class="literal">POST /deployments/delete?cascade={cascade?}</code>
            </p><pre class="prettyprint">
{
"deploymentIds": [ "10", "11" ]
}</pre><p>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>API: </strong></span>
            <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().deleteDeployment(deploymentId)</code>
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Response:</strong></span>
            </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
          </p></li></ul></div></div></div><div class="section" title="Engine"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N15E62"></a>Engine</h2></div></div></div><div class="section" title="Get Process Engine"><div class="titlepage"><div><div><h3 class="title"><a name="N15E65"></a>Get Process Engine</h3></div></div></div><p>
          Returns the process engine initialization details. If something went wrong during startup, details
          about the error will be given in the "exception" attribute in the response.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request: </strong></span>
              <code class="literal">GET /process-engine</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API: </strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "name": "default",
  "resourceUrl": "jar:file:\//&lt;path-to-deployment&gt;\/activiti-cfg.jar!\/activiti.properties",
  "exception": null,
  "version": "5.11"
}</pre><p>
            </p></li></ul></div></div></div><div class="section" title="Processes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N15E8A"></a>Processes</h2></div></div></div><div class="section" title="List Process Definitions"><div class="titlepage"><div><div><h3 class="title"><a name="N15E8D"></a>List Process Definitions</h3></div></div></div><p>
          Returns details about the deployed process definitions that can be sorted by "id", "name", "version" or
          "deploymentId". The name of the BPMN2.0 XML process diagram is given in the "resourceName" attribute and can,
          in combination with the "deploymentId" attribute, be retrieved from the GET Deployment Resource REST API call
          above.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /process-definitions?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createProcessDefinitionQuery().listPage()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "financialReport:1",
      "key": "financialReport",
      "version": 1,
      "name": "Monthly financial report",
      "resourceName": "org/activiti/examples/bpmn/usertask/FinancialReportProcess.bpmn20.xml",
      "diagramResourceName": "org/activiti/examples/bpmn/usertask/FinancialReportProcess.png",
      "deploymentId": "10",
      "startFormResourceKey": null,
      "isGraphicNotationDefined": true                 
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Process Definition Form Properties"><div class="titlepage"><div><div><h3 class="title"><a name="N15EB1"></a>Get Process Definition Form Properties</h3></div></div></div><p>
          Returns a process definition's form properties.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /process-definition/{processDefinitionId}/properties</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getFormService().getStartFormData(processDefinitionId)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
                "data": [
    {
      "id": "fullName",
      "name": "Full name",
      "value": "${name}",
      "type": "String",
      "required": false,
      "readable": true,
      "writeable": true               
    }
  ]
              </pre><p>
            </p></li></ul></div></div><div class="section" title="Get Process Definition Form Resource"><div class="titlepage"><div><div><h3 class="title"><a name="N15ED5"></a>Get Process Definition Form Resource</h3></div></div></div><p>
          Returns a process definition's form.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /process-definition/{processDefinitionId}/form</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().getRenderedStartFormById(processDefinitionId)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">&lt;user-defined-response&gt;</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Process Definition Diagram"><div class="titlepage"><div><div><h3 class="title"><a name="N15EF9"></a>Get Process Definition Diagram</h3></div></div></div><p>
          Returns a PNG diagram of the process definition if it's available.
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>Request:</strong></span>
                <code class="literal">GET /process-definition/{processDefinitionId}/diagram</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>API:</strong></span>
                <code class="literal">repositoryService.getResourceAsStream(processDefinition.getDeploymentId(), processDefinition.getDiagramResourceName());</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>Response:</strong></span>
                </p><pre class="prettyprint">Png diagram of the process definition.</pre><p>
              </p></li></ul></div></div><div class="section" title="Start Process Instance"><div class="titlepage"><div><div><h3 class="title"><a name="N15F1D"></a>Start Process Instance</h3></div></div></div><p>
          Creates a process instance based on a process definition and returns details about the newly created process instance.
          Additional variables (from a form) may be passed using the body object. In other words placing attributes
          next to the "processDefinitionId" attribute.
        </p><p>
          Note that if a value is submitted as true (instead of "true") it will be treated as a
          Boolean even if no descriptor is used. The same is also valid for number, i.e., 123 will become an Integer
          but "123" will become a String (unless a descriptor is defined).
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">POST /process-instance</code>
              </p><pre class="prettyprint">
{
  "processDefinitionId":"financialReport:1:1700",
  "businessKey":"order-4711"
}</pre><p>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getRuntimeService().startProcessInstanceById(processDefinitionId[, businessKey][, variables])</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "id": "217",
  "processDefinitionId": "financialReport:1:1700",
  "businessKey": "order-4711",
  "processInstanceId": "217"
}</pre><p>
            </p></li></ul></div></div><div class="section" title="List Process Instances"><div class="titlepage"><div><div><h3 class="title"><a name="N15F44"></a>List Process Instances</h3></div></div></div><p>
            Returns details about the active process instances that can be sorted by "id", "startTime", "businessKey" or
            "processDefinitionId". You can filter instances by "processDefinitionId" and "businessKey".
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>Paginated Request:</strong></span>
                <code class="literal">GET /process-instances?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}&amp;businessKey={businessKey}&amp;processDefinitionId={processDefinitionId}</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>API:</strong></span>
                <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getHistoryService().createHistoricProcessInstanceQuery().xxx.listPages()</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>Paginated Response:</strong></span>
                </p><pre class="prettyprint">
  {
    "data": [
      {
        "id": "2",
        "processDefinitionId": "financialReport:1",
        "businessKey": "55",
        "startTime": "2010-10-13T14:54:26.750+02:00",
        "startUserId": "kermit"
      }
    ],
    "total": 1,
    "start": 0,
    "sort": "id",
    "order": "asc",
    "size": 1
  }</pre><p>
              </p></li></ul></div></div><div class="section" title="Get Process Instance Details"><div class="titlepage"><div><div><h3 class="title"><a name="N15F68"></a>Get Process Instance Details</h3></div></div></div><p>
            Returns all details about a specific process instance. This can be a running or completed process instance.
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>Request:</strong></span>
                <code class="literal">GET /process-instance/{processInstanceId}</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>API:</strong></span>
                <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getHistoryService().createHistoricProcessInstanceQuery().processInstanceId(..).singleResult()</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>Response:</strong></span>
                </p><pre class="prettyprint">
  {
    "id": "2",
    "processDefinitionId": "financialReport:1",
    "businessKey": "55",
    "startTime": "2010-10-13T14:54:26.750+02:00",
    "startActivityId": "startFinancialAnalysis",
    "startUserId": "kermit",
    "completed": false,
    "tasks": [
      {
        "taskId": "3",
        "taskName": "Analyze report",
        "owner": null,
        "assignee": "Kermit",
        "startTime": "2010-10-13T14:53:26.750+02:00",
        "completed": false
      }
    ],
    "activities": [
      {
        "activityId": "4",
        "activityName": "Get report",
        "activityType": "ServiceTask",
        "startTime": "2010-10-13T14:53:25.750+02:00",
        "completed": true,
        "startTime": "2010-10-13T14:53:25.950+02:00",
        "duration": 200
      }
    ],
    "variables": [
      {
        "variableName": "reportName",
        "variableValue": "classified.pdf",
      }
    ]
    "historyVariables": [
      {
        "variableName": "reportName",
        "variableValue": "classified.pdf",
        "variableType": "String",
        "revision": 1,
        "time": "2010-10-13T14:53:26.750+02:00"
      }
    ]
    
  }</pre><p>
              </p></li></ul></div></div><div class="section" title="Get Process Instance Diagram"><div class="titlepage"><div><div><h3 class="title"><a name="N15F8C"></a>Get Process Instance Diagram</h3></div></div></div><p>
            Returns a PNG diagram of process with highlighted active executions. Returns 404 if process definition does not contain DI information.
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  <span class="bold"><strong>Request:</strong></span>
                  <code class="literal">GET /process-instance/{processInstanceId}/diagram</code>
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>API:</strong></span>
                  <code class="literal">ProcessDiagramGenerator.generateDiagram(pde, "png", getRuntimeService().getActiveActivityIds(processInstanceId));</code>
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>Response:</strong></span>
                  </p><pre class="prettyprint">Png diagram of process with highlighted active executions.</pre><p>
                </p></li></ul></div></div><div class="section" title="Get open tasks for a process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N15FB0"></a>Get open tasks for a process instance</h3></div></div></div><p>
            Returns a list of open tasks for a running process instance
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  <span class="bold"><strong>Request:</strong></span>
                  <code class="literal">GET /process-instance/{processInstanceId}/tasks</code>
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>API:</strong></span>
                  <code class="literal">taskService.createTaskQuery().processInstanceId(processInstanceId);</code>
                </p></li><li class="listitem"><p>
              <span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Signal an activity (receive task) for a specific process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N15FD4"></a>Signal an activity (receive task) for a specific process instance</h3></div></div></div><p>
            Signals an activity execution (receive task).
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  <span class="bold"><strong>Request:</strong></span>
                  <code class="literal">POST /process-instance/{processInstanceId}/signal</code>
                  </p><pre class="prettyprint">
{
  "activityId":"receiveTask",
  "variable1":"value",
  "variable2":"value"
}</pre><p>
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>API:</strong></span>
                  <code class="literal">runtimeService.signal(execution.getId(), variables);</code>
                </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Trigger a signal for a specific process instance"><div class="titlepage"><div><div><h3 class="title"><a name="N15FFB"></a>Trigger a signal for a specific process instance</h3></div></div></div><p>
            Sends a signal to a specific process instance, causing any subscribing signal event to fire. Additional variables may be passed in the body. If you don't want to set any variables, you may leave the body empty.
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  <span class="bold"><strong>Request:</strong></span>
                  <code class="literal">POST /process-instance/{processInstanceId}/event/{signalName}</code>
                  </p><pre class="prettyprint">
{
  "variable1":"value",
  "variable2":"value"
}</pre><p>
                </p></li><li class="listitem"><p>
                  <span class="bold"><strong>API:</strong></span>
                  <code class="literal">runtimeService.signalEventReceived(signalName, execution.getId()[, variables]);</code>
                </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div></div><div class="section" title="Tasks"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N16023"></a>Tasks</h2></div></div></div><div class="section" title="Get Task Summary"><div class="titlepage"><div><div><h3 class="title"><a name="N16026"></a>Get Task Summary</h3></div></div></div><p>
          Returns a task summary for a specific user: The number of tasks assigned the user, how many unassigned tasks
          that the user may claim and how many unassigned tasks there are per group that the user is a member of.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /tasks-summary?user={userId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().xxx().count()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "assigned": {
    "total": 0
  },
  "unassigned": {
    "total": 1,
    "groups":
    {
      "accountancy": 1,
      "sales": 0,
      "engineering": 0,
      "management": 0
    }
  }
}</pre><p>
            </p></li></ul></div></div><div class="section" title="List Tasks"><div class="titlepage"><div><div><h3 class="title"><a name="N1604A"></a>List Tasks</h3></div></div></div><p>
          Returns a paginated list of tasks that can be sorted by: "id", "name", "description", "priority", "assignee",
          "executionId" or "processInstanceId". The list must be based on a user of a specific role: assignee
          (lists the tasks assigned to the user) or candidate (lists the tasks that the user may claim) or a candidate
          group (lists tasks that the members of the group may claim). If the task has a form it is given in the
          "formResourceKey" attribute. The form for a task can be retrieved from the GET Task Form REST API call.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /tasks?[assignee={userId}|candidate={userId}|candidate-group={groupId}]&amp;start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Example:</strong></span>
              </p><pre class="prettyprint">curl --basic --user kermit:kermit http://localhost:8080/activiti-rest/service/tasks?assignee=kermit</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().xxx().listPage()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Task"><div class="titlepage"><div><div><h3 class="title"><a name="N16078"></a>Get Task</h3></div></div></div><p>
          Returns details about the task with the task id.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /task/{taskId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().taskId(taskId).singleResult()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125",
      "subTaskList": [
        {
          "id": "129",
          "name": "Analyze request",
          "description": "Analyze request",
          "delegationState": "pending",
          "dueDate": "2010-10-13T14:54:26.750+02:00",
          "priority": 50,
          "assignee": null,
          "executionId": "118",
          "owner": "Kermit",
          "parentTaskId": "127"
        }
      ],
      "identityLinkList" : [
        {
          "type": "candidate",
          "userId": "Fozzie",
          "groupId": null
        }
      ],
      "attachmentList" : [
        {
          "id": "130",
          "name": "vacation_request.xls",
          "description": "Vacation request",
          "type": "application/pdf",
          "url": null
        }
      ]
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Task Form"><div class="titlepage"><div><div><h3 class="title"><a name="N1609C"></a>Get Task Form</h3></div></div></div><p>
          Returns a task's form.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /task/{taskId}/form</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().getRenderedTaskForm(taskId)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">&lt;user-defined-response&gt;</pre><p>
            </p></li></ul></div></div><div class="section" title="Perform Task Operation"><div class="titlepage"><div><div><h3 class="title"><a name="N160C0"></a>Perform Task Operation</h3></div></div></div><p>
          Performs an operation (claim, unclaim, assign or complete) on a task.
          For the "complete" operation additional variables (from a form) may be passed in the body.
          To read more about additional variables from forms, visit the Start Process Instance section
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">PUT /task/{taskId}/[claim|unclaim|complete|assign]</code>
              Claim and unclaim don't need a JSON body, but for complete you can provide a number of variables and for assign a userId field is required.
              An example body for the complete operation:
              </p><pre class="prettyprint">
{
      "variableName1": "variableValue1",
      "variableName2": "variableValue2"
}</pre><p>
              An example body for the assign operation:
              </p><pre class="prettyprint">
{
      "userId": "newAssignee"
}</pre><p>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().xxx(taskId ...)</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="List Form Properties"><div class="titlepage"><div><div><h3 class="title"><a name="N160E8"></a>List Form Properties</h3></div></div></div><p>
          Returns a list of properties of a form of a running task, which is defined by the process.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /form/{taskId}/properties</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getFormService().getTaskFormData(taskId).getFormProperties()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "userName",
      "name": "User",
      "value": "foobar",
      "type": "string",
      "required": "true",
      "readable": "true",
      "writable": "true"
    }
]
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Add attachment to a task"><div class="titlepage"><div><div><h3 class="title"><a name="N1610C"></a>Add attachment to a task</h3></div></div></div><p>
          Add an attachment to a task instance
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">PUT /task/{taskId}/attachment</code>
              </p><pre class="prettyprint">{}</pre><p>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createAttachment(...)</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
        {
          "id": "130",
          "name": "vacation_request.xls",
          "description": "Vacation request",
          "type": "application/pdf",
          "url": null
        }</pre><p>
            </p></li></ul></div></div><div class="section" title="Get task attachment"><div class="titlepage"><div><div><h3 class="title"><a name="N16131"></a>Get task attachment</h3></div></div></div><p>
          Returns the task attachment
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>Request:</strong></span>
                <code class="literal">GET /attachment/{attachmentId}</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>API:</strong></span>
                <code class="literal">taskService.getAttachment(attachmentId);</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>Response:</strong></span>
                </p><pre class="prettyprint">The attachment.</pre><p>
              </p></li></ul></div></div><div class="section" title="Add url to a task"><div class="titlepage"><div><div><h3 class="title"><a name="N16155"></a>Add url to a task</h3></div></div></div><p>
          Add an url to a task instance
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">PUT /task/{taskId}/url</code>
              </p><pre class="prettyprint">{}</pre><p>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createAttachment(...)</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
        {
          "id": "130",
          "name": "google.com",
          "description": "Good search sitet",
          "type": null,
          "url": "http://www.google.com"
        }</pre><p>
            </p></li></ul></div></div></div><div class="section" title="Identity"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1617B"></a>Identity</h2></div></div></div><div class="section" title="Login"><div class="titlepage"><div><div><h3 class="title"><a name="N1617E"></a>Login</h3></div></div></div><p>
          Authenticates a user. If user and password doesn't match a response with status 403 is returned.
          If authentication is successful, a response with status 200 is returned.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">POST /login</code>
              </p><pre class="prettyprint">
{
  "userId": "kermit",
  "password": "kermit"
}</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().checkPassword(userId, password)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get User"><div class="titlepage"><div><div><h3 class="title"><a name="N161A5"></a>Get User</h3></div></div></div><p>
          Returns details about a user.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /user/{userId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userId(userId).singleResult();</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "id": "kermit",
  "firstName": "Kermit",
  "lastName": "the Frog",
  "email": "kermit@server.com"
}</pre><p>
            </p></li></ul></div></div><div class="section" title="List User's Groups"><div class="titlepage"><div><div><h3 class="title"><a name="N161C9"></a>List User's Groups</h3></div></div></div><p>
          Returns a paginated list groups belonging to a user that can be sort by "id", "name" or "type".
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /user/{userId}/groups?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().xxx(userId)</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  data: [
    {
      "id": "admin",
      "name": "System administrator",
      "type": "security-role"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Search users"><div class="titlepage"><div><div><h3 class="title"><a name="N161EB"></a>Search users</h3></div></div></div><p>
          Returns a list users from whom the first or last name corresponds to the search text.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /users?searchText=ker</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userFirstNameLike(searchText).list()</code>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userLastNameLike(searchText).list()</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  data: [
    {
      "id": "kermit",
      "firstName": "Kermit",
      "lastName": "the Frog",
      "email": "kermit@server.com"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Create user"><div class="titlepage"><div><div><h3 class="title"><a name="N16210"></a>Create user</h3></div></div></div><p>
          Creates a new user.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">PUT /user</code>
              </p><pre class="prettyprint">
{
  "id": "kermit",
  "firstName": "Kermit",
  "lastName": "the Frog",
  "email": "kermit@server.com",
  "password": "kermit"
}</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().newUser();</code>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().saveUser();</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Add user to groups"><div class="titlepage"><div><div><h3 class="title"><a name="N1623A"></a>Add user to groups</h3></div></div></div><p>
          Adds user to the groups posted to this REST service.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">POST /user/{userId}/groups</code>
              </p><pre class="prettyprint">
["management", "sales"]
</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">identityService().createMembership(userId, groupId);</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Remove user from group"><div class="titlepage"><div><div><h3 class="title"><a name="N16261"></a>Remove user from group</h3></div></div></div><p>
          Removes user from a group.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">DELETE /user/{userId}/groups/{groupId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">identityService().deleteMembership(userId, groupId);</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get user picture"><div class="titlepage"><div><div><h3 class="title"><a name="N16285"></a>Get user picture</h3></div></div></div><p>
          Returns the task attachment
          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="bold"><strong>Request:</strong></span>
                <code class="literal">GET /user/{userId}/picture</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>API:</strong></span>
                <code class="literal">identityService.getUserPicture(userId);</code>
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>Response:</strong></span>
                </p><pre class="prettyprint">The user picture.</pre><p>
              </p></li></ul></div></div><div class="section" title="Get Group"><div class="titlepage"><div><div><h3 class="title"><a name="N162A9"></a>Get Group</h3></div></div></div><p>
          Returns details about a group.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /group/{groupId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createGroupQuery().groupId(groupId).singleResult();</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "id": "admin",
  "name": "System administrator",
  "type": "security-role"
}</pre><p>
            </p></li></ul></div></div><div class="section" title="List Group Users"><div class="titlepage"><div><div><h3 class="title"><a name="N162CD"></a>List Group Users</h3></div></div></div><p>
          Returns details about a group's users that can be sorted by "id", "firstName", "lastName" or "email".
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /group/{groupId}/users</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().memberOfGroup(groupId).list()</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  data: [
    {
      "id": "kermit",
      "firstName": "Kermit",
      "lastName": "the Frog",
      "email": "kermit@server.com"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Search groups"><div class="titlepage"><div><div><h3 class="title"><a name="N162EF"></a>Search groups</h3></div></div></div><p>
          Returns a list of groups from whom the id or name corresponds to the search text.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /groups?searchText=ad</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">identityService.createGroupQuery().list()</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  data: [
    {
      "id": "admin",
      "name": "System administrator",
      "type": "security-role"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Create group"><div class="titlepage"><div><div><h3 class="title"><a name="N16311"></a>Create group</h3></div></div></div><p>
          Creates a new group.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">PUT /group</code>
              </p><pre class="prettyprint">
{
  "id": "admin",
  "name": "System administrator",
  "type": "security-role"
}</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">identityService.newGroup();</code>
              <code class="literal">identityService.saveGroup();</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Add users to a group"><div class="titlepage"><div><div><h3 class="title"><a name="N1633B"></a>Add users to a group</h3></div></div></div><p>
          Adds users to a group.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">POST /group/{groupId}/users</code>
              </p><pre class="prettyprint">
["kermit", "fozzie"]
</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">identityService().createMembership(userId, groupId);</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Remove user from group"><div class="titlepage"><div><div><h3 class="title"><a name="N16362"></a>Remove user from group</h3></div></div></div><p>
          Removes user from a group.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">DELETE /group/{groupId}/users/{userId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">identityService().deleteMembership(userId, groupId);</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div></div><div class="section" title="Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N16387"></a>Management</h2></div></div></div><div class="section" title="List Jobs"><div class="titlepage"><div><div><h3 class="title"><a name="N1638A"></a>List Jobs</h3></div></div></div><p>
          Returns a paginated list of jobs that can be sorted by "id", "process-instance-id", "execution-id",
          "due-date", "retries" or some custom arbitrary property id. The list can also be filtered by
          process instance id, due date or if the jobs have retries, are executable or only have messages or timers.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /management/jobs?process-instance={processInstanceId?}&amp;with-retries-left={withRetriesLeft=false}&amp;executable={axecutable=false}&amp;only-timers={onlyTimers=false}&amp;only-messages={onlyMessage=false}&amp;duedate-lt={iso8601Date}&amp;duedate-ltoe={iso8601Date}&amp;duedate-ht={iso8601Date}&amp;duedate-htoe={iso8601Date}&amp;start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).createJobQuery().xxx().listPage()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "id": "212",
      "executionId": "211",
      "retries": -1,
      "processInstanceId": "210",
      "dueDate": null,
      "assignee": null,
      "exceptionMessage": "Can\'t find scripting engine for \'groovy\'"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Job"><div class="titlepage"><div><div><h3 class="title"><a name="N163AE"></a>Get Job</h3></div></div></div><p>
          Returns details about a job.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /management/job({jobId}</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).createJobQuery().id(jobId).singleResult()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "id": "212",
  "executionId": "211",
  "retries": -1,
  "processInstanceId": "210",
  "dueDate": null,
  "assignee": null,
  "exceptionMessage": "Can\'t find scripting engine for \'groovy\'",
  "stacktrace": "org.activiti.engine.ActivitiException: Can't find scripting engine for 'groovy'\n\tat ..."
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Execute Job"><div class="titlepage"><div><div><h3 class="title"><a name="N163D2"></a>Execute Job</h3></div></div></div><p>
          Executes a job.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">PUT /management/job/{jobId}/execute</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().executeJob(jobId)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Execute Jobs"><div class="titlepage"><div><div><h3 class="title"><a name="N163F6"></a>Execute Jobs</h3></div></div></div><p>
          Executes multiple job.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">POST /management/jobs/execute</code>
              </p><pre class="prettyprint">
{
  "jobIds": [ "212" ]
}</pre><p>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().executeJob(jobId)</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "success": true
}</pre><p>
            </p></li></ul></div></div><div class="section" title="List Database Tables"><div class="titlepage"><div><div><h3 class="title"><a name="N1641D"></a>List Database Tables</h3></div></div></div><p>
          Returns meta data information about all database tables in the engine.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /management/tables</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().getTableCount()</code>
            </p></li><li class="listitem"><p>
              <span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "tableName": "ACT_GE_PROPERTY",
      "noOfResults": 2
    }
  ]
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Table Meta Data"><div class="titlepage"><div><div><h3 class="title"><a name="N16441"></a>Get Table Meta Data</h3></div></div></div><p>
          Returns meta data about a database table.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Request:</strong></span>
              <code class="literal">GET /management/table/{tableName}</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().getTableMetaData(tableName))</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Response:</strong></span>
              </p><pre class="prettyprint">
{
  "tableName": "ACT_GE_PROPERTY",
  "columnNames": ["REV_","NAME_","VALUE_"],
  "columnNames": ["class java.lang.Integer", "class java.lang.String", "class java.lang.String"]
}</pre><p>
            </p></li></ul></div></div><div class="section" title="Get Table Data"><div class="titlepage"><div><div><h3 class="title"><a name="N16463"></a>Get Table Data</h3></div></div></div><p>
          Returns a paginated list of database table data.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              <span class="bold"><strong>Paginated Request:</strong></span>
              <code class="literal">GET /management/table/{tableName}/data</code>
            </p></li><li class="listitem"><p><span class="bold"><strong>API:</strong></span>
              <code class="literal">ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().createTablePageQuery().tableName(tableName).start(start).size(size).orderXXX(sort).singleResult();
              </code>
            </p></li><li class="listitem"><p><span class="bold"><strong>Paginated Response:</strong></span>
              </p><pre class="prettyprint">
{
  "data": [
    {
      "NAME_": "schema.version",
      "REV_": "1",
      "VALUE_": "5.10"
    },
    {
      "NAME_": "next.dbid",
      "REV_": "4",
      "VALUE_": "310"
    }
  ],
  "total": 2,
  "start": 0,
  "sort": "NAME_",
  "order": "asc",
  "size": 2
}</pre><p>
            </p></li></ul></div></div></div></div><div class="chapter" title="Chapter&nbsp;16.&nbsp;CDI integration"><div class="titlepage"><div><div><h2 class="title"><a name="cdiintegration"></a>Chapter&nbsp;16.&nbsp;CDI integration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N164A3">Setting up activiti-cdi</a></span></dt><dd><dl><dt><span class="section"><a href="#N164A8">Looking up a Process Engine</a></span></dt><dt><span class="section"><a href="#N164CC">Configuring the Process Engine</a></span></dt><dt><span class="section"><a href="#N164EA">Deploying Processes</a></span></dt></dl></dd><dt><span class="section"><a href="#N164F8">Contextual Process Execution with CDI</a></span></dt><dd><dl><dt><span class="section"><a href="#N164FD">Associating a Conversation with a Process Instance </a></span></dt><dt><span class="section"><a href="#N16528">Declaratively controlling the Process</a></span></dt><dt><span class="section"><a href="#N1653F">Referencing Beans from the Process</a></span></dt><dt><span class="section"><a href="#N16553">Working with @BusinessProcessScoped beans</a></span></dt><dt><span class="section"><a href="#N1655D">Injecting Process Variables</a></span></dt><dt><span class="section"><a href="#N1657F">Receiving Process Events</a></span></dt><dt><span class="section"><a href="#N165B7">Additional Features</a></span></dt></dl></dd><dt><span class="section"><a href="#N165CF">Known Limitations</a></span></dt></dl></div><p>The activiti-cdi modules leverages both the configurability of activiti and the extensibility of cdi. 
  The most prominent features of activiti-cdi are:
   </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Support for @BusinessProcessScoped beans (Cdi beans the lifecycle of which is bound to a process instance),</p></li><li class="listitem"><p>A custom El-Resolver for resolving Cdi beans (including EJBs) from the process,</p></li><li class="listitem"><p>Declarative control over a process instance using annotations,</p></li><li class="listitem"><p>Activiti is hooked-up to the cdi event bus,</p></li><li class="listitem"><p>Works with both Java EE and Java SE, works with Spring,</p></li><li class="listitem"><p>Support for unit testing.</p></li></ul></div><p>   
  </p>
  
  In order to include activiti-cdi in a maven project, we add the following maven dependency:
<pre class="prettyprint">
&lt;dependency&gt;
	&lt;groupId&gt;org.activiti&lt;/groupId&gt;
	&lt;artifactId&gt;activiti-cdi&lt;/artifactId&gt;
	&lt;version&gt;5.x&lt;/version&gt;
&lt;/dependency&gt;
</pre>
	Replace 'x' with your activiti-version (&gt;=5.6). This will pull-in activiti-engine and spring.   
  <div class="section" title="Setting up activiti-cdi"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N164A3"></a>Setting up activiti-cdi</h2></div></div></div><p>
    Activiti cdi can be setup in different environments. In this section we briefly walk through the configuration options.    
    </p><div class="section" title="Looking up a Process Engine"><div class="titlepage"><div><div><h3 class="title"><a name="N164A8"></a>Looking up a Process Engine</h3></div></div></div><p> 
    	The cdi extension needs to get access to a ProcessEngine. To achieve this, an implementation of the interface 
    	<code class="literal">org.activiti.cdi.spi.ProcessEngineLookup</code> is looked up at runtime. The cdi module ships with 
    	a default implementation named <code class="literal">org.activiti.cdi.impl.LocalProcessEngineLookup</code>, which uses 
    	the <code class="literal">ProcessEngines</code>-Utility class for looking up the ProcessEngine. In the default configuration
		<code class="literal">ProcessEngines#NAME_DEFAULT</code> is used to lookup the ProcessEngine. This class might be subclassed to
		set a custom name. NOTE: needs an <code class="literal">activiti.cfg.xml</code> configuration on the classpath.		 
    	</p><p>
    	Activiti cdi uses a java.util.ServiceLoader SPI for resolving an instance of <code class="literal">org.activiti.cdi.spi.ProcessEngineLookup</code>.
    	In order to provide a custom implementation of the interface, we need to add a plain text file named 
    	<code class="literal">META-INF/services/org.activiti.cdi.spi.ProcessEngineLookup</code> to our deployment, in which we specify the fully 
    	qualified classname of the implementation. 
    	</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>If you do not provide a custom <code class="literal">org.activiti.cdi.spi.ProcessEngineLookup</code> implementation, activiti
    	will use the default <code class="literal">LocalProcessEngineLookup</code> implementation. In that case, all you need to do is providing a
    	activiti.cfg.xml file on the classpath (see next section).
    	</div></div><div class="section" title="Configuring the Process Engine"><div class="titlepage"><div><div><h3 class="title"><a name="N164CC"></a>Configuring the Process Engine</h3></div></div></div><p>Configuration depends on the selected ProcessEngineLookup-Strategy (cf. previous section).
     	Here, we focus on the configuration options available in combination with the LocalProcessEngineLookup, which requires us to provide 
     	a Spring activiti.cfg.xml file on the classpath.</p><p>Activiti offers different ProcessEngineConfiguration implementations mostly dependent on the underlying transaction management strategy. The
     	activiti-cdi module is not concerned with transactions, which means that potentially any transaction management strategy 
     	can be used (even the Spring transaction abstraction). As a convenience, the cdi-module provides two custom ProcessEngineConfiguration
     	implementations: 
     	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">org.activiti.cdi.CdiJtaProcessEngineConfiguration</code>: a subclass of the activiti JtaProcessEngineConfiguration, 
     		can be used if JTA-managed transactions should be used for activiti</li><li class="listitem"><code class="literal">org.activiti.cdi.CdiStandaloneProcessEngineConfiguration</code>: a subclass of the activiti StandaloneProcessEngineConfiguration, 
     		can be used if plain JDBC transactions should be used for activiti</li></ul></div><p>     	
     	The following is an example activiti.cfg.xml file for JBoss 7:
     	</p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

	&lt;!-- lookup the JTA-Transaction manager --&gt;
	&lt;bean id="transactionManager" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
		&lt;property name="jndiName" value="java:jboss/TransactionManager"&gt;&lt;/property&gt;
		&lt;property name="resourceRef" value="true" /&gt;
	&lt;/bean&gt;

	&lt;!-- process engine configuration --&gt;
	&lt;bean id="processEngineConfiguration"
		class="org.activiti.cdi.CdiJtaProcessEngineConfiguration"&gt;
		&lt;!-- lookup the default Jboss datasource --&gt;
		&lt;property name="dataSourceJndiName" value="java:jboss/datasources/ExampleDS" /&gt;
		&lt;property name="databaseType" value="h2" /&gt;
		&lt;property name="transactionManager" ref="transactionManager" /&gt;
		&lt;!-- using externally managed transactions --&gt;
		&lt;property name="transactionsExternallyManaged" value="true" /&gt;
		&lt;property name="databaseSchemaUpdate" value="true" /&gt;
	&lt;/bean&gt;
&lt;/beans&gt;
     	</pre><p>
     		And this is how it would look like for Glassfish 3.1.1 (assuming a datasource named jdbc/activiti is properly configured):
     	</p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

	&lt;!-- lookup the JTA-Transaction manager --&gt;
	&lt;bean id="transactionManager" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
		&lt;property name="jndiName" value="java:appserver/TransactionManager"&gt;&lt;/property&gt;
		&lt;property name="resourceRef" value="true" /&gt;
	&lt;/bean&gt;

	&lt;!-- process engine configuration --&gt;
	&lt;bean id="processEngineConfiguration"
		class="org.activiti.cdi.CdiJtaProcessEngineConfiguration"&gt;
		&lt;property name="dataSourceJndiName" value="jdbc/activiti" /&gt;
		&lt;property name="transactionManager" ref="transactionManager" /&gt;
		&lt;!-- using externally managed transactions --&gt;
		&lt;property name="transactionsExternallyManaged" value="true" /&gt;
		&lt;property name="databaseSchemaUpdate" value="true" /&gt;
	&lt;/bean&gt;
&lt;/beans&gt;
     	</pre><p>
      Note that the above configuration requires the "spring-context" module:
</p><pre class="prettyprint">
&lt;dependency&gt;
	&lt;groupId&gt;org.springframework&lt;/groupId&gt;
	&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
	&lt;version&gt;3.0.3.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</pre><p>
      The configuration in a Java SE environment looks exactly 
     	like the examples provided in section <a class="link" href="#configuration" title="Creating a ProcessEngine">Creating a ProcessEngine</a>, 
     	substitute "CdiStandaloneProcessEngineConfiguration" for "StandaloneProcessEngineConfiguration".     	 
     	</p></div><div class="section" title="Deploying Processes"><div class="titlepage"><div><div><h3 class="title"><a name="N164EA"></a>Deploying Processes</h3></div></div></div><p>Processes can be deployed using standard activiti-api (<code class="literal">RepositoryService</code>). In addition, activiti-cdi offers the possibility to 
     auto-deploy processes listed in a file named <code class="literal">processes.xml</code> located top-level in the classpath. This is an example 
     processes.xml file:
     </p><pre class="prettyprint">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;!-- list the processes to be deployed --&gt;
&lt;processes&gt;
	&lt;process resource="diagrams/myProcess.bpmn20.xml" /&gt;
	&lt;process resource="diagrams/myOtherProcess.bpmn20.xml" /&gt;  
&lt;/processes&gt;
     </pre><p>     
     </p></div></div><div class="section" title="Contextual Process Execution with CDI"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N164F8"></a>Contextual Process Execution with CDI</h2></div></div></div><p>
	In this section we briefly look at the contextual process execution model used by the activiti cdi extension.
	A BPMN business process is typically a long-running interaction, comprised of both user and system tasks. At runtime,
	a process is split-up into a set of individual units of work, performed by users and/or 
	application logic. In activiti-cdi, a process instance can be associated with a cdi scope, the association representing a 
	unit of work. This is particularly useful, if a unit of work is complex, for instance if the implementation of 
    a UserTask is a complex sequence of different forms and "non-process-scoped" state needs to be kept during this interaction.    
		
	In the default configuration, process instances are associated with the "broadest" active scope, starting with 
	the conversation and falling back to the request if the conversation context is not active.	 
	</p><div class="section" title="Associating a Conversation with a Process Instance"><div class="titlepage"><div><div><h3 class="title"><a name="N164FD"></a>Associating a Conversation with a Process Instance </h3></div></div></div><p>		
		When resolving @BusinessProcessScoped beans, or injecting process variables, we rely on an existing association 
		between an active cdi scope and a process instance. Activiti-cdi provides the <code class="literal">org.activiti.cdi.BusinessProcess</code> bean 
		for controlling the association, most prominently:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <code class="literal">startProcessBy*(...)</code>-methods, mirroring the respective methods exposed by the activiti <code class="literal">RuntimeService</code>
			allowing to start and subsequently associating a business process,</li><li class="listitem"><code class="literal">resumeProcessById(String processInstanceId)</code>, allowing to associate the process instance with the provided id,</li><li class="listitem"><code class="literal">resumeTaskById(String taskId)</code>, allowing to associate the task with the provided id (and by extension, the corresponding 
			process instance),</li></ul></div><p>		  
		Once a unit of work (for example a UserTask) is completed, the <code class="literal">completeTask()</code> method can be called to disassociate the 
		conversation/request from the process instance. This signals activiti that the current task is completed and makes 
		the process instance proceed. </p><p>Note that the <code class="literal">BusinessProcess</code>-bean is a <code class="literal">@Named</code> bean, which means that the exposed methods can 
		be invoked using expression language, for example from a JSF page. The following JSF2 snippet begins a new conversation and associates it 
		with a user task instance, the id of which is passed as a request parameter (e.g. <code class="literal">pageName.jsf?taskId=XX</code>):
</p><pre class="prettyprint">
&lt;f:metadata&gt;
&lt;f:viewParam name="taskId" /&gt;
&lt;f:event type="preRenderView" listener="#{businessProcess.startTask(taskId, true)}" /&gt;
&lt;/f:metadata&gt;
</pre><p>		
		</p></div><div class="section" title="Declaratively controlling the Process"><div class="titlepage"><div><div><h3 class="title"><a name="N16528"></a>Declaratively controlling the Process</h3></div></div></div><p>
		Activiti-cdi allows declaratively starting process instances and completing tasks using annotations. The 
		<code class="literal">@org.activiti.cdi.annotation.StartProcess</code> annotation allows to start a process instance 
		either by "key" or by "name". 
		Note that the process instance is started <span class="emphasis"><em>after</em></span> the annotated method returns. Example:
		</p><pre class="prettyprint">
@StartProcess("authorizeBusinessTripRequest")
public String submitRequest(BusinessTripRequest request) {
	// do some work
	return "success";
}		
		</pre><p>		
		Depending on the configuration of activiti, the code of the annotated method and the starting of the 
		process instance will be combined in the same transaction.
		The <code class="literal">@org.activiti.cdi.annotation.CompleteTask</code>-annotation works in the same way:
</p><pre class="prettyprint">
@CompleteTask(endConversation=false)
public String authorizeBusinessTrip() {
	// do some work
	return "success";
}
</pre><p>
		The <code class="literal">@CompleteTask</code> annotation offers the possibility to end the current conversation. The 
		default behavior is to end the conversation after the call to activiti returns. Ending the conversation can be disabled, 
		as shown in the example above.  	
		</p></div><div class="section" title="Referencing Beans from the Process"><div class="titlepage"><div><div><h3 class="title"><a name="N1653F"></a>Referencing Beans from the Process</h3></div></div></div><p>
	  	Activiti-cdi exposes CDI beans to activiti El, using a custom resolver. This makes it possible to reference beans from the process:
</p><pre class="prettyprint">
&lt;userTask id="authorizeBusinessTrip" name="Authorize Business Trip"			 
			activiti:assignee="#{authorizingManager.account.username}" /&gt;
</pre><p>
		Where "authorizingManager" could be a bean provided by a producer method:
</p><pre class="prettyprint">
@Inject	@ProcessVariable Object businessTripRequesterUsername;

@Produces
@Named
public Employee authorizingManager() {
	TypedQuery&lt;Employee&gt; query = entityManager.createQuery("SELECT e FROM Employee e WHERE e.account.username='"
		+ businessTripRequesterUsername + "'", Employee.class);
	Employee employee = query.getSingleResult();
	return employee.getManager();
}
</pre><p>
		We can use the same feature to call a business method of an EJB in a service task, using the <code class="literal">activiti:expression="myEjb.method()"</code>-extension.
		Note that this requires a <code class="literal">@Named</code>-annotation on the <code class="literal">MyEjb</code>-class.
	  	</p></div><div class="section" title="Working with @BusinessProcessScoped beans"><div class="titlepage"><div><div><h3 class="title"><a name="N16553"></a>Working with @BusinessProcessScoped beans</h3></div></div></div>
	  	Using activiti-cdi, the lifecycle of a bean can be bound to a process instance. To this extend, a custom context implementation is provided, namely the 
	  	BusinessProcessContext. Instances of BusinessProcessScoped beans are stored as process variables in the current process instance.
	  	<span class="emphasis"><em>BusinessProcessScoped beans need to be PassivationCapable (for example Serializable).</em></span>
	  	The following is an example of a process scoped bean:
<pre class="prettyprint">
@Named
@BusinessProcessScoped
public class BusinessTripRequest implements Serializable {
	private static final long serialVersionUID = 1L;
	private String startDate;
	private String endDate;
	// ...
}
</pre>
		Sometimes, we want to work with process scoped beans, in the absence of an association with a process instance, for example before starting a process. 
	  	If no process instance is currently active, instances of BusinessProcessScoped beans are temporarily stored in a local scope (I.e. the Conversation or 
	  	the Request, depending on the context. If this scope is later associated with a business process instance, the bean instances are flushed to 
	  	the process instance.  	
	</div><div class="section" title="Injecting Process Variables"><div class="titlepage"><div><div><h3 class="title"><a name="N1655D"></a>Injecting Process Variables</h3></div></div></div><p>
	  	Process variables are available for injection. Activiti-CDI supports 
	  	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">type-safe injection of <code class="literal">@BusinessProcessScoped</code> beans using <code class="literal">@Inject [additional qualifiers] Type fieldName</code></li><li class="listitem">unsafe injection of other process variables using the <code class="literal">@ProcessVariable(name?)</code> qualifier: 
<pre class="prettyprint">
@Inject @ProcessVariable Object accountNumber;
@Inject @ProcessVariable("accountNumber") Object account
</pre></li></ul></div><p>
	  	In order to reference process variables using EL, we have similar options:
	  	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">@Named @BusinessProcessScoped</code> beans can be referenced directly,</li><li class="listitem">other process variables can be referenced using the <code class="literal">ProcessVariables</code>-bean:
<pre class="prettyprint">
#{processVariables['accountNumber']}
</pre></li></ul></div><p> 	  	
	  	</p></div><div class="section" title="Receiving Process Events"><div class="titlepage"><div><div><h3 class="title"><a name="N1657F"></a>Receiving Process Events</h3></div></div></div><a class="link" href="#experimental" title="Experimental features">
			<span class="bold"><strong>[EXPERIMENTAL]</strong></span>
		</a><p>
	  	Activiti can be hooked-up to the CDI event-bus. This allows us to be notified of process events using standard CDI event mechanisms. 
	  	In order to enable CDI event support for activiti, enable the corresponding parse listener in the configuration:
</p><pre class="prettyprint">
&lt;property name="postBpmnParseHandlers"&gt;
	&lt;list&gt;
		&lt;bean class="org.activiti.cdi.impl.event.CdiEventSupportBpmnParseHandler" /&gt;
	&lt;/list&gt;
&lt;/property&gt;
</pre><p>
Now activiti is configured for publishing events using the CDI event bus. The following gives an overview of how process events can be received in CDI beans.
In CDI, we can declaratively specify event observers using the <code class="literal">@Observes</code>-annotation. Event notification is type-safe. The type of 
process events is <code class="literal">org.activiti.cdi.BusinessProcessEvent</code>.
The following is an example of a simple event observer method:
</p><pre class="prettyprint">
public void onProcessEvent(@Observes BusinessProcessEvent businessProcessEvent) {
	// handle event
}
</pre><p>
This observer would be notified of all events. If we want to restrict the set of events the observer receives, we can add qualifier annotations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">@BusinessProcess</code>: restricts the set of events to a certain 
	  		process definition. Example: <code class="literal">@Observes @BusinessProcess("billingProcess") BusinessProcessEvent evt</code></li><li class="listitem"><code class="literal">@StartActivity</code>: restricts the set of events by a certain activity. For example: 
	  		<code class="literal">@Observes @StartActivity("shipGoods") BusinessProcessEvent evt</code> is invoke whenever an activity with the 
	  		id "shipGoods" is entered. 
	  		</li><li class="listitem"><code class="literal">@EndActivity</code>: restricts the set of events by a certain activity. For example: 
	  		<code class="literal">@Observes @EndActivity("shipGoods") BusinessProcessEvent evt</code> is invoke whenever an activity with the 
	  		id "shipGoods" is left. 
	  		</li><li class="listitem"><code class="literal">@TakeTransition</code>: restricts the set of events by a certain transition.
	  		</li></ul></div><p>
	  	The qualifiers named above can be combined freely. For example, in order to receive all events generated when 
	  	leaving the "shipGoods" activity in the "shipmentProcess", we could write the following observer method:
</p><pre class="prettyprint">
public void beforeShippingGoods(@Observes @BusinessProcess("shippingProcess") @EndActivity("shipGoods") BusinessProcessEvent evt) {
	// handle event
}	  	
	  	</pre><p>
	  	In the default configuration, event listeners are invoked synchronously and in the context of the same transaction.
	  	CDI transactional observers (only available in combination with JavaEE / EJB), allow to control 
	  	when the event is handed to the observer method. Using transactional observers, we can for example assure that an observer is only 
	  	notified if the transaction in which the event is fired succeeds: 
</p><pre class="prettyprint">
public void onShipmentSuceeded(@Observes(during=TransactionPhase.AFTER_SUCCESS) @BusinessProcess("shippingProcess") @EndActivity("shipGoods") BusinessProcessEvent evt) {
	// send email to customer.
}	  	
</pre><p>	  	
	  		  	
	  	</p></div><div class="section" title="Additional Features"><div class="titlepage"><div><div><h3 class="title"><a name="N165B7"></a>Additional Features</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The ProcessEngine as well as the services are available for injection: <code class="literal">@Inject ProcessEngine, RepositoryService, TaskService</code>, ...</li><li class="listitem">The current process instance and task can be injected: <code class="literal">@Inject ProcessInstance, Task</code>,</li><li class="listitem">The current business key can be injected:  <code class="literal">@Inject @BusinessKey String businessKey</code>,</li><li class="listitem">The current process instance id be injected:  <code class="literal">@Inject @ProcessInstanceId String pid</code>,</li></ul></div></div></div><div class="section" title="Known Limitations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N165CF"></a>Known Limitations</h2></div></div></div><p>
		Although activiti-cdi is implemented against the SPI and designed to be a "portable-extension" it is only tested using Weld.	  	 
	  	</p></div></div><div class="chapter" title="Chapter&nbsp;17.&nbsp;LDAP integration"><div class="titlepage"><div><div><h2 class="title"><a name="N165D4"></a>Chapter&nbsp;17.&nbsp;LDAP integration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#ldap_usage">Usage</a></span></dt><dt><span class="section"><a href="#ldap_usecases">Use cases</a></span></dt><dt><span class="section"><a href="#ldap_configuration">Configuration</a></span></dt><dt><span class="section"><a href="#ldap_properties">Properties</a></span></dt><dt><span class="section"><a href="#lda-explorer">Integrate LDAP in Explorer</a></span></dt></dl></div><p>
        Companies often already have a user and group store in the form of an LDAP system.
        Since version 5.13, Activiti offers an out-of-the-box solution for easily configuring 
        how Activiti should connect with an LDAP system.  
    </p><p>
       Before Activiti 5.13, it was already possible to integrate LDAP with Activiti.
       However, as of 5.13, the configuration has been simplified a lot. However, the 'old' way
       of configuring LDAP still works. More specifically, the simplified configuration is
       just a wrapper on top of the 'old' infrastructure.
    </p><div class="section" title="Usage"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ldap_usage"></a>Usage</h2></div></div></div><p>
            To add the LDAP integration code to your project, simply add the following
            dependency to your pom.xml:
            </p><pre class="prettyprint">
&lt;dependency&gt;
  &lt;groupId&gt;org.activiti&lt;/groupId&gt;
  &lt;artifactId&gt;activiti-ldap&lt;/artifactId&gt;
  &lt;version&gt;latest.version&lt;/version&gt;
&lt;/dependency&gt;            
            </pre><p> 
        </p></div><div class="section" title="Use cases"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ldap_usecases"></a>Use cases</h2></div></div></div><p>
            The LDAP integration has currently two main use cases:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        Allow for authentication through the IdentityService. This is eg. useful when using Activiti Explorer
                        and the login needs to go through LDAP.
                    </p></li><li class="listitem"><p>
                        Fetching the groups of a user. This is important when for example querying tasks
                        to see which tasks a certain user can see (ie. tasks with a candidate group).
                    </p></li></ul></div><p>
        </p></div><div class="section" title="Configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ldap_configuration"></a>Configuration</h2></div></div></div><p>
            Integrating the LDAP system with Activiti is done by injecting an instance
            of <code class="literal">org.activiti.ldap.LDAPConfigurator</code> in the <code class="literal">configurators</code>
            section of the process engine configuration. This class is highly extensible: methods
            can be easily overridden and many dependent beans are pluggable
            if the default implementation would not fit the use case.
        </p><p>
            This is an example configuration (note: of course, when
            creating the engine programmatically this is completely similar). Don't worry about all
            the properties for now, we'll look at them in detail in a next section.
            </p><pre class="prettyprint">
    &lt;bean id="processEngineConfiguration" class="...SomeProcessEngineConfigurationClass"&gt;
        ...
        &lt;property name="configurators"&gt;
          &lt;list&gt;
              &lt;bean class="org.activiti.ldap.LDAPConfigurator"&gt;
              
                &lt;!-- Server connection params --&gt;
                &lt;property name="server" value="ldap://localhost" /&gt;
                &lt;property name="port" value="33389" /&gt;
                &lt;property name="user" value="uid=admin, ou=users, o=activiti" /&gt;
                &lt;property name="password" value="pass" /&gt;
                
                &lt;!-- Query params --&gt;
                &lt;property name="baseDn" value="o=activiti" /&gt;
                &lt;property name="queryUserByUserId" value="(&amp;(objectClass=inetOrgPerson)(uid={0}))" /&gt;
                &lt;property name="queryUserByFullNameLike" value="(&amp;(objectClass=inetOrgPerson)(|({0}=*{1}*)({2}=*{3}*)))" /&gt;
                &lt;property name="queryGroupsForUser" value="(&amp;(objectClass=groupOfUniqueNames)(uniqueMember={0}))" /&gt;
                
                &lt;!-- Attribute config --&gt;
                &lt;property name="userIdAttribute" value="uid" /&gt;
                &lt;property name="userFirstNameAttribute" value="cn" /&gt;
                &lt;property name="userLastNameAttribute" value="sn" /&gt;
                
                &lt;property name="groupIdAttribute" value="cn" /&gt;
                &lt;property name="groupNameAttribute" value="cn" /&gt;
                
              &lt;/bean&gt;
          &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;         
            </pre><p>
        </p></div><div class="section" title="Properties"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ldap_properties"></a>Properties</h2></div></div></div><p>
            Following properties can be set on <code class="literal">org.activiti.ldap.LDAPConfigurator</code>:
            </p><div class="table"><a name="N1660C"></a><p class="title"><b>Table&nbsp;17.1.&nbsp;LDAP configuration properties</b></p><div class="table-contents"><table summary="LDAP configuration properties" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property name</th><th>Description</th><th>Type</th><th>Default value</th></tr></thead><tbody><tr><td>server</td><td>The server on which the LDAP system can be reached. For example 'ldap://localhost:33389'</td><td>String</td><td>&nbsp;</td></tr><tr><td>port</td><td>The port on which the LDAP system is running</td><td>int</td><td>&nbsp;</td></tr><tr><td>user</td><td>The user id that is used to connect to the LDAP system</td><td>String</td><td>&nbsp;</td></tr><tr><td>password</td><td>The password that is used to connect to the LDAP system</td><td>String</td><td>&nbsp;</td></tr><tr><td>initialContextFactory</td><td>The InitialContextFactory name used to connect to the LDAP system</td><td>String</td><td>com.sun.jndi.ldap.LdapCtxFactory</td></tr><tr><td>securityAuthentication</td><td>The value that is used for the 'java.naming.security.authentication' property used to connect to the LDAP system</td><td>String</td><td>simple</td></tr><tr><td>customConnectionParameters</td><td>Allows to set all LDAP connection parameters which do not have a dedicated setter. 
                            See for example http://docs.oracle.com/javase/tutorial/jndi/ldap/jndi.html for custom
                            properties. Such properties are for example to configure connection pooling, specific
                            security settings, etc. All the provided parameters will be provided when creating a 
                            connection to the LDAP system.</td><td>Map&lt;String, String&gt;</td><td>&nbsp;</td></tr><tr><td>baseDn</td><td>The base 'distinguished name' (DN) from which the searches for users and groups are started</td><td>String</td><td>&nbsp;</td></tr><tr><td>searchTimeLimit</td><td>The timeout that is used when doing a search in LDAP in milliseconds</td><td>long</td><td>one hour</td></tr><tr><td>queryUserByUserId</td><td>
                            The query that is executed when searching for a user by userId. 
                            For example: (&amp;(objectClass=inetOrgPerson)(uid={0}))
                            Here, all the objects in LDAP with the class 'inetOrgPerson'
                            and who have the matching 'uid' attribute value will be returned.
                            As shown in the example, the user id is injected by using
                            {0}. If setting the query alone is insufficient for your specific
                            LDAP setup, you can alternatively plug in a different
                            LDAPQueryBuilder, which allows for more customization than only the  query.
                            </td><td>string</td><td>&nbsp;</td></tr><tr><td>queryUserByFullNameLike</td><td>
                            The query that is executed when searching for a user by full name. 
                            For example: (&amp; (objectClass=inetOrgPerson) (|({0}=*{1}*)({2}=*{3}*)) )
                            Here, all the objects in LDAP with the class 'inetOrgPerson'
                            and who have the matching first name and last name values will be returned.
                            Note that {0} injects the firstNameAttribute (as defined above), {1} and {3} the search text
                            and {2} the lastNameAttribute. If setting the query alone is insufficient for your specific
                            LDAP setup, you can alternatively plug in a different
                            LDAPQueryBuilder, which allows for more customization than only the  query.
                            </td><td>string</td><td>&nbsp;</td></tr><tr><td>queryGroupsForUser</td><td>The query that is executed when searching for the groups of a specific user.
                            For example: (&amp;(objectClass=groupOfUniqueNames)(uniqueMember={0}))
                            Here, all the objects in LDAP with the class 'groupOfUniqueNames'
                            and where the provided DN (matching a DN for a user) is a 'uniqueMember' are returned.
                            As shown in the example, the user id is injected by using {0}
                            If setting the query alone is insufficient for your specific
                            LDAP setup, you can alternatively plug in a different
                            LDAPQueryBuilder, which allows for more customization than only the  query.</td><td>string</td><td>&nbsp;</td></tr><tr><td>userIdAttribute</td><td>Name of the attribute that matches the user id.
                            This property is used when looking for a User object
                            and the mapping between the LDAP object and the Activiti User object
                            is done.</td><td>string</td><td>&nbsp;</td></tr><tr><td>userFirstNameAttribute</td><td>Name of the attribute that matches the user first name.
                            This property is used when looking for a User object
                            and the mapping between the LDAP object and the Activiti User object is done.</td><td>string</td><td>&nbsp;</td></tr><tr><td>userLastNameAttribute</td><td>Name of the attribute that matches the user last name.
                            This property is used when looking for a User object
                            and the mapping between the LDAP object and the Activiti User object is done.</td><td>string</td><td>&nbsp;</td></tr><tr><td>groupIdAttribute</td><td>Name of the attribute that matches the group id.
                            This property is used when looking for a Group object
                            and the mapping between the LDAP object and the Activiti Group object is done.</td><td>string</td><td>&nbsp;</td></tr><tr><td>groupNameAttribute</td><td>Name of the attribute that matches the group name.
                            This property is used when looking for a Group object
                            and the mapping between the LDAP object and the Activiti Group object is done.</td><td>String</td><td>&nbsp;</td></tr><tr><td>groupTypeAttribute</td><td>Name of the attribute that matches the group type.
                            This property is used when looking for a Group object
                            and the mapping between the LDAP object and the Activiti Group object
                            is done.</td><td>String</td><td>&nbsp;</td></tr></tbody></table></div></div><p><br class="table-break">
        </p><p>
            Following properties are when one wants to customize default behavior or
            introduced group caching:
            </p><div class="table"><a name="N166B2"></a><p class="title"><b>Table&nbsp;17.2.&nbsp;Advanced properties</b></p><div class="table-contents"><table summary="Advanced properties" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property name</th><th>Description</th><th>Type</th><th>Default value</th></tr></thead><tbody><tr><td>ldapUserManagerFactory</td><td>Set a custom implementation of the LDAPUserManagerFactory if the default implementation is not suitable.</td><td>instance of LDAPUserManagerFactory</td><td>&nbsp;</td></tr><tr><td>ldapGroupManagerFactory</td><td>Set a custom implementation of the LDAPGroupManagerFactory if the default implementation is not suitable.</td><td>instance of LDAPGroupManagerFactory</td><td>&nbsp;</td></tr><tr><td>ldapMemberShipManagerFactory</td><td>Set a custom implementation of the LDAPMembershipManagerFactory if the default implementation is not suitable.
                            Note that this is very unlikely, as membership are managed in the LDAP system itself normally.</td><td>An instance of LDAPMembershipManagerFactory</td><td>&nbsp;</td></tr><tr><td>ldapQueryBuilder</td><td>Set a custom query builder if the default implementation is not suitable.
                            The LDAPQueryBuilder instance is used when the LDAPUserManager or
                            LDAPGroupManage} does an actual query against the LDAP system.
                            The default implementation uses the properties as set on this instance
                            such as queryGroupsForUser and queryUserById</td><td>An instance of org.activiti.ldap.LDAPQueryBuilder</td><td>&nbsp;</td></tr><tr><td>groupCacheSize</td><td> Allows to set the size of the group cache.
                            This is an LRU cache that caches groups for users and thus
                            avoids hitting the LDAP system each time the groups of
                            a user needs to be known.
                            
                            The cache will not be instantiated if the value is less then zero.
                            By default set to -1, so no caching is done.
                            </td><td>int</td><td>-1</td></tr><tr><td>groupCacheExpirationTime</td><td>Sets the expiration time of the group cache in milliseconds.
                            When groups for a specific user are fetched, and if the group cache exists,
                            the groups will be stored in this cache for the time set in this property.
                            ie. when the groups were fetched at 00:00 and the expiration time is 30 mins,
                            any fetch of the groups for that user after 00:30 will not come from the cache, but do
                            a fetch again from the LDAP system. Likewise, everything group fetch for that user done
                            between 00:00 - 00:30 will come from the cache.</td><td>long</td><td>one hour</td></tr></tbody></table></div></div><p><br class="table-break">
        </p></div><div class="section" title="Integrate LDAP in Explorer"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="lda-explorer"></a>Integrate LDAP in Explorer</h2></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        Add the LDAP configuration as above to <code class="literal">activiti-standalone-context.xml</code>
                    </p></li><li class="listitem"><p>
                        Add the activiti-ldap jar to WEB-INF/lib
                    </p></li><li class="listitem"><p>
                        Remove the <code class="literal">demoDataGenerator</code> bean, as it will try to insert users (which is not possible with the LDAP integration)
                    </p></li><li class="listitem"><p>
                        Add following configuration to the <code class="literal">explorerApp</code> bean in <code class="literal">activiti-ui.context</code>:
                        </p><pre class="prettyprint">
&lt;property name="adminGroups"&gt;
  &lt;list&gt;
    &lt;value&gt;admin&lt;/value&gt;
  &lt;/list&gt;
  &lt;/property&gt;
  &lt;property name="userGroups"&gt;
    &lt;list&gt;
      &lt;value&gt;user&lt;/value&gt;
    &lt;/list&gt;
&lt;/property&gt;                        
                        </pre><p>
                        Obviously replacing the values with your own values. The value that needs to be used is the id of the group (configurable
                        through <code class="literal">groupIdAttribute</code>). The config above will make all members of the 'admin' group an Administrator user
                        in Activiti Explorer and similar for the user group. Any group not matching these values is seen as an 'assignment' group, 
                        ie where tasks can become assigned to.
                    </p></li></ul></div><p>
        </p></div></div><div class="chapter" title="Chapter&nbsp;18.&nbsp;Advanced"><div class="titlepage"><div><div><h2 class="title"><a name="N1671B"></a>Chapter&nbsp;18.&nbsp;Advanced</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#advanced_parseHandlers">Hooking into process parsing</a></span></dt><dt><span class="section"><a href="#advanced.uuid.generator">UUID id generator for high concurrency</a></span></dt><dt><span class="section"><a href="#advanced.safe.bpmn.xml">Enable safe BPMN 2.0 xml</a></span></dt></dl></div><p>
	   The following sections cover advanced use cases of using Activiti, that go beyond typical execution of BPMN 2.0 processes.
	   As such, a certain proficiency and experience with Activiti is advisable to understand the material here. 
	</p><div class="section" title="Hooking into process parsing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advanced_parseHandlers"></a>Hooking into process parsing</h2></div></div></div><p>
	       A bpmn 2.0 xml needs to be parsed to the Activiti internal model to be executed on the Activiti engine. This parsing
	       happens during a deployment of the process or when a process is not found in memory, and the
	       xml is fetched from the database. 
	   </p><p>
	       For each of these processes, the <code class="literal">BpmnParser</code> class creates a new <code class="literal">BpmnParse</code> instance.
	       This instance will be used as container for all things that are done during parsing. The parsing on itself is very simple:
	       for each BPMN 2.0 element, there is a matching instance of the <code class="literal">org.activiti.engine.parse.BpmnParseHandler</code>
	       available in the engine. As such, the parser has a map which basically maps an BPMN 2.0 element class to an instance of 
	       <code class="literal">BpmnParseHandler</code>. By default, Activiti has <code class="literal">BpmnParseHandler</code> instances to handle
	       all supported elements and also uses it to attach execution listeners to steps of the process for creating the history.
	   </p><p>
	       It is possible to add custom instances of <code class="literal">org.activiti.engine.parse.BpmnParseHandler</code> to the Activiti engine.
	       An often seen use case is for example to add execution listeners to certain steps that fire events to some queue for event processing.
	       The history handling is done in such a way internally in Activiti.
	       To add such custom handlers, the Activiti configuration needs to be tweaked:
	       </p><pre class="prettyprint">
&lt;property name="preBpmnParseHandlers"&gt;
  &lt;list&gt;
    &lt;bean class="org.activiti.parsing.MyFirstBpmnParseHandler" /&gt;
  &lt;/list&gt;
&lt;/property&gt;
	    
&lt;property name="postBpmnParseHandlers"&gt;
  &lt;list&gt;
    &lt;bean class="org.activiti.parsing.MySecondBpmnParseHandler" /&gt;
    &lt;bean class="org.activiti.parsing.MyThirdBpmnParseHandler" /&gt;
  &lt;/list&gt;
&lt;/property&gt;    
	       </pre><p>
	       The list of <code class="literal">BpmnParseHandler</code> instances that is configured in the <code class="literal">preBpmnParseHandlers</code> property
	       are added before any of the default handlers. Likewise, the <code class="literal">postBpmnParseHandlers</code> are added after those.
	       This can be important if the order of things matter for the logic contained in the custom parse handlers.
	   </p><p>
	       <code class="literal">org.activiti.engine.parse.BpmnParseHandler</code> is a simple interface:
	       </p><pre class="prettyprint">
public interface BpmnParseHandler {
  
  Collection&lt;Class&gt;? extends BaseElement&gt;&gt; getHandledTypes();
  
  void parse(BpmnParse bpmnParse, BaseElement element);

}	       
	       </pre><p>
	       The <code class="literal">getHandledTypes()</code> method returns a collection of all the types handled by this parser. 
	       The possible types are a subclass of <code class="literal">BaseElement</code>, as directed by the generic type of the collection.
	       You can also extend the <code class="literal">AbstractBpmnParseHandler</code> class and override the <code class="literal">getHandledType()</code>
	       method, which only returns one Class and not a collection. This class contains also some helper methods
	       shared by many of the default parse handlers. 
	       The <code class="literal">BpmnParseHandler</code> instance will be called when the parser encounters any of the returned
	       types by this method. In the following example, whenever a process contained in a BPMN 2.0 xml is encountered, it 
	       will execute the logic in the <code class="literal">executeParse</code> method (which is a typecasted method that replaces
	       the regular <code class="literal">parse</code> method on the <code class="literal">BpmnParseHandler</code> interface). 
	       </p><pre class="prettyprint">
public class TestBPMNParseHandler extends AbstractBpmnParseHandler&lt;Process&gt; {

  protected Class&lt;? extends BaseElement&gt; getHandledType() {
    return Process.class;
  }
  
  protected void executeParse(BpmnParse bpmnParse, Process element) {
     ..
  }

}	       
	       </pre><p>
	   </p><p>
	       <span class="bold"><strong>Important note:</strong></span> when writing custom parse handler, do not use any of the internal 
	       classes that are used to parse the BPMN 2.0 constructs. This will cause difficult to find bugs. The safe way to implement
	       a custom handler is to implement the <span class="emphasis"><em>BpmnParseHandler</em></span> interface or extends the internal abstract class
	       <span class="emphasis"><em>org.activiti.engine.impl.bpmn.parser.handler.AbstractBpmnParseHandler</em></span>.
	   </p><p>
         It is possible (but less common) to replace the default <code class="literal">BpmnParseHandler</code> instances
         that are responsible for the parsing of the BPMN 2.0 elements to the internal Activiti model.
         This can be done by following snippet of logic:
         </p><pre class="prettyprint">
&lt;property name="customDefaultBpmnParseHandlers"&gt;
  &lt;list&gt;
    ...
  &lt;/list&gt;
&lt;/property&gt;         
         </pre><p>
         A simple example could for example be to force all of the service tasks to be asynchronous:
         </p><pre class="prettyprint">
public class CustomUserTaskBpmnParseHandler extends ServiceTaskParseHandler {
  
  protected void executeParse(BpmnParse bpmnParse, ServiceTask serviceTask) {
    
    // Do the regular stuff
    super.executeParse(bpmnParse, serviceTask);
    
    // Make always async
    ActivityImpl activity = findActivity(bpmnParse, serviceTask.getId());
    activity.setAsync(true);
  }

}         
         </pre><p>          
	   </p></div><div class="section" title="UUID id generator for high concurrency"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advanced.uuid.generator"></a>UUID id generator for high concurrency</h2></div></div></div><p>
	       In some (very) high concurrency load cases, the default id generator may cause exceptions due to not being able
	       to fetch new id blocks quickly enough. Every process engine has one id generator. The default id generator reserves
	       a block of id's in the database, such that no other engine will be able to use id's from the same block. During 
	       engine operations, when the default id generator notices that the id block is used up, a new transaction is started
	       to fetch a new block. In (very) limited use cases this can cause problems when there is a real high load. For 
	       most use cases the default id generator is more than sufficient. The default <code class="literal">org.activiti.engine.impl.db.DbIdGenerator</code>
	       also has a property <code class="literal">idBlockSize</code> which can be configured to set the size of the reserved block of id's
	       and to tweak the behavior of the id fetching. 
	   </p><p>
	       The alternative to the default id generator is the <code class="literal">org.activiti.engine.impl.persistence.StrongUuidGenerator</code>,
	       which generates a unique <a class="ulink" href="http://en.wikipedia.org/wiki/Universally_unique_identifier" target="_top">UUID</a> locally and uses that
	       as identifier for all entities. Since the UUID is generated without the need for database access, it copes better with very high concurrency use cases.
	       Do note that performance may differ from the default id generator (both positive and negative) depending on the machine.
	   </p><p>
	       The UUID generator can be configured in the activiti configuration as follows:
</p><pre class="prettyprint">
&lt;property name="idGenerator"&gt;
    &lt;bean class="org.activiti.engine.impl.persistence.StrongUuidGenerator" /&gt;
&lt;/property&gt;
</pre><p>	       
	   </p><p>
	       The use of the UUID id generator depends on the following extra dependency:
	       </p><pre class="prettyprint">
 &lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.uuid&lt;/groupId&gt;
    &lt;artifactId&gt;java-uuid-generator&lt;/artifactId&gt;
    &lt;version&gt;3.1.3&lt;/version&gt;
&lt;/dependency&gt;</pre><p>
	   </p></div><div class="section" title="Enable safe BPMN 2.0 xml"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advanced.safe.bpmn.xml"></a>Enable safe BPMN 2.0 xml</h2></div></div></div><p>
	     In most cases the BPMN 2.0 processes that are being deployed to the Activiti engine are under tight control
	     of eg. the development team. However, in some use cases it might be desirable to upload arbitrary BPMN 2.0 xml
	     to the engine. In that case, take into consideration that a user with bad intentions can bring the server 
	     down as described <a class="ulink" href="http://www.jorambarrez.be/blog/2013/02/19/uploading-a-funny-xml-can-bring-down-your-server/" target="_top">here</a>.
	   </p><p>
	     To avoid the attacks described in the link above, a property <span class="emphasis"><em>enableSafeBpmnXml</em></span> can be set on the process 
	     engine configuration:
	     </p><pre class="prettyprint">&lt;property name="enableSafeBpmnXml" value="true"/&gt;</pre><p>
	   </p><p>
	       <span class="bold"><strong>By default this feature is disabled!</strong></span> The reason for this is that it relies on 
	       the availability of the <a class="ulink" href="http://download.java.net/jdk7/archive/b123/docs/api/javax/xml/transform/stax/StAXSource.html" target="_top">StaxSource</a>
	       class. Unfortunately, on some platforms (eg. JDK 6, JBoss, etc.) this class is unavailable (due to older xml parser implementation)
	       and thus the safe BPMN 2.0 xml feature cannot be enabled. 
	   </p><p>    
	       If the platform on which Activti runs does support it, do enable this feature. 
	   </p></div></div></div></body></html>